/*! For license information please see 569.bundle.abb899d50f4abbe444ff.js.LICENSE.txt */
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[569],{43137:(A,e,t)=>{"use strict";t.d(e,{Z:()=>r});var n=t(19680);const r=async function(A,e,t,r=!1,o=!1){for(const e of t){const t=A.getViewport(e);if(!t)throw new Error(`Viewport with Id ${e} does not exist`);if(!(t instanceof n.Z))return void console.warn(`Viewport with Id ${e} is not a BaseVolumeViewport. Cannot add volume to this viewport.`)}const i=t.map((async t=>{const n=A.getViewport(t);await n.addVolumes(e,r,o)}));await Promise.all(i)}},45791:(A,e,t)=>{"use strict";t.d(e,{Z:()=>a});const n=Symbol("DefaultSettings"),r=Symbol("RuntimeSettings"),o=Symbol("ObjectSettingsMap"),i=Symbol("Dictionary");class a{constructor(A){const e=Object.create(A instanceof a&&i in A?A[i]:null);Object.seal(Object.defineProperty(this,i,{value:e}))}set(A,e){return l(this[i],A,e,null)}get(A){return function(A,e){return A[e]}(this[i],A)}unset(A){return function(A,e){if(e.endsWith(".")){let t=0;const n=e,r=n.slice(0,-1),o=0===r.length;for(const e in A)Object.prototype.hasOwnProperty.call(A,e)&&(o||e.startsWith(n)||e===r)&&(delete A[e],++t);return t>0}return delete A[e]}(this[i],A+"")}forEach(A){s(this[i],A)}extend(){return new a(this)}import(A){c(A)&&Object.keys(A).forEach((e=>{l(this[i],e,A[e],null)}))}dump(){const A={};return s(this[i],((e,t)=>{void 0!==t&&u(A,e,t)})),A}static assert(A){return A instanceof a?A:a.getRuntimeSettings()}static getDefaultSettings(A=null){let e=a[n];if(e instanceof a||(e=new a,a[n]=e),A){const t={};return e.forEach((n=>{if(n.startsWith(A)){const r=n.split(`${A}.`)[1];t[r]=e.get(n)}})),t}return e}static getRuntimeSettings(){let A=a[r];return A instanceof a||(A=new a(a.getDefaultSettings()),a[r]=A),A}static getObjectSettings(A,e){let t=null;if(A instanceof a)t=A;else if("object"==typeof A&&null!==A){let n=a[o];n instanceof WeakMap||(n=new WeakMap,a[o]=n),t=n.get(A),t instanceof a||(t=new a(a.assert(a.getObjectSettings(e))),n.set(A,t))}return t}static extendRuntimeSettings(){return a.getRuntimeSettings().extend()}}function s(A,e){for(const t in A)e(t,A[t])}function l(A,e,t,n){return!!function(A){let e,t,n;if("string"!=typeof A||(e=A.length-1)<0)return!1;n=-1;for(;(t=A.indexOf(".",n+1))>=0;){if(t-n<2||t===e)return!1;n=t}return!0}(e)&&(c(t)?function(A,e,t,n){let r;if(n.has(t))return l(A,e,null,n);n.add(t),r=0;for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(l(A,0===o.length?e:`${e}.${o}`,t[o],n)||++r);return n.delete(t),0===r}(A,e,t,n instanceof WeakSet?n:new WeakSet):(A[e]=t,!0))}function c(A){if("object"==typeof A&&null!==A){const e=Object.getPrototypeOf(A);if(e===Object.prototype||null===e)return!0}return!1}function u(A,e,t){const n=e.indexOf(".");if(n>=0){const r=e.slice(0,n);let o=A[r];if("object"!=typeof o||null===o){const e=o;o={},void 0!==e&&(o[""]=e),A[r]=o}u(o,e.slice(n+1,e.length),t)}else A[e]=t}a.getDefaultSettings().set("useCursors",!0)},51854:(A,e,t)=>{"use strict";t.d(e,{Z:()=>i});var n=t(17236);const{BlendMode:r}=n.default;var o;!function(A){A[A.COMPOSITE=0]="COMPOSITE",A[A.MAXIMUM_INTENSITY_BLEND=1]="MAXIMUM_INTENSITY_BLEND",A[A.MINIMUM_INTENSITY_BLEND=2]="MINIMUM_INTENSITY_BLEND",A[A.AVERAGE_INTENSITY_BLEND=3]="AVERAGE_INTENSITY_BLEND"}(o||(o={}));const i=o},15759:(A,e,t)=>{"use strict";var n;t.d(e,{Z:()=>r}),function(A){A.CLOSED_PLANAR="CLOSED_PLANAR",A.OPEN_PLANAR="OPEN_PLANAR"}(n||(n={}));const r=n},56287:(A,e,t)=>{"use strict";var n;t.d(e,{Z:()=>r}),function(A){A.SUM="SUM",A.AVERAGE="AVERAGE",A.SUBTRACT="SUBTRACT"}(n||(n={}));const r=n},57135:(A,e,t)=>{"use strict";var n;t.d(e,{Z:()=>r}),function(A){A.CONTOUR="contour"}(n||(n={}));const r=n},3692:(A,e,t)=>{"use strict";t.r(e),t.d(e,{BlendModes:()=>a.Z,ContourType:()=>u.Z,DynamicOperatorType:()=>g.Z,Events:()=>n.default,GeometryType:()=>c.Z,InterpolationType:()=>i.Z,OrientationAxis:()=>s.Z,RequestType:()=>r.Z,SharedArrayBufferModes:()=>l.Z,VOILUTFunctionType:()=>d.Z,ViewportType:()=>o.Z});var n=t(76467),r=t(47908),o=t(25197),i=t(7155),a=t(51854),s=t(44965),l=t(41495),c=t(57135),u=t(15759),d=t(9048),g=t(56287)},28773:(A,e,t)=>{"use strict";t.r(e),t.d(e,{BaseVolumeViewport:()=>d.Z,CONSTANTS:()=>r,EVENTS:()=>o.default,Enums:()=>n,ImageVolume:()=>w.Z,RenderingEngine:()=>l.ZP,Settings:()=>y.Z,StackViewport:()=>g.Z,Viewport:()=>f.Z,VolumeViewport:()=>c.Z,VolumeViewport3D:()=>u.Z,addVolumesToViewports:()=>P.Z,cache:()=>p.ZP,createVolumeActor:()=>i.Z,createVolumeMapper:()=>s.Z,eventTarget:()=>h.Z,geometryLoader:()=>b,getConfiguration:()=>Q.P_,getEnabledElement:()=>C.ZP,getEnabledElementByIds:()=>C.O,getEnabledElements:()=>C.wN,getOrCreateCanvas:()=>a.Z,getRenderingEngine:()=>B.Pr,getRenderingEngines:()=>B.Uu,getShouldUseCPURendering:()=>Q.L_,getShouldUseSharedArrayBuffer:()=>Q.hG,imageLoadPoolManager:()=>v.Z,imageLoader:()=>F,imageRetrievalPoolManager:()=>m.Z,init:()=>Q.S1,isCornerstoneInitialized:()=>Q.uF,metaData:()=>U,registerImageLoader:()=>F.registerImageLoader,requestPoolManager:()=>v.Z,resetUseCPURendering:()=>Q.Y0,resetUseSharedArrayBuffer:()=>Q.zr,setConfiguration:()=>Q.Dg,setPreferSizeOverAccuracy:()=>Q.wy,setUseCPURendering:()=>Q.dQ,setUseSharedArrayBuffer:()=>Q.fK,setVolumesForViewports:()=>S,triggerEvent:()=>T.Z,utilities:()=>E,volumeLoader:()=>I});var n=t(3692),r=t(82338),o=t(76467),i=t(70114),a=t(32974),s=t(48788),l=t(69903),c=t(75089),u=t(73921),d=t(19680),g=t(12145),f=t(86990),h=t(509),B=t(26222),p=t(60754),w=t(51211),m=t(87051),v=t(52425),C=t(96720),U=t(71478),Q=t(78041),y=t(45791),I=t(64819),F=t(31363),b=t(8009),E=t(27054),T=t(97335);const S=async function(A,e,t,n=!1,r=!1){t.forEach((e=>{const t=A.getViewport(e);if(!t)throw new Error(`Viewport with Id ${e} does not exist`);if(!(t instanceof d.Z))throw new Error("setVolumesForViewports only supports VolumeViewport and VolumeViewport3D")}));const o=t.map((async t=>{const o=A.getViewport(t);await o.setVolumes(e,n,r)}));await Promise.all(o)};var P=t(43137)},8009:(A,e,t)=>{"use strict";t.r(e),t.d(e,{createAndCacheGeometry:()=>gn});t(68397),t(63046),t(44783),t(8871);var n=t(91924),r=t(21930),o=t(47169),i=t(6807),a=t(64950);const s=Math.sqrt(50),l=Math.sqrt(10),c=Math.sqrt(2);function u(A,e,t){const n=(e-A)/Math.max(0,t),r=Math.floor(Math.log10(n)),o=n/Math.pow(10,r),i=o>=s?10:o>=l?5:o>=c?2:1;let a,d,g;return r<0?(g=Math.pow(10,-r)/i,a=Math.round(A*g),d=Math.round(e*g),a/g<A&&++a,d/g>e&&--d,g=-g):(g=Math.pow(10,r)*i,a=Math.round(A/g),d=Math.round(e/g),a*g<A&&++a,d*g>e&&--d),d<a&&.5<=t&&t<2?u(A,e,2*t):[a,d,g]}function d(A,e,t){return u(A=+A,e=+e,t=+t)[2]}function g(A,e){return null==A||null==e?NaN:A<e?-1:A>e?1:A>=e?0:NaN}function f(A,e){return null==A||null==e?NaN:e<A?-1:e>A?1:e>=A?0:NaN}function h(A){let e,t,n;function r(A,n,r=0,o=A.length){if(r<o){if(0!==e(n,n))return o;do{const e=r+o>>>1;t(A[e],n)<0?r=e+1:o=e}while(r<o)}return r}return 2!==A.length?(e=g,t=(e,t)=>g(A(e),t),n=(e,t)=>A(e)-t):(e=A===g||A===f?A:B,t=A,n=A),{left:r,center:function(A,e,t=0,o=A.length){const i=r(A,e,t,o-1);return i>t&&n(A[i-1],e)>-n(A[i],e)?i-1:i},right:function(A,n,r=0,o=A.length){if(r<o){if(0!==e(n,n))return o;do{const e=r+o>>>1;t(A[e],n)<=0?r=e+1:o=e}while(r<o)}return r}}}function B(){return 0}const p=h(g),w=p.right,m=(p.left,h((function(A){return null===A?NaN:+A})).center,w);function v(A,e,t){A.prototype=e.prototype=t,t.constructor=A}function C(A,e){var t=Object.create(A.prototype);for(var n in e)t[n]=e[n];return t}function U(){}var Q=.7,y=1/Q,I="\\s*([+-]?\\d+)\\s*",F="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",b="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",E=/^#([0-9a-f]{3,8})$/,T=new RegExp(`^rgb\\(${I},${I},${I}\\)$`),S=new RegExp(`^rgb\\(${b},${b},${b}\\)$`),P=new RegExp(`^rgba\\(${I},${I},${I},${F}\\)$`),x=new RegExp(`^rgba\\(${b},${b},${b},${F}\\)$`),H=new RegExp(`^hsl\\(${F},${b},${b}\\)$`),D=new RegExp(`^hsla\\(${F},${b},${b},${F}\\)$`),L={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function O(){return this.rgb().formatHex()}function M(){return this.rgb().formatRgb()}function _(A){var e,t;return A=(A+"").trim().toLowerCase(),(e=E.exec(A))?(t=e[1].length,e=parseInt(e[1],16),6===t?k(e):3===t?new K(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===t?V(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===t?V(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=T.exec(A))?new K(e[1],e[2],e[3],1):(e=S.exec(A))?new K(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=P.exec(A))?V(e[1],e[2],e[3],e[4]):(e=x.exec(A))?V(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=H.exec(A))?z(e[1],e[2]/100,e[3]/100,1):(e=D.exec(A))?z(e[1],e[2]/100,e[3]/100,e[4]):L.hasOwnProperty(A)?k(L[A]):"transparent"===A?new K(NaN,NaN,NaN,0):null}function k(A){return new K(A>>16&255,A>>8&255,255&A,1)}function V(A,e,t,n){return n<=0&&(A=e=t=NaN),new K(A,e,t,n)}function R(A,e,t,n){return 1===arguments.length?((r=A)instanceof U||(r=_(r)),r?new K((r=r.rgb()).r,r.g,r.b,r.opacity):new K):new K(A,e,t,null==n?1:n);var r}function K(A,e,t,n){this.r=+A,this.g=+e,this.b=+t,this.opacity=+n}function N(){return`#${X(this.r)}${X(this.g)}${X(this.b)}`}function Z(){const A=G(this.opacity);return`${1===A?"rgb(":"rgba("}${W(this.r)}, ${W(this.g)}, ${W(this.b)}${1===A?")":`, ${A})`}`}function G(A){return isNaN(A)?1:Math.max(0,Math.min(1,A))}function W(A){return Math.max(0,Math.min(255,Math.round(A)||0))}function X(A){return((A=W(A))<16?"0":"")+A.toString(16)}function z(A,e,t,n){return n<=0?A=e=t=NaN:t<=0||t>=1?A=e=NaN:e<=0&&(A=NaN),new j(A,e,t,n)}function J(A){if(A instanceof j)return new j(A.h,A.s,A.l,A.opacity);if(A instanceof U||(A=_(A)),!A)return new j;if(A instanceof j)return A;var e=(A=A.rgb()).r/255,t=A.g/255,n=A.b/255,r=Math.min(e,t,n),o=Math.max(e,t,n),i=NaN,a=o-r,s=(o+r)/2;return a?(i=e===o?(t-n)/a+6*(t<n):t===o?(n-e)/a+2:(e-t)/a+4,a/=s<.5?o+r:2-o-r,i*=60):a=s>0&&s<1?0:i,new j(i,a,s,A.opacity)}function j(A,e,t,n){this.h=+A,this.s=+e,this.l=+t,this.opacity=+n}function Y(A){return(A=(A||0)%360)<0?A+360:A}function q(A){return Math.max(0,Math.min(1,A||0))}function $(A,e,t){return 255*(A<60?e+(t-e)*A/60:A<180?t:A<240?e+(t-e)*(240-A)/60:e)}v(U,_,{copy(A){return Object.assign(new this.constructor,this,A)},displayable(){return this.rgb().displayable()},hex:O,formatHex:O,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return J(this).formatHsl()},formatRgb:M,toString:M}),v(K,R,C(U,{brighter(A){return A=null==A?y:Math.pow(y,A),new K(this.r*A,this.g*A,this.b*A,this.opacity)},darker(A){return A=null==A?Q:Math.pow(Q,A),new K(this.r*A,this.g*A,this.b*A,this.opacity)},rgb(){return this},clamp(){return new K(W(this.r),W(this.g),W(this.b),G(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:N,formatHex:N,formatHex8:function(){return`#${X(this.r)}${X(this.g)}${X(this.b)}${X(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Z,toString:Z})),v(j,(function(A,e,t,n){return 1===arguments.length?J(A):new j(A,e,t,null==n?1:n)}),C(U,{brighter(A){return A=null==A?y:Math.pow(y,A),new j(this.h,this.s,this.l*A,this.opacity)},darker(A){return A=null==A?Q:Math.pow(Q,A),new j(this.h,this.s,this.l*A,this.opacity)},rgb(){var A=this.h%360+360*(this.h<0),e=isNaN(A)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,r=2*t-n;return new K($(A>=240?A-240:A+120,r,n),$(A,r,n),$(A<120?A+240:A-120,r,n),this.opacity)},clamp(){return new j(Y(this.h),q(this.s),q(this.l),G(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const A=G(this.opacity);return`${1===A?"hsl(":"hsla("}${Y(this.h)}, ${100*q(this.s)}%, ${100*q(this.l)}%${1===A?")":`, ${A})`}`}}));var AA=t(25183);const eA=A=>()=>A;function tA(A,e){return function(t){return A+t*e}}function nA(A){return 1==(A=+A)?rA:function(e,t){return t-e?function(A,e,t){return A=Math.pow(A,t),e=Math.pow(e,t)-A,t=1/t,function(n){return Math.pow(A+n*e,t)}}(e,t,A):eA(isNaN(e)?t:e)}}function rA(A,e){var t=e-A;return t?tA(A,t):eA(isNaN(A)?e:A)}const oA=function A(e){var t=nA(e);function n(A,e){var n=t((A=R(A)).r,(e=R(e)).r),r=t(A.g,e.g),o=t(A.b,e.b),i=rA(A.opacity,e.opacity);return function(e){return A.r=n(e),A.g=r(e),A.b=o(e),A.opacity=i(e),A+""}}return n.gamma=A,n}(1);function iA(A){return function(e){var t,n,r=e.length,o=new Array(r),i=new Array(r),a=new Array(r);for(t=0;t<r;++t)n=R(e[t]),o[t]=n.r||0,i[t]=n.g||0,a[t]=n.b||0;return o=A(o),i=A(i),a=A(a),n.opacity=1,function(A){return n.r=o(A),n.g=i(A),n.b=a(A),n+""}}}iA(AA.Z),iA((function(A){var e=A.length;return function(t){var n=Math.floor(((t%=1)<0?++t:t)*e),r=A[(n+e-1)%e],o=A[n%e],i=A[(n+1)%e],a=A[(n+2)%e];return(0,AA.t)((t-n/e)*e,r,o,i,a)}}));function aA(A,e){var t,n=e?e.length:0,r=A?Math.min(n,A.length):0,o=new Array(r),i=new Array(n);for(t=0;t<r;++t)o[t]=hA(A[t],e[t]);for(;t<n;++t)i[t]=e[t];return function(A){for(t=0;t<r;++t)i[t]=o[t](A);return i}}function sA(A,e){var t=new Date;return A=+A,e=+e,function(n){return t.setTime(A*(1-n)+e*n),t}}function lA(A,e){return A=+A,e=+e,function(t){return A*(1-t)+e*t}}function cA(A,e){var t,n={},r={};for(t in null!==A&&"object"==typeof A||(A={}),null!==e&&"object"==typeof e||(e={}),e)t in A?n[t]=hA(A[t],e[t]):r[t]=e[t];return function(A){for(t in n)r[t]=n[t](A);return r}}var uA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dA=new RegExp(uA.source,"g");function gA(A,e){var t,n,r,o=uA.lastIndex=dA.lastIndex=0,i=-1,a=[],s=[];for(A+="",e+="";(t=uA.exec(A))&&(n=dA.exec(e));)(r=n.index)>o&&(r=e.slice(o,r),a[i]?a[i]+=r:a[++i]=r),(t=t[0])===(n=n[0])?a[i]?a[i]+=n:a[++i]=n:(a[++i]=null,s.push({i,x:lA(t,n)})),o=dA.lastIndex;return o<e.length&&(r=e.slice(o),a[i]?a[i]+=r:a[++i]=r),a.length<2?s[0]?function(A){return function(e){return A(e)+""}}(s[0].x):function(A){return function(){return A}}(e):(e=s.length,function(A){for(var t,n=0;n<e;++n)a[(t=s[n]).i]=t.x(A);return a.join("")})}function fA(A,e){e||(e=[]);var t,n=A?Math.min(e.length,A.length):0,r=e.slice();return function(o){for(t=0;t<n;++t)r[t]=A[t]*(1-o)+e[t]*o;return r}}function hA(A,e){var t,n,r=typeof e;return null==e||"boolean"===r?eA(e):("number"===r?lA:"string"===r?(t=_(e))?(e=t,oA):gA:e instanceof _?oA:e instanceof Date?sA:(n=e,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(e)?aA:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?cA:lA:fA))(A,e)}function BA(A,e){return A=+A,e=+e,function(t){return Math.round(A*(1-t)+e*t)}}function pA(A){return+A}var wA=[0,1];function mA(A){return A}function vA(A,e){return(e-=A=+A)?function(t){return(t-A)/e}:(t=isNaN(e)?NaN:.5,function(){return t});var t}function CA(A,e,t){var n=A[0],r=A[1],o=e[0],i=e[1];return r<n?(n=vA(r,n),o=t(i,o)):(n=vA(n,r),o=t(o,i)),function(A){return o(n(A))}}function UA(A,e,t){var n=Math.min(A.length,e.length)-1,r=new Array(n),o=new Array(n),i=-1;for(A[n]<A[0]&&(A=A.slice().reverse(),e=e.slice().reverse());++i<n;)r[i]=vA(A[i],A[i+1]),o[i]=t(e[i],e[i+1]);return function(e){var t=m(A,e,1,n)-1;return o[t](r[t](e))}}function QA(){var A,e,t,n,r,o,i=wA,a=wA,s=hA,l=mA;function c(){var A,e,t,s=Math.min(i.length,a.length);return l!==mA&&(A=i[0],e=i[s-1],A>e&&(t=A,A=e,e=t),l=function(t){return Math.max(A,Math.min(e,t))}),n=s>2?UA:CA,r=o=null,u}function u(e){return null==e||isNaN(e=+e)?t:(r||(r=n(i.map(A),a,s)))(A(l(e)))}return u.invert=function(t){return l(e((o||(o=n(a,i.map(A),lA)))(t)))},u.domain=function(A){return arguments.length?(i=Array.from(A,pA),c()):i.slice()},u.range=function(A){return arguments.length?(a=Array.from(A),c()):a.slice()},u.rangeRound=function(A){return a=Array.from(A),s=BA,c()},u.clamp=function(A){return arguments.length?(l=!!A||mA,c()):l!==mA},u.interpolate=function(A){return arguments.length?(s=A,c()):s},u.unknown=function(A){return arguments.length?(t=A,u):t},function(t,n){return A=t,e=n,c()}}function yA(A,e){switch(arguments.length){case 0:break;case 1:this.range(A);break;default:this.range(e).domain(A)}return this}var IA,FA=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bA(A){if(!(e=FA.exec(A)))throw new Error("invalid format: "+A);var e;return new EA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function EA(A){this.fill=void 0===A.fill?" ":A.fill+"",this.align=void 0===A.align?">":A.align+"",this.sign=void 0===A.sign?"-":A.sign+"",this.symbol=void 0===A.symbol?"":A.symbol+"",this.zero=!!A.zero,this.width=void 0===A.width?void 0:+A.width,this.comma=!!A.comma,this.precision=void 0===A.precision?void 0:+A.precision,this.trim=!!A.trim,this.type=void 0===A.type?"":A.type+""}function TA(A,e){if((t=(A=e?A.toExponential(e-1):A.toExponential()).indexOf("e"))<0)return null;var t,n=A.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+A.slice(t+1)]}function SA(A){return(A=TA(Math.abs(A)))?A[1]:NaN}function PA(A,e){var t=TA(A,e);if(!t)return A+"";var n=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}bA.prototype=EA.prototype,EA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const xA={"%":(A,e)=>(100*A).toFixed(e),b:A=>Math.round(A).toString(2),c:A=>A+"",d:function(A){return Math.abs(A=Math.round(A))>=1e21?A.toLocaleString("en").replace(/,/g,""):A.toString(10)},e:(A,e)=>A.toExponential(e),f:(A,e)=>A.toFixed(e),g:(A,e)=>A.toPrecision(e),o:A=>Math.round(A).toString(8),p:(A,e)=>PA(100*A,e),r:PA,s:function(A,e){var t=TA(A,e);if(!t)return A+"";var n=t[0],r=t[1],o=r-(IA=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,i=n.length;return o===i?n:o>i?n+new Array(o-i+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+TA(A,Math.max(0,e+o-1))[0]},X:A=>Math.round(A).toString(16).toUpperCase(),x:A=>Math.round(A).toString(16)};function HA(A){return A}var DA,LA,OA,MA=Array.prototype.map,_A=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function kA(A){var e,t,n=void 0===A.grouping||void 0===A.thousands?HA:(e=MA.call(A.grouping,Number),t=A.thousands+"",function(A,n){for(var r=A.length,o=[],i=0,a=e[0],s=0;r>0&&a>0&&(s+a+1>n&&(a=Math.max(1,n-s)),o.push(A.substring(r-=a,r+a)),!((s+=a+1)>n));)a=e[i=(i+1)%e.length];return o.reverse().join(t)}),r=void 0===A.currency?"":A.currency[0]+"",o=void 0===A.currency?"":A.currency[1]+"",i=void 0===A.decimal?".":A.decimal+"",a=void 0===A.numerals?HA:function(A){return function(e){return e.replace(/[0-9]/g,(function(e){return A[+e]}))}}(MA.call(A.numerals,String)),s=void 0===A.percent?"%":A.percent+"",l=void 0===A.minus?"−":A.minus+"",c=void 0===A.nan?"NaN":A.nan+"";function u(A){var e=(A=bA(A)).fill,t=A.align,u=A.sign,d=A.symbol,g=A.zero,f=A.width,h=A.comma,B=A.precision,p=A.trim,w=A.type;"n"===w?(h=!0,w="g"):xA[w]||(void 0===B&&(B=12),p=!0,w="g"),(g||"0"===e&&"="===t)&&(g=!0,e="0",t="=");var m="$"===d?r:"#"===d&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",v="$"===d?o:/[%p]/.test(w)?s:"",C=xA[w],U=/[defgprs%]/.test(w);function Q(A){var r,o,s,d=m,Q=v;if("c"===w)Q=C(A)+Q,A="";else{var y=(A=+A)<0||1/A<0;if(A=isNaN(A)?c:C(Math.abs(A),B),p&&(A=function(A){A:for(var e,t=A.length,n=1,r=-1;n<t;++n)switch(A[n]){case".":r=e=n;break;case"0":0===r&&(r=n),e=n;break;default:if(!+A[n])break A;r>0&&(r=0)}return r>0?A.slice(0,r)+A.slice(e+1):A}(A)),y&&0==+A&&"+"!==u&&(y=!1),d=(y?"("===u?u:l:"-"===u||"("===u?"":u)+d,Q=("s"===w?_A[8+IA/3]:"")+Q+(y&&"("===u?")":""),U)for(r=-1,o=A.length;++r<o;)if(48>(s=A.charCodeAt(r))||s>57){Q=(46===s?i+A.slice(r+1):A.slice(r))+Q,A=A.slice(0,r);break}}h&&!g&&(A=n(A,1/0));var I=d.length+A.length+Q.length,F=I<f?new Array(f-I+1).join(e):"";switch(h&&g&&(A=n(F+A,F.length?f-Q.length:1/0),F=""),t){case"<":A=d+A+Q+F;break;case"=":A=d+F+A+Q;break;case"^":A=F.slice(0,I=F.length>>1)+d+A+Q+F.slice(I);break;default:A=F+d+A+Q}return a(A)}return B=void 0===B?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,B)):Math.max(0,Math.min(20,B)),Q.toString=function(){return A+""},Q}return{format:u,formatPrefix:function(A,e){var t=u(((A=bA(A)).type="f",A)),n=3*Math.max(-8,Math.min(8,Math.floor(SA(e)/3))),r=Math.pow(10,-n),o=_A[8+n/3];return function(A){return t(r*A)+o}}}}function VA(A,e,t,n){var r,o=function(A,e,t){t=+t;const n=(e=+e)<(A=+A),r=n?d(e,A,t):d(A,e,t);return(n?-1:1)*(r<0?1/-r:r)}(A,e,t);switch((n=bA(null==n?",f":n)).type){case"s":var i=Math.max(Math.abs(A),Math.abs(e));return null!=n.precision||isNaN(r=function(A,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(SA(e)/3)))-SA(Math.abs(A)))}(o,i))||(n.precision=r),OA(n,i);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(A,e){return A=Math.abs(A),e=Math.abs(e)-A,Math.max(0,SA(e)-SA(A))+1}(o,Math.max(Math.abs(A),Math.abs(e))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(A){return Math.max(0,-SA(Math.abs(A)))}(o))||(n.precision=r-2*("%"===n.type))}return LA(n)}function RA(A){var e=A.domain;return A.ticks=function(A){var t=e();return function(A,e,t){if(!((t=+t)>0))return[];if((A=+A)==(e=+e))return[A];const n=e<A,[r,o,i]=n?u(e,A,t):u(A,e,t);if(!(o>=r))return[];const a=o-r+1,s=new Array(a);if(n)if(i<0)for(let A=0;A<a;++A)s[A]=(o-A)/-i;else for(let A=0;A<a;++A)s[A]=(o-A)*i;else if(i<0)for(let A=0;A<a;++A)s[A]=(r+A)/-i;else for(let A=0;A<a;++A)s[A]=(r+A)*i;return s}(t[0],t[t.length-1],null==A?10:A)},A.tickFormat=function(A,t){var n=e();return VA(n[0],n[n.length-1],null==A?10:A,t)},A.nice=function(t){null==t&&(t=10);var n,r,o=e(),i=0,a=o.length-1,s=o[i],l=o[a],c=10;for(l<s&&(r=s,s=l,l=r,r=i,i=a,a=r);c-- >0;){if((r=d(s,l,t))===n)return o[i]=s,o[a]=l,e(o);if(r>0)s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r;else{if(!(r<0))break;s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r}n=r}return A},A}function KA(){var A=QA()(mA,mA);return A.copy=function(){return e=A,KA().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},yA.apply(A,arguments),RA(A)}DA=kA({thousands:",",grouping:[3],currency:["$",""]}),LA=DA.format,OA=DA.formatPrefix;var NA=t(43739),ZA=t(31954),GA=t(97249),WA=t(19013),XA=t(84661),zA=t(52284);function JA(A,e){var t=Object.keys(A);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(A);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(A,e).enumerable}))),t.push.apply(t,n)}return t}var jA={image:null,canvas:null,jsImageData:null,imageLoaded:!1,repeat:!1,interpolate:!1,edgeClamp:!1,mipLevel:0,resizable:!1};function YA(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,jA,t),n.default.obj(A,e),n.default.algo(A,e,6,0),n.default.get(A,e,["canvas","image","jsImageData","imageLoaded","resizable"]),n.default.setGet(A,e,["repeat","edgeClamp","interpolate","mipLevel"]),function(A,e){e.classHierarchy.push("vtkTexture"),A.imageLoaded=function(){e.image.removeEventListener("load",A.imageLoaded),e.imageLoaded=!0,A.modified()},A.setJsImageData=function(t){e.jsImageData!==t&&(null!==t&&(A.setInputData(null),A.setInputConnection(null),e.image=null,e.canvas=null),e.jsImageData=t,e.imageLoaded=!0,A.modified())},A.setCanvas=function(t){e.canvas!==t&&(null!==t&&(A.setInputData(null),A.setInputConnection(null),e.image=null,e.jsImageData=null),e.canvas=t,A.modified())},A.setImage=function(t){e.image!==t&&(null!==t&&(A.setInputData(null),A.setInputConnection(null),e.canvas=null,e.jsImageData=null),e.image=t,e.imageLoaded=!1,t.complete?A.imageLoaded():t.addEventListener("load",A.imageLoaded),A.modified())},A.getDimensionality=function(){var t=0,n=0,r=1;if(A.getInputData()){var o=A.getInputData();t=o.getDimensions()[0],n=o.getDimensions()[1],r=o.getDimensions()[2]}return e.jsImageData&&(t=e.jsImageData.width,n=e.jsImageData.height),e.canvas&&(t=e.canvas.width,n=e.canvas.height),e.image&&(t=e.image.width,n=e.image.height),(t>1)+(n>1)+(r>1)},A.getInputAsJsImageData=function(){if(!e.imageLoaded||A.getInputData())return null;if(e.jsImageData)return e.jsImageData();if(e.canvas)return e.canvas.getContext("2d").getImageData(0,0,e.canvas.width,e.canvas.height);if(e.image){var t=document.createElement("canvas");t.width=e.image.width,t.height=e.image.height;var n=t.getContext("2d");return n.translate(0,t.height),n.scale(1,-1),n.drawImage(e.image,0,0,e.image.width,e.image.height),n.getImageData(0,0,t.width,t.height)}return null}}(A,e)}var qA={generateMipmaps:function(A,e,t,n){for(var o=[1,2,1],i=A.length/(e*t),a=e,s=t,l=A,c=[l],u=0;u<n;u++){var d=(0,r.Z)(l);a/=2,l=new Uint8ClampedArray(a*(s/=2)*i);for(var g=i*a,f=0,h=0;h<l.length;h+=i){h%g==0&&(f+=2*i*a);for(var B=0;B<i;B++){var p=d[f+B];p+=d[f+i+B],p+=d[f-2*g+B],p+=d[f-2*g+i+B],p/=4,l[h+B]=p}f+=2*i}for(var w=(0,r.Z)(l),m=0;m<l.length;m+=i)for(var v=0;v<i;v++){for(var C=-(o.length-1)/2,U=4,Q=0,y=0;y<o.length;y++){var I=m+v+C*i,F=I%g-(m+v)%g;F>i&&(I+=g),F<-i&&(I-=g),w[I]?Q+=w[I]*o[y]:U-=o[y],C+=1}l[m+v]=Q/U}w=(0,r.Z)(l);for(var b=0;b<l.length;b+=i)for(var E=0;E<i;E++){for(var T=-(o.length-1)/2,S=4,P=0,x=0;x<o.length;x++){var H=b+E+T*g;w[H]?P+=w[H]*o[x]:S-=o[x],T+=1}l[b+E]=P/S}c.push(l)}return c}},$A=function(A){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?JA(Object(t),!0).forEach((function(e){(0,o.Z)(A,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(t)):JA(Object(t)).forEach((function(e){Object.defineProperty(A,e,Object.getOwnPropertyDescriptor(t,e))}))}return A}({newInstance:n.default.newInstance(YA,"vtkTexture"),extend:YA},qA);function Ae(A,e){var t=Object.keys(A);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(A);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(A,e).enumerable}))),t.push.apply(t,n)}return t}function ee(A){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Ae(Object(t),!0).forEach((function(e){(0,o.Z)(A,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(t)):Ae(Object(t)).forEach((function(e){Object.defineProperty(A,e,Object.getOwnPropertyDescriptor(t,e))}))}return A}var te=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],ne=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],re=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],oe=[0,1,0,1,0,1,0,1,2,2,2,2],ie=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],ae=new Float64Array(3),se=new Float64Array(3),le=new Float64Array(3),ce=new Float64Array(3),ue=new Float64Array(3),de=new Float64Array(3),ge=new Float64Array(16);function fe(A,e){A.strokeStyle=e.strokeColor,A.lineWidth=e.strokeSize,A.fillStyle=e.fontColor,A.font="".concat(e.fontStyle," ").concat(e.fontSize,"px ").concat(e.fontFamily)}var he=n.default.newInstance((function(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{renderable:null};Object.assign(e,{},t),n.default.obj(A,e),e.tmPolyData=zA.ZP.newInstance(),e.tmMapper=XA.ZP.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmActor=ZA.ZP.newInstance({parentProp:A}),e.tmActor.setMapper(e.tmMapper),n.default.setGet(A,e,["renderable"]),n.default.get(A,e,["lastSize","lastAspectRatio","axisTextStyle","tickTextStyle","tmActor","ticks"]),e.forceUpdate=!1,e.lastRedrawTime={},n.default.obj(e.lastRedrawTime,{mtime:0}),e.lastRebuildTime={},n.default.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.lastTickBounds=[],function(A,e){e.classHierarchy.push("vtkCubeAxesActorHelper"),A.setRenderable=function(t){e.renderable!==t&&(e.renderable=t,e.tmActor.addTexture(e.renderable.getTmTexture()),e.tmActor.setProperty(t.getProperty()),e.tmActor.setParentProp(t),A.modified())},A.createPolyDataForOneLabel=function(A,t,n,r,o,a,s){var l=e.renderable.get_tmAtlas().get(A);if(l){var c=e.renderable.getTextPolyData().getPoints().getData(),u=e.lastSize;ae[0]=c[3*t],ae[1]=c[3*t+1],ae[2]=c[3*t+2],i.transformMat4(le,ae,n),le[0]+=.1,i.transformMat4(se,le,r),i.subtract(ue,se,ae),le[0]-=.1,le[1]+=.1,i.transformMat4(se,le,r),i.subtract(de,se,ae);for(var d=0;d<3;d++)ue[d]/=.05*u[0],de[d]/=.05*u[1];var g=s.ptIdx,f=s.cellIdx;ae[0]=c[3*t],ae[1]=c[3*t+1],ae[2]=c[3*t+2],o[0]<-.5?i.scale(le,ue,o[0]*a-l.width):o[0]>.5?i.scale(le,ue,o[0]*a):i.scale(le,ue,o[0]*a-l.width/2),i.add(ae,ae,le),i.scale(le,de,o[1]*a-l.height/2),i.add(ae,ae,le),s.points[3*g]=ae[0],s.points[3*g+1]=ae[1],s.points[3*g+2]=ae[2],s.tcoords[2*g]=l.tcoords[0],s.tcoords[2*g+1]=l.tcoords[1],g++,i.scale(le,ue,l.width),i.add(ae,ae,le),s.points[3*g]=ae[0],s.points[3*g+1]=ae[1],s.points[3*g+2]=ae[2],s.tcoords[2*g]=l.tcoords[2],s.tcoords[2*g+1]=l.tcoords[3],g++,i.scale(le,de,l.height),i.add(ae,ae,le),s.points[3*g]=ae[0],s.points[3*g+1]=ae[1],s.points[3*g+2]=ae[2],s.tcoords[2*g]=l.tcoords[4],s.tcoords[2*g+1]=l.tcoords[5],g++,i.scale(le,ue,l.width),i.subtract(ae,ae,le),s.points[3*g]=ae[0],s.points[3*g+1]=ae[1],s.points[3*g+2]=ae[2],s.tcoords[2*g]=l.tcoords[6],s.tcoords[2*g+1]=l.tcoords[7],g++,s.polys[4*f]=3,s.polys[4*f+1]=g-4,s.polys[4*f+2]=g-3,s.polys[4*f+3]=g-2,f++,s.polys[4*f]=3,s.polys[4*f+1]=g-4,s.polys[4*f+2]=g-2,s.polys[4*f+3]=g-1,s.ptIdx+=4,s.cellIdx+=2}},A.updateTexturePolyData=function(){var t=e.camera.getCompositeProjectionMatrix(e.lastAspectRatio,-1,1);a.transpose(t,t);var n=e.renderable.getTextValues().length,r=4*n,o=2*n,s=new Float64Array(3*r),l=new Uint16Array(4*o),c=new Float32Array(2*r);a.invert(ge,t);for(var u={ptIdx:0,cellIdx:0,polys:l,points:s,tcoords:c},d=0,g=0,f=0,h=e.renderable.getTextPolyData().getPoints().getData(),B=e.renderable.getTextValues();d<h.length/3;){ae[0]=h[3*d],ae[1]=h[3*d+1],ae[2]=h[3*d+2],i.transformMat4(le,ae,t),ae[0]=h[3*d+3],ae[1]=h[3*d+4],ae[2]=h[3*d+5],i.transformMat4(ce,ae,t),i.subtract(le,le,ce);var p=[le[0],le[1]];(0,NA.L)(p),A.createPolyDataForOneLabel(B[g],d,t,ge,p,e.renderable.getAxisTitlePixelOffset(),u),d+=2,g++;for(var w=0;w<e.renderable.getTickCounts()[f];w++)A.createPolyDataForOneLabel(B[g],d,t,ge,p,e.renderable.getTickLabelPixelOffset(),u),d++,g++;f++}var m=WA.ZP.newInstance({numberOfComponents:2,values:c,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(m),e.tmPolyData.getPoints().setData(s,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(l,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},A.updateAPISpecificData=function(t,n,r){e.lastSize[0]===t[0]&&e.lastSize[1]===t[1]||(e.lastSize[0]=t[0],e.lastSize[1]=t[1],e.lastAspectRatio=t[0]/t[1],e.forceUpdate=!0),e.camera=n,A.updateTexturePolyData()}}(A,e)}),"vtkCubeAxesActorHelper");function Be(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,function(A){return ee({boundsScaleFactor:1.3,camera:null,dataBounds:(0,r.Z)(GA.ZP.INIT_BOUNDS),faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:12,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"}},A)}(t)),ZA.ZP.extend(A,e,t),e.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],e.axisLabels=["X-Axis","Y-Axis","Z-Axis"],e.tickCounts=[],e.textValues=[],e.lastTickBounds=[],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.tmTexture=$A.newInstance(),e.tmTexture.setInterpolate(!1),A.getProperty().setDiffuse(0),A.getProperty().setAmbient(1),e.gridMapper=XA.ZP.newInstance(),e.polyData=zA.ZP.newInstance(),e.gridMapper.setInputData(e.polyData),e.gridActor=ZA.ZP.newInstance(),e.gridActor.setMapper(e.gridMapper),e.gridActor.setProperty(A.getProperty()),e.gridActor.setParentProp(A),e.textPolyData=zA.ZP.newInstance(),n.default.setGet(A,e,["axisTitlePixelOffset","boundsScaleFactor","faceVisibilityAngle","gridLines","tickLabelPixelOffset"]),n.default.setGetArray(A,e,["dataBounds"],6),n.default.setGetArray(A,e,["axisLabels"],3),n.default.get(A,e,["axisTextStyle","tickTextStyle","camera","tmTexture","textValues","textPolyData","tickCounts","gridActor"]),function(A,e){e.classHierarchy.push("vtkCubeAxesActor"),A.setCamera=function(t){e.camera!==t&&(e.cameraModifiedSub&&(e.cameraModifiedSub.unsubscribe(),e.cameraModifiedSub=null),e.camera=t,t&&(e.cameraModifiedSub=t.onModified(A.update)),A.update(),A.modified())},A.computeFacesToDraw=function(){var A=e.camera.getViewMatrix();a.transpose(A,A);for(var t=!1,n=GA.ZP.getDiagonalLength(e.dataBounds),r=Math.sin(e.faceVisibilityAngle*Math.PI/180),o=0;o<6;o++){var s=!1,l=Math.floor(o/2),c=(l+1)%3,u=(l+2)%3;e.dataBounds[2*c]!==e.dataBounds[2*c+1]&&e.dataBounds[2*u]!==e.dataBounds[2*u+1]&&(ae[l]=e.dataBounds[o]-.1*n*te[o][l],ae[c]=.5*(e.dataBounds[2*c]+e.dataBounds[2*c+1]),ae[u]=.5*(e.dataBounds[2*u]+e.dataBounds[2*u+1]),i.transformMat4(le,ae,A),ae[l]=e.dataBounds[o],i.transformMat4(ce,ae,A),i.subtract(le,ce,le),i.normalize(le,le),s=le[2]>r,e.camera.getParallelProjection()||(i.normalize(ce,ce),s=i.dot(ce,le)>r)),s!==e.lastFacesToDraw[o]&&(e.lastFacesToDraw[o]=s,t=!0)}return t},A.updatePolyData=function(A,t,n){var r=0,o=0;r+=8;for(var i=0,a=0;a<12;a++)t[a]>0&&i++;if(o+=i,e.gridLines)for(var s=0;s<6;s++)A[s]&&(r+=2*n[ie[s][0]].length+2*n[ie[s][1]].length,o+=n[ie[s][0]].length+n[ie[s][1]].length);for(var l=new Float64Array(3*r),c=new Uint32Array(3*o),u=0,d=0,g=0;g<2;g++)for(var f=0;f<2;f++)for(var h=0;h<2;h++)l[3*u]=e.dataBounds[h],l[3*u+1]=e.dataBounds[2+f],l[3*u+2]=e.dataBounds[4+g],u++;for(var B=0;B<12;B++)t[B]>0&&(c[3*d]=2,c[3*d+1]=re[B][0],c[3*d+2]=re[B][1],d++);if(e.gridLines)for(var p=0;p<6;p++)if(A[p]){for(var w=Math.floor(p/2),m=n[ie[p][0]],v=0;v<m.length;v++)l[3*u+w]=e.dataBounds[p],l[3*u+ie[p][0]]=m[v],l[3*u+ie[p][1]]=e.dataBounds[2*ie[p][1]],l[3*++u+w]=e.dataBounds[p],l[3*u+ie[p][0]]=m[v],l[3*u+ie[p][1]]=e.dataBounds[2*ie[p][1]+1],u++,c[3*d]=2,c[3*d+1]=u-2,c[3*d+2]=u-1,d++;m=n[ie[p][1]];for(var C=0;C<m.length;C++)l[3*u+w]=e.dataBounds[p],l[3*u+ie[p][1]]=m[C],l[3*u+ie[p][0]]=e.dataBounds[2*ie[p][0]],l[3*++u+w]=e.dataBounds[p],l[3*u+ie[p][1]]=m[C],l[3*u+ie[p][0]]=e.dataBounds[2*ie[p][0]+1],u++,c[3*d]=2,c[3*d+1]=u-2,c[3*d+2]=u-1,d++}e.polyData.getPoints().setData(l,3),e.polyData.getPoints().modified(),e.polyData.getLines().setData(c,1),e.polyData.getLines().modified(),e.polyData.modified()},A.updateTextData=function(A,t,n,r){for(var o=0,i=0;i<12;i++)1===t[i]&&(o+=2,o+=n[oe[i]].length);for(var a=e.polyData.getPoints().getData(),s=new Float64Array(3*o),l=0,c=0,u=0,d=0;d<6;d++)if(A[d])for(var g=0;g<4;g++){var f=ne[d][g];if(1===t[f]){var h=oe[f],B=3*re[f][0],p=3*re[f][1];s[3*l]=.5*(a[B]+a[p]),s[3*l+1]=.5*(a[B+1]+a[p+1]),s[3*l+2]=.5*(a[B+2]+a[p+2]),s[3*++l+Math.floor(d/2)]=e.dataBounds[d],s[3*l+ie[d][0]]=.5*(e.dataBounds[2*ie[d][0]]+e.dataBounds[2*ie[d][0]+1]),s[3*l+ie[d][1]]=.5*(e.dataBounds[2*ie[d][1]]+e.dataBounds[2*ie[d][1]+1]),l++,e.textValues[c]=e.axisLabels[h],c++;var w=(h+1)%3,m=(h+2)%3,v=n[h],C=r[h];e.tickCounts[u]=v.length;for(var U=0;U<v.length;U++)s[3*l+h]=v[U],s[3*l+w]=a[B+w],s[3*l+m]=a[B+m],l++,e.textValues[c]=C[U],c++;u++}}e.textPolyData.getPoints().setData(s,3),e.textPolyData.modified()},A.update=function(){if(e.camera){for(var t=A.computeFacesToDraw(),n=e.lastFacesToDraw,r=!1,o=0;o<6;o++)e.dataBounds[o]!==e.lastTickBounds[o]&&(r=!0,e.lastTickBounds[o]=e.dataBounds[o]);if(t||r||e.forceUpdate){for(var i=new Array(12).fill(0),a=0;a<6;a++)if(n[a])for(var s=0;s<4;s++)i[ne[a][s]]++;for(var l=[],c=[],u=0;u<3;u++){var d=KA().domain([e.dataBounds[2*u],e.dataBounds[2*u+1]]);l[u]=d.ticks(5);var g=d.tickFormat(5);c[u]=l[u].map(g)}A.updatePolyData(n,i,l),A.updateTextData(n,i,l,c),(r||e.forceUpdate)&&A.updateTextureAtlas(c)}e.forceUpdate=!1}},A.updateTextureAtlas=function(A){e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e._tmAtlas.clear();for(var t=0,n=1,r=0;r<3;r++){if(!e._tmAtlas.has(e.axisLabels[r])){fe(e.tmContext,e.axisTextStyle);var o=e.tmContext.measureText(e.axisLabels[r]),i={height:o.actualBoundingBoxAscent+2,startingHeight:n,width:o.width+2,textStyle:e.axisTextStyle};e._tmAtlas.set(e.axisLabels[r],i),n+=i.height,t<i.width&&(t=i.width)}fe(e.tmContext,e.tickTextStyle);for(var a=0;a<A[r].length;a++)if(!e._tmAtlas.has(A[r][a])){var s=e.tmContext.measureText(A[r][a]),l={height:s.actualBoundingBoxAscent+2,startingHeight:n,width:s.width+2,textStyle:e.tickTextStyle};e._tmAtlas.set(A[r][a],l),n+=l.height,t<l.width&&(t=l.width)}}t=(0,NA.M)(t),n=(0,NA.M)(n),e._tmAtlas.forEach((function(A){A.tcoords=[0,(n-A.startingHeight-A.height)/n,A.width/t,(n-A.startingHeight-A.height)/n,A.width/t,(n-A.startingHeight)/n,0,(n-A.startingHeight)/n]})),e.tmCanvas.width=t,e.tmCanvas.height=n,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,t,n),e._tmAtlas.forEach((function(A,t){fe(e.tmContext,A.textStyle),e.tmContext.fillText(t,1,A.startingHeight+A.height-1)})),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified()},A.onModified((function(){e.forceUpdate=!0,A.update()})),A.setTickTextStyle=function(t){e.tickTextStyle=ee(ee({},e.tickTextStyle),t),A.modified()},A.setAxisTextStyle=function(t){e.axisTextStyle=ee(ee({},e.axisTextStyle),t),A.modified()},A.get_tmAtlas=function(){return e._tmAtlas},A.getBounds=function(){return A.update(),GA.ZP.setBounds(e.bounds,e.gridActor.getBounds()),GA.ZP.scaleAboutCenter(e.bounds,e.boundsScaleFactor,e.boundsScaleFactor,e.boundsScaleFactor),e.bounds};var t=n.default.chain(A.setProperty,e.gridActor.setProperty);A.setProperty=function(A){return t(A)[0]}}(A,e)}var pe={newInstance:n.default.newInstance(Be,"vtkCubeAxesActor"),extend:Be,newCubeAxesActorHelper:he},we=t(8723),me=t(91158);var ve={};function Ce(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,ve,t),we.Z.extend(A,e,t),e.CubeAxesActorHelper=pe.newCubeAxesActorHelper(),function(A,e){e.classHierarchy.push("vtkOpenGLCubeAxesActor"),A.buildPass=function(t){t&&(e._openGLRenderer=A.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),A.prepareNodes(),A.addMissingNode(e.CubeAxesActorHelper.getTmActor()),A.addMissingNode(e.renderable.getGridActor()),A.removeUnusedNodes())},A.opaquePass=function(A,t){if(A){var n=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,r=e._openGLRenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([r.usize,r.vsize],n,e._openGLRenderWindow.getRenderable())}}}(A,e)}var Ue=(0,n.WL)(Ce,"vtkOpenGLCubeAxesActor");(0,me.vw)("vtkCubeAxesActor",Ue);t(24563);var Qe=t(1464),ye=t(54620),Ie=t(21485),Fe=t(43083),be=Fe.ZP.ColorMode,Ee=Fe.ZP.ScalarMode,Te=Fe.ZP.GetArray;var Se={static:!1,lookupTable:null,scalarVisibility:!1,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,transformCoordinate:null,viewSpecificProperties:null,customShaderAttributes:[]};function Pe(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,Se,t),ye.Z.extend(A,e,t),n.default.get(A,e,["colorMapColors"]),n.default.setGet(A,e,["arrayAccessMode","colorByArrayName","colorMode","lookupTable","renderTime","scalarMode","scalarVisibility","static","transformCoordinate","useLookupTableScalarRange","viewSpecificProperties","customShaderAttributes"]),n.default.setGetArray(A,e,["scalarRange"],2),e.viewSpecificProperties||(e.viewSpecificProperties={}),function(A,e){e.classHierarchy.push("vtkMapper2D"),A.createDefaultLookupTable=function(){e.lookupTable=Ie.ZP.newInstance()},A.getColorModeAsString=function(){return n.default.enumToString(be,e.colorMode)},A.setColorModeToDefault=function(){return A.setColorMode(0)},A.setColorModeToMapScalars=function(){return A.setColorMode(1)},A.setColorModeToDirectScalars=function(){return A.setColorMode(2)},A.getScalarModeAsString=function(){return n.default.enumToString(Ee,e.scalarMode)},A.setScalarModeToDefault=function(){return A.setScalarMode(0)},A.setScalarModeToUsePointData=function(){return A.setScalarMode(1)},A.setScalarModeToUseCellData=function(){return A.setScalarMode(2)},A.setScalarModeToUsePointFieldData=function(){return A.setScalarMode(3)},A.setScalarModeToUseCellFieldData=function(){return A.setScalarMode(4)},A.setScalarModeToUseFieldData=function(){return A.setScalarMode(5)},A.getAbstractScalars=function(A,t,n,r,o){if(!A||!e.scalarVisibility)return{scalars:null,cellFLag:!1};var i=null,a=!1;if(t===Ee.DEFAULT)(i=A.getPointData().getScalars())||(i=A.getCellData().getScalars(),a=!0);else if(t===Ee.USE_POINT_DATA)i=A.getPointData().getScalars();else if(t===Ee.USE_CELL_DATA)i=A.getCellData().getScalars(),a=!0;else if(t===Ee.USE_POINT_FIELD_DATA){var s=A.getPointData();i=n===Te.BY_ID?s.getArrayByIndex(r):s.getArrayByName(o)}else if(t===Ee.USE_CELL_FIELD_DATA){var l=A.getCellData();a=!0,i=n===Te.BY_ID?l.getArrayByIndex(r):l.getArrayByName(o)}else if(t===Ee.USE_FIELD_DATA){var c=A.getFieldData();i=n===Te.BY_ID?c.getArrayByIndex(r):c.getArrayByName(o)}return{scalars:i,cellFlag:a}},A.getLookupTable=function(){return e.lookupTable||A.createDefaultLookupTable(),e.lookupTable},A.getMTime=function(){var A=e.mtime;if(null!==e.lookupTable){var t=e.lookupTable.getMTime();A=t>A?t:A}return A},A.mapScalars=function(t,n){var r=A.getAbstractScalars(t,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(r){var o="".concat(A.getMTime()).concat(r.getMTime()).concat(n);if(e.colorBuildString!==o){e.useLookupTableScalarRange||A.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]);var i=A.getLookupTable();i&&(i.build(),e.colorMapColors=i.mapScalars(r,e.colorMode,e.fieldDataTupleId)),e.colorBuildString="".concat(A.getMTime()).concat(r.getMTime()).concat(n)}}else e.colorMapColors=null}}(A,e)}var xe={newInstance:n.default.newInstance(Pe,"vtkMapper2D"),extend:Pe},He=t(95138),De="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyData2DFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nuniform int PrimitiveIDOffset;\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// Scalar coloring\n//VTK::Color::Dec\n\n// Depth Peeling\n//VTK::DepthPeeling::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\nvoid main()\n{\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  //VTK::Color::Impl\n  //VTK::TCoord::Impl\n\n  //VTK::DepthPeeling::Impl\n  //VTK::Picking::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n}\n",Le="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyData2DVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\n// all variables that represent positions or directions have a suffix\n// indicating the coordinate system they are in. The possible values are\n// MC - Model Coordinates\n// WC - WC world coordinates\n// VC - View Coordinates\n// DC - Display Coordinates\n\nin vec4 vertexWC;\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// material property values\n//VTK::Color::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\nuniform mat4 WCVCMatrix;  // World to view matrix\n\nvoid main()\n{\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  gl_Position = WCVCMatrix*vertexWC;\n\n  //VTK::TCoord::Impl\n\n  //VTK::Color::Impl\n\n  //VTK::PositionVC::Impl\n}\n",Oe=t(61875),Me=t(94143),_e={BACKGROUND:0,FOREGROUND:1},ke={DisplayLocation:_e},Ve=Qe.ZP.primTypes,Re=xe.ScalarMode,Ke=n.E0,Ne={type:"StartEvent"},Ze={type:"EndEvent"};var Ge={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null};function We(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,Ge,t),we.Z.extend(A,e,t),Oe.Z.implementReplaceShaderCoincidentOffset(A,e,t),Oe.Z.implementBuildShadersWithReplacements(A,e,t),e.primitives=[],e.primTypes=Ve,e.tmpMat4=a.identity(new Float64Array(16));for(var r=Ve.Start;r<Ve.End;r++)e.primitives[r]=Qe.ZP.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);(0,n.g2)(A,e,["context"]),e.VBOBuildTime={},(0,n.j6)(e.VBOBuildTime,{mtime:0}),function(A,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper2D"),A.buildPass=function(t){t&&(e.openGLActor2D=A.getFirstAncestorOfType("vtkOpenGLActor2D"),e._openGLRenderer=e.openGLActor2D.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()))},A.overlayPass=function(e){e&&A.render()},A.getShaderTemplate=function(A,e,t){A.Vertex=Le,A.Fragment=De,A.Geometry=""},A.render=function(){var t=e._openGLRenderWindow.getContext();if(e.context!==t){e.context=t;for(var n=Ve.Start;n<Ve.End;n++)e.primitives[n].setOpenGLRenderWindow(e._openGLRenderWindow)}var r=e.openGLActor2D.getRenderable(),o=e._openGLRenderer.getRenderable();A.renderPiece(o,r)},A.renderPiece=function(t,n){A.invokeEvent(Ne),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),A.invokeEvent(Ze),e.currentInput?e.currentInput.getPoints&&e.currentInput.getPoints().getNumberOfValues()&&(A.renderPieceStart(t,n),A.renderPieceDraw(t,n),A.renderPieceFinish(t,n)):Ke("No input!")},A.renderPieceStart=function(t,n){e.primitiveIDOffset=0,e._openGLRenderer.getSelector()&&(e._openGLRenderer.getSelector().getCurrentPass(),e._openGLRenderer.getSelector().renderProp(n)),A.updateBufferObjects(t,n),e.lastBoundBO=null},A.getNeedToRebuildShaders=function(A,t,n){return A.getShaderSourceTime().getMTime()<e.renderable.getMTime()||A.getShaderSourceTime().getMTime()<e.currentInput.getMTime()},A.updateBufferObjects=function(e,t){A.getNeedToRebuildBufferObjects(e,t)&&A.buildBufferObjects(e,t)},A.getNeedToRebuildBufferObjects=function(t,n){var r=e.VBOBuildTime.getMTime();return!!(r<A.getMTime()||r<e._openGLRenderWindow.getMTime()||r<e.renderable.getMTime()||r<n.getMTime()||r<e.currentInput.getMTime()||e.renderable.getTransformCoordinate()&&r<t.getMTime())},A.buildBufferObjects=function(A,t){var n=e.currentInput;if(null!==n){e.renderable.mapScalars(n,t.getProperty().getOpacity());var r=e.renderable.getColorMapColors();e.haveCellScalars=!1;var o=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(o!==Re.USE_CELL_DATA&&o!==Re.USE_CELL_FIELD_DATA&&o!==Re.USE_FIELD_DATA&&n.getPointData().getScalars()||o===Re.USE_POINT_FIELD_DATA||!r||(e.haveCellScalars=!0));var i=t.getProperty().getRepresentation(),a=n.getPointData().getTCoords();e.openGLActor2D.getActiveTextures()||(a=null);var s=e.renderable.getTransformCoordinate(),l=A.getRenderWindow().getViews()[0].getViewportSize(A),c="".concat(n.getMTime(),"A").concat(i,"B").concat(n.getMTime())+"C".concat(r?r.getMTime():1)+"D".concat(a?a.getMTime():1)+"E".concat(s?A.getMTime():1)+"F".concat(l);if(e.VBOBuildString!==c){var u=n.getPoints();if(s){var d=He.ZP.newInstance(),g=u.getNumberOfPoints();d.setNumberOfPoints(g);for(var f=[],h=0;h<g;++h){u.getPoint(h,f),s.setValue(f);var B=s.getComputedDoubleViewportValue(A);d.setPoint(h,B[0],B[1],0)}u=d}var p={points:u,tcoords:a,colors:r,cellOffset:0,haveCellScalars:e.haveCellSCalars,customAttributes:e.renderable.getCustomShaderAttributes().map((function(A){return n.getPointData().getArrayByName(A)}))};p.cellOffset+=e.primitives[Ve.Points].getCABO().createVBO(n.getVerts(),"verts",i,p),p.cellOffset+=e.primitives[Ve.Lines].getCABO().createVBO(n.getLines(),"lines",i,p),p.cellOffset+=e.primitives[Ve.Tris].getCABO().createVBO(n.getPolys(),"polys",i,p),p.cellOffset+=e.primitives[Ve.TriStrips].getCABO().createVBO(n.getStrips(),"strips",i,p),e.VBOBuildTime.modified(),e.VBOBuildString=c}}},A.renderPieceDraw=function(t,n){var r=n.getProperty().getRepresentation();e.context.depthMask(!0);for(var o=Ve.Start;o<Ve.End;o++)e.primitives[o].getCABO().getElementCount()&&(e.lastBoundBO=e.primitives[o],e.primitiveIDOffset+=e.primitives[o].drawArrays(t,n,r,A))},A.renderPieceFinish=function(A,t){e.lastBoundBO&&e.lastBoundBO.getVAO().release()},A.replaceShaderValues=function(e,t,n){A.replaceShaderColor(e,t,n),A.replaceShaderTCoord(e,t,n),A.replaceShaderPicking(e,t,n),A.replaceShaderPositionVC(e,t,n)},A.replaceShaderColor=function(A,t,n){var r=A.Vertex,o=A.Geometry,i=A.Fragment;e.haveCellScalars&&(i=Me.Z.substitute(i,"//VTK::Color::Dec",["uniform samplerBuffer texture1;"]).result,i=Me.Z.substitute(i,"//VTK::Color::Impl",["gl_FragData[0] = texelFetchBuffer(texture1, gl_PrimitiveID + PrimitiveIDOffset);"]).result),0!==e.lastBoundBO.getCABO().getColorComponents()?(r=Me.Z.substitute(r,"//VTK::Color::Dec",["in vec4 diffuseColor;","out vec4 fcolorVSOutput;"]).result,r=Me.Z.substitute(r,"//VTK::Color::Impl",["fcolorVSOutput = diffuseColor;"]).result,o=Me.Z.substitute(o,"//VTK::Color::Dec",["in vec4 fcolorVSOutput[];\n","out vec4 fcolorGSOutput;"]).result,o=Me.Z.substitute(o,"//VTK::Color::Impl",["fcolorGSOutput = fcolorVSOutput[i];"]).result,i=Me.Z.substitute(i,"//VTK::Color::Dec",["in vec4 fcolorVSOutput;"]).result,i=Me.Z.substitute(i,"//VTK::Color::Impl",["gl_FragData[0] = fcolorVSOutput;"]).result):(i=Me.Z.substitute(i,"//VTK::Color::Dec",["uniform vec4 diffuseColor;"]).result,i=Me.Z.substitute(i,"//VTK::Color::Impl",["gl_FragData[0] = diffuseColor;"]).result),A.Vertex=r,A.Geometry=o,A.Fragment=i},A.replaceShaderTCoord=function(A,t,n){if(e.lastBoundBO.getCABO().getTCoordOffset()){var r=A.Vertex,o=A.Geometry,i=A.Fragment,a=e.lastBoundBO.getCABO().getTCoordComponents();1===a?(r=Me.Z.substitute(r,"//VTK::TCoord::Dec",["in float tcoordMC;","out float tcoordVCVSOutput;"]).result,r=Me.Z.substitute(r,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,o=Me.Z.substitute(o,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput[];\n","out float tcoordVCGSOutput;"]).result,o=Me.Z.substitute(o,["//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,i=Me.Z.substitute(i,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,i=Me.Z.substitute(i,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, vec2(tcoordVCVSOutput,0));"]).result):2===a&&(r=Me.Z.substitute(r,"//VTK::TCoord::Dec",["in vec2 tcoordMC;","out vec2 tcoordVCVSOutput;"]).result,r=Me.Z.substitute(r,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,o=Me.Z.substitute(o,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];\n","out vec2 tcoordVCGSOutput;"]).result,o=Me.Z.substitute(o,"//VTK::TCoord::Impl",["tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,i=Me.Z.substitute(i,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,i=Me.Z.substitute(i,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, tcoordVCVSOutput.st);"]).result),e.haveCellScalars&&(o=Me.Z.substitute(o,"//VTK::PrimID::Impl",["gl_PrimitiveID = gl_PrimitiveIDIn;"]).result),A.Vertex=r,A.Geometry=o,A.Fragment=i}},A.replaceShaderPicking=function(A,e,t){var n=A.Fragment;n=Me.Z.substitute(n,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,n=Me.Z.substitute(n,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,A.Fragment=n},A.replaceShaderPositionVC=function(A,t,n){e.lastBoundBO.replaceShaderPositionVC(A,t,n)},A.invokeShaderCallbacks=function(A,t,n){var r=e.renderable.getViewSpecificProperties().ShadersCallbacks;r&&r.forEach((function(e){e.callback(e.userData,A,t,n)}))},A.setMapperShaderParameters=function(A,t,n){if(A.getProgram().isUniformUsed("PrimitiveIDOffset")&&A.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),A.getProgram().isAttributeUsed("vertexWC")&&(A.getVAO().addAttributeArray(A.getProgram(),A.getCABO(),"vertexWC",A.getCABO().getVertexOffset(),A.getCABO().getStride(),e.context.FLOAT,3,!1)||Ke("Error setting vertexWC in shader VAO.")),A.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>A.getAttributeUpdateTime().getMTime()||A.getShaderSourceTime().getMTime()>A.getAttributeUpdateTime().getMTime())){e.renderable.getCustomShaderAttributes().forEach((function(t,n){A.getProgram().isAttributeUsed("".concat(t,"MC"))&&(A.getVAO().addAttributeArray(A.getProgram(),A.getCABO(),"".concat(t,"MC"),A.getCABO().getCustomData()[n].offset,A.getCABO().getStride(),e.context.FLOAT,A.getCABO().getCustomData()[n].components,!1)||Ke("Error setting ".concat(t,"MC in shader VAO.")))})),A.getProgram().isAttributeUsed("tcoordMC")&&A.getCABO().getTCoordOffset()?A.getVAO().addAttributeArray(A.getProgram(),A.getCABO(),"tcoordMC",A.getCABO().getTCoordOffset(),A.getCABO().getStride(),e.context.FLOAT,A.getCABO().getTCoordComponents(),!1)||Ke("Error setting tcoordMC in shader VAO."):A.getVAO().removeAttributeArray("tcoordMC"),e.internalColorTexture&&A.getProgram().isUniformUsed("texture1")&&A.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());var r=e.openGLActor2D.getActiveTextures();if(r)for(var o=0;o<r.length;++o){var i=r[o].getTextureUnit(),a="texture".concat(i+1);A.getProgram().isUniformUsed(a)&&A.getProgram().setUniformi(a,i)}A.setMapperShaderParameters(t,n,e._openGLRenderer.getTiledSizeAndOrigin());var s=e._openGLRenderer.getSelector();A.getProgram().setUniform3fArray("mapperIndex",s?s.getPropColorValue():[0,0,0]),A.getProgram().setUniformi("picking",s?s.getCurrentPass()+1:0)}},A.setPropertyShaderParameters=function(A,t,n){var r=e.renderable.getColorMapColors();if(!r||0===r.getNumberOfComponents()){var o=A.getProgram(),i=n.getProperty(),a=i.getOpacity(),s=i.getColor(),l=[s[0],s[1],s[2],a];o.setUniform4f("diffuseColor",l)}},A.setLightingShaderParameters=function(A,e,t){},A.setCameraShaderParameters=function(A,t,n){var r=A.getProgram(),o=A.getCABO().getCoordShiftAndScaleEnabled()?A.getCABO().getInverseShiftAndScaleMatrix():null,i=t.getRenderWindow().getViews()[0].getViewportSize(t),s=t.getViewport(),l=n.getActualPositionCoordinate().getComputedDoubleViewportValue(t),c=[0,0,1,1],u=[0,0,1,1];if(u[0]=s[0]>=c[0]?s[0]:c[0],u[1]=s[1]>=c[1]?s[1]:c[1],u[2]=s[2]<=c[2]?s[2]:c[2],u[3]=s[3]<=c[3]?s[3]:c[3],!(u[0]>=u[2]||u[1]>=u[3])){i[0]=(0,NA.K)(i[0]*(u[2]-u[0])/(s[2]-s[0])),i[1]=(0,NA.K)(i[1]*(u[3]-u[1])/(s[3]-s[1]));var d=e._openGLRenderer.getParent().getSize(),g=(0,NA.K)(l[0]-(u[0]-s[0])*d[0]),f=(0,NA.K)(l[1]-(u[1]-s[1])*d[1]),h=-g,B=-g+i[0],p=-f,w=-f+i[1];h===B&&(B=h+1),p===w&&(w=p+1);var m,v,C,U=a.identity(new Float64Array(16));U[0]=2/(B-h),U[5]=2/(w-p),U[3]=-1*(B+h)/(B-h),U[7]=-1*(w+p)/(w-p),U[10]=0,U[11]=n.getProperty().getDisplayLocation()===_e.FOREGROUND?-1:1,U[15]=1,a.transpose(U,U),r.setUniformMatrix("WCVCMatrix",(m=[U,o],v=a,C=e.tmpMat4,v.identity(C),m.reduce((function(A,e,t){return 0===t?e?v.copy(A,e):v.identity(A):e?v.multiply(A,A,e):A}),C)))}}}(A,e)}var Xe=(0,n.WL)(We,"vtkOpenGLPolyDataMapper2D");function ze(A,e){var t=Object.keys(A);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(A);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(A,e).enumerable}))),t.push.apply(t,n)}return t}function Je(A){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ze(Object(t),!0).forEach((function(e){(0,o.Z)(A,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(t)):ze(Object(t)).forEach((function(e){Object.defineProperty(A,e,Object.getOwnPropertyDescriptor(t,e))}))}return A}(0,me.vw)("vtkMapper2D",Xe);var je=t(62504).ZP.VectorMode;function Ye(A,e){A.strokeStyle=e.strokeColor,A.lineWidth=e.strokeSize,A.fillStyle=e.fontColor,A.font="".concat(e.fontStyle," ").concat(e.fontSize,"px ").concat(e.fontFamily)}function qe(A,e){return function(A){var t=A.getLastSize(),n=Math.pow(t[0]/700,.8),r=Math.pow(t[1]/700,.8),o=Math.min(n,r),i=A.getAxisTextStyle(),a=A.getTickTextStyle();Object.assign(i,e.axisTextStyle),Object.assign(a,e.tickTextStyle),i.fontSize=Math.max(24*o,12),A.getLastAspectRatio()>1?a.fontSize=Math.max(20*o,10):a.fontSize=Math.max(16*o,10);var s=A.updateTextureAtlas();A.setTopTitle(!1);var l=A.getBoxSizeByReference();if(A.getLastAspectRatio()>1)A.setTickLabelPixelOffset(.3*a.fontSize),s.titleWidth<=s.tickWidth+A.getTickLabelPixelOffset()+.8*a.fontSize?(A.setTopTitle(!0),A.setAxisTitlePixelOffset(.2*a.fontSize),l[0]=2*(s.tickWidth+A.getTickLabelPixelOffset()+.8*a.fontSize)/t[0],A.setBoxPosition([.98-l[0],-.92])):(A.setAxisTitlePixelOffset(.2*a.fontSize),l[0]=2*(s.titleHeight+A.getAxisTitlePixelOffset()+s.tickWidth+A.getTickLabelPixelOffset()+.8*a.fontSize)/t[0],A.setBoxPosition([.99-l[0],-.92])),l[1]=Math.max(1.2,Math.min(1.84/r,1.84));else{A.setAxisTitlePixelOffset(1.2*a.fontSize),A.setTickLabelPixelOffset(.1*a.fontSize);var c=2*(.8*a.fontSize+s.titleHeight+A.getAxisTitlePixelOffset())/t[1],u=2*s.tickWidth/t[0];l[0]=Math.min(1.9,Math.max(1.4,1.4*u*(A.getTicks().length+3))),l[1]=c,A.setBoxPosition([-.5*l[0],-.97])}A.recomputeBarSegments(s)}}function $e(A,e){return function(A){var e=A.getLastTickBounds(),t=KA().domain([e[0],e[1]]),n=t.ticks(5),r=t.tickFormat(5);A.setTicks(n),A.setTickStrings(n.map(r))}}var At=n.default.newInstance((function(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{renderable:null};Object.assign(e,{},t),n.default.obj(A,e),n.default.setGet(A,e,["axisTitlePixelOffset","tickLabelPixelOffset","renderable","topTitle","ticks","tickStrings"]),n.default.get(A,e,["lastSize","lastAspectRatio","lastTickBounds","axisTextStyle","tickTextStyle","barActor","tmActor"]),n.default.getArray(A,e,["boxPosition","boxSize"]),n.default.setArray(A,e,["boxPosition","boxSize"],2),e.forceUpdate=!1,e.lastRebuildTime={},n.default.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.barMapper=XA.ZP.newInstance(),e.barMapper.setInterpolateScalarsBeforeMapping(!0),e.barMapper.setUseLookupTableScalarRange(!0),e.polyData=zA.ZP.newInstance(),e.barMapper.setInputData(e.polyData),e.barActor=ZA.ZP.newInstance(),e.barActor.setMapper(e.barMapper),e.tmPolyData=zA.ZP.newInstance(),e.tmMapper=XA.ZP.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmTexture=$A.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),e.tmActor=ZA.ZP.newInstance({parentProp:A}),e.tmActor.setMapper(e.tmMapper),e.tmActor.addTexture(e.tmTexture),e.barPosition=[0,0],e.barSize=[0,0],e.boxPosition=[.88,-.92],e.boxSize=[.1,1.1],e.lastTickBounds=[],function(A,e){e.classHierarchy.push("vtkScalarBarActorHelper"),A.setRenderable=function(t){e.renderable!==t&&(e.renderable=t,e.barActor.setProperty(t.getProperty()),e.barActor.setParentProp(t),e.barActor.setCoordinateSystemToDisplay(),e.tmActor.setProperty(t.getProperty()),e.tmActor.setParentProp(t),e.tmActor.setCoordinateSystemToDisplay(),e.generateTicks=t.generateTicks,e.axisTextStyle=Je({},t.getAxisTextStyle()),e.tickTextStyle=Je({},t.getTickTextStyle()),A.modified())},A.updateAPISpecificData=function(t,n,o){e.lastSize[0]===t[0]&&e.lastSize[1]===t[1]||(e.lastSize[0]=t[0],e.lastSize[1]=t[1],e.lastAspectRatio=t[0]/t[1],e.forceUpdate=!0);var i=e.renderable.getScalarsToColors();if(i&&e.renderable.getVisibility()&&(e.barMapper.setLookupTable(i),e.camera=n,e.renderWindow=o,e.forceUpdate||Math.max(i.getMTime(),A.getMTime(),e.renderable.getMTime())>e.lastRebuildTime.getMTime())){var a=i.getMappingRange();if(e.lastTickBounds=(0,r.Z)(a),e.renderable.getGenerateTicks()(A),e.renderable.getAutomated())e.renderable.getAutoLayout()(A);else{e.axisTextStyle=Je({},e.renderable.getAxisTextStyle()),e.tickTextStyle=Je({},e.renderable.getTickTextStyle()),e.barPosition=(0,r.Z)(e.renderable.getBarPosition()),e.barSize=(0,r.Z)(e.renderable.getBarSize()),e.boxPosition=(0,r.Z)(e.renderable.getBoxPosition()),e.boxSize=(0,r.Z)(e.renderable.getBoxSize()),e.axisTitlePixelOffset=e.renderable.getAxisTitlePixelOffset(),e.tickLabelPixelOffset=e.renderable.getTickLabelPixelOffset();var s=A.updateTextureAtlas();A.recomputeBarSegments(s)}A.updatePolyDataForLabels(),A.updatePolyDataForBarSegments(),e.lastRebuildTime.modified(),e.forceUpdate=!1}},A.updateTextureAtlas=function(){e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left";var t={},n=new Map,o=0,i=1;Ye(e.tmContext,e.axisTextStyle);var a=e.tmContext.measureText(e.renderable.getAxisLabel()),s={height:a.actualBoundingBoxAscent+2,startingHeight:i,width:a.width+2,textStyle:e.axisTextStyle};n.set(e.renderable.getAxisLabel(),s),i+=s.height,o=s.width,t.titleWidth=s.width,t.titleHeight=s.height,t.tickWidth=0,t.tickHeight=0,Ye(e.tmContext,e.tickTextStyle);for(var l=[].concat((0,r.Z)(A.getTickStrings()),["NaN","Below","Above"]),c=0;c<l.length;c++)n.has(l[c])||(s={height:(a=e.tmContext.measureText(l[c])).actualBoundingBoxAscent+2,startingHeight:i,width:a.width+2,textStyle:e.tickTextStyle},n.set(l[c],s),i+=s.height,o<s.width&&(o=s.width),t.tickWidth<s.width&&(t.tickWidth=s.width),t.tickHeight<s.height&&(t.tickHeight=s.height));return o=(0,NA.M)(o),i=(0,NA.M)(i),n.forEach((function(A){A.tcoords=[0,(i-A.startingHeight-A.height)/i,A.width/o,(i-A.startingHeight-A.height)/i,A.width/o,(i-A.startingHeight)/i,0,(i-A.startingHeight)/i]})),e.tmCanvas.width=o,e.tmCanvas.height=i,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,o,i),n.forEach((function(A,t){Ye(e.tmContext,A.textStyle),e.tmContext.fillText(t,1,A.startingHeight+A.height-1)})),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified(),e._tmAtlas=n,t},A.computeBarSize=function(A){e.vertical=e.boxSize[1]>e.boxSize[0];var t=2*A.tickHeight/e.lastSize[1],n=[1,1];if(e.vertical){var r=2*(A.tickWidth+e.tickLabelPixelOffset)/e.lastSize[0];if(e.topTitle){var o=2*(A.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0]-r,e.barSize[1]=e.boxSize[1]-o}else{var i=2*(A.titleHeight+e.axisTitlePixelOffset)/e.lastSize[0];e.barSize[0]=e.boxSize[0]-i-r,e.barSize[1]=e.boxSize[1]}e.barPosition[0]=e.boxPosition[0]+r,e.barPosition[1]=e.boxPosition[1],n[1]=t}else{var a=(2*A.tickWidth-8)/e.lastSize[0],s=2*(A.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0],e.barPosition[0]=e.boxPosition[0],e.barSize[1]=e.boxSize[1]-s,e.barPosition[1]=e.boxPosition[1],n[0]=a}return n},A.recomputeBarSegments=function(t){var n,r,o,i,a=A.computeBarSize(t);e.barSegments=[];var s=[0,0],l=e.vertical?1:0,c=e.vertical?.01:.02;function u(A,t){e.barSegments.push({corners:[[].concat(s),[s[0]+a[0],s[1]],[s[0]+a[0],s[1]+a[1]],[s[0],s[1]+a[1]]],scalars:t,title:A}),s[l]+=a[l]+c}e.renderable.getDrawNanAnnotation()&&e.renderable.getScalarsToColors().getNanColor()&&u("NaN",[NaN,NaN,NaN,NaN]),e.renderable.getDrawBelowRangeSwatch()&&null!==(n=(r=e.renderable.getScalarsToColors()).getUseBelowRangeColor)&&void 0!==n&&n.call(r)&&u("Below",[-.1,-.1,-.1,-.1]);var d=null===(o=(i=e.renderable.getScalarsToColors()).getUseAboveRangeColor)||void 0===o?void 0:o.call(i);s[l]+=c;var g=a[l];a[l]=d?1-2*c-a[l]-s[l]:1-c-s[l],u("ticks",e.vertical?[0,0,.995,.995]:[0,.995,.995,0]),e.renderable.getDrawAboveRangeSwatch()&&d&&(a[l]=g,s[l]+=c,u("Above",[1.1,1.1,1.1,1.1]))};var t=new Float64Array(3);A.createPolyDataForOneLabel=function(A,n,r,o,i,a){var s=e._tmAtlas.get(A);if(s){var l=a.ptIdx,c=a.cellIdx;t[0]=(.5*n[0]+.5)*e.lastSize[0],t[1]=(.5*n[1]+.5)*e.lastSize[1],t[2]=n[2],t[0]+=i[0],t[1]+=i[1];var u=[],d="vertical"===o?[1,0]:[0,1];"vertical"===o?(u[0]=s.width,u[1]=-s.height,"middle"===r[0]?t[1]-=s.width/2:"right"===r[0]&&(t[1]-=s.width),"middle"===r[1]?t[0]+=s.height/2:"top"===r[1]&&(t[0]+=s.height)):(u[0]=s.width,u[1]=s.height,"middle"===r[0]?t[0]-=s.width/2:"right"===r[0]&&(t[0]-=s.width),"middle"===r[1]?t[1]-=s.height/2:"top"===r[1]&&(t[1]-=s.height)),a.points[3*l]=t[0],a.points[3*l+1]=t[1],a.points[3*l+2]=t[2],a.tcoords[2*l]=s.tcoords[0],a.tcoords[2*l+1]=s.tcoords[1],l++,t[d[0]]+=u[0],a.points[3*l]=t[0],a.points[3*l+1]=t[1],a.points[3*l+2]=t[2],a.tcoords[2*l]=s.tcoords[2],a.tcoords[2*l+1]=s.tcoords[3],l++,t[d[1]]+=u[1],a.points[3*l]=t[0],a.points[3*l+1]=t[1],a.points[3*l+2]=t[2],a.tcoords[2*l]=s.tcoords[4],a.tcoords[2*l+1]=s.tcoords[5],l++,t[d[0]]-=u[0],a.points[3*l]=t[0],a.points[3*l+1]=t[1],a.points[3*l+2]=t[2],a.tcoords[2*l]=s.tcoords[6],a.tcoords[2*l+1]=s.tcoords[7],l++,a.polys[4*c]=3,a.polys[4*c+1]=l-4,a.polys[4*c+2]=l-3,a.polys[4*c+3]=l-2,c++,a.polys[4*c]=3,a.polys[4*c+1]=l-4,a.polys[4*c+2]=l-2,a.polys[4*c+3]=l-1,a.ptIdx+=4,a.cellIdx+=2}};var n=new Float64Array(3);A.updatePolyDataForLabels=function(){var t=A.getTickStrings().length+e.barSegments.length,r=4*t,o=2*t,i=new Float64Array(3*r),a=new Uint16Array(4*o),s=new Float32Array(2*r),l={ptIdx:0,cellIdx:0,polys:a,points:i,tcoords:s},c=e.vertical?0:1,u=e.vertical?1:0;n[2]=-.99;var d=e.vertical?["right","middle"]:["middle","bottom"],g=[0,1],f=[0,0];e.vertical?(f[0]=-e.tickLabelPixelOffset,e.topTitle?(n[0]=e.boxPosition[0]+.5*e.boxSize[0],n[1]=e.barPosition[1]+e.barSize[1],A.createPolyDataForOneLabel(e.renderable.getAxisLabel(),n,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],l)):(n[0]=e.barPosition[0]+e.barSize[0],n[1]=e.barPosition[1]+.5*e.barSize[1],A.createPolyDataForOneLabel(e.renderable.getAxisLabel(),n,["middle","top"],"vertical",[e.axisTitlePixelOffset,0],l)),g=[-1,0]):(f[1]=e.tickLabelPixelOffset,n[0]=e.barPosition[0]+.5*e.barSize[0],n[1]=e.barPosition[1]+e.barSize[1],A.createPolyDataForOneLabel(e.renderable.getAxisLabel(),n,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],l)),n[c]=e.barPosition[c]+(.5*g[c]+.5)*e.barSize[c],n[u]=e.barPosition[u]+.5*e.barSize[u];for(var h=null,B=0;B<e.barSegments.length;B++){var p=e.barSegments[B];"ticks"===p.title?h=p:(n[u]=e.barPosition[u]+.5*e.barSize[u]*(p.corners[2][u]+p.corners[0][u]),A.createPolyDataForOneLabel(p.title,n,d,"horizontal",f,l))}for(var w=e.barPosition[u]+e.barSize[u]*h.corners[0][u],m=e.barSize[u]*(h.corners[2][u]-h.corners[0][u]),v=A.getTicks(),C=A.getTickStrings(),U=0;U<v.length;U++){var Q=(v[U]-e.lastTickBounds[0])/(e.lastTickBounds[1]-e.lastTickBounds[0]);n[u]=w+m*Q,A.createPolyDataForOneLabel(C[U],n,d,"horizontal",f,l)}var y=WA.ZP.newInstance({numberOfComponents:2,values:s,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(y),e.tmPolyData.getPoints().setData(i,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(a,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},A.updatePolyDataForBarSegments=function(){var A,t,r=e.renderable.getScalarsToColors(),o=0;e.renderable.getDrawNanAnnotation()&&r.getNanColor()&&(o+=1),e.renderable.getDrawBelowRangeSwatch()&&null!==(A=r.getUseBelowRangeColor)&&void 0!==A&&A.call(r)&&(o+=1),e.renderable.getDrawAboveRangeSwatch()&&null!==(t=r.getUseAboveRangeColor)&&void 0!==t&&t.call(r)&&(o+=1);var i=4*(1+o),a=i,s=1;r.getVectorMode()===je.COMPONENT&&(s=r.getVectorComponent()+1);for(var l=new Float64Array(3*i),c=new Uint16Array(5*a),u=new Float32Array(i*s),d=0,g=0,f=0;f<e.barSegments.length;f++){for(var h=e.barSegments[f],B=0;B<4;B++){n[0]=e.barPosition[0]+h.corners[B][0]*e.barSize[0],n[1]=e.barPosition[1]+h.corners[B][1]*e.barSize[1],l[3*d]=(.5*n[0]+.5)*e.lastSize[0],l[3*d+1]=(.5*n[1]+.5)*e.lastSize[1],l[3*d+2]=n[2];for(var p=0;p<s;p++)u[d*s+p]=e.lastTickBounds[0]+h.scalars[B]*(e.lastTickBounds[1]-e.lastTickBounds[0]);d++}c[5*g]=4,c[5*g+1]=d-4,c[5*g+2]=d-3,c[5*g+3]=d-2,c[5*g+4]=d-1,g++}var w=WA.ZP.newInstance({numberOfComponents:s,values:u,name:"Scalars"});e.polyData.getPointData().setScalars(w),e.polyData.getPoints().setData(l,3),e.polyData.getPoints().modified(),e.polyData.getPolys().setData(c,1),e.polyData.getPolys().modified(),e.polyData.modified()}}(A,e)}),"vtkScalarBarActorHelper");function et(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,function(A){return Je({automated:!0,autoLayout:null,axisLabel:"Scalar Value",barPosition:[0,0],barSize:[0,0],boxPosition:[.88,-.92],boxSize:[.1,1.1],scalarToColors:null,axisTitlePixelOffset:36,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:14,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"},generateTicks:null,drawNanAnnotation:!0,drawBelowRangeSwatch:!0,drawAboveRangeSwatch:!0},A)}(t)),e.autoLayout||(e.autoLayout=qe(0,e)),e.generateTicks||(e.generateTicks=$e()),ZA.ZP.extend(A,e,t),A.getProperty().setDiffuse(0),A.getProperty().setAmbient(1),n.default.setGet(A,e,["automated","autoLayout","axisTitlePixelOffset","axisLabel","scalarsToColors","tickLabelPixelOffset","generateTicks","drawNanAnnotation","drawBelowRangeSwatch","drawAboveRangeSwatch"]),n.default.get(A,e,["axisTextStyle","tickTextStyle"]),n.default.getArray(A,e,["barPosition","barSize","boxPosition","boxSize"]),n.default.setArray(A,e,["barPosition","barSize","boxPosition","boxSize"],2),function(A,e){e.classHierarchy.push("vtkScalarBarActor"),A.setTickTextStyle=function(t){e.tickTextStyle=Je(Je({},e.tickTextStyle),t),A.modified()},A.setAxisTextStyle=function(t){e.axisTextStyle=Je(Je({},e.axisTextStyle),t),A.modified()},A.resetAutoLayoutToDefault=function(){A.setAutoLayout(qe(0,e))},A.resetGenerateTicksToDefault=function(){A.setGenerateTicks($e())}}(A,e)}var tt={newInstance:n.default.newInstance(et,"vtkScalarBarActor"),extend:et,newScalarBarActorHelper:At};var nt={};function rt(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,nt,t),we.Z.extend(A,e,t),e.scalarBarActorHelper=tt.newScalarBarActorHelper(),function(A,e){e.classHierarchy.push("vtkOpenGLScalarBarActor"),A.buildPass=function(t){t&&(e._openGLRenderer=A.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),A.prepareNodes(),A.addMissingNode(e.scalarBarActorHelper.getBarActor()),A.addMissingNode(e.scalarBarActorHelper.getTmActor()),A.removeUnusedNodes())},A.opaquePass=function(A,t){if(A){var n=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,r=e._openGLRenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([r.usize,r.vsize],n,e._openGLRenderWindow.getRenderable())}}}(A,e)}var ot=(0,n.WL)(rt,"vtkOpenGLScalarBarActor");(0,me.vw)("vtkScalarBarActor",ot);t(25689),t(84262),t(25116),t(11230),t(67735);var it=t(18876),at=t(59318),st=it.ZP.CoordinateSystem;var lt={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function ct(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,lt,t),we.Z.extend(A,e,t),e.keyMatricesTime={},n.default.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},n.default.get(A,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],function(A,e){e.classHierarchy.push("vtkWebGPUActor"),A.buildPass=function(t){t&&(e.WebGPURenderer=A.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),void 0===e.propID&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),A.prepareNodes(),A.addMissingNode(e.renderable.getMapper()),A.removeUnusedNodes())},A.traverseOpaquePass=function(t){e.renderable&&e.renderable.getNestedVisibility()&&e.renderable.getIsOpaque()&&(!e.WebGPURenderer.getSelector()||e.renderable.getNestedPickable())&&(A.apply(t,!0),e.children[0]&&e.children[0].traverse(t),A.apply(t,!1))},A.traverseTranslucentPass=function(t){!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(A.apply(t,!0),e.children[0]&&e.children[0].traverse(t),A.apply(t,!1))},A.queryPass=function(A,t){if(A){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?t.incrementOpaqueActorCount():t.incrementTranslucentActorCount()}},A.getBufferShift=function(t){return A.getKeyMatrices(t),e.bufferShift},A.getKeyMatrices=function(A){if(Math.max(e.renderable.getMTime(),A.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.renderable.computeMatrix();var t=e.renderable.getMatrix();e.bufferShift[0]=t[3],e.bufferShift[1]=t[7],e.bufferShift[2]=t[11];var n=A.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===st.WORLD&&(e.bufferShift[0]-=n[0],e.bufferShift[1]-=n[1],e.bufferShift[2]-=n[2]),a.transpose(e.keyMatrices.bcwc,t),e.renderable.getIsIdentity()?a.identity(e.keyMatrices.normalMatrix):(a.copy(e.keyMatrices.normalMatrix,e.keyMatrices.bcwc),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,a.invert(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),a.transpose(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),a.translate(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===st.WORLD?a.translate(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-n[0],-n[1],-n[2]]):a.copy(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}(A,e)}var ut=n.default.newInstance(ct);(0,at.vw)("vtkActor",ut);var dt=it.ZP.CoordinateSystem;var gt={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function ft(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,gt,t),we.Z.extend(A,e,t),e.keyMatricesTime={},n.default.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},n.default.get(A,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],function(A,e){e.classHierarchy.push("vtkWebGPUActor2D"),A.buildPass=function(t){t&&(e.WebGPURenderer=A.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),void 0===e.propID&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),A.prepareNodes(),A.addMissingNode(e.renderable.getMapper()),A.removeUnusedNodes())},A.traverseOpaquePass=function(t){e.renderable&&e.renderable.getNestedVisibility()&&e.renderable.getIsOpaque()&&(!e.WebGPURenderer.getSelector()||e.renderable.getNestedPickable())&&(A.apply(t,!0),e.children[0]&&e.children[0].traverse(t),A.apply(t,!1))},A.traverseTranslucentPass=function(t){!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(A.apply(t,!0),e.children[0]&&e.children[0].traverse(t),A.apply(t,!1))},A.queryPass=function(A,t){if(A){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?t.incrementOpaqueActorCount():t.incrementTranslucentActorCount()}},A.getBufferShift=function(t){return A.getKeyMatrices(t),e.bufferShift},A.getKeyMatrices=function(A){if(Math.max(e.renderable.getMTime(),A.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.bufferShift[0]=0,e.bufferShift[1]=0,e.bufferShift[2]=0;var t=A.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===dt.WORLD&&(e.bufferShift[0]-=t[0],e.bufferShift[1]-=t[1],e.bufferShift[2]-=t[2]),a.identity(e.keyMatrices.bcwc),a.identity(e.keyMatrices.normalMatrix),a.translate(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===dt.WORLD?a.translate(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-t[0],-t[1],-t[2]]):a.copy(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}(A,e)}var ht=n.default.newInstance(ft);(0,at.vw)("vtkActor2D",ht);var Bt={};function pt(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,Bt,t),we.Z.extend(A,e,t),e.CubeAxesActorHelper=pe.newCubeAxesActorHelper(),function(A,e){e.classHierarchy.push("vtkWebGPUCubeAxesActor"),A.buildPass=function(t){t&&(e.WebGPURenderer=A.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),A.prepareNodes(),A.addMissingNode(e.CubeAxesActorHelper.getTmActor()),A.addMissingNode(e.renderable.getGridActor()),A.removeUnusedNodes())},A.opaquePass=function(A,t){if(A){var n=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,r=e.WebGPURenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([r.usize,r.vsize],n,e.WebGPURenderWindow.getRenderable())}}}(A,e)}var wt=(0,n.WL)(pt,"vtkWebGPUCubeAxesActor");(0,at.vw)("vtkCubeAxesActor",wt);var mt=t(11622),vt=t(81911),Ct=t(67267),Ut=t(31426);function Qt(A,e){var t=Object.keys(A);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(A);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(A,e).enumerable}))),t.push.apply(t,n)}return t}var yt=ke.DisplayLocation;var It={color:[1,1,1],opacity:1,pointSize:1,lineWidth:1,representation:Ut.hX.SURFACE,displayLocation:yt.FOREGROUND};function Ft(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,It,t),n.default.obj(A,e),n.default.setGet(A,e,["opacity","lineWidth","pointSize","displayLocation","representation"]),n.default.setGetArray(A,e,["color"],3),function(A,e){e.classHierarchy.push("vtkProperty2D"),A.setDisplayLocationToBackground=function(){return A.setDisplayLocation(yt.BACKGROUND)},A.setDisplayLocationToForeground=function(){return A.setDisplayLocation(yt.FOREGROUND)},A.setRepresentationToWireframe=function(){return A.setRepresentation(Ut.hX.WIREFRAME)},A.setRepresentationToSurface=function(){return A.setRepresentation(Ut.hX.SURFACE)},A.setRepresentationToPoints=function(){return A.setRepresentation(Ut.hX.POINTS)},A.getRepresentationAsString=function(){return n.default.enumToString(Ut.hX,e.representation)}}(A,e)}var bt=function(A){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Qt(Object(t),!0).forEach((function(e){(0,o.Z)(A,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(t)):Qt(Object(t)).forEach((function(e){Object.defineProperty(A,e,Object.getOwnPropertyDescriptor(t,e))}))}return A}({newInstance:n.default.newInstance(Ft,"vtkProperty2D"),extend:Ft},ke),Et=t(49813),Tt=t(16377),St=t(98367),Pt=t(69083),xt=mt.ZP.BufferUsage,Ht=mt.ZP.PrimitiveTypes,Dt=Ct.ZP.Representation,Lt=XA.ZP.ScalarMode,Ot=it.ZP.CoordinateSystem,Mt=bt.DisplayLocation;function _t(A){return A.indexOf("edge")>=0}var kt={is2D:!1,cellArray:null,currentInput:null,cellOffset:0,primitiveType:0,colorTexture:null,renderEncoder:null,textures:null};function Vt(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,kt,t),St.ZP.extend(A,e,t),e.fragmentShaderTemplate='\nstruct PBRData {\n  diffuse: vec3<f32>,\n  specular: vec3<f32>,\n}\n\n// Dot product with the max already in it\nfn mdot(a: vec3<f32>, b: vec3<f32>) -> f32 {\n  return max(0.0, dot(a, b));\n}\n// Dot product with a max in it that does not allow for negative values\n// Physically based rendering is accurate as long as normals are accurate,\n// however this is pretty often not the case. In order to prevent negative\n// values from ruining light calculations and creating zones of zero light,\n// this remapping is used, which smoothly clamps the dot product between\n// zero and one while still maintaining a good amount of accuracy.\nfn cdot(a: vec3<f32>, b: vec3<f32>) -> f32 {\n  var d: f32 = max(0.0, dot(a, b));\n  d = pow((d + 1) / 2.0, 2.6);\n  return d;\n}\n\n// Lambertian diffuse model\nfn lambertDiffuse(base: vec3<f32>, N: vec3<f32>, L: vec3<f32>) -> vec3<f32> {\n  var pi: f32 = 3.14159265359; \n  var NdotL: f32 = mdot(N, L);\n  NdotL = pow(NdotL, 1.5);\n  return (base/pi)*NdotL;\n}\n\n// Yasuhiro Fujii improvement on the Oren-Nayar model\n// https://mimosa-pudica.net/improved-oren-nayar.html\n// p is surface color, o is roughness\nfn fujiiOrenNayar(p: vec3<f32>, o: f32, N: vec3<f32>, L: vec3<f32>, V: vec3<f32>) -> vec3<f32> {\n  var invpi: f32 = 0.31830988618; // 1/pi\n\n  var o2 = o*o;\n  var NdotL: f32 = mdot(N, L);\n  NdotL = pow(NdotL, 1.5); // Less physically accurate, but hides the "seams" between lights better\n\n  var NdotV: f32 = mdot(N, V);\n  var LdotV: f32 = mdot(L, V);\n\n  var s: f32 = LdotV - NdotL*NdotV;\n  var t: f32 = mix(1, max(NdotL, NdotV), step(0, s)); // Mix with step is the equivalent of an if statement\n  var A: vec3<f32> = 0.5*(o2 / (o2 + 0.33)) + 0.17*p*(o2 / (o2 + 0.13));\n  A = invpi*(1 - A);\n  var B: f32 = 0.45*(o2 / (o2 + 0.09));\n  B = invpi*B;\n\n  return p*NdotL*(A + B*(s/t));\n}\n\n// Fresnel portion of BRDF (IOR only, simplified)\nfn schlickFresnelIOR(V: vec3<f32>, N: vec3<f32>, ior: f32, k: f32) -> f32 {\n  var NdotV: f32 = mdot(V, N);\n  var F0: f32 = (pow((ior - 1.0), 2) + k*k) / (pow((ior + 1.0), 2) + k*k); // This takes into account the roughness, which the other one does not\n  return F0 + (1 - F0) * pow((1-NdotV), 5); \n}\n\n// Fresnel portion of BRDF (Color ior, better)\nfn schlickFresnelRGB(V: vec3<f32>, N: vec3<f32>, F0: vec3<f32>) -> vec3<f32> {\n  var NdotV: f32 = mdot(V, N);\n  return F0 + (1 - F0) * pow((1-NdotV), 5); \n}\n\n// Normal portion of BRDF\n// https://learnopengl.com/PBR/Theory\n// Trowbridge-Reitz GGX functions: normal, halfway, roughness^2\nfn trGGX(N: vec3<f32>, H: vec3<f32>, a: f32) -> f32 {\n  var pi: f32 = 3.14159265359; \n\n  var a2: f32 = a*a;\n  var NdotH = mdot(N, H);\n  var NdotH2 = NdotH*NdotH;\n  \n  var denom: f32 = NdotH2 * (a2 - 1.0) + 1.0;\n\n  return a2 / max((pi*denom*denom), 0.000001);\n}\n\n// A VERY bad approximation of anisotropy. Real anisotropic calculations require tangent and bitangent\nfn anisotrophicTrGGX(N: vec3<f32>, H: vec3<f32>, O: vec3<f32>, s: f32, a: f32) -> f32 {\n  var Op: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(O) * s, 0.)).xyz;\n\n  var ggx1: f32 = trGGX(N + Op*s, H, a);\n  var ggx2: f32 = trGGX(N - Op*s, H, a);\n  return (0.5 * ggx1 + 0.5 * ggx2);\n}\n\n// Geometry portion of BRDF\nfn schlickGGX(N: vec3<f32>, X: vec3<f32>, k: f32) -> f32 {\n  var NdotX = cdot(N, X);\n  return NdotX / max(0.000001, (NdotX*(1-k) + k));\n}\n\nfn smithSurfaceRoughness(N: vec3<f32>, V: vec3<f32>, L: vec3<f32>, k: f32) -> f32 {\n  var ggx1: f32 = min(1, schlickGGX(N, V, k));\n  var ggx2: f32 = min(1, schlickGGX(N, L, k));\n  return ggx1*ggx2;\n}\n\n// BRDF Combination\nfn cookTorrance(D: f32, F: f32, G: f32, N: vec3<f32>, V: vec3<f32>, L: vec3<f32>) -> f32 {\n  var num: f32 = D*F*G;\n  var denom: f32 = 4*cdot(V, N)*cdot(L, N);\n\n  return num / max(denom, 0.000001);\n}\n\n// Different lighting calculations for different light sources\nfn calcDirectionalLight(N: vec3<f32>, V: vec3<f32>, ior: f32, roughness: f32, metallic: f32, direction: vec3<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {  \n  var L: vec3<f32> = normalize(direction); // Light Vector\n  var H: vec3<f32> = normalize(L + V); // Halfway Vector\n\n  var alpha = roughness*roughness;\n  var k: f32 = alpha*alpha / 2;\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1, G, N, V, L); // Fresnel term is replaced with 1 because it is added later\n  var incoming: vec3<f32> = color;\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5);\n\n  var specular: vec3<f32> = brdf*incoming*angle;\n  // Oren-Nayar gives a clay-like effect when fully rough which some people may not want, so it might be better to give a separate\n  // control property for the diffuse vs specular roughness\n  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V); \n  // Stores the specular and diffuse separately to allow for finer post processing\n  var out = PBRData(diffuse, specular);\n  \n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\n// TODO: find some way to reduce the number of arguments going in here\nfn calcPointLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, ior: f32, roughness: f32, metallic: f32, position: vec3<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {\n  var L: vec3<f32> = normalize(position - fragPos); // Light Vector\n  var H: vec3<f32> = normalize(L + V); // Halfway Vector\n  var dist = distance(position, fragPos);\n\n  var alpha = roughness*roughness;\n  var k: f32 = alpha*alpha / 2; // could also be pow(alpha + 1.0, 2) / 8\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1, G, N, V, L);  \n  var incoming: vec3<f32> = color * (1. / (dist*dist));\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" bewteen light sources\n\n  var specular: vec3<f32> = brdf*incoming*angle;\n  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V);\n\n  // Stores the specular and diffuse separately to allow for finer post processing\n  // Could also be done (propably more properly) with a struct\n  var out = PBRData(diffuse, specular);\n  \n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\n// For a reason unknown to me, spheres dont seem to behave propperly with head-on spot lights\nfn calcSpotLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, ior: f32, roughness: f32, metallic: f32, position: vec3<f32>, direction: vec3<f32>, cones: vec2<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {\n  var L: vec3<f32> = normalize(position - fragPos);\n  var H: vec3<f32> = normalize(L + V); // Halfway Vector\n  var dist = distance(position, fragPos);\n\n  var alpha = roughness*roughness;\n  var k: f32 = alpha*alpha / 2; // could also be pow(alpha + 1.0, 2) / 8\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1, G, N, V, L);  \n  \n  // Cones.x is the inner phi and cones.y is the outer phi\n  var theta: f32 = mdot(normalize(direction), L);\n  var epsilon: f32 = cones.x - cones.y;\n  var intensity: f32 = (theta - cones.y) / epsilon;\n  intensity = clamp(intensity, 0.0, 1.0);\n  intensity /= dist*dist;\n\n  var incoming: vec3<f32> = color * intensity;\n\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" bewteen light sources\n\n  var specular: vec3<f32> = brdf*incoming*angle;\n  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V);\n\n  // Stores the specular and diffuse separately to allow for finer post processing\n  // Could also be done (propably more properly) with a struct\n  var out = PBRData(diffuse, specular);\n  \n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\n// Environment mapping stuff\n// Takes in a vector and converts it to an equivalent coordinate in a rectilinear texture. Should be replaced with cubemaps at some point\nfn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {\n  var tau: f32 = 6.28318530718;\n  var pi: f32 = 3.14159265359;\n  var out: vec2<f32> = vec2<f32>(0.0);\n\n  out.x = atan2(dir.z, dir.x) / tau;\n  out.x += 0.5;\n\n  var phix: f32 = length(vec2(dir.x, dir.z));\n  out.y = atan2(dir.y, phix) / pi + 0.5;\n\n  return out;\n}\n\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::TCoord::Dec\n\n// optional surface normal declaration\n//VTK::Normal::Dec\n\n//VTK::Select::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : fragmentOutput;\n\n  // Temporary ambient, diffuse, and opacity\n  var ambientColor: vec4<f32> = mapperUBO.AmbientColor;\n  var diffuseColor: vec4<f32> = mapperUBO.DiffuseColor;\n  var opacity: f32 = mapperUBO.Opacity;\n\n  // This should be declared somewhere else\n  var _diffuseMap: vec4<f32> = vec4<f32>(1);\n  var _roughnessMap: vec4<f32> = vec4<f32>(1);\n  var _metallicMap: vec4<f32> = vec4<f32>(1);\n  var _normalMap: vec4<f32> = vec4<f32>(0, 0, 1, 0); // normal map was setting off the normal vector detection in fragment\n  var _ambientOcclusionMap: vec4<f32> = vec4<f32>(1);\n  var _emissionMap: vec4<f32> = vec4<f32>(0);\n\n  //VTK::Color::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Normal::Impl\n\n  var computedColor: vec4<f32> = vec4<f32>(diffuseColor.rgb, 1.0);\n\n  //VTK::Light::Impl\n\n  //VTK::Select::Impl\n\n  if (computedColor.a == 0.0) { discard; };\n\n  //VTK::Position::Impl\n\n  //VTK::RenderEncoder::Impl\n\n  return output;\n}\n',e.vertexShaderTemplate="\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::Normal::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Select::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@vertex\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : vertexOutput;\n\n  var vertex: vec4<f32> = vertexBC;\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Select::Impl\n\n  //VTK::Position::Impl\n\n  return output;\n}\n",e._tmpMat3=vt.identity(new Float64Array(9)),e._tmpMat4=a.identity(new Float64Array(16)),e.UBO=Tt.ZP.newInstance({label:"mapperUBO"}),e.UBO.addEntry("BCWCMatrix","mat4x4<f32>"),e.UBO.addEntry("BCSCMatrix","mat4x4<f32>"),e.UBO.addEntry("MCWCNormals","mat4x4<f32>"),e.UBO.addEntry("AmbientColor","vec4<f32>"),e.UBO.addEntry("DiffuseColor","vec4<f32>"),e.UBO.addEntry("EdgeColor","vec4<f32>"),e.UBO.addEntry("SpecularColor","vec4<f32>"),e.UBO.addEntry("AmbientIntensity","f32"),e.UBO.addEntry("DiffuseIntensity","f32"),e.UBO.addEntry("Roughness","f32"),e.UBO.addEntry("Metallic","f32"),e.UBO.addEntry("Ambient","f32"),e.UBO.addEntry("Normal","f32"),e.UBO.addEntry("Emission","f32"),e.UBO.addEntry("NormalStrength","f32"),e.UBO.addEntry("BaseIOR","f32"),e.UBO.addEntry("SpecularIntensity","f32"),e.UBO.addEntry("LineWidth","f32"),e.UBO.addEntry("Opacity","f32"),e.UBO.addEntry("ZValue","f32"),e.UBO.addEntry("PropID","u32"),e.UBO.addEntry("ClipNear","f32"),e.UBO.addEntry("ClipFar","f32"),e.UBO.addEntry("Time","u32"),(0,n.g2)(A,e,["cellArray","currentInput","cellOffset","is2D","primitiveType","renderEncoder"]),e.textures=[],function(A,e){e.classHierarchy.push("vtkWebGPUCellArrayMapper"),A.buildPass=function(t){t&&(e.is2D?(e.WebGPUActor=A.getFirstAncestorOfType("vtkWebGPUActor2D"),e.forceZValue=!0):(e.WebGPUActor=A.getFirstAncestorOfType("vtkWebGPUActor"),e.forceZValue=!1),e.coordinateSystem=e.WebGPUActor.getRenderable().getCoordinateSystem(),e.useRendererMatrix=e.coordinateSystem!==Ot.DISPLAY,e.WebGPURenderer=e.WebGPUActor.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.device=e.WebGPURenderWindow.getDevice())},A.translucentPass=function(t){t&&(A.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,A.draw))},A.opaquePass=function(t){t&&(A.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,A.draw))},A.updateUBO=function(){var t=e.WebGPUActor.getRenderable().getProperty(),n=e.UBO.getSendTime();if(A.getMTime()>n||t.getMTime()>n||e.renderable.getMTime()>n){var r,o=e.WebGPUActor.getKeyMatrices(e.WebGPURenderer);if(e.UBO.setArray("BCWCMatrix",o.bcwc),e.UBO.setArray("BCSCMatrix",o.bcsc),e.UBO.setArray("MCWCNormals",o.normalMatrix),e.is2D){e.UBO.setValue("ZValue",e.WebGPUActor.getRenderable().getProperty().getDisplayLocation()===Mt.FOREGROUND?1:0);var i=t.getColorByReference();e.UBO.setValue("AmbientIntensity",1),e.UBO.setArray("DiffuseColor",[i[0],i[1],i[2],1]),e.UBO.setValue("DiffuseIntensity",0),e.UBO.setValue("SpecularIntensity",0)}else{var a=t.getAmbientColorByReference();e.UBO.setValue("AmbientIntensity",t.getAmbient()),e.UBO.setArray("AmbientColor",[a[0],a[1],a[2],1]),e.UBO.setValue("DiffuseIntensity",t.getDiffuse()),a=t.getDiffuseColorByReference(),e.UBO.setArray("DiffuseColor",[a[0],a[1],a[2],1]),e.UBO.setValue("Roughness",t.getRoughness()),e.UBO.setValue("BaseIOR",t.getBaseIOR()),e.UBO.setValue("Metallic",t.getMetallic()),e.UBO.setValue("NormalStrength",t.getNormalStrength()),e.UBO.setValue("Emission",t.getEmission()),e.UBO.setValue("SpecularIntensity",t.getSpecular()),a=t.getSpecularColorByReference(),e.UBO.setArray("SpecularColor",[a[0],a[1],a[2],1])}var s=null===(r=t.getEdgeColorByReference)||void 0===r?void 0:r.call(t);s&&e.UBO.setArray("EdgeColor",[s[0],s[1],s[2],1]),e.UBO.setValue("LineWidth",t.getLineWidth()),e.UBO.setValue("Opacity",t.getOpacity()),e.UBO.setValue("PropID",e.WebGPUActor.getPropID());var l=e.WebGPURenderWindow.getDevice();e.UBO.sendIfNeeded(l)}},A.haveWideLines=function(){var A=e.WebGPUActor.getRenderable(),t=A.getProperty().getRepresentation();return!(A.getProperty().getLineWidth()<=1)&&e.primitiveType!==Ht.Verts&&(e.primitiveType!==Ht.Triangles&&e.primitiveType!==Ht.TriangleStrips||t===Dt.WIREFRAME)},A.replaceShaderPosition=function(t,n,r){var o=n.getShaderDescription("vertex");o.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),o.hasOutput("vertexVC")||o.addOutput("vec4<f32>","vertexVC");var i=o.getCode();e.useRendererMatrix?(i=Et.ZP.substitute(i,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = rendererUBO.SCPCMatrix*mapperUBO.BCSCMatrix*vertexBC;","    output.vertexVC = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);","//VTK::Position::Impl"]).result,e.forceZValue&&(i=Et.ZP.substitute(i,"//VTK::Position::Impl",["pCoord = vec4<f32>(pCoord.xyz/pCoord.w, 1.0);","pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)):(i=Et.ZP.substitute(i,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = mapperUBO.BCSCMatrix*vertexBC;","    pCoord.x = 2.0* pCoord.x / rendererUBO.viewportSize.x - 1.0;","    pCoord.y = 2.0* pCoord.y / rendererUBO.viewportSize.y - 1.0;","    pCoord.z = 0.5 - 0.5 * pCoord.z;","//VTK::Position::Impl"]).result,e.forceZValue&&(i=Et.ZP.substitute(i,"//VTK::Position::Impl",["    pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)),A.haveWideLines()&&(o.addBuiltinInput("u32","@builtin(instance_index) instanceIndex"),i=Et.ZP.substitute(i,"//VTK::Position::Impl",["    var tmpPos: vec4<f32> = pCoord;","    var numSteps: f32 = ceil(mapperUBO.LineWidth - 1.0);","    var offset: f32 = (mapperUBO.LineWidth - 1.0) * (f32(input.instanceIndex / 2u) - numSteps/2.0) / numSteps;","    var tmpPos2: vec3<f32> = tmpPos.xyz / tmpPos.w;","    tmpPos2.x = tmpPos2.x + 2.0 * (f32(input.instanceIndex) % 2.0) * offset / rendererUBO.viewportSize.x;","    tmpPos2.y = tmpPos2.y + 2.0 * (f32(input.instanceIndex + 1u) % 2.0) * offset / rendererUBO.viewportSize.y;","    tmpPos2.z = min(1.0, tmpPos2.z + 0.00001);","    pCoord = vec4<f32>(tmpPos2.xyz * tmpPos.w, tmpPos.w);","//VTK::Position::Impl"]).result),i=Et.ZP.substitute(i,"//VTK::Position::Impl",["    output.Position = pCoord;"]).result,o.setCode(i)},e.shaderReplacements.set("replaceShaderPosition",A.replaceShaderPosition),A.replaceShaderNormal=function(A,t,n){var r=n.getBuffer("normalMC"),o=e.WebGPUActor.getRenderable();if(r){var i=t.getShaderDescription("vertex");i.hasOutput("normalVC")||i.addOutput("vec3<f32>","normalVC",r.getArrayInformation()[0].interpolation),i.hasOutput("tangentVC")||i.addOutput("vec3<f32>","tangentVC",r.getArrayInformation()[0].interpolation),i.hasOutput("bitangentVC")||i.addOutput("vec3<f32>","bitangentVC",r.getArrayInformation()[0].interpolation);var a=i.getCode();a=Et.ZP.substitute(a,"//VTK::Normal::Impl",["  output.normalVC = normalize((rendererUBO.WCVCNormals * mapperUBO.MCWCNormals * normalMC).xyz);","  var c1: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 0, 1));","  var c2: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 1, 0));","  var tangent: vec3<f32> = mix(c1, c2, distance(c1, c2));","  output.tangentVC = normalize(tangent);","  output.bitangentVC = normalize(cross(output.normalVC, tangent));"]).result,i.setCode(a);var s=t.getShaderDescription("fragment");a=s.getCode(),a=o.getProperty().getNormalTexture()?Et.ZP.substitute(a,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  var tangent: vec3<f32> = input.tangentVC;","  var bitangent: vec3<f32> = input.bitangentVC;","  var TCVCMatrix: mat3x3<f32> = mat3x3<f32>(","    tangent.x, bitangent.x, normal.x,","    tangent.y, bitangent.y, normal.y,","    tangent.z, bitangent.z, normal.z,","  );","  var mappedNormal: vec3<f32> = TCVCMatrix * (_normalMap.xyz * 2 - 1);","  normal = mix(normal, mappedNormal, mapperUBO.NormalStrength);","  normal = normalize(normal);"]).result:Et.ZP.substitute(a,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  normal = normalize(normal);"]).result,s.setCode(a)}},e.shaderReplacements.set("replaceShaderNormal",A.replaceShaderNormal),A.replaceShaderLight=function(A,t,n){if(!A.includes("sel")){var r=t.getShaderDescription("vertex");r.hasOutput("vertexVC")||r.addOutput("vec4<f32>","vertexVC");var o=e.WebGPURenderer.getRenderable(),i=t.getShaderDescription("fragment"),a=i.getCode();if(!a.includes("var normal:")||!e.useRendererMatrix||_t(A)||e.is2D||A.includes("sel"))a=Et.ZP.substitute(a,"//VTK::Light::Impl",["  var diffuse: vec3<f32> = diffuseColor.rgb;","  var specular: vec3<f32> = mapperUBO.SpecularColor.rgb * mapperUBO.SpecularColor.a;","  computedColor = vec4<f32>(diffuse * _diffuseMap.rgb, mapperUBO.Opacity);"]).result,i.setCode(a);else{var s,l=["  var pi: f32 = 3.14159265359;","  var fragPos: vec3<f32> = vec3<f32>(input.vertexVC.xyz);","  var V: vec3<f32> = mix(normalize(-fragPos), vec3<f32>(0, 0, 1), f32(rendererUBO.cameraParallel)); // View Vector","  var baseColor: vec3<f32> = _diffuseMap.rgb * diffuseColor.rgb;","  var roughness: f32 = max(0.000001, mapperUBO.Roughness * _roughnessMap.r);","  var metallic: f32 = mapperUBO.Metallic * _metallicMap.r;","  var alpha: f32 = roughness*roughness;","  var ior: f32 = mapperUBO.BaseIOR;","  var k: f32 = alpha*alpha / 2;","  var diffuse: vec3<f32> = vec3<f32>(0.);","  var specular: vec3<f32> = vec3<f32>(0.);","  var emission: vec3<f32> = _emissionMap.rgb * mapperUBO.Emission;","  {","    var i: i32 = 0;","    loop {","      if !(i < rendererUBO.LightCount) { break; }","      switch (i32(rendererLightSSBO.values[i].LightData.x)) {","         // Point Light","         case 0 {","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var pos: vec3<f32> = (rendererLightSSBO.values[i].LightPos).xyz;","           var calculated: PBRData = calcPointLight(normal, V, fragPos, ior, roughness, metallic, pos, color, baseColor);","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","          }","         // Directional light","         case 1 {","           var dir: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz;","           dir = normalize(dir);","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var calculated: PBRData = calcDirectionalLight(normal, V, ior, roughness, metallic, dir, color, baseColor); // diffuseColor.rgb needs to be fixed with a more dynamic diffuse color","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","         }","         // Spot Light","         case 2 {","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var pos: vec3<f32> = (rendererLightSSBO.values[i].LightPos).xyz;","           var dir: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz;","           dir = normalize(dir);","           var cones: vec2<f32> = vec2<f32>(rendererLightSSBO.values[i].LightData.y, rendererLightSSBO.values[i].LightData.z);","           var calculated: PBRData = calcSpotLight(normal, V, fragPos, ior, roughness, metallic, pos, dir, cones, color, baseColor);","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","         }","         default { continue; }","       }","      continuing { i++; }","    }","  }","  var fresnel: f32 = schlickFresnelIOR(V, normal, ior, k); // Fresnel","  fresnel = min(1, fresnel);","  // This could be controlled with its own variable (that isnt base color) for better artistic control","  var fresnelMetallic: vec3<f32> = schlickFresnelRGB(V, normal, baseColor); // Fresnel for metal, takes color into account","  var kS: vec3<f32> = mix(vec3<f32>(fresnel), fresnelMetallic, metallic);","  kS = min(vec3<f32>(1), kS);","  var kD: vec3<f32> = (1.0 - kS) * (1.0 - metallic);","  var PBR: vec3<f32> = mapperUBO.DiffuseIntensity*kD*diffuse + kS*specular;","  PBR += emission;","  computedColor = vec4<f32>(PBR, mapperUBO.Opacity);"];null!==(s=o.getEnvironmentTexture())&&void 0!==s&&s.getImageLoaded()&&l.push("  // To get diffuse IBL, the texture is sampled with normals in worldspace","  var diffuseIBLCoords: vec3<f32> = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(normal, 1.)).xyz;","  var diffuseCoords: vec2<f32> = vecToRectCoord(diffuseIBLCoords);","  // To get specular IBL, the texture is sampled as the worldspace reflection between the normal and view vectors","  // Reflections are first calculated in viewspace, then converted to worldspace to sample the environment","  var VreflN: vec3<f32> = normalize(reflect(-V, normal));","  var reflectionIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(VreflN, 1.)).xyz;","  var specularCoords: vec2<f32> = vecToRectCoord(reflectionIBLCoords);","  var diffuseIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, diffuseCoords, rendererUBO.MaxEnvironmentMipLevel);","  var level = roughness * rendererUBO.MaxEnvironmentMipLevel;","  var specularIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, specularCoords, level);","  var specularIBLContribution: vec3<f32> = specularIBL.rgb*rendererUBO.BackgroundSpecularStrength;","  computedColor += vec4<f32>(specularIBLContribution*kS, 0);","  var diffuseIBLContribution: vec3<f32> = diffuseIBL.rgb*rendererUBO.BackgroundDiffuseStrength;","  diffuseIBLContribution *= baseColor * _ambientOcclusionMap.rgb;","  computedColor += vec4<f32>(diffuseIBLContribution*kD, 0);"),a=Et.ZP.substitute(a,"//VTK::Light::Impl",l).result,i.setCode(a)}}},e.shaderReplacements.set("replaceShaderLight",A.replaceShaderLight),A.replaceShaderColor=function(A,e,t){if(_t(A)){var n=e.getShaderDescription("fragment"),r=n.getCode();return r=Et.ZP.substitute(r,"//VTK::Color::Impl",["ambientColor = mapperUBO.EdgeColor;","diffuseColor = mapperUBO.EdgeColor;"]).result,void n.setCode(r)}var o=t.getBuffer("colorVI");if(o){var i=e.getShaderDescription("vertex");i.addOutput("vec4<f32>","color",o.getArrayInformation()[0].interpolation);var a=i.getCode();a=Et.ZP.substitute(a,"//VTK::Color::Impl",["  output.color = colorVI;"]).result,i.setCode(a);var s=e.getShaderDescription("fragment");a=s.getCode(),a=Et.ZP.substitute(a,"//VTK::Color::Impl",["ambientColor = input.color;","diffuseColor = input.color;","opacity = mapperUBO.Opacity * input.color.a;"]).result,s.setCode(a)}},e.shaderReplacements.set("replaceShaderColor",A.replaceShaderColor),A.replaceShaderTCoord=function(A,t,n){var r,o,i,a,s,l,c,u,d,g,f,h,B,p,w,m,v,C;if(n.hasAttribute("tcoord")){var U=t.getShaderDescription("vertex"),Q=n.getBuffer("tcoord"),y=Pt.Z.getNumberOfComponentsFromBufferFormat(Q.getArrayInformation()[0].format),I=U.getCode();U.addOutput("vec".concat(y,"<f32>"),"tcoordVS"),I=Et.ZP.substitute(I,"//VTK::TCoord::Impl",["  output.tcoordVS = tcoord;"]).result,U.setCode(I);var F=t.getShaderDescription("fragment");I=F.getCode();var b,E,T=e.WebGPUActor.getRenderable(),S=function(A){return!!A&&A.getDimensionality()===y},P=[];(null!==(r=(o=T.getProperty()).getDiffuseTexture)&&void 0!==r&&null!==(i=r.call(o))&&void 0!==i&&i.getImageLoaded()||T.getTextures()[0]||e.colorTexture)&&(S(null===(b=(E=T.getProperty()).getDiffuseTexture)||void 0===b?void 0:b.call(E))||S(T.getTextures()[0])||S(e.colorTexture))&&P.push("_diffuseMap = textureSample(DiffuseTexture, DiffuseTextureSampler, input.tcoordVS);"),null!==(a=(s=T.getProperty()).getRoughnessTexture)&&void 0!==a&&null!==(l=a.call(s))&&void 0!==l&&l.getImageLoaded()&&S(T.getProperty().getRoughnessTexture())&&P.push("_roughnessMap = textureSample(RoughnessTexture, RoughnessTextureSampler, input.tcoordVS);"),null!==(c=(u=T.getProperty()).getMetallicTexture)&&void 0!==c&&null!==(d=c.call(u))&&void 0!==d&&d.getImageLoaded()&&S(T.getProperty().getMetallicTexture())&&P.push("_metallicMap = textureSample(MetallicTexture, MetallicTextureSampler, input.tcoordVS);"),null!==(g=(f=T.getProperty()).getNormalTexture)&&void 0!==g&&null!==(h=g.call(f))&&void 0!==h&&h.getImageLoaded()&&S(T.getProperty().getNormalTexture())&&P.push("_normalMap = textureSample(NormalTexture, NormalTextureSampler, input.tcoordVS);"),null!==(B=(p=T.getProperty()).getAmbientOcclusionTexture)&&void 0!==B&&null!==(w=B.call(p))&&void 0!==w&&w.getImageLoaded()&&S(T.getProperty().getAmbientOcclusionTexture())&&P.push("_ambientOcclusionMap = textureSample(AmbientOcclusionTexture, AmbientOcclusionTextureSampler, input.tcoordVS);"),null!==(m=(v=T.getProperty()).getEmissionTexture)&&void 0!==m&&null!==(C=m.call(v))&&void 0!==C&&C.getImageLoaded()&&S(T.getProperty().getEmissionTexture())&&P.push("_emissionMap = textureSample(EmissionTexture, EmissionTextureSampler, input.tcoordVS);"),I=Et.ZP.substitute(I,"//VTK::TCoord::Impl",P).result,F.setCode(I)}},e.shaderReplacements.set("replaceShaderTCoord",A.replaceShaderTCoord),A.replaceShaderSelect=function(A,e,t){if(A.includes("sel")){var n=e.getShaderDescription("fragment"),r=n.getCode();r=Et.ZP.substitute(r,"//VTK::Select::Impl",["  var compositeID: u32 = 0u;"]).result,n.setCode(r)}},e.shaderReplacements.set("replaceShaderSelect",A.replaceShaderSelect),A.getUsage=function(A,e){return A===Dt.POINTS||e===Ht.Points?xt.Verts:e===Ht.Lines?xt.Lines:A===Dt.WIREFRAME?e===Ht.Triangles?xt.LinesFromTriangles:xt.LinesFromStrips:e===Ht.Triangles?xt.Triangles:e===Ht.TriangleStrips?xt.Strips:e===Ht.TriangleEdges?xt.LinesFromTriangles:xt.LinesFromStrips},A.getHashFromUsage=function(A){return"pt".concat(A)},A.getTopologyFromUsage=function(A){switch(A){case xt.Triangles:return"triangle-list";case xt.Verts:return"point-list";case xt.Lines:default:return"line-list"}},A.buildVertexInput=function(){var t,n,r=e.currentInput,o=e.cellArray,i=e.primitiveType,a=e.WebGPUActor.getRenderable().getProperty().getRepresentation(),s=e.WebGPURenderWindow.getDevice(),l=!1;i===Ht.TriangleEdges&&(l=!0,a=Dt.WIREFRAME);var c,u=e.vertexInput,d=r.getPoints();if(o){var g={hash:"R".concat(a,"P").concat(i).concat(o.getMTime()),usage:xt.Index,cells:o,numberOfPoints:d.getNumberOfPoints(),primitiveType:i,representation:a};c=s.getBufferManager().getBuffer(g),u.setIndexBuffer(c)}else u.setIndexBuffer(null);if(d){var f=e.WebGPUActor.getBufferShift(e.WebGPURenderer),h={hash:"".concat(d.getMTime(),"I").concat(c.getMTime()).concat(f.join(),"float32x4"),usage:xt.PointArray,format:"float32x4",dataArray:d,indexBuffer:c,shift:f,packExtra:!0},B=s.getBufferManager().getBuffer(h);u.addBuffer(B,["vertexBC"])}else u.removeBufferIfPresent("vertexBC");var p=A.getUsage(a,i);if(e._usesCellNormals=!1,e.is2D||p!==xt.Triangles&&p!==xt.Strips)u.removeBufferIfPresent("normalMC");else{var w=r.getPointData().getNormals(),m={format:"snorm8x4",indexBuffer:c,packExtra:!0,shift:0,scale:127};if(w){m.hash="".concat(w.getMTime(),"I").concat(c.getMTime(),"snorm8x4"),m.dataArray=w,m.usage=xt.PointArray;var v=s.getBufferManager().getBuffer(m);u.addBuffer(v,["normalMC"])}else if(i===Ht.Triangles){e._usesCellNormals=!0,m.hash="PFN".concat(d.getMTime(),"I").concat(c.getMTime(),"snorm8x4"),m.dataArray=d,m.cells=o,m.usage=xt.NormalsFromPoints;var C=s.getBufferManager().getBuffer(m);u.addBuffer(C,["normalMC"])}else u.removeBufferIfPresent("normalMC")}var U=!1;if(e.renderable.getScalarVisibility()){var Q=e.renderable.getColorMapColors();if(Q&&!l){var y=e.renderable.getScalarMode(),I=!1;y!==Lt.USE_CELL_DATA&&y!==Lt.USE_CELL_FIELD_DATA&&y!==Lt.USE_FIELD_DATA&&r.getPointData().getScalars()||y===Lt.USE_POINT_FIELD_DATA||!Q||(I=!0);var F={usage:xt.PointArray,format:"unorm8x4",hash:"".concat(I).concat(Q.getMTime(),"I").concat(c.getMTime(),"unorm8x4"),dataArray:Q,indexBuffer:c,cellData:I,cellOffset:0},b=s.getBufferManager().getBuffer(F);u.addBuffer(b,["colorVI"]),U=!0}}U||u.removeBufferIfPresent("colorVI");var E=null;if((E=null!==(t=(n=e.renderable).getInterpolateScalarsBeforeMapping)&&void 0!==t&&t.call(n)&&e.renderable.getColorCoordinates()?e.renderable.getColorCoordinates():r.getPointData().getTCoords())&&!l){var T=s.getBufferManager().getBufferForPointArray(E,u.getIndexBuffer());u.addBuffer(T,["tcoord"])}else u.removeBufferIfPresent("tcoord")},A.updateTextures=function(){var A,t,n,r,o,i,a,s,l,c,u,d,g,f,h,B=[],p=[],w=null===(A=(t=e.renderable).getColorTextureMap)||void 0===A?void 0:A.call(t);w&&(e.colorTexture||(e.colorTexture=$A.newInstance({label:"polyDataColor"})),e.colorTexture.setInputData(w),p.push(["Diffuse",e.colorTexture]));var m=e.WebGPUActor.getRenderable(),v=e.WebGPURenderer.getRenderable(),C=[];if(null!==(n=(r=m.getProperty()).getDiffuseTexture)&&void 0!==n&&n.call(r)){var U=["Diffuse",m.getProperty().getDiffuseTexture()];C.push(U)}if(m.getTextures()[0]){var Q=["Diffuse",m.getTextures()[0]];C.push(Q)}if(e.colorTexture){var y=["Diffuse",e.colorTexture];C.push(y)}if(null!==(o=(i=m.getProperty()).getRoughnessTexture)&&void 0!==o&&o.call(i)){var I=["Roughness",m.getProperty().getRoughnessTexture()];C.push(I)}if(null!==(a=(s=m.getProperty()).getMetallicTexture)&&void 0!==a&&a.call(s)){var F=["Metallic",m.getProperty().getMetallicTexture()];C.push(F)}if(null!==(l=(c=m.getProperty()).getNormalTexture)&&void 0!==l&&l.call(c)){var b=["Normal",m.getProperty().getNormalTexture()];C.push(b)}if(null!==(u=(d=m.getProperty()).getAmbientOcclusionTexture)&&void 0!==u&&u.call(d)){var E=["AmbientOcclusion",m.getProperty().getAmbientOcclusionTexture()];C.push(E)}if(null!==(g=(f=m.getProperty()).getEmissionTexture)&&void 0!==g&&g.call(f)){var T=["Emission",m.getProperty().getEmissionTexture()];C.push(T)}if(null!==(h=v.getEnvironmentTexture)&&void 0!==h&&h.call(v)){var S=["Environment",v.getEnvironmentTexture()];C.push(S)}for(var P=0;P<C.length;P++)(C[P][1].getInputData()||C[P][1].getJsImageData()||C[P][1].getCanvas())&&p.push(C[P]),C[P][1].getImage()&&C[P][1].getImageLoaded()&&p.push(C[P]);for(var x=0;x<p.length;x++){var H=p[x][1],D=p[x][0],L=e.device.getTextureManager().getTextureForVTKTexture(H);if(L.getReady()){for(var O=!1,M=0;M<e.textures.length;M++)e.textures[M]===L&&(O=!0,B[M]=!0);if(!O){B[e.textures.length]=!0;var _=L.createView("".concat(D,"Texture"));e.textures.push(L),e.textureViews.push(_);var k=H.getInterpolate()?"linear":"nearest",V=null;!V&&H.getEdgeClamp()&&H.getRepeat()&&(V="mirror-repeat"),!V&&H.getEdgeClamp()&&(V="clamp-to-edge"),!V&&H.getRepeat()&&(V="repeat"),"Environment"!==D?_.addSampler(e.device,{addressModeU:V,addressModeV:V,addressModeW:V,minFilter:k,magFilter:k}):_.addSampler(e.device,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:k,magFilter:k,mipmapFilter:"linear"})}}}for(var R=e.textures.length-1;R>=0;R--)B[R]||(e.textures.splice(R,1),e.textureViews.splice(R,1))},A.computePipelineHash=function(){var t="pd".concat(e.useRendererMatrix?"r":"").concat(e.forceZValue?"z":"");if(e.primitiveType===Ht.TriangleEdges||e.primitiveType===Ht.TriangleStripEdges)t+="edge";else{if(e.vertexInput.hasAttribute("normalMC")&&(t+="n"),e.vertexInput.hasAttribute("colorVI")&&(t+="c"),e.vertexInput.hasAttribute("tcoord")){var n=e.vertexInput.getBuffer("tcoord"),r=Pt.Z.getNumberOfComponentsFromBufferFormat(n.getArrayInformation()[0].format);t+="t".concat(r)}e.textures.length&&(t+="tx".concat(e.textures.length))}e._usesCellNormals&&(t+="cn"),e.SSBO&&(t+="ssbo"),t+=A.getHashFromUsage(e.usage),t+=e.renderEncoder.getPipelineHash(),e.pipelineHash=t},A.updateBuffers=function(){e.primitiveType!==Ht.TriangleEdges&&e.primitiveType!==Ht.TriangleStripEdges&&A.updateTextures();var t=e.WebGPUActor.getRenderable(),n=t.getProperty().getRepresentation();e.usage=A.getUsage(n,e.primitiveType),A.buildVertexInput();var r=e.vertexInput.getBuffer("vertexBC");if(A.setNumberOfVertices(r.getSizeInBytes()/r.getStrideInBytes()),A.setTopology(A.getTopologyFromUsage(e.usage)),A.updateUBO(),A.haveWideLines()){var o=t.getProperty();A.setNumberOfInstances(Math.ceil(2*o.getLineWidth()))}else A.setNumberOfInstances(1)}}(A,e)}var Rt={newInstance:(0,n.WL)(Vt,"vtkWebGPUCellArrayMapper"),extend:Vt},Kt=mt.ZP.PrimitiveTypes;var Nt={primitives:null};function Zt(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,Nt,t),we.Z.extend(A,e,t),e.primitives=[],function(A,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper"),A.createCellArrayMapper=function(){return Rt.newInstance()},A.buildPass=function(t){if(t){e.WebGPUActor=A.getFirstAncestorOfType("vtkWebGPUActor"),e.renderable.getStatic()||e.renderable.update();var n=e.renderable.getInputData();e.renderable.mapScalars(n,1),A.updateCellArrayMappers(n)}},A.updateCellArrayMappers=function(t){for(var n=[t.getVerts(),t.getLines(),t.getPolys(),t.getStrips()],r=[],o=0,i=Kt.Points;i<=Kt.Triangles;i++)if(n[i].getNumberOfValues()>0){e.primitives[i]||(e.primitives[i]=A.createCellArrayMapper());var a=e.primitives[i];a.setCellArray(n[i]),a.setCurrentInput(t),a.setCellOffset(o),a.setPrimitiveType(i),a.setRenderable(e.renderable),o+=n[i].getNumberOfCells(),r.push(a)}else e.primitives[i]=null;if(e.WebGPUActor.getRenderable().getProperty().getEdgeVisibility())for(var s=Kt.TriangleEdges;s<=Kt.TriangleStripEdges;s++)if(n[s-2].getNumberOfValues()>0){e.primitives[s]||(e.primitives[s]=A.createCellArrayMapper());var l=e.primitives[s];l.setCellArray(n[s-2]),l.setCurrentInput(t),l.setCellOffset(e.primitives[s-2].getCellOffset()),l.setPrimitiveType(s),l.setRenderable(e.renderable),r.push(l)}else e.primitives[s]=null;A.prepareNodes(),A.addMissingChildren(r),A.removeUnusedNodes()}}(A,e)}var Gt=(0,n.WL)(Zt,"vtkWebGPUPolyDataMapper");function Wt(A,e){var t=Object.keys(A);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(A);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(A,e).enumerable}))),t.push.apply(t,n)}return t}(0,at.vw)("vtkMapper",Gt);var Xt=mt.ZP.PrimitiveTypes;function zt(A){return function(A){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Wt(Object(t),!0).forEach((function(e){(0,o.Z)(A,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(t)):Wt(Object(t)).forEach((function(e){Object.defineProperty(A,e,Object.getOwnPropertyDescriptor(t,e))}))}return A}({primitives:[]},A)}function Jt(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,zt(t)),we.Z.extend(A,e,t),e.primitives=[],function(A,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper2D"),A.createCellArrayMapper=function(){return Rt.newInstance()},A.buildPass=function(t){if(t){e.WebGPUActor=A.getFirstAncestorOfType("vtkWebGPUActor2D"),e.renderable.getStatic()||e.renderable.update();var n=e.renderable.getInputData();e.renderable.mapScalars(n,1),A.updateCellArrayMappers(n)}},A.updateCellArrayMappers=function(t){for(var n=[t.getVerts(),t.getLines(),t.getPolys(),t.getStrips()],r=[],o=0,i=Xt.Points;i<=Xt.Triangles;i++)if(n[i].getNumberOfValues()>0){e.primitives[i]||(e.primitives[i]=A.createCellArrayMapper());var a=e.primitives[i];a.setCellArray(n[i]),a.setCurrentInput(t),a.setCellOffset(o),a.setPrimitiveType(i),a.setRenderable(e.renderable),a.setIs2D(!0),o+=n[i].getNumberOfCells(),r.push(a)}else e.primitives[i]=null;A.prepareNodes(),A.addMissingChildren(r),A.removeUnusedNodes()}}(A,e)}var jt=(0,n.WL)(Jt,"vtkWebGPUPolyDataMapper2D");(0,at.vw)("vtkMapper2D",jt);var Yt={};function qt(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,Yt,t),we.Z.extend(A,e,t),e.scalarBarActorHelper=tt.newScalarBarActorHelper(),function(A,e){e.classHierarchy.push("vtkWebGPUScalarBarActor"),A.buildPass=function(t){t&&(e.WebGPURenderer=A.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),A.prepareNodes(),A.addMissingNode(e.scalarBarActorHelper.getBarActor()),A.addMissingNode(e.scalarBarActorHelper.getTmActor()),A.removeUnusedNodes())},A.opaquePass=function(A,t){if(A){var n=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,r=e.WebGPURenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([r.usize,r.vsize],n,e.WebGPURenderWindow.getRenderable())}}}(A,e)}var $t=(0,n.WL)(qt,"vtkWebGPUScalarBarActor");(0,at.vw)("vtkScalarBarActor",$t);var An=t(93260),en=t(56845);var tn={texture:null,handle:null,sampler:null,label:null};function nn(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,tn,t),n.default.obj(A,e),e.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}},e.bindGroupTime={},n.default.obj(e.bindGroupTime,{mtime:0}),n.default.get(A,e,["bindGroupTime","texture"]),n.default.setGet(A,e,["bindGroupLayoutEntry","label","sampler"]),function(A,e){e.classHierarchy.push("vtkWebGPUTextureView"),A.create=function(A,t){e.texture=A,e.options=t,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=A.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;var n=Pt.Z.getDetailsFromTextureFormat(e.texture.getFormat());e.bindGroupLayoutEntry.texture.sampleType=n.sampleType},A.createFromTextureHandle=function(A,t){e.texture=null,e.options=t,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=A,e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;var n=Pt.Z.getDetailsFromTextureFormat(t.format);e.bindGroupLayoutEntry.texture.sampleType=n.sampleType,e.bindGroupTime.modified()},A.getBindGroupEntry=function(){return{resource:A.getHandle()}},A.getShaderCode=function(A,t){var n="f32";"sint"===e.bindGroupLayoutEntry.texture.sampleType?n="i32":"uint"===e.bindGroupLayoutEntry.texture.sampleType&&(n="u32");var r="@binding(".concat(A,") @group(").concat(t,") var ").concat(e.label,": texture_").concat(e.options.dimension,"<").concat(n,">;");return"depth"===e.bindGroupLayoutEntry.texture.sampleType&&(r="@binding(".concat(A,") @group(").concat(t,") var ").concat(e.label,": texture_depth_").concat(e.options.dimension,";")),r},A.addSampler=function(t,n){var r=en.ZP.newInstance({label:"".concat(e.label,"Sampler")});r.create(t,n),A.setSampler(r)},A.getBindGroupTime=function(){return e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.bindGroupTime},A.getHandle=function(){return e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.handle}}(A,e)}var rn={newInstance:n.default.newInstance(nn),extend:nn},on=mt.ZP.BufferUsage;var an={device:null,handle:null,buffer:null,ready:!1,label:null};function sn(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,an,t),n.default.obj(A,e),n.default.get(A,e,["handle","ready","width","height","depth","format","usage"]),n.default.setGet(A,e,["device","label"]),function(A,e){e.classHierarchy.push("vtkWebGPUTexture"),A.create=function(A,t){e.device=A,e.width=t.width,e.height=t.height,e.depth=t.depth?t.depth:1;var n=1===e.depth?"2d":"3d";e.format=t.format?t.format:"rgba8unorm",e.mipLevel=t.mipLevel?t.mipLevel:0,e.usage=t.usage?t.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label,dimension:n,mipLevelCount:e.mipLevel+1})},A.assignFromHandle=function(A,t,n){e.device=A,e.handle=t,e.width=n.width,e.height=n.height,e.depth=n.depth?n.depth:1,e.format=n.format?n.format:"rgba8unorm",e.usage=n.usage?n.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST},A.writeImageData=function(t){var r=[];if(t.canvas)return e.device.getHandle().queue.copyExternalImageToTexture({source:t.canvas,flipY:t.flip},{texture:e.handle,premultipliedAlpha:!0},[e.width,e.height,e.depth]),void(e.ready=!0);t.jsImageData&&!t.nativeArray&&(t.width=t.jsImageData.width,t.height=t.jsImageData.height,t.depth=1,t.format="rgba8unorm",t.flip=!0,t.nativeArray=t.jsImageData.data);var o=Pt.Z.getDetailsFromTextureFormat(e.format),i=e.width*o.stride,a=function(A,e,t){var r=A.length/(e*t)*A.BYTES_PER_ELEMENT,i=2===o.elementSize&&"float"===o.sampleType;if(i||r%256){for(var a=A,s=r/a.BYTES_PER_ELEMENT,l=o.elementSize,c=256*Math.floor((s*l+255)/256),u=c/l,d=n.default.newTypedArray(i?"Uint16Array":a.constructor.name,u*e*t),g=0;g<e*t;g++)if(i)for(var f=0;f<s;f++)d[g*u+f]=An.Z.toHalf(a[g*s+f]);else d.set(a.subarray(g*s,(g+1)*s),g*u);return[d,c]}return[A,r]};if(t.nativeArray&&(r=t.nativeArray),t.image){var s=document.createElement("canvas");s.width=t.image.width,s.height=t.image.height;var l=s.getContext("2d");l.translate(0,s.height),l.scale(1,-1),l.drawImage(t.image,0,0,t.image.width,t.image.height,0,0,s.width,s.height),r=l.getImageData(0,0,t.image.width,t.image.height).data}var c=e.device.createCommandEncoder();if(3!==A.getDimensionality()){for(var u=$A.generateMipmaps(r,e.width,e.height,e.mipLevel),d=e.width,g=e.height,f=0;f<=e.mipLevel;f++){var h=a(u[f],g,1);i=h[1];var B={dataArray:t.dataArray?t.dataArray:null,nativeArray:h[0],usage:on.Texture},p=e.device.getBufferManager().getBuffer(B);c.copyBufferToTexture({buffer:p.getHandle(),offset:0,bytesPerRow:i,rowsPerImage:g},{texture:e.handle,mipLevel:f},[d,g,1]),d/=2,g/=2}e.device.submitCommandEncoder(c),e.ready=!0}else{var w=a(r,e.height,e.depth);i=w[1];var m={dataArray:t.dataArray?t.dataArray:null,usage:on.Texture};m.nativeArray=w[0];var v=e.device.getBufferManager().getBuffer(m);c.copyBufferToTexture({buffer:v.getHandle(),offset:0,bytesPerRow:i,rowsPerImage:e.height},{texture:e.handle},[e.width,e.height,e.depth]),e.device.submitCommandEncoder(c),e.ready=!0}},A.getScale=function(){var A=Pt.Z.getDetailsFromTextureFormat(e.format);return 2===A.elementSize&&"float"===A.sampleType?1:255},A.getNumberOfComponents=function(){return Pt.Z.getDetailsFromTextureFormat(e.format).numComponents},A.getDimensionality=function(){var A=0;return e.width>1&&A++,e.height>1&&A++,e.depth>1&&A++,A},A.resizeToMatch=function(A){A.getWidth()===e.width&&A.getHeight()===e.height&&A.getDepth()===e.depth||(e.width=A.getWidth(),e.height=A.getHeight(),e.depth=A.getDepth(),e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},A.resize=function(A,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;A===e.width&&t===e.height&&n===e.depth||(e.width=A,e.height=t,e.depth=n,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},A.createView=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.dimension||(n.dimension=1===e.depth?"2d":"3d");var r=rn.newInstance({label:t});return r.create(A,n),r}}(A,e)}n.default.newInstance(sn),t(88580);var ln=t(60754);const cn=class{constructor(A){const{points:e,type:t}=A.data;this.id=A.id,this.points=e,this.type=t,this.color=A.color,this.segmentIndex=A.segmentIndex,this.sizeInBytes=this._getSizeInBytes()}_getSizeInBytes(){let A=0;return A+=3*this.points.length,A}getPoints(){return this.points}getFlatPointsArray(){return this.points.map((A=>[...A])).flat()}getColor(){return this.color}getType(){return this.type}};class un{constructor(A){this.color=[200,0,0],this.id=A.id,this.contours=[],this.color=A.color??this.color,this.frameOfReferenceUID=A.frameOfReferenceUID,this.segmentIndex=A.segmentIndex,this._createEachContour(A.data),this.sizeInBytes=this._getSizeInBytes()}_createEachContour(A){A.forEach((A=>{const{points:e,type:t,color:n}=A,r=new cn({id:`${this.id}-segment-${this.segmentIndex}`,data:{points:e,type:t,segmentIndex:this.segmentIndex,color:n??this.color},segmentIndex:this.segmentIndex,color:n??this.color});this.contours.push(r)})),this._updateContourSetCentroid()}_updateContourSetCentroid(){const A=this.getTotalNumberOfPoints(),e=this.getFlatPointsArray(),t=e.reduce(((A,e)=>[A[0]+e[0],A[1]+e[1],A[2]+e[2]]),[0,0,0]),n=[t[0]/A,t[1]/A,t[2]/A],r=e.reduce(((A,e)=>this._getDistance(n,e)<this._getDistance(n,A)?e:A),e[0]);this.centroid=r}_getSizeInBytes(){return this.contours.reduce(((A,e)=>A+e.sizeInBytes),0)}getCentroid(){return this.centroid}getSegmentIndex(){return this.segmentIndex}getColor(){return this.color}getContours(){return this.contours}getSizeInBytes(){return this.sizeInBytes}getFlatPointsArray(){return this.contours.map((A=>A.getPoints())).flat()}getNumberOfContours(){return this.contours.length}getTotalNumberOfPoints(){return this.contours.reduce(((A,e)=>A+e.getPoints().length),0)}getNumberOfPointsArray(){return this.contours.reduce(((A,e,t)=>(A[t]=this.getNumberOfPointsInAContour(t),A)),[])}getPointsInContour(A){return this.contours[A].getPoints()}getNumberOfPointsInAContour(A){return this.getPointsInContour(A).length}_getDistance(A,e){return Math.sqrt((A[0]-e[0])**2+(A[1]-e[1])**2+(A[2]-e[2])**2)}}var dn=t(57135);async function gn(A,e){let t=ln.ZP.getGeometry(A);if(t)return t;if(e.type!==dn.Z.CONTOUR)throw new Error("Unknown geometry type, Only CONTOUR is supported");t=function(A,e){if(!e||0===e.data.length)throw new Error("Invalid contour set data, see publicContourSetData type for more info");if(!e.id)throw new Error("Invalid contour set data, each contour set must have an id");if(!e.data||!Array.isArray(e.data))throw new Error("Invalid contour set data, each contour set must have an array of contours");e.data.forEach((A=>{if(!A.points||!Array.isArray(A.points))throw new Error("Invalid contour set data, each contour must have an array of points");A.points.forEach((A=>{if(!A||!Array.isArray(A)||3!==A.length)throw new Error("Invalid contour set data, each point must be an array of length 3")}))}));const t=new un({id:e.id,data:e.data,color:e.color,frameOfReferenceUID:e.frameOfReferenceUID,segmentIndex:e.segmentIndex}),n={id:A,type:dn.Z.CONTOUR,data:t,sizeInBytes:t.getSizeInBytes()};return n}(A,e.geometryData);const n={promise:Promise.resolve(t)};return await ln.ZP.putGeometryLoadObject(A,n),t}},87051:(A,e,t)=>{"use strict";t.d(e,{Z:()=>i});var n=t(17790),r=t(47908);const o=new n.P("imageRetrievalPool");o.setMaxSimultaneousRequests(r.Z.Interaction,200),o.setMaxSimultaneousRequests(r.Z.Thumbnail,200),o.setMaxSimultaneousRequests(r.Z.Prefetch,200),o.grabDelay=0;const i=o},93853:(A,e,t)=>{"use strict";t.d(e,{Z:()=>E});var n=t(27054),r=t(78041),o=t(52425),i=t(31363),a=t(47908),s=t(7445),l=t(60754),c=t(76467),u=t(6807),d=t(71478);var g=t(51211),f=t(97335),h=t(509),B=t(26222),p=t(48409);const w=A=>{const e=function(A){const e=(0,B.Uu)(),t=[];for(let n=0;n<e.length;n++){const r=e[n],o=p.Z(A,r.id);o.length&&t.push({renderingEngine:r,viewportIds:o.map((A=>A.id))})}return t}(A);e&&e.length&&e.forEach((({renderingEngine:A,viewportIds:e})=>{A.hasBeenDestroyed||A.renderViewports(e)}))};function m(A,e){const t=A.length,{rescaleSlope:n,rescaleIntercept:r,suvbw:o}=e;if("PT"===e.modality&&"number"==typeof o)for(let e=0;e<t;e++)A[e]=o*(A[e]*n+r);else for(let e=0;e<t;e++)A[e]=A[e]*n+r;return A}const v=a.Z.Prefetch,{getMinMax:C}=n;class U extends g.Z{constructor(A,e){super(A),this.framesLoaded=0,this.framesProcessed=0,this.cornerstoneImageMetaData=null,this.cancelLoading=()=>{const{loadStatus:A}=this;if(!A||!A.loading)return;A.loading=!1,A.cancelled=!0,this.clearLoadCallbacks();o.Z.filterRequests((({additionalDetails:A})=>A.volumeId!==this.volumeId))},this.load=(A,e=5)=>{const{imageIds:t,loadStatus:n,numFrames:r}=this;if(!0===n.loading)return void console.log(`loadVolume: Loading is already in progress for ${this.volumeId}`);const{loaded:o}=this.loadStatus,i=t.length;o?A&&A({success:!0,framesLoaded:i,framesProcessed:i,numFrames:r,totalNumFrames:i}):(A&&this.loadStatus.callbacks.push(A),this._prefetchImageIds(e))},this.getImageIdsRequests=(A,e,t)=>{const{loadStatus:n}=this,{cachedFrames:r}=n,{vtkOpenGLTexture:o,imageData:a,metadata:s,volumeId:u}=this,{FrameOfReferenceUID:g}=s,B=e.buffer,p=A.length,m=e.length/p,C=B.byteLength/p;let U;if(e instanceof Uint8Array)U="Uint8Array";else if(e instanceof Float32Array)U="Float32Array";else if(e instanceof Uint16Array)U="Uint16Array";else{if(!(e instanceof Int16Array))throw new Error("Unsupported array type");U="Int16Array"}const Q=this.imageIds.length,y=!0;let I,F;function b(A){y&&(A.framesProcessed>F||A.framesProcessed===A.totalNumFrames)&&(F+=I,w(u)),A.framesProcessed===A.totalNumFrames&&n.callbacks.forEach((e=>e(A)))}y&&(I=.02*Q,F=I);const E=(A,t,r)=>{const o=this._imageIdIndexToFrameIndex(A),i=l.ZP.getCachedImageBasedOnImageURI(t);if(n.cancelled)return void console.warn("volume load cancelled, returning for imageIdIndex: ",A);if(!i||!i.image)return T(this,A,t);const a=this._scaleIfNecessary(i.image,r),{pixelsPerImage:s,bytesPerImage:c}=this.cornerstoneImageMetaData,u=e.constructor;let d=c*o;const g=c/s;e.BYTES_PER_ELEMENT!==g&&(d*=e.BYTES_PER_ELEMENT/g);const f=new u(B,d,s);i.imageLoadObject.promise.then((e=>{f.set(a),T(this,A,t)})).catch((e=>{S.call(this,e,A,t)}))},T=(A,e,t)=>{const i=this._imageIdIndexToFrameIndex(e);r[e]=!0,this.framesLoaded++,this.framesProcessed++,o.setUpdatedFrame(i),a.modified();const s={FrameOfReferenceUID:g,imageVolume:A};(0,f.Z)(h.Z,c.default.IMAGE_VOLUME_MODIFIED,s),this.framesProcessed===Q?(n.loaded=!0,n.loading=!1,b({success:!0,imageIdIndex:e,imageId:t,framesLoaded:this.framesLoaded,framesProcessed:this.framesProcessed,numFrames:p,totalNumFrames:Q}),n.callbacks=[]):b({success:!0,imageIdIndex:e,imageId:t,framesLoaded:this.framesLoaded,framesProcessed:this.framesProcessed,numFrames:p,totalNumFrames:Q})};function S(A,e,t){this.framesProcessed++,this.framesProcessed===Q?(n.loaded=!0,n.loading=!1,b({success:!1,imageId:t,imageIdIndex:e,error:A,framesLoaded:this.framesLoaded,framesProcessed:this.framesProcessed,numFrames:p,totalNumFrames:Q}),n.callbacks=[]):b({success:!1,imageId:t,imageIdIndex:e,error:A,framesLoaded:this.framesLoaded,framesProcessed:this.framesProcessed,numFrames:p,totalNumFrames:Q});const r={error:A,imageIdIndex:e,imageId:t};(0,f.Z)(h.Z,c.default.IMAGE_LOAD_ERROR,r)}const P=A.map(((A,n)=>{const o=this.getImageIdIndex(A);if(r[o])return this.framesLoaded++,void this.framesProcessed++;const a=d.get("modalityLutModule",A)||{},s=d.get("generalSeriesModule",A)||{},l={rescaleSlope:a.rescaleSlope,rescaleIntercept:a.rescaleIntercept,modality:s.modality};if("PT"===l.modality){const e=d.get("scalingModule",A);e&&(this._addScalingToVolume(e),l.suvbw=e.suvbw)}const c="number"==typeof l.rescaleSlope&&"number"==typeof l.rescaleIntercept;this.isPrescaled=c;return{callLoadImage:(A,t,n)=>i.loadImage(A,n).then((r=>{!function(A,e,t){if(!(A.buffer instanceof ArrayBuffer))return;const n=t.targetBuffer.offset,r=t.targetBuffer.length,o=e.pixelData?e.pixelData:e.getPixelData();try{if(A instanceof Float32Array){const e=4,t=new Float32Array(o);if(t.length!==r)throw"Error pixelData length does not match frame length";A.set(t,n/e)}if(A instanceof Int16Array){const e=2,t=new Int16Array(o);if(t.length!==r)throw"Error pixelData length does not match frame length";A.set(t,n/e)}if(A instanceof Uint16Array){const e=2,t=new Uint16Array(o);if(t.length!==r)throw"Error pixelData length does not match frame length";A.set(t,n/e)}if(A instanceof Uint8Array){const e=1,t=new Uint8Array(o);if(t.length!==r)throw"Error pixelData length does not match frame length";A.set(t,n/e)}}catch(A){console.error(A)}}(e,r,n),E(t,A,l)}),(e=>{S.call(this,e,t,A)})),imageId:A,imageIdIndex:o,options:{targetBuffer:{arrayBuffer:B instanceof ArrayBuffer?void 0:B,offset:n*C,length:m,type:U},skipCreateImage:!0,preScale:{enabled:!0,scalingParameters:l}},priority:t,requestType:v,additionalDetails:{volumeId:this.volumeId}}}));return P},this.imageIds=e.imageIds,this.loadStatus=e.loadStatus,this.numFrames=this._getNumFrames(),this._createCornerstoneImageMetaData()}_getNumFrames(){const{imageIds:A,scalarData:e}=this,t=this.isDynamicVolume()?e.length:1;return A.length/t}_getScalarDataLength(){const{scalarData:A}=this;return this.isDynamicVolume()?A[0].length:A.length}_createCornerstoneImageMetaData(){const{numFrames:A}=this;if(0===A)return;const e=this.sizeInBytes/A,t=this._getScalarDataLength()/this.numVoxels,n=this.dimensions[0]*this.dimensions[1]*t,{PhotometricInterpretation:r,voiLut:o,VOILUTFunction:i}=this.metadata;let a=[],s=[];o&&o.length&&(a=o.map((A=>A.windowCenter)),s=o.map((A=>A.windowWidth)));const l=t>1;this.cornerstoneImageMetaData={bytesPerImage:e,numComponents:t,pixelsPerImage:n,windowCenter:a,windowWidth:s,color:l,spacing:this.spacing,dimensions:this.dimensions,PhotometricInterpretation:r,voiLUTFunction:i,invert:"MONOCHROME1"===r}}_imageIdIndexToFrameIndex(A){return A%this.numFrames}getScalarDataArrays(){return this.isDynamicVolume()?this.scalarData:[this.scalarData]}_getScalarDataByImageIdIndex(A){if(A<0||A>=this.imageIds.length)throw new Error("imageIdIndex out of range");return this.getScalarDataArrays()[Math.floor(A/this.numFrames)]}invalidateVolume(A){const{imageData:e,vtkOpenGLTexture:t}=this,{numFrames:n}=this;for(let A=0;A<n;A++)t.setUpdatedFrame(A);e.modified(),A&&w(this.volumeId)}clearLoadCallbacks(){this.loadStatus.callbacks=[]}getImageLoadRequests(A){throw new Error("Abstract method")}_prefetchImageIds(A){this.loadStatus.loading=!0;this.getImageLoadRequests(A).reverse().forEach((A=>{if(!A)return;const{callLoadImage:e,imageId:t,imageIdIndex:n,options:r,priority:i,requestType:a,additionalDetails:s}=A;o.Z.addRequest(e.bind(this,t,n,r),a,s,i)}))}_scaleIfNecessary(A,e){const t=A.preScale?.scaled,n=!e||!e.rescaleIntercept||!e.rescaleSlope;if(!t&&n)return A.getPixelData().slice(0);if(!t&&e&&void 0!==e.rescaleIntercept&&void 0!==e.rescaleSlope){return m(A.getPixelData().slice(0),e)}const{rescaleSlope:r,rescaleIntercept:o,suvbw:i}=e,{rescaleSlope:a,rescaleIntercept:s,suvbw:l}=A.preScale.scalingParameters;if(r===a&&o===s&&i===l)return A.getPixelData();const c=i/l,u=r/a,d=o-s*u;return m(A.getPixelData().slice(0),{...e,rescaleSlope:u,rescaleIntercept:d,suvbw:c})}_addScalingToVolume(A){if(this.scaling)return;const{suvbw:e,suvlbm:t,suvbsa:n}=A,r={};t&&(r.suvbwToSuvlbm=t/e),n&&(r.suvbwToSuvbsa=n/e),e&&(r.suvbw=e),this.scaling={PET:r}}_removeFromCache(){l.ZP.removeVolumeLoadObject(this.volumeId)}convertToCornerstoneImage(A,e){const{imageIds:t}=this,n=this._imageIdIndexToFrameIndex(e),{bytesPerImage:r,pixelsPerImage:o,windowCenter:i,windowWidth:a,numComponents:s,color:l,dimensions:c,spacing:u,invert:g,voiLUTFunction:f}=this.cornerstoneImageMetaData,h=this._getScalarDataByImageIdIndex(e),B=h.buffer,p=h.constructor,w=r/o;let m=r*n;h.BYTES_PER_ELEMENT!==w&&(m*=h.BYTES_PER_ELEMENT/w);const v=new p(o),U=new p(B,m,o);v.set(U);const Q=t[e],y=d.get("modalityLutModule",Q)||{},I=C(v),F={imageId:A,intercept:y.rescaleIntercept?y.rescaleIntercept:0,windowCenter:i,windowWidth:a,voiLUTFunction:f,color:l,numComps:s,rows:c[0],columns:c[1],sizeInBytes:v.byteLength,getPixelData:()=>v,minPixelValue:I.min,maxPixelValue:I.max,slope:y.rescaleSlope?y.rescaleSlope:1,getCanvas:void 0,height:c[0],width:c[1],rgba:void 0,columnPixelSpacing:u[0],rowPixelSpacing:u[1],invert:g};return{promise:Promise.resolve(F)}}_convertToImages(){const A=this.sizeInBytes,e=this.imageIds.length,{bytesPerImage:t}=this.cornerstoneImageMetaData;let n=l.ZP.decacheIfNecessaryUntilBytesAvailable(A,this.imageIds);for(let A=0;A<e;A++){const e=this.imageIds[A];n-=t;const r=this.convertToCornerstoneImage(e,A);if(l.ZP.getImageLoadObject(e)||l.ZP.putImageLoadObject(e,r).catch((A=>{console.error(A)})),n<=t)break}this._removeFromCache()}decache(A=!1){A?this._removeFromCache():this._convertToImages()}}class Q extends U{constructor(A,e){super(A,e),this.getImageLoadRequests=A=>{const{imageIds:e}=this,t=this.scalarData;return this.getImageIdsRequests(e,t,A)}}getScalarData(){return this.scalarData}}const{createUint8SharedArray:y,createFloat32SharedArray:I,createUint16SharedArray:F,createInt16SharedArray:b}=n;const E=function(A,e){if(!e||!e.imageIds||!e.imageIds.length)throw new Error("ImageIds must be provided to create a streaming image volume");const{useNorm16Texture:t,preferSizeOverAccuracy:n}=(0,r.P_)().rendering,g=t||n,f=async function(){if("wadouri"===e.imageIds[0].split(":")[0]){const[t,n]=[Math.floor(e.imageIds.length/2),e.imageIds.length-1],r=[0,t,n];await Promise.all(r.map((t=>new Promise(((n,r)=>{const s=e.imageIds[t];o.Z.addRequest((async()=>{i.loadImage(s).then((()=>{console.log(`Prefetched imageId: ${s}`),n(!0)})).catch((A=>{r(A)}))}),a.Z.Prefetch,{volumeId:A},1)}))))).catch(console.error)}const{imageIds:t}=e,n=function(A){const e=A[0],{pixelRepresentation:t,bitsAllocated:n,bitsStored:r,highBit:o,photometricInterpretation:i,samplesPerPixel:a}=d.get("imagePixelModule",e),s=[],l=d.get("voiLutModule",e);let c;if(l){const{windowWidth:A,windowCenter:e}=l;if(c=l?.voiLUTFunction,Array.isArray(A))for(let t=0;t<A.length;t++)s.push({windowWidth:A[t],windowCenter:e[t]});else s.push({windowWidth:A,windowCenter:e})}else s.push({windowWidth:void 0,windowCenter:void 0});const{modality:u,seriesInstanceUID:g}=d.get("generalSeriesModule",e),{imageOrientationPatient:f,pixelSpacing:h,frameOfReferenceUID:B,columns:p,rows:w}=d.get("imagePlaneModule",e);return{BitsAllocated:n,BitsStored:r,SamplesPerPixel:a,HighBit:o,PhotometricInterpretation:i,PixelRepresentation:t,Modality:u,ImageOrientationPatient:f,PixelSpacing:h,FrameOfReferenceUID:B,Columns:p,Rows:w,voiLut:s,VOILUTFunction:c,SeriesInstanceUID:g}}(t),f=t[Math.floor(t.length/2)],h=s.Z(f),B=h.rescaleIntercept<0||h.rescaleSlope<0,{BitsAllocated:p,PixelRepresentation:w,PhotometricInterpretation:m,ImageOrientationPatient:v,PixelSpacing:C,Columns:U,Rows:E}=n,T=u.fromValues(v[0],v[1],v[2]),S=u.fromValues(v[3],v[4],v[5]),P=u.create();u.cross(P,T,S);const{zSpacing:x,origin:H,sortedImageIds:D}=function(A,e){const{imagePositionPatient:t}=d.get("imagePlaneModule",A[0]),n=u.create(),o="wadouri"===A[0].split(":")[0];let i,a;function s(A){const{imagePositionPatient:n}=d.get("imagePlaneModule",A),r=u.create();return u.sub(r,t,n),u.dot(r,e)}if(u.set(n,t[0],t[1],t[2]),o){const n=[A[0],A[Math.floor(A.length/2)]];i=A,s(n[0])-s(n[1])<0&&i.reverse();const r=d.get("imagePlaneModule",n[1]);if(!r)throw new Error("Incomplete metadata required for volume construction.");const o=u.create();u.sub(o,t,r.imagePositionPatient);const l=u.dot(o,e);a=Math.abs(l)/Math.floor(A.length/2)}else{const e=A.map((A=>({distance:s(A),imageId:A})));e.sort(((A,e)=>e.distance-A.distance)),i=e.map((A=>A.imageId));const t=e.length;a=Math.abs(e[t-1].distance-e[0].distance)/(t-1)}const{imagePositionPatient:l,sliceThickness:c}=d.get("imagePlaneModule",i[0]),{strictZSpacingForVolumeViewport:g}=(0,r.P_)().rendering;return 0!==a||g||(c?(console.log("Could not calculate zSpacing. Using sliceThickness"),a=c):(console.log("Could not calculate zSpacing. The VolumeViewport visualization is compromised. Setting zSpacing to 1 to render"),a=1)),{zSpacing:a,origin:l,sortedImageIds:i}}(t,P),L=t.length,O=[C[1],C[0],x],M=[U,E,L],_=[...T,...S,...P],k=1===w,V="RGB"===m?3:1,R=(0,r.hG)(),K=M[0]*M[1]*M[2],N=A=>{if(!l.ZP.isCacheable(A))throw new Error(c.default.CACHE_SIZE_EXCEEDED);l.ZP.decacheIfNecessaryUntilBytesAvailable(A)};let Z,G;switch(p){case 8:if(k)throw new Error("8 Bit signed images are not yet supported by this plugin.");G=K,N(G),Z=R?y(K):new Uint8Array(K);break;case 16:if(!g){G=4*K,Z=R?I(K):new Float32Array(K);break}if(G=2*K,k||B){N(G),Z=R?b(K):new Int16Array(K);break}if(!k&&!B){N(G),Z=R?F(K):new Uint16Array(K);break}G=4*K,N(G),Z=R?I(K):new Float32Array(K);break;case 24:G=K*V,N(G),Z=R?y(K*V):new Uint8Array(K*V)}return new Q({volumeId:A,metadata:n,dimensions:M,spacing:O,origin:H,direction:_,scalarData:Z,sizeInBytes:G},{imageIds:D,loadStatus:{loaded:!1,loading:!1,cancelled:!1,cachedFrames:[],callbacks:[]}})}();return{promise:f,decache:()=>{f.then((A=>{A.destroy(),A=null}))},cancel:()=>{f.then((A=>{A.cancelLoading()}))}}}},77100:(A,e,t)=>{"use strict";t.r(e),t.d(e,{COLOR_LUT:()=>n.Z});var n=t(84764)},20184:(A,e,t)=>{"use strict";t.d(e,{Z:()=>o});var n=t(80541),r=t(58251);class o extends r.Z{constructor(A,e,t,n,r){super(n||o.getUniqueInstanceName("image-cursor"),r),this.url=A,this.x=Number(e)||0,this.y=Number(t)||0}getStyleProperty(){const{url:A,x:e,y:t}=this;let n=`url('${A}')`;return e>=0&&t>=0&&(e>0||t>0)&&(n+=` ${e} ${t}`),this.addFallbackStyleProperty(n)}static getUniqueInstanceName(A){return`${A}-${n.Z(o)}`}}},23233:(A,e,t)=>{"use strict";t.d(e,{EF:()=>d,Sz:()=>f,UQ:()=>c,zu:()=>g});const n={iconContent:"",iconSize:16,viewBox:{x:16,y:16},mousePoint:{x:8,y:8},mousePointerGroupString:'\n    <path stroke="{{color}}" d="M8 16L8 0"></path>\n    <path stroke="{{color}}" d="M16 8L0 8"></path>\n  '},r={x:127,y:60},o='\n<rect fill="{{color}}" x="80.19" y="25.03" width="47.14" height="15.85"/>\n',i='\n<rect fill="{{color}}" x="80.19" y="25.03" width="47.14" height="15.85"/>\n<rect fill="{{color}}" x="95.84" y="9.38" width="15.85" height="47.14"/>\n',a='<path fill="{{color}}" d="M82.89,10a12.09,12.09,0,0,0-16.8-2.5l-27.5,20.4-8.5-6.3a2.93,2.93,0,0,1-1.1-3,14.66,14.66,0,0,0,.1-6.6,14.08,14.08,0,1,0-6.5,15.2,2.87,2.87,0,0,1,3.2.2l8.2,6.1-8.2,6.1a2.87,2.87,0,0,1-3.2.2,14.16,14.16,0,1,0,6.7,14.4,14,14,0,0,0-.3-5.8,2.93,2.93,0,0,1,1.1-3l8.5-6.3,27.5,20.4A11.91,11.91,0,0,0,82.89,57l-31.7-23.5ZM15.29,21a5.9,5.9,0,1,1,5.9-5.9A5.91,5.91,0,0,1,15.29,21Zm0,36.8a5.9,5.9,0,1,1,5.9-5.9A5.91,5.91,0,0,1,15.29,57.77Zm28.3-21.5a2.8,2.8,0,1,1,2.8-2.8A2.8,2.8,0,0,1,43.59,36.27Z" transform="translate(-1.17 -0.96)"/>',s='<path fill="{{color}}" d="M8.86,2.25V66.08H72.69V2.25H8.86ZM65.28,58.67h-49v-49h49v49Z" transform="translate(-8.86 -2.25)"/>',l='<path fill="{{color}}" d="M40.77,2.25A31.92,31.92,0,1,0,72.69,34.16,31.92,31.92,0,0,0,40.77,2.25Zm0,57.63A25.71,25.71,0,1,1,66.48,34.16,25.71,25.71,0,0,1,40.77,59.87Z" transform="translate(-8.86 -2.25)"/>',c={Angle:u(n,{iconContent:'<path fill="{{color}}" d="M1203 544q0 13-10 23l-393 393 393 393q10 10 10 23t-10 23l-50\n    50q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l466-466q10-10 23-10t23\n    10l50 50q10 10 10 23z" />',viewBox:{x:1792,y:1792}}),ArrowAnnotate:u(n,{iconContent:'<g id="arrowAnnotate-group" fill="none" stroke-width="1" stroke="{{color}}" stroke-linecap="round" stroke-linejoin="round">\n    <path id="arrowAnnotate-arrow" d="M23,7 l-15,15 M7,17 l0,6 6,0" stroke-width="2" />\n  </g>',viewBox:{x:24,y:24}}),Bidirectional:u(n,{iconContent:'<g fill="{{color}}" stroke-width="3" stroke="{{color}}">\n    <path d="M27.63 3.21L3.12 28.81"></path>\n    <path d="M27.63 15.75L15.27 4.43"></path>\n    <path d="M16.5 4.28C16.5 4.96 15.95 5.51 15.27 5.51C14.59 5.51 14.03 4.96 14.03 4.28C14.03 3.59 14.59 3.04 15.27 3.04C15.95 3.04 16.5 3.59 16.5 4.28Z" ></path>\n    <path d="M28.87 3.19C28.87 3.87 28.31 4.43 27.63 4.43C26.95 4.43 26.4 3.87 26.4 3.19C26.4 2.51 26.95 1.95 27.63 1.95C28.31 1.95 28.87 2.51 28.87 3.19Z"></path>\n    <path d="M28.87 15.75C28.87 16.43 28.31 16.99 27.63 16.99C26.95 16.99 26.4 16.43 26.4 15.75C26.4 15.07 26.95 14.51 27.63 14.51C28.31 14.51 28.87 15.07 28.87 15.75Z"></path>\n    <path d="M4.73 28.44C4.73 29.12 4.17 29.68 3.49 29.68C2.81 29.68 2.25 29.12 2.25 28.44C2.25 27.76 2.81 27.2 3.49 27.2C4.17 27.2 4.73 27.76 4.73 28.44Z"></path>\n  </g>',viewBox:{x:48,y:48}}),CobbAngle:u(n,{iconContent:'<g stroke="{{color}}" stroke-width="3">\n    <path d="M28.59 2.34L3.82 12.32"></path>\n    <path d="M28.59 29.66L3.82 19.68"></path>\n    <path stroke-dasharray="2" fill-opacity="0" d="M12.37\n      23.06C12.67 22.36 12.85 21.93 12.92 21.76C14.6 17.8 14.68 13.35 13.15\n      9.33C13.11 9.24 13.02 9 12.88 8.63">\n    </path>\n  </g>',viewBox:{x:32,y:32}}),CircleROI:u(n,{iconContent:'<circle stroke="{{color}}" fill="none" stroke-width="3" cx="16" cy="16" r="14" />',viewBox:{x:32,y:32}}),EllipticalROI:u(n,{iconContent:'<path stroke="{{color}}" fill="none" stroke-width="3" d="M30.74 15.76C30.74 20.99 24.14 25.23 16\n    25.23C7.86 25.23 1.26 20.99 1.26 15.76C1.26 10.54 7.86 6.3 16 6.3C24.14\n    6.3 30.74 10.54 30.74 15.76Z" />',viewBox:{x:32,y:32}}),FreehandROI:u(n,{iconContent:'<g fill="{{color}}" stroke="{{color}}" stroke-width="2">\n    <ellipse ry="1" rx="1" id="svg_3" cy="4.240343" cx="14.306499"/>\n    <line id="svg_4" y2="3.58462" x2="12.242186" y1="3.997482" x1="13.432202"/>\n    <line id="svg_5" y2="3.268901" x2="10.857882" y1="3.608906" x1="12.387902"/>\n    <line id="svg_6" y2="3.147471" x2="9.740724" y1="3.293187" x1="10.955026"/>\n    <line id="svg_7" y2="3.147471" x2="8.089274" y1="3.196043" x1="9.983585"/>\n    <line id="svg_8" y2="3.268901" x2="6.874972" y1="3.123185" x1="8.307848"/>\n    <line id="svg_9" y2="3.657478" x2="5.587812" y1="3.220329" x1="7.020688"/>\n    <line id="svg_10" y2="4.046054" x2="4.737801" y1="3.560334" x1="5.854959"/>\n    <line id="svg_11" y2="4.337487" x2="4.300652" y1="3.997482" x1="4.834945"/>\n    <line id="svg_12" y2="4.726063" x2="3.88779" y1="4.191771" x1="4.470655"/>\n    <line id="svg_15" y2="5.3575" x2="3.377783" y1="4.604633" x1="3.960648"/>\n    <line id="svg_16" y2="6.183226" x2="2.916348" y1="5.138926" x1="3.547785"/>\n    <line id="svg_17" y2="6.960379" x2="2.770632" y1="5.867507" x1="3.037779"/>\n    <line id="svg_18" y2="7.713246" x2="2.673488" y1="6.741804" x1="2.819204"/>\n    <line id="svg_19" y2="8.684687" x2="2.697774" y1="7.616102" x1="2.673488"/>\n    <line id="svg_20" y2="9.753273" x2="2.892062" y1="8.611829" x1="2.697774"/>\n    <line id="svg_21" y2="10.724714" x2="3.134923" y1="9.534698" x1="2.84349"/>\n    <line id="svg_23" y2="11.647583" x2="3.596357" y1="10.578998" x1="3.086351"/>\n    <line id="svg_25" y2="12.521881" x2="4.276366" y1="11.501867" x1="3.499213"/>\n    <line id="svg_26" y2="13.930471" x2="5.830673" y1="12.376165" x1="4.13065"/>\n    <line id="svg_28" y2="14.707624" x2="7.263549" y1="13.881899" x1="5.733528"/>\n    <line id="svg_29" y2="15.339061" x2="8.963571" y1="14.61048" x1="7.06926"/>\n    <line id="svg_30" y2="15.581921" x2="10.882168" y1="15.314775" x1="8.817855"/>\n    <line id="svg_31" y2="15.460491" x2="12.023612" y1="15.581921" x1="10.785024"/>\n    <line id="svg_33" y2="15.120487" x2="13.092197" y1="15.484777" x1="11.877895"/>\n    <line id="svg_34" y2="14.586194" x2="13.86935" y1="15.217631" x1="12.897909"/>\n    <line id="svg_35" y2="13.833327" x2="14.597931" y1="14.756196" x1="13.699348"/>\n    <line id="svg_37" y2="12.716169" x2="15.180796" y1="13.881899" x1="14.549359"/>\n    <line id="svg_39" y2="11.429009" x2="15.520801" y1="12.813313" x1="15.15651"/>\n    <ellipse ry="1" rx="1" id="svg_40" cy="10.967574" cx="15.520801"/>\n  </g>',viewBox:{x:18,y:18}}),FreehandROISculptor:u(n,{iconContent:'<g id="icon-freehand-sculpt" fill="none" stroke-width="1.5" stroke="{{color}}" stroke-linecap="round" stroke-linejoin="round">\n    <line id="svg_1" y2="2.559367" x2="10.184807" y1="4.467781" x1="8.81711"/>\n    <line id="svg_4" y2="1.493836" x2="11.727442" y1="2.766112" x1="10.089386"/>\n    <line id="svg_7" y2="1.080346" x2="13.047428" y1="1.748291" x1="11.345759"/>\n    <line id="svg_8" y2="1.000829" x2="14.351511" y1="1.112153" x1="12.77707"/>\n    <line id="svg_9" y2="1.350705" x2="15.242104" y1="0.905408" x1="13.969828"/>\n    <line id="svg_10" y2="2.098167" x2="15.862339" y1="1.14396" x1="14.955842"/>\n    <line id="svg_11" y2="3.195505" x2="16.41896" y1="1.939133" x1="15.766918"/>\n    <line id="svg_12" y2="4.292843" x2="16.530284" y1="2.925147" x1="16.387153"/>\n    <line id="svg_16" y2="5.644637" x2="16.196311" y1="3.831643" x1="16.593898"/>\n    <line id="svg_18" y2="7.266789" x2="15.623787" y1="5.19934" x1="16.275829"/>\n    <line id="svg_19" y2="10.813258" x2="14.526449" y1="6.726071" x1="15.766918"/>\n    <line id="svg_20" y2="5.056209" x2="8.085552" y1="4.181519" x1="8.976145"/>\n    <line id="svg_23" y2="5.326568" x2="7.481221" y1="4.78585" x1="8.403621"/>\n    <line id="svg_24" y2="5.565119" x2="6.749662" y1="5.294761" x1="7.624352"/>\n    <line id="svg_25" y2="5.994512" x2="5.429675" y1="5.533312" x1="6.956407"/>\n    <line id="svg_27" y2="6.551133" x2="4.284627" y1="5.962706" x1="5.572807"/>\n    <line id="svg_28" y2="7.584858" x2="3.044158" y1="6.392099" x1="4.427758"/>\n    <line id="svg_29" y2="8.84123" x2="2.185372" y1="7.489437" x1="3.219096"/>\n    <line id="svg_31" y2="10.606513" x2="1.644654" y1="8.602678" x1="2.280792"/>\n    <line id="svg_32" y2="13.214679" x2="1.48562" y1="10.352058" x1="1.724171"/>\n    <line id="svg_33" y2="14.375631" x2="1.676461" y1="12.992031" x1="1.453813"/>\n    <line id="svg_34" y2="15.298031" x2="2.264889" y1="14.152983" x1="1.517427"/>\n    <line id="svg_35" y2="16.172721" x2="3.521261" y1="14.948155" x1="1.915013"/>\n    <line id="svg_36" y2="16.824762" x2="5.207027" y1="15.997783" x1="3.28271"/>\n    <line id="svg_38" y2="17.063314" x2="7.035924" y1="16.745245" x1="4.968475"/>\n    <line id="svg_39" y2="16.888376" x2="9.278311" y1="17.047411" x1="6.733758"/>\n    <line id="svg_40" y2="16.284045" x2="10.661911" y1="16.983797" x1="8.992048"/>\n    <line id="svg_41" y2="15.313934" x2="11.647925" y1="16.395369" x1="10.455166"/>\n    <line id="svg_44" y2="13.898527" x2="12.82478" y1="15.425259" x1="11.504794"/>\n    <line id="svg_45" y2="12.037824" x2="14.144766" y1="14.312017" x1="12.522614"/>\n    <line id="svg_47" y2="10.59061" x2="14.605966" y1="12.228665" x1="13.953925"/>\n    <ellipse ry="1" rx="1" id="svg_48" cy="3.982726" cx="13.460918"/>\n  </g>',viewBox:{x:18,y:18}}),Length:u(n,{iconContent:'<g id="length-group" fill="none" stroke-width="1" stroke="{{color}}" stroke-linecap="round" stroke-linejoin="round">\n    <path id="length-dashes" d="m22.5,6 -16.5,16.5" stroke-width="3" stroke-dasharray="0.6666,5" />\n  </g>',viewBox:{x:24,y:24}}),Probe:u(n,{iconContent:'<path fill="{{color}}" d="M1152 896q0 106-75 181t-181 75-181-75-75-181 75-181 181-75 181 75\n    75 181zm-256-544q-148 0-273 73t-198 198-73 273 73 273 198 198 273 73 273-73\n    198-198 73-273-73-273-198-198-273-73zm768 544q0 209-103 385.5t-279.5\n    279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5\n    385.5-103 385.5 103 279.5 279.5 103 385.5z" />',viewBox:{x:1792,y:1792}}),RectangleROI:u(n,{iconContent:'<path fill="{{color}}" d="M1312 256h-832q-66 0-113 47t-47 113v832q0 66 47\n    113t113 47h832q66 0 113-47t47-113v-832q0-66-47-113t-113-47zm288 160v832q0\n    119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119\n    84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z" />',viewBox:{x:1792,y:1792}}),TextMarker:u(n,{iconContent:'<path fill="{{color}}" d="M789 559l-170 450q33 0 136.5 2t160.5 2q19 0\n    57-2-87-253-184-452zm-725 1105l2-79q23-7 56-12.5t57-10.5 49.5-14.5 44.5-29\n    31-50.5l237-616 280-724h128q8 14 11 21l205 480q33 78 106 257.5t114 274.5q15\n    34 58 144.5t72 168.5q20 45 35 57 19 15 88 29.5t84 20.5q6 38 6 57 0 5-.5\n    13.5t-.5 12.5q-63 0-190-8t-191-8q-76 0-215 7t-178 8q0-43 4-78l131-28q1 0\n    12.5-2.5t15.5-3.5 14.5-4.5 15-6.5 11-8 9-11\n    2.5-14q0-16-31-96.5t-72-177.5-42-100l-450-2q-26 58-76.5 195.5t-50.5 162.5q0\n    22 14 37.5t43.5 24.5 48.5 13.5 57 8.5 41 4q1 19 1 58 0 9-2 27-58\n    0-174.5-10t-174.5-10q-8 0-26.5 4t-21.5 4q-80 14-188 14z" />',viewBox:{x:1792,y:1792}}),Crosshairs:u(n,{iconContent:'<path fill="{{color}}" d="M1325 1024h-109q-26 0-45-19t-19-45v-128q0-26\n    19-45t45-19h109q-32-108-112.5-188.5t-188.5-112.5v109q0 26-19 45t-45\n    19h-128q-26 0-45-19t-19-45v-109q-108 32-188.5 112.5t-112.5 188.5h109q26\n    0 45 19t19 45v128q0 26-19 45t-45 19h-109q32 108 112.5 188.5t188.5\n    112.5v-109q0-26 19-45t45-19h128q26 0 45 19t19 45v109q108-32\n    188.5-112.5t112.5-188.5zm339-192v128q0 26-19 45t-45 19h-143q-37 161-154.5\n    278.5t-278.5 154.5v143q0 26-19 45t-45 19h-128q-26\n    0-45-19t-19-45v-143q-161-37-278.5-154.5t-154.5-278.5h-143q-26\n    0-45-19t-19-45v-128q0-26 19-45t45-19h143q37-161\n    154.5-278.5t278.5-154.5v-143q0-26 19-45t45-19h128q26 0 45 19t19 45v143q161\n    37 278.5 154.5t154.5 278.5h143q26 0 45 19t19 45z" />',viewBox:{x:1792,y:1792}}),Eraser:u(n,{iconContent:'<path transform="translate(0,1792) scale(1,-1)" fill="{{color}}" d="M960 1408l336-384h-768l-336 384h768zm1013-1077q15\n    34 9.5 71.5t-30.5 65.5l-896 1024q-38 44-96 44h-768q-38\n    0-69.5-20.5t-47.5-54.5q-15-34-9.5-71.5t30.5-65.5l896-1024q38-44 96-44h768q38\n    0 69.5 20.5t47.5 54.5z" />',viewBox:{x:2048,y:1792}}),Magnify:u(n,{iconContent:'<path fill="{{color}}" d="M508.5 481.6l-129-129c-2.3-2.3-5.3-3.5-8.5-3.5h-10.3C395\n    312 416 262.5 416 208 416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c54.5\n    0 104-21 141.1-55.2V371c0 3.2 1.3 6.2 3.5 8.5l129 129c4.7 4.7 12.3 4.7 17\n    0l9.9-9.9c4.7-4.7 4.7-12.3 0-17zM208 384c-97.3 0-176-78.7-176-176S110.7 32 208\n    32s176 78.7 176 176-78.7 176-176 176z" />',viewBox:{x:512,y:512}}),Pan:u(n,{iconContent:'<path fill="{{color}}" d="M1411 541l-355 355 355 355 144-144q29-31 70-14 39 17\n    39 59v448q0 26-19 45t-45 19h-448q-42 0-59-40-17-39 14-69l144-144-355-355-355\n    355 144 144q31 30 14 69-17 40-59 40h-448q-26 0-45-19t-19-45v-448q0-42 40-59\n    39-17 69 14l144 144 355-355-355-355-144 144q-19 19-45 19-12\n    0-24-5-40-17-40-59v-448q0-26 19-45t45-19h448q42 0 59 40 17 39-14 69l-144\n    144 355 355 355-355-144-144q-31-30-14-69 17-40 59-40h448q26 0 45 19t19\n    45v448q0 42-39 59-13 5-25 5-26 0-45-19z" />',viewBox:{x:1792,y:1792}}),Rotate:u(n,{iconContent:'<path fill="{{color}}" d="M1664 256v448q0 26-19 45t-45 19h-448q-42 0-59-40-17-39\n    14-69l138-138q-148-137-349-137-104 0-198.5 40.5t-163.5 109.5-109.5\n    163.5-40.5 198.5 40.5 198.5 109.5 163.5 163.5 109.5 198.5 40.5q119 0\n    225-52t179-147q7-10 23-12 15 0 25 9l137 138q9 8 9.5 20.5t-7.5 22.5q-109\n    132-264 204.5t-327 72.5q-156 0-298-61t-245-164-164-245-61-298 61-298\n    164-245 245-164 298-61q147 0 284.5 55.5t244.5 156.5l130-129q29-31 70-14\n    39 17 39 59z" />',viewBox:{x:1792,y:1792}}),StackScroll:u(n,{iconContent:'<path fill="{{color}}" d="M24 21v2c0 0.547-0.453 1-1 1h-22c-0.547\n    0-1-0.453-1-1v-2c0-0.547 0.453-1 1-1h22c0.547 0 1 0.453 1 1zM24 13v2c0\n    0.547-0.453 1-1 1h-22c-0.547 0-1-0.453-1-1v-2c0-0.547 0.453-1 1-1h22c0.547\n    0 1 0.453 1 1zM24 5v2c0 0.547-0.453 1-1 1h-22c-0.547\n    0-1-0.453-1-1v-2c0-0.547 0.453-1 1-1h22c0.547 0 1 0.453 1 1z" />',viewBox:{x:24,y:28}}),WindowLevelRegion:u(n,{iconContent:'<path fill="{{color}}" d="M1664 416v960q0 119-84.5 203.5t-203.5 84.5h-960q-119\n    0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5\n    84.5t84.5 203.5z" />',viewBox:{x:1792,y:1792}}),WindowLevel:u(n,{iconContent:'\n    <path fill="{{color}}" d="M14.5,3.5 a1 1 0 0 1 -11,11 Z" stroke="none" opacity="0.8" />\n    <circle cx="9" cy="9" r="8" fill="none" stroke-width="2" stroke="{{color}}" />',viewBox:{x:18,y:18}}),Zoom:u(n,{iconContent:'\n  <path fill="{{color}}" d="M508.5 481.6l-129-129c-2.3-2.3-5.3-3.5-8.5-3.5h-10.3C395\n    312 416 262.5 416 208 416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c54.5\n    0 104-21 141.1-55.2V371c0 3.2 1.3 6.2 3.5 8.5l129 129c4.7 4.7 12.3 4.7 17\n    0l9.9-9.9c4.7-4.7 4.7-12.3 0-17zM208 384c-97.3 0-176-78.7-176-176S110.7 32 208\n    32s176 78.7 176 176-78.7 176-176 176z" />\n  <path fill="{{color}}" transform="scale(0.22,0.22) translate(1400,0)" d="M1216\n    320q0 26-19 45t-45 19h-128v1024h128q26 0 45 19t19 45-19 45l-256 256q-19\n    19-45 19t-45-19l-256-256q-19-19-19-45t19-45 45-19h128v-1024h-128q-26\n    0-45-19t-19-45 19-45l256-256q19-19 45-19t45 19l256 256q19 19 19 45z" />',viewBox:{x:640,y:512}}),SegmentationFreeHandEraseInside:u(n,{iconContent:`${a} ${o}`,viewBox:r}),SegmentationFreeHandFillInside:u(n,{iconContent:`${a} ${i}`,viewBox:r}),SegmentationFreeHandEraseOutside:u(n,{iconContent:`${a} ${o}`,viewBox:r}),SegmentationFreeHandFillOutside:u(n,{iconContent:`${a} ${i}`,viewBox:r}),SegmentationRectangleEraseInside:u(n,{iconContent:`${s} ${o}`,viewBox:r}),RectangleScissor:u(n,{iconContent:`${s} ${i}`,viewBox:r}),"RectangleScissor.FILL_INSIDE":u(n,{iconContent:`${s} ${i}`,viewBox:r}),"RectangleScissor.FILL_OUTSIDE":u(n,{iconContent:`${s} ${i}`,viewBox:r}),"RectangleScissor.ERASE_OUTSIDE":u(n,{iconContent:`${s} ${o}`,viewBox:r}),"RectangleScissor.ERASE_INSIDE":u(n,{iconContent:`${s} ${o}`,viewBox:r}),CircleScissor:u(n,{iconContent:`${l} ${i}`,viewBox:r}),"CircleScissor.FILL_INSIDE":u(n,{iconContent:`${l} ${i}`,viewBox:r}),"CircleScissor.ERASE_OUTSIDE":u(n,{iconContent:`${l} ${o}`,viewBox:r}),"CircleScissor.FILL_OUTSIDE":u(n,{iconContent:`${l} ${i}`,viewBox:r})};function u(A,e){return Object.assign(Object.create(A),e)}function d(A,e,t){c[A]=u(n,{iconContent:e,viewBox:t})}function g(A){if(Object.prototype.hasOwnProperty.call(c,A))return c[A]}const f=Object.keys(c)},21226:(A,e,t)=>{"use strict";t.d(e,{Z:()=>c});var n=t(50451),r=t(44906),o=t(20184),i=t(23233),a=t(22776);const s=n.Z.Highlighted,l=r.default.Active;class c extends o.Z{constructor(A,e,t,n,r){super(A,e,t,n,r)}static getDefinedCursor(A,e=!1,t){t||(t=(0,a.$)("color",{},s,l));const n=function(A,e,t){const n=e?"pointer":"cursor";return`${n}:${A}/${t}`}(A,e,t);let r=super.getDefinedCursor(n);if(!r){const o=(0,i.zu)(A);o&&(r=function(A,e,t,n,r){const{x:o,y:i}=A.mousePoint;return new c(function(A,e,t){return URL.createObjectURL(function(A,e,t){const n=(e?g:d)(A,t);return new Blob([n],{type:"image/svg+xml"})}(A,e,t))}(A,t,{color:n}),o,i,e,r)}(o,n,e,t,super.getDefinedCursor("default")),super.setDefinedCursor(n,r))}return r}}function u(A,e){const t=Object(e),n=Object.prototype.hasOwnProperty.bind(t);return(A+"").replace(/\{\{(\w+)\}\}/g,((A,e)=>n(e)?t[e]+"":""))}function d(A,e){const{iconContent:t,iconSize:n,viewBox:r}=A;return u(`\n    <svg data-icon="cursor" role="img" xmlns="http://www.w3.org/2000/svg"\n      width="${n}" height="${n}" viewBox="0 0\n      ${r.x} ${r.y}">\n      ${t}\n    </svg>`,e)}function g(A,e){const{iconContent:t,iconSize:n,viewBox:r,mousePointerGroupString:o}=A,i=16+n;return u(`\n    <svg data-icon="cursor" role="img" xmlns="http://www.w3.org/2000/svg"\n      width="${i}" height="${i}" viewBox="0 0 ${i} ${i}">\n      <g>${o}</g>\n      <g transform="translate(16, 16) scale(${n/Math.max(r.x,r.y,1)})">${t}</g>\n    </svg>`,e)}},49154:(A,e,t)=>{"use strict";var n,r;t.d(e,{p:()=>n,y:()=>r}),function(A){A[A.Primary=1]="Primary",A[A.Secondary=2]="Secondary",A[A.Primary_And_Secondary=3]="Primary_And_Secondary",A[A.Auxiliary=4]="Auxiliary",A[A.Primary_And_Auxiliary=5]="Primary_And_Auxiliary",A[A.Secondary_And_Auxiliary=6]="Secondary_And_Auxiliary",A[A.Primary_And_Secondary_And_Auxiliary=7]="Primary_And_Secondary_And_Auxiliary",A[A.Fourth_Button=8]="Fourth_Button",A[A.Fifth_Button=16]="Fifth_Button"}(n||(n={})),function(A){A[A.Shift=16]="Shift",A[A.Ctrl=17]="Ctrl",A[A.Alt=18]="Alt",A[A.Meta=91]="Meta",A[A.ShiftCtrl=1617]="ShiftCtrl",A[A.ShiftAlt=1618]="ShiftAlt",A[A.ShiftMeta=1691]="ShiftMeta",A[A.CtrlAlt=1718]="CtrlAlt",A[A.CtrlMeta=1791]="CtrlMeta",A[A.AltMeta=1891]="AltMeta"}(r||(r={}))},97698:(A,e,t)=>{"use strict";var n;t.d(e,{o:()=>n}),function(A){A.UP="UP",A.DOWN="DOWN",A.LEFT="LEFT",A.RIGHT="RIGHT"}(n||(n={}))},36260:(A,e,t)=>{"use strict";t.r(e),t.d(e,{AnnotationStyleStates:()=>o.Z,Events:()=>i.default,KeyboardBindings:()=>n.y,MouseBindings:()=>n.p,SegmentationRepresentations:()=>a.Z,Swipe:()=>s.o,ToolModes:()=>r.default});var n=t(49154),r=t(44906),o=t(50451),i=t(69786),a=t(1182),s=t(97698)},86251:(A,e,t)=>{"use strict";t.r(e),t.d(e,{AngleTool:()=>Oe.Z,AnnotationTool:()=>Be.Z,ArrowAnnotateTool:()=>Le.Z,BaseTool:()=>bA.Z,BidirectionalTool:()=>He.Z,BrushTool:()=>Ke.Z,CONSTANTS:()=>D,CircleROITool:()=>xe.Z,CircleScissorsTool:()=>ae,CobbAngleTool:()=>Me.Z,CrosshairsTool:()=>be.Z,DragProbeTool:()=>me.Z,EllipticalROITool:()=>Pe.Z,Enums:()=>Ne,LengthTool:()=>Fe.Z,MIPJumpToClickTool:()=>Ie.Z,MagnifyTool:()=>_e.Z,PaintFillTool:()=>he,PanTool:()=>pe.Z,PlanarFreehandROITool:()=>De.Z,PlanarRotateTool:()=>SA,ProbeTool:()=>Te.Z,RectangleROIStartEndThresholdTool:()=>Re.Z,RectangleROIThresholdTool:()=>Ve.Z,RectangleROITool:()=>Se.Z,RectangleScissorsTool:()=>re,ReferenceCursors:()=>VA,ReferenceLines:()=>Ee.Z,ReferenceLinesTool:()=>Ee.Z,ScaleOverlayTool:()=>GA,SegmentationDisplayTool:()=>ke.Z,SphereScissorsTool:()=>ce,StackScrollMouseWheelTool:()=>Qe.Z,StackScrollTool:()=>Ue.Z,Synchronizer:()=>x.Z,SynchronizerManager:()=>n,ToolGroupManager:()=>r,TrackballRotateTool:()=>we.Z,Types:()=>s,VolumeRotateMouseWheelTool:()=>ye.Z,WindowLevelTool:()=>ve.Z,ZoomTool:()=>Ce.Z,addTool:()=>P.LK,annotation:()=>c,cancelActiveManipulations:()=>p,cursors:()=>a,destroy:()=>g.ob,drawing:()=>i,init:()=>g.S1,removeTool:()=>P.IH,segmentation:()=>d,state:()=>H.ZP,synchronizers:()=>o,utilities:()=>J});var n={};t.r(n),t.d(n,{createSynchronizer:()=>w.Z,destroy:()=>m.Z,destroySynchronizer:()=>Q.Z,getAllSynchronizers:()=>U.Z,getSynchronizer:()=>C.Z,getSynchronizersForViewport:()=>v.Z});var r={};t.r(r),t.d(r,{createToolGroup:()=>y.Z,destroy:()=>F.Z,destroyToolGroup:()=>I.Z,getAllToolGroups:()=>T.Z,getToolGroup:()=>b.Z,getToolGroupForViewport:()=>E.Z,getToolGroupsWithToolName:()=>S.Z});var o={};t.r(o),t.d(o,{createCameraPositionSynchronizer:()=>L.Z,createStackImageSynchronizer:()=>_.Z,createVOISynchronizer:()=>O.Z,createZoomPanSynchronizer:()=>M.Z});var i={};t.r(i),t.d(i,{draw:()=>k.Z,drawArrow:()=>z.Z,drawCircle:()=>V.Z,drawEllipse:()=>R.Z,drawHandles:()=>K.Z,drawLine:()=>N.Z,drawLinkedTextBox:()=>G.Z,drawPolyline:()=>Z.Z,drawRect:()=>W.Z,drawTextBox:()=>X.Z});var a={};t.r(a),t.d(a,{CursorNames:()=>tA,CursorSVG:()=>eA.UQ,ImageMouseCursor:()=>Y.Z,MouseCursor:()=>j.Z,SVGMouseCursor:()=>q.Z,elementCursor:()=>$,registerCursor:()=>eA.EF,setCursorForElement:()=>AA});var s={};t.r(s);var l={};t.r(l),t.d(l,{getFont:()=>oA,getState:()=>nA.Z,style:()=>iA.Z});var c={};t.r(c),t.d(c,{FrameOfReferenceSpecificAnnotationManager:()=>uA.Z,config:()=>l,locking:()=>aA,selection:()=>sA,state:()=>lA,visibility:()=>cA});var u={};t.r(u),t.d(u,{color:()=>wA,getGlobalConfig:()=>vA.Hi,getGlobalRepresentationConfig:()=>vA.gN,getSegmentSpecificConfig:()=>vA.bH,getSegmentationRepresentationSpecificConfig:()=>vA.gi,getToolGroupSpecificConfig:()=>vA.i,setGlobalConfig:()=>vA.Qb,setGlobalRepresentationConfig:()=>vA.eu,setSegmentSpecificConfig:()=>vA.Pv,setSegmentationRepresentationSpecificConfig:()=>vA.Wx,setToolGroupSpecificConfig:()=>vA.K0,visibility:()=>mA});var d={};t.r(d),t.d(d,{activeSegmentation:()=>hA,addSegmentationRepresentations:()=>fA.Z,addSegmentations:()=>gA.Z,config:()=>u,removeSegmentationsFromToolGroup:()=>dA.Z,segmentIndex:()=>CA,segmentLocking:()=>BA,state:()=>pA,triggerSegmentationEvents:()=>UA});var g=t(68618),f=t(44906),h=t(22538),B=t(69114);function p(A){const e=(0,h.Z)(A,[f.default.Active,f.default.Passive]),t=(0,B.Z)(A,e);for(const{tool:e}of t){const t=e.cancel(A);if(t)return t}}var w=t(35646),m=t(67358),v=t(66277),C=t(59396),U=t(55907),Q=t(76829),y=t(5841),I=t(38379),F=t(14100),b=t(26408),E=t(25792),T=t(77095),S=t(79786),P=t(45283),x=t(93700),H=t(40622),D=t(77100),L=t(75080),O=t(91751),M=t(94457),_=t(38609),k=t(81833),V=t(6355),R=t(28823),K=t(80084),N=t(55742),Z=t(99469),G=t(82853),W=t(72076),X=t(50453),z=t(68390),J=t(53070),j=t(58251),Y=t(20184),q=t(21226),$=t(23222);const AA=function(A,e){let t=q.Z.getDefinedCursor(e,!0);t||(t=j.Z.getDefinedCursor(e)),t||(console.log(`Cursor ${e} is not defined either as SVG or as a standard cursor.`),t=j.Z.getDefinedCursor(e)),(0,$.setElementCursor)(A,t)};var eA=t(23233);const tA=[...eA.Sz,...j.P];var nA=t(98020),rA=t(22776);const oA=function(A,e,t){return`${(0,rA.$)("textBoxFontSize",A,e,t)}px ${(0,rA.$)("textBoxFontFamily",A,e,t)}`};var iA=t(12200),aA=t(80686),sA=t(98336),lA=t(7576),cA=t(15849),uA=t(76551),dA=t(87406),gA=t(54080),fA=t(17945),hA=t(60443),BA=t(33861),pA=t(57756),wA=t(87044),mA=t(90021),vA=t(44158),CA=t(27977),UA=t(35316),QA=t(96720),yA=t(19680),IA=t(6807),FA=t(64950),bA=t(68957),EA=t(31603);class TA extends bA.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"]}){super(A,e),this.touchDragCallback=this._dragCallback.bind(this),this.mouseDragCallback=this._dragCallback.bind(this)}_dragCallback(A){const{element:e,currentPoints:t,startPoints:n}=A.detail,r=t.world,o=n.world,i=(0,QA.ZP)(e),{viewport:a}=i,s=a.getCamera(),l=[.5*e.clientWidth,.5*e.clientHeight],c=a.canvasToWorld(l);let u=(0,EA.Z)([o,c],[c,r]);const{viewPlaneNormal:d,viewUp:g}=s,f=IA.sub(IA.create(),c,o),h=IA.sub(IA.create(),c,r),B=IA.cross(IA.create(),f,h);if(IA.dot(d,B)>0&&(u=-u),!Number.isNaN(u)){if(a instanceof yA.Z){const A=u*Math.PI/180,e=FA.identity(new Float32Array(16));FA.rotate(e,e,A,d);const t=IA.transformMat4(IA.create(),g,e);a.setCamera({viewUp:t})}else{const{rotation:A}=a.getProperties();a.setProperties({rotation:A+u})}a.render()}}}TA.toolName="PlanarRotate";const SA=TA;var PA=t(65863),xA=t(12145),HA=t(62838),DA=t(75089),LA=t(11207),OA=t(43356),MA=t(49662),_A=t(92780);class kA extends MA.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"],configuration:{shadow:!0,preventHandleOutsideImage:!1,displayThreshold:5,positionSync:!0,disableCursor:!1}}){super(A,e),this.isDrawing=!1,this.isHandleOutsideImage=!1,this._elementWithCursor=null,this._currentCursorWorldPosition=null,this._currentCanvasPosition=null,this._disableCursorEnabled=!1,this.mouseMoveCallback=A=>{const{detail:e}=A,{element:t,currentPoints:n}=e;this._currentCursorWorldPosition=n.world,this._currentCanvasPosition=n.canvas,this._elementWithCursor=t;const r=this.getActiveAnnotation(t);return null===r?(this.createInitialAnnotation(n.world,t),!1):(this.updateAnnotationPosition(t,r),!1)},this.createInitialAnnotation=(A,e)=>{const t=(0,QA.ZP)(e);if(!t)throw new Error("No enabled element found");const{viewport:n,renderingEngine:r}=t;this.isDrawing=!0;const o=n.getCamera(),{viewPlaneNormal:i,viewUp:a}=o;if(!i||!a)throw new Error("Camera not found");const s=this.getReferencedImageId(n,A,i,a),l=n.getFrameOfReferenceUID(),c={highlighted:!0,invalidated:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...i],viewUp:[...a],FrameOfReferenceUID:l,referencedImageId:s},data:{label:"",handles:{points:[[...A]],activeHandleIndex:null,textBox:{hasMoved:!1,worldPosition:[0,0,0],worldBoundingBox:{topLeft:[0,0,0],topRight:[0,0,0],bottomLeft:[0,0,0],bottomRight:[0,0,0]}}}}};if((0,lA.getAnnotations)(this.getToolName(),e).length>0)return null;if(null===(0,lA.addAnnotation)(c,e))return;const u=(0,LA.Z)(e,this.getToolName(),!1);(0,OA.Z)(r,u)},this.onCameraModified=A=>{const e=A.detail,{element:t,previousCamera:n,camera:r}=e,o=(0,QA.ZP)(t).viewport;if(t!==this._elementWithCursor)return;const i=n.focalPoint,a=r.viewPlaneNormal,s=r.focalPoint,l=[0,0,0];if(_A.ZP.subtract(s,i,l),0===l.reduce(((A,e)=>A+e),0))return;const c=_A.ZP.dot(l,a);if(Math.abs(c)<.01)return;if(!this._currentCanvasPosition)return;const u=o.canvasToWorld(this._currentCanvasPosition);this._currentCursorWorldPosition=u,this.updateAnnotationPosition(t,this.getActiveAnnotation(t))},this.renderAnnotation=(A,e)=>{let t=!1;const{viewport:n,FrameOfReferenceUID:r}=A,o=this._elementWithCursor===n.element;this.configuration.positionSync&&!o&&this.updateViewportImage(n);const{element:i}=n;let a=(0,lA.getAnnotations)(this.getToolName(),i);if(!a?.length)return t;if(a=this.filterInteractableAnnotationsForElement(i,a),!a?.length)return t;const s={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:A.viewport.id};for(let A=0;A<a.length;A++){const r=a[A],{annotationUID:i,data:l}=r,{handles:c}=l,{points:u}=c;if(!i)return t;s.annotationUID=i;const d=parseFloat(this.getStyle("lineWidth",s,r)),g=d,f=this.getStyle("lineDash",s,r),h=this.getStyle("color",s,r);if(u[0].some((A=>isNaN(A))))return t;const B=u.map((A=>n.worldToCanvas(A)));if(!n.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),t;if(!(0,cA.isAnnotationVisible)(i))continue;const p={upper:"upper",right:"right",lower:"lower",left:"left"},[w,m]=B[0],v=o?20:7,C=o?5:7;(0,N.Z)(e,i,p.upper,[w,m-(v/2+C)],[w,m-v/2],{color:h,lineDash:f,lineWidth:g}),(0,N.Z)(e,i,p.lower,[w,m+(v/2+C)],[w,m+v/2],{color:h,lineDash:f,lineWidth:g}),(0,N.Z)(e,i,p.right,[w+(v/2+C),m],[w+v/2,m],{color:h,lineDash:f,lineWidth:g}),(0,N.Z)(e,i,p.left,[w-(v/2+C),m],[w-v/2,m],{color:h,lineDash:f,lineWidth:g}),t=!0}return t},this._disableCursorEnabled=this.configuration.disableCursor}onSetToolActive(){if(this._disableCursorEnabled=this.configuration.disableCursor,!this._disableCursorEnabled)return;const A=(0,b.Z)(this.toolGroupId).viewportsInfo;if(!A)return;A.map((A=>(0,QA.O)(A.viewportId,A.renderingEngineId))).forEach((A=>{A&&(0,$.hideElementCursor)(A.viewport.element)}))}onSetToolDisabled(){if(!this._disableCursorEnabled)return;const A=(0,b.Z)(this.toolGroupId).viewportsInfo;if(!A)return;A.map((A=>(0,QA.O)(A.viewportId,A.renderingEngineId))).forEach((A=>{A&&(0,$.resetElementCursor)(A.viewport.element)}))}getActiveAnnotation(A){const e=(0,lA.getAnnotations)(this.getToolName(),A);if(!e.length)return null;return e[0]}updateAnnotationPosition(A,e){const t=this._currentCursorWorldPosition;if(!t)return;if(!e.data?.handles?.points)return;e.data.handles.points=[[...t]],e.invalidated=!0;const n=(0,LA.Z)(A,this.getToolName(),!1),r=(0,QA.ZP)(A);if(!r)return;const{renderingEngine:o}=r;(0,OA.Z)(o,n)}filterInteractableAnnotationsForElement(A,e){if(!(e instanceof Array)||0===e.length)return[];const t=e[0],n=(0,QA.ZP)(A)?.viewport;if(!n)return[];const r=n.getCamera(),{viewPlaneNormal:o,focalPoint:i}=r;if(!o||!i)return[];const a=t.data?.handles?.points;if(!(a instanceof Array)||1!==a.length)return[];const s=a[0],l=PA.planeEquation(o,i);return PA.planeDistanceToPoint(l,s)<this.configuration.displayThreshold?[t]:[]}updateViewportImage(A){const e=this._currentCursorWorldPosition;if(e&&!e.some((A=>isNaN(A))))if(A instanceof xA.Z){const t=HA.Z(e,A);if(null===t)return;t!==A.getCurrentImageIdIndex()&&A.setImageIdIndex(t)}else if(A instanceof DA.Z){const{focalPoint:t,viewPlaneNormal:n}=A.getCamera();if(!t||!n)return;const r=PA.planeEquation(n,t),o=PA.planeDistanceToPoint(r,e,!0);if(Math.abs(o)<.5)return;const i=IA.normalize(IA.create(),IA.fromValues(...n)),a=IA.scale(IA.create(),i,o),s=IA.add(IA.create(),IA.fromValues(...t),a);if(!0){A.setCamera({focalPoint:s});const e=A.getRenderingEngine();e&&e.renderViewport(A.id)}}}}kA.toolName="ReferenceCursors";const VA=kA;var RA=t(26222),KA=t(68979);const NA=[];class ZA extends MA.Z{constructor(A={},e={configuration:{viewportId:"",scaleLocation:"bottom"}}){super(A,e),this.editData={},this._init=()=>{const A=(0,RA.Uu)()[0];if(!A)return;const e=(0,b.Z)(this.toolGroupId).viewportsInfo;if(!e)return;const t=e.map((A=>(0,QA.O)(A.viewportId,A.renderingEngineId)));let{viewport:n}=t[0];const{FrameOfReferenceUID:r}=t[0];if(this.configuration.viewportId&&t.forEach((A=>{A.viewport.id==this.configuration.viewportId&&(n=A.viewport)})),!n)return;const{viewUp:o,viewPlaneNormal:i}=n.getCamera(),a=KA.Z(n);let s=this.editData.annotation;const l=(0,lA.getAnnotations)(this.getToolName(),n.element);if(l.length&&(s=l.filter((A=>A.data.viewportId==n.id))[0]),NA.includes(n.id))this.editData.annotation.data.viewportId==n.id&&(this.editData.annotation.data.handles.points=a,this.editData.annotation.data.viewportId=n.id);else{const A={metadata:{toolName:this.getToolName(),viewPlaneNormal:[...i],viewUp:[...o],FrameOfReferenceUID:r,referencedImageId:null},data:{handles:{points:a},viewportId:n.id}};NA.push(n.id),(0,lA.addAnnotation)(A,n.element),s=A}this.editData={viewport:n,renderingEngine:A,annotation:s}},this.onSetToolEnabled=()=>{this._init()},this.onCameraModified=A=>{this.configuration.viewportId=A.detail.viewportId,this._init()},this.computeScaleSize=(A,e,t)=>{const n=[16e3,8e3,4e3,2e3,1e3,500,250,100,50,25,10,5,2];let r;return r="top"==t||"bottom"==t?n.filter((e=>e<.6*A&&e>.2*A)):n.filter((A=>A<.6*e&&A>.2*e)),r[0]},this.computeEndScaleTicks=(A,e)=>{const t={bottom:[[0,-10],[0,-10]],top:[[0,10],[0,10]],left:[[0,0],[10,0]],right:[[0,0],[-10,0]]};return{endTick1:[[A[1][0]+t[e][0][0],A[1][1]+t[e][0][0]],[A[1][0]+t[e][1][0],A[1][1]+t[e][1][1]]],endTick2:[[A[0][0]+t[e][0][0],A[0][1]+t[e][0][0]],[A[0][0]+t[e][1][0],A[0][1]+t[e][1][1]]]}},this.computeInnerScaleTicks=(A,e,t,n,r)=>{let o;"bottom"==e||"top"==e?o=r[0][0]-n[0][0]:"left"!=e&&"right"!=e||(o=r[0][1]-n[0][1]);const i=[],a=[],s=[];let l=A;A>=50&&(l=A/10);const c=o/l;for(let A=0;A<l-1;A++){const r={bottom:[[c*(A+1),0],[c*(A+1),5]],top:[[c*(A+1),0],[c*(A+1),-5]],left:[[0,c*(A+1)],[-5,c*(A+1)]],right:[[0,c*(A+1)],[5,c*(A+1)]]};i.push(`${t}-tick${A}`),a.push(`tick${A}`),(A+1)%5==0?s.push([[n[0][0]+r[e][0][0],n[0][1]+r[e][0][1]],[n[1][0]+r[e][0][0],n[1][1]+r[e][0][1]]]):s.push([[n[0][0]+r[e][0][0],n[0][1]+r[e][0][1]],[n[1][0]+r[e][1][0],n[1][1]+r[e][1][1]]])}return{tickIds:i,tickUIDs:a,tickCoordinates:s}},this.computeWorldScaleCoordinates=(A,e,t)=>{let n,r=IA.subtract(IA.create(),t[0],t[1]);r=IA.normalize(IA.create(),r);let o=IA.subtract(IA.create(),t[2],t[0]);o=IA.normalize(IA.create(),o);const i={bottom:[t[1],t[2]],top:[t[0],t[3]],right:[t[2],t[3]],left:[t[0],t[1]]},a=IA.add(IA.create(),i[e][0],i[e][0]).map((A=>A/2)),s=A/2/Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)+Math.pow(r[2],2));return"top"==e||"bottom"==e?n=[IA.subtract(IA.create(),a,o.map((A=>A*s))),IA.add(IA.create(),a,o.map((A=>A*s)))]:"left"!=e&&"right"!=e||(n=[IA.add(IA.create(),a,r.map((A=>A*s))),IA.subtract(IA.create(),a,r.map((A=>A*s)))]),n},this.computeCanvasScaleCoordinates=(A,e,t,n,r)=>{let o;if("top"==r||"bottom"==r){const n=e[0][0]-e[1][0];o=[[A.width/2-n/2,t.height],[A.width/2+n/2,t.height]]}else if("left"==r||"right"==r){const t=e[0][1]-e[1][1];o=[[n.width,A.height/2-t/2],[n.width,A.height/2+t/2]]}return o},this.computeScaleBounds=(A,e,t,n)=>{const r=e*Math.min(1e3,A.width),o=t*Math.min(1e3,A.height),i={bottom:[-o,-r],top:[o,r],left:[o,r],right:[-o,-r]},a={bottom:[A.height,A.width],top:[0,A.width],left:[A.height,0],right:[A.height,A.width]};return{height:a[n][0]+i[n][0],width:a[n][1]+i[n][1]}}}renderAnnotation(A,e){if(!this.editData.viewport)return;const t=this.configuration.scaleLocation,{viewport:n}=A,r=(0,lA.getAnnotations)(this.getToolName(),n.element).filter((A=>A.data.viewportId==n.id))[0],o=A.viewport.canvas;if(!n)return false;const i={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:A.viewport.id},a={width:o.width,height:o.height},s=r.data.handles.points[0],l=r.data.handles.points[1],c=r.data.handles.points[2],u=r.data.handles.points[3],d=[s,c,l,u],g=IA.distance(c,u),f=IA.distance(s,c),h=this.computeScaleBounds(a,.05,.05,t),B=this.computeScaleBounds(a,.05,.05,t),p=this.computeScaleSize(g,f,t),w=this.computeWorldScaleCoordinates(p,t,d).map((A=>n.worldToCanvas(A))),m=this.computeCanvasScaleCoordinates(a,w,B,h,t),v=this.computeEndScaleTicks(m,t),{annotationUID:C}=r;i.annotationUID=C;const U=this.getStyle("lineWidth",i,r),Q=this.getStyle("lineDash",i,r),y=this.getStyle("color",i,r),I=this.getStyle("shadow",i,r),F=`${C}-scaleline`;(0,N.Z)(e,C,"1",m[0],m[1],{color:y,width:U,lineDash:Q,shadow:I},F);const b=`${C}-left`;(0,N.Z)(e,C,"2",v.endTick1[0],v.endTick1[1],{color:y,width:U,lineDash:Q,shadow:I},b);const E=`${C}-right`;(0,N.Z)(e,C,"3",v.endTick2[0],v.endTick2[1],{color:y,width:U,lineDash:Q,shadow:I},E);const T={bottom:[-10,-42],top:[-12,-35],left:[-40,-20],right:[-50,-20]},S=[m[0][0]+T[t][0],m[0][1]+T[t][1]],P=this._getTextLines(p),{tickIds:x,tickUIDs:H,tickCoordinates:D}=this.computeInnerScaleTicks(p,t,C,v.endTick1,v.endTick2);for(let A=0;A<H.length;A++)(0,N.Z)(e,C,H[A],D[A][0],D[A][1],{color:y,width:U,lineDash:Q,shadow:I},x[A]);return(0,X.Z)(e,C,"text0",P,[S[0],S[1]],{fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:"14px",lineDash:"2,3",lineWidth:"1",shadow:!0,color:y}),false}_getTextLines(A){let e,t;A>=50?(e=A/10,t=" cm"):(e=A,t=" mm");return[e.toString().concat(t)]}}ZA.toolName="ScaleOverlay";const GA=ZA;var WA=t(60754),XA=t(27054),zA=t(79931),JA=t(91728);const{transformWorldToIndex:jA}=XA;function YA(A,e,t=!0){const{volume:n,points:r,segmentsLocked:o,segmentIndex:i,segmentationId:a,constraintFn:s}=e,{imageData:l,dimensions:c}=n,u=n.getScalarData();let d=r.map((A=>jA(l,A)));d=d.map((A=>A.map((A=>Math.round(A)))));const g=(0,zA.Z)(d,c);if(g.every((([A,e])=>A!==e)))throw new Error("Oblique segmentation tools are not supported yet");(0,JA.Z)(l,(()=>!0),(({value:A,index:e,pointIJK:t})=>{o.includes(A)||(s?s(t)&&(u[e]=i):u[e]=i)}),g),(0,UA.triggerSegmentationDataModified)(a)}function qA(A,e){YA(0,e,!0)}const{transformWorldToIndex:$A}=XA;function Ae(A,e,t=!0){const{volume:n,points:r,segmentsLocked:o,segmentationId:i}=e,{imageData:a,dimensions:s}=n,l=n.getScalarData(),c=r.map((A=>$A(a,A))),u=(0,zA.Z)(c,s);if(u.every((([A,e])=>A!==e)))throw new Error("Oblique segmentation tools are not supported yet");(0,JA.Z)(a,(()=>!0),(({value:A,index:e})=>{o.includes(A)||(l[e]=0)}),u),(0,UA.triggerSegmentationDataModified)(i)}function ee(A,e){Ae(0,e,!0)}var te=t(69786);class ne extends bA.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"],configuration:{strategies:{FILL_INSIDE:qA,ERASE_INSIDE:ee},defaultStrategy:"FILL_INSIDE",activeStrategy:"FILL_INSIDE"}}){super(A,e),this.preMouseDownCallback=A=>{const e=A.detail,{currentPoints:t,element:n}=e,r=t.world,o=(0,QA.ZP)(n),{viewport:i,renderingEngine:a}=o;this.isDrawing=!0;const s=i.getCamera(),{viewPlaneNormal:l,viewUp:c}=s,u=this.toolGroupId,d=hA.getActiveSegmentationRepresentation(u);if(!d)throw new Error("No active segmentation detected, create one before using scissors tool");const{segmentationRepresentationUID:g,segmentationId:f,type:h}=d,B=CA.getActiveSegmentIndex(f),p=BA.getLockedSegments(f),w=wA.getColorForSegmentIndex(u,g,B),{representationData:m}=(0,pA.getSegmentation)(f),{volumeId:v}=m[h],C=WA.ZP.getVolume(v),U={highlighted:!0,invalidated:!0,metadata:{viewPlaneNormal:[...l],viewUp:[...c],FrameOfReferenceUID:i.getFrameOfReferenceUID(),referencedImageId:"",toolName:this.getToolName(),segmentColor:w},data:{handles:{points:[[...r],[...r],[...r],[...r]],activeHandleIndex:null}}},Q=(0,LA.Z)(n,this.getToolName());return this.editData={annotation:U,segmentation:C,segmentIndex:B,segmentsLocked:p,segmentColor:w,segmentationId:f,viewportIdsToRender:Q,handleIndex:3,movingTextBox:!1,newAnnotation:!0,hasMoved:!1},this._activateDraw(n),(0,$.hideElementCursor)(n),A.preventDefault(),(0,OA.Z)(a,Q),!0},this._dragCallback=A=>{this.isDrawing=!0;const e=A.detail,{element:t}=e,{annotation:n,viewportIdsToRender:r,handleIndex:o}=this.editData,{data:i}=n,{currentPoints:a}=e,s=(0,QA.ZP)(t),{worldToCanvas:l,canvasToWorld:c}=s.viewport,u=a.world,{points:d}=i.handles;let g,f,h,B,p,w,m,v;switch(d[o]=[...u],o){case 0:case 3:g=l(d[0]),B=l(d[3]),f=[B[0],g[1]],h=[g[0],B[1]],w=c(f),m=c(h),d[1]=w,d[2]=m;break;case 1:case 2:f=l(d[1]),h=l(d[2]),g=[h[0],f[1]],B=[f[0],h[1]],p=c(g),v=c(B),d[0]=p,d[3]=v}n.invalidated=!0,this.editData.hasMoved=!0;const{renderingEngine:C}=s;(0,OA.Z)(C,r)},this._endCallback=A=>{const e=A.detail,{element:t}=e,{annotation:n,newAnnotation:r,hasMoved:o,segmentation:i,segmentationId:a,segmentIndex:s,segmentsLocked:l}=this.editData,{data:c}=n;if(r&&!o)return;c.handles.activeHandleIndex=null,this._deactivateDraw(t),(0,$.resetElementCursor)(t);const u=(0,QA.ZP)(t),{viewport:d}=u;if(this.editData=null,this.isDrawing=!1,d instanceof xA.Z)throw new Error("Not implemented yet");const g={points:c.handles.points,volume:i,segmentationId:a,segmentIndex:s,segmentsLocked:l};this.applyActiveStrategy(u,g)},this._activateDraw=A=>{A.addEventListener(te.default.MOUSE_UP,this._endCallback),A.addEventListener(te.default.MOUSE_DRAG,this._dragCallback),A.addEventListener(te.default.MOUSE_CLICK,this._endCallback),A.addEventListener(te.default.TOUCH_END,this._endCallback),A.addEventListener(te.default.TOUCH_DRAG,this._dragCallback),A.addEventListener(te.default.TOUCH_TAP,this._endCallback)},this._deactivateDraw=A=>{A.removeEventListener(te.default.MOUSE_UP,this._endCallback),A.removeEventListener(te.default.MOUSE_DRAG,this._dragCallback),A.removeEventListener(te.default.MOUSE_CLICK,this._endCallback),A.removeEventListener(te.default.TOUCH_TAP,this._endCallback),A.removeEventListener(te.default.TOUCH_END,this._endCallback),A.removeEventListener(te.default.TOUCH_DRAG,this._dragCallback)},this.renderAnnotation=(A,e)=>{let t=!1;if(!this.editData)return t;const{viewport:n}=A,{annotation:r}=this.editData,o=r.metadata,i=r.annotationUID,a=r.data,{points:s}=a.handles,l=s.map((A=>n.worldToCanvas(A))),c=`rgb(${o.segmentColor.slice(0,3)})`;if(!n.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),t;return(0,W.Z)(e,i,"0",l[0],l[3],{color:c}),t=!0,t}}}ne.toolName="RectangleScissor";const re=ne;var oe=t(66973);class ie extends bA.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"],configuration:{strategies:{FILL_INSIDE:oe.TO},defaultStrategy:"FILL_INSIDE",activeStrategy:"FILL_INSIDE"}}){super(A,e),this.preMouseDownCallback=A=>{const e=A.detail,{currentPoints:t,element:n}=e,r=t.world,o=t.canvas,i=(0,QA.ZP)(n),{viewport:a,renderingEngine:s}=i;this.isDrawing=!0;const l=a.getCamera(),{viewPlaneNormal:c,viewUp:u}=l,d=this.toolGroupId,g=hA.getActiveSegmentationRepresentation(d);if(!g)throw new Error("No active segmentation detected, create one before using scissors tool");const{segmentationRepresentationUID:f,segmentationId:h,type:B}=g,p=CA.getActiveSegmentIndex(h),w=BA.getLockedSegments(h),m=wA.getColorForSegmentIndex(d,f,p),{representationData:v}=(0,pA.getSegmentation)(h),{volumeId:C}=v[B],U=WA.ZP.getVolume(C),Q={invalidated:!0,highlighted:!0,metadata:{viewPlaneNormal:[...c],viewUp:[...u],FrameOfReferenceUID:a.getFrameOfReferenceUID(),referencedImageId:"",toolName:this.getToolName(),segmentColor:m},data:{handles:{points:[[...r],[...r],[...r],[...r]],activeHandleIndex:null},isDrawing:!0,cachedStats:{}}},y=[a.id];return this.editData={annotation:Q,segmentation:U,centerCanvas:o,segmentIndex:p,segmentationId:h,segmentsLocked:w,segmentColor:m,viewportIdsToRender:y,handleIndex:3,movingTextBox:!1,newAnnotation:!0,hasMoved:!1},this._activateDraw(n),(0,$.hideElementCursor)(n),A.preventDefault(),(0,OA.Z)(s,y),!0},this._dragCallback=A=>{this.isDrawing=!0;const e=A.detail,{element:t}=e,{currentPoints:n}=e,r=n.canvas,o=(0,QA.ZP)(t),{renderingEngine:i,viewport:a}=o,{canvasToWorld:s}=a,{annotation:l,viewportIdsToRender:c,centerCanvas:u}=this.editData,{data:d}=l,g=Math.abs(r[0]-u[0]),f=Math.abs(r[1]-u[1]),h=Math.sqrt(g*g+f*f),B=[u[0],u[1]+h],p=[u[0],u[1]-h],w=[u[0]-h,u[1]],m=[u[0]+h,u[1]];d.handles.points=[s(B),s(p),s(w),s(m)],l.invalidated=!0,this.editData.hasMoved=!0,(0,OA.Z)(i,c)},this._endCallback=A=>{const e=A.detail,{element:t}=e,{annotation:n,newAnnotation:r,hasMoved:o,segmentation:i,segmentIndex:a,segmentsLocked:s,segmentationId:l}=this.editData,{data:c}=n,{viewPlaneNormal:u,viewUp:d}=n.metadata;if(r&&!o)return;c.handles.activeHandleIndex=null,this._deactivateDraw(t),(0,$.resetElementCursor)(t);const g=(0,QA.ZP)(t),{viewport:f}=g;if(this.editData=null,this.isDrawing=!1,f instanceof xA.Z)throw new Error("Not implemented yet");const h={points:c.handles.points,volume:i,segmentIndex:a,segmentsLocked:s,viewPlaneNormal:u,segmentationId:l,viewUp:d};this.applyActiveStrategy(g,h)},this._activateDraw=A=>{A.addEventListener(te.default.MOUSE_UP,this._endCallback),A.addEventListener(te.default.MOUSE_DRAG,this._dragCallback),A.addEventListener(te.default.MOUSE_CLICK,this._endCallback),A.addEventListener(te.default.TOUCH_TAP,this._endCallback),A.addEventListener(te.default.TOUCH_DRAG,this._dragCallback),A.addEventListener(te.default.TOUCH_END,this._endCallback)},this._deactivateDraw=A=>{A.removeEventListener(te.default.MOUSE_UP,this._endCallback),A.removeEventListener(te.default.MOUSE_DRAG,this._dragCallback),A.removeEventListener(te.default.MOUSE_CLICK,this._endCallback),A.removeEventListener(te.default.TOUCH_END,this._endCallback),A.removeEventListener(te.default.TOUCH_DRAG,this._dragCallback),A.removeEventListener(te.default.TOUCH_TAP,this._endCallback)},this.renderAnnotation=(A,e)=>{let t=!1;if(!this.editData)return t;const{viewport:n}=A,{viewportIdsToRender:r}=this.editData;if(!r.includes(n.id))return t;const{annotation:o}=this.editData,i=o.metadata,a=o.annotationUID,s=o.data,{points:l}=s.handles,c=l.map((A=>n.worldToCanvas(A))),u=c[0],d=c[1],g=[Math.floor((u[0]+d[0])/2),Math.floor((u[1]+d[1])/2)],f=Math.abs(u[1]-Math.floor((u[1]+d[1])/2)),h=`rgb(${i.segmentColor.slice(0,3)})`;if(!n.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),t;return(0,V.Z)(e,a,"0",g,f,{color:h}),t=!0,t}}}ie.toolName="CircleScissor";const ae=ie;var se=t(76370);class le extends bA.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"],configuration:{strategies:{FILL_INSIDE:se.p},defaultStrategy:"FILL_INSIDE",activeStrategy:"FILL_INSIDE"}}){super(A,e),this.preMouseDownCallback=A=>{const e=A.detail,{currentPoints:t,element:n}=e,r=t.world,o=t.canvas,i=(0,QA.ZP)(n),{viewport:a,renderingEngine:s}=i;this.isDrawing=!0;const l=a.getCamera(),{viewPlaneNormal:c,viewUp:u}=l,d=this.toolGroupId,g=hA.getActiveSegmentationRepresentation(d);if(!g)throw new Error("No active segmentation detected, create one before using scissors tool");const{segmentationRepresentationUID:f,segmentationId:h,type:B}=g,p=CA.getActiveSegmentIndex(h),w=BA.getLockedSegments(h),m=wA.getColorForSegmentIndex(d,f,p),{representationData:v}=(0,pA.getSegmentation)(h),{volumeId:C}=v[B],U=WA.ZP.getVolume(C);this.isDrawing=!0;const Q={metadata:{viewPlaneNormal:[...c],viewUp:[...u],FrameOfReferenceUID:a.getFrameOfReferenceUID(),referencedImageId:"",toolName:this.getToolName(),segmentColor:m},data:{invalidated:!0,handles:{points:[[...r],[...r],[...r],[...r]],activeHandleIndex:null},cachedStats:{},highlighted:!0}},y=[a.id];return this.editData={annotation:Q,segmentation:U,centerCanvas:o,segmentIndex:p,segmentsLocked:w,segmentColor:m,segmentationId:h,toolGroupId:d,viewportIdsToRender:y,handleIndex:3,movingTextBox:!1,newAnnotation:!0,hasMoved:!1},this._activateDraw(n),(0,$.hideElementCursor)(n),A.preventDefault(),(0,OA.Z)(s,y),!0},this._dragCallback=A=>{this.isDrawing=!0;const e=A.detail,{element:t}=e,{currentPoints:n}=e,r=n.canvas,o=(0,QA.ZP)(t),{renderingEngine:i,viewport:a}=o,{canvasToWorld:s}=a,{annotation:l,viewportIdsToRender:c,centerCanvas:u}=this.editData,{data:d}=l,g=Math.abs(r[0]-u[0]),f=Math.abs(r[1]-u[1]),h=Math.sqrt(g*g+f*f),B=[u[0],u[1]+h],p=[u[0],u[1]-h],w=[u[0]-h,u[1]],m=[u[0]+h,u[1]];d.handles.points=[s(B),s(p),s(w),s(m)],l.invalidated=!0,this.editData.hasMoved=!0,(0,OA.Z)(i,c)},this._endCallback=A=>{const e=A.detail,{element:t}=e,{annotation:n,newAnnotation:r,hasMoved:o,segmentation:i,segmentIndex:a,segmentsLocked:s,segmentationId:l}=this.editData,{data:c}=n,{viewPlaneNormal:u,viewUp:d}=n.metadata;if(r&&!o)return;n.highlighted=!1,c.handles.activeHandleIndex=null,this._deactivateDraw(t),(0,$.resetElementCursor)(t);const g=(0,QA.ZP)(t),{viewport:f}=g;if(this.editData=null,this.isDrawing=!1,f instanceof xA.Z)throw new Error("Not implemented yet");const h={points:c.handles.points,volume:i,segmentIndex:a,segmentsLocked:s,segmentationId:l,viewPlaneNormal:u,viewUp:d};this.applyActiveStrategy(g,h)},this._activateDraw=A=>{A.addEventListener(te.default.MOUSE_UP,this._endCallback),A.addEventListener(te.default.MOUSE_DRAG,this._dragCallback),A.addEventListener(te.default.MOUSE_CLICK,this._endCallback),A.addEventListener(te.default.TOUCH_END,this._endCallback),A.addEventListener(te.default.TOUCH_TAP,this._endCallback),A.addEventListener(te.default.TOUCH_DRAG,this._dragCallback)},this._deactivateDraw=A=>{A.removeEventListener(te.default.MOUSE_UP,this._endCallback),A.removeEventListener(te.default.MOUSE_DRAG,this._dragCallback),A.removeEventListener(te.default.MOUSE_CLICK,this._endCallback),A.removeEventListener(te.default.TOUCH_END,this._endCallback),A.removeEventListener(te.default.TOUCH_DRAG,this._dragCallback),A.removeEventListener(te.default.TOUCH_TAP,this._endCallback)},this.renderAnnotation=(A,e)=>{let t=!1;if(!this.editData)return t;const{viewport:n}=A,{viewportIdsToRender:r}=this.editData;if(!r.includes(n.id))return t;const{annotation:o}=this.editData,i=o.metadata,a=o.annotationUID,s=o.data,{points:l}=s.handles,c=l.map((A=>n.worldToCanvas(A))),u=c[0],d=c[1],g=[Math.floor((u[0]+d[0])/2),Math.floor((u[1]+d[1])/2)],f=Math.abs(u[1]-Math.floor((u[1]+d[1])/2)),h=`rgb(${i.segmentColor.slice(0,3)})`;if(!n.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),t;return(0,V.Z)(e,a,"0",g,f,{color:h}),t=!0,t}}}le.toolName="SphereScissor";const ce=le;var ue=t(4619);const{transformWorldToIndex:de,isEqual:ge}=XA;class fe extends bA.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"]}){super(A,e),this.preMouseDownCallback=A=>{const e=A.detail,{currentPoints:t,element:n}=e,r=t.world,o=(0,QA.ZP)(n),{viewport:i}=o,a=i.getCamera(),{viewPlaneNormal:s}=a,l=this.toolGroupId,c=hA.getActiveSegmentationRepresentation(l);if(!c)throw new Error("No active segmentation detected, create one before using scissors tool");const{segmentationId:u,type:d}=c,g=CA.getActiveSegmentIndex(u),f=BA.getLockedSegments(u),{representationData:h}=(0,pA.getSegmentation)(u),{volumeId:B}=h[d],p=WA.ZP.getVolume(B),{dimensions:w,direction:m}=p,v=p.getScalarData(),C=de(p.imageData,r),U=this.getFixedDimension(s,m);if(void 0===U)return void console.warn("Oblique paint fill not yet supported");const{floodFillGetter:Q,getLabelValue:y,getScalarDataPositionFromPlane:I,inPlaneSeedPoint:F,fixedDimensionValue:b}=this.generateHelpers(v,w,C,U);if(C[0]<0||C[0]>=w[0]||C[1]<0||C[1]>=w[1]||C[2]<0||C[2]>=w[2])return;const E=y(C[0],C[1],C[2]);if(f.includes(E))return;const T=(0,ue.Z)(Q,F),{flooded:S}=T;S.forEach((A=>{const e=I(A[0],A[1]);v[e]=g}));const P=this.getFramesModified(U,b,T);return(0,UA.triggerSegmentationDataModified)(u,P),!0},this.getFramesModified=(A,e,t)=>{const{boundaries:n}=t;if(2===A)return[e];let r=1/0,o=-1/0;for(let A=0;A<n.length;A++){const e=n[A][1];e<r&&(r=e),e>o&&(o=e)}const i=[];for(let A=r;A<=o;A++)i.push(A);return i},this.generateHelpers=(A,e,t,n=2)=>{let r,o;switch(n){case 0:r=t[0],o=[t[1],t[2]];break;case 1:r=t[1],o=[t[0],t[2]];break;case 2:r=t[2],o=[t[0],t[1]];break;default:throw new Error(`Invalid fixedDimension: ${n}`)}const i=(A,t,n)=>n*e[1]*e[0]+t*e[0]+A,a=(e,t,n)=>A[i(e,t,n)],s=this.generateFloodFillGetter(e,n,r,a);return{getScalarDataPositionFromPlane:this.generateGetScalarDataPositionFromPlane(i,n,r),getLabelValue:a,floodFillGetter:s,inPlaneSeedPoint:o,fixedDimensionValue:r}},this.generateFloodFillGetter=(A,e,t,n)=>{let r;switch(e){case 0:r=(e,r)=>{if(!(e>=A[1]||e<0||r>=A[2]||r<0))return n(t,e,r)};break;case 1:r=(e,r)=>{if(!(e>=A[0]||e<0||r>=A[2]||r<0))return n(e,t,r)};break;case 2:r=(e,r)=>{if(!(e>=A[0]||e<0||r>=A[1]||r<0))return n(e,r,t)};break;default:throw new Error(`Invalid fixedDimension: ${e}`)}return r},this.generateGetScalarDataPositionFromPlane=(A,e,t)=>{let n;switch(e){case 0:n=(e,n)=>A(t,e,n);break;case 1:n=(e,n)=>A(e,t,n);break;case 2:n=(e,n)=>A(e,n,t);break;default:throw new Error(`Invalid fixedDimension: ${e}`)}return n}}getFixedDimension(A,e){const t=e.slice(0,3),n=e.slice(3,6),r=e.slice(6,9),o=[Math.abs(A[0]),Math.abs(A[1]),Math.abs(A[2])],i=[Math.abs(t[0]),Math.abs(t[1]),Math.abs(t[2])];if(ge(o,i))return 0;const a=[Math.abs(n[0]),Math.abs(n[1]),Math.abs(n[2])];if(ge(o,a))return 1;const s=[Math.abs(r[0]),Math.abs(r[1]),Math.abs(r[2])];return ge(o,s)?2:void 0}}fe.toolName="PaintFill";const he=fe;var Be=t(78266),pe=t(56577),we=t(2737),me=t(62906),ve=t(84994),Ce=t(35253),Ue=t(20168),Qe=t(66730),ye=t(59210),Ie=t(12111),Fe=t(37398),be=t(7468),Ee=t(37893),Te=t(79122),Se=t(96018),Pe=t(55338),xe=t(94968),He=t(67848),De=t(44554),Le=t(32997),Oe=t(51180),Me=t(48925),_e=t(7515),ke=t(59045),Ve=t(93160),Re=t(49823),Ke=t(4841),Ne=t(36260)},68618:(A,e,t)=>{"use strict";t.d(e,{ob:()=>gt,S1:()=>dt});var n=t(76467),r=t(509),o=t(7576),i=t(57756),a=t(69786),s=t(96720),l=t(97335);function c(A,e){const t=e||A.currentTarget,{viewport:n}=(0,s.ZP)(t),r=function(A){return[A.clientX,A.clientY]}(A),o=function(A){return[A.pageX,A.pageY]}(A),i=function(A,e){const t=A.getBoundingClientRect();return[e[0]-t.left-window.pageXOffset,e[1]-t.top-window.pageYOffset]}(t,o);return{page:o,client:r,canvas:i,world:n.canvasToWorld(i)}}const u=function(A){const e=A.currentTarget,{viewportId:t,renderingEngineId:n}=(0,s.ZP)(e),r=c(A,e),o={event:A,eventName:a.default.MOUSE_DOUBLE_CLICK,viewportId:t,renderingEngineId:n,camera:{},element:e,startPoints:r,lastPoints:r,currentPoints:r,deltaPoints:{page:[0,0],client:[0,0],canvas:[0,0],world:[0,0,0]}};!(0,l.Z)(e,a.default.MOUSE_DOUBLE_CLICK,o)&&(A.stopImmediatePropagation(),A.preventDefault())},d=a.default.MOUSE_MOVE;const g=function(A){const e=A.currentTarget,t=(0,s.ZP)(e),{renderingEngineId:n,viewportId:r}=t,o={renderingEngineId:n,viewportId:r,camera:{},element:e,currentPoints:c(A),eventName:d,event:A};(0,l.Z)(e,d,o)},{MOUSE_DOWN:f,MOUSE_DOWN_ACTIVATE:h,MOUSE_CLICK:B,MOUSE_UP:p,MOUSE_DRAG:w}=a.default,m=3,v={mouseButton:void 0,element:null,renderingEngineId:void 0,viewportId:void 0,isClickEvent:!0,clickDelay:200,preventClickTimeout:null,startPoints:{page:[0,0],client:[0,0],canvas:[0,0],world:[0,0,0]},lastPoints:{page:[0,0],client:[0,0],canvas:[0,0],world:[0,0,0]}};let C={mouseButton:void 0,renderingEngineId:void 0,viewportId:void 0,isClickEvent:!0,clickDelay:200,element:null,preventClickTimeout:null,startPoints:{page:[0,0],client:[0,0],canvas:[0,0],world:[0,0,0]},lastPoints:{page:[0,0],client:[0,0],canvas:[0,0],world:[0,0,0]}};const U={doubleClickTimeout:null,mouseDownEvent:null,mouseUpEvent:null,ignoreDoubleClick:!1};function Q(A){const e=c(A,C.element),t=x(C.element,C.lastPoints),n=H(e,t);if(U.doubleClickTimeout){if(!F(n.canvas))return;E()}const r={event:A,eventName:w,mouseButton:C.mouseButton,renderingEngineId:C.renderingEngineId,viewportId:C.viewportId,camera:{},element:C.element,startPoints:P(C.startPoints),lastPoints:P(t),currentPoints:e,deltaPoints:n};(0,l.Z)(C.element,w,r),C.lastPoints=P(e)}function y(A){if(clearTimeout(C.preventClickTimeout),U.doubleClickTimeout)U.mouseUpEvent?S():(U.mouseUpEvent=A,C.element.addEventListener("mousemove",I));else{const e=C.isClickEvent?B:p,t=c(A,C.element),n=H(t,C.lastPoints),r={event:A,eventName:e,mouseButton:C.mouseButton,element:C.element,renderingEngineId:C.renderingEngineId,viewportId:C.viewportId,camera:{},startPoints:P(C.startPoints),lastPoints:P(C.lastPoints),currentPoints:t,deltaPoints:n};(0,l.Z)(r.element,e,r),S()}document.removeEventListener("mousemove",Q)}function I(A){F(H(c(A,C.element),x(C.element,C.lastPoints)).canvas)&&(E(),g(A))}function F(A){return Math.abs(A[0])+Math.abs(A[1])>m}function b(){C.isClickEvent=!1}function E(){U.ignoreDoubleClick=!0;const A=U.mouseDownEvent,e=U.mouseUpEvent;T(),function(A){const e=H(C.startPoints,C.startPoints),t={event:A,eventName:f,element:C.element,mouseButton:C.mouseButton,renderingEngineId:C.renderingEngineId,viewportId:C.viewportId,camera:{},startPoints:C.startPoints,lastPoints:C.startPoints,currentPoints:C.startPoints,deltaPoints:e};C.lastPoints=P(t.lastPoints),(0,l.Z)(t.element,f,t)&&(0,l.Z)(t.element,h,t)}(A),e&&y(e)}function T(){U.doubleClickTimeout&&(clearTimeout(U.doubleClickTimeout),U.doubleClickTimeout=null),U.mouseDownEvent=null,U.mouseUpEvent=null}function S(){document.removeEventListener("mouseup",y),C.element?.removeEventListener("mousemove",I),C.element?.addEventListener("mousemove",g),T(),C=JSON.parse(JSON.stringify(v))}function P(A){return JSON.parse(JSON.stringify(A))}function x(A,e){const{viewport:t}=(0,s.ZP)(A),n=t.canvasToWorld(e.canvas);return{page:e.page,client:e.client,canvas:e.canvas,world:n}}function H(A,e){return{page:D(A.page,e.page),client:D(A.client,e.client),canvas:D(A.canvas,e.canvas),world:(t=A.world,n=e.world,[t[0]-n[0],t[1]-n[1],t[2]-n[2]])};var t,n}function D(A,e){return[A[0]-e[0],A[1]-e[1]]}function L(A){U.ignoreDoubleClick?(U.ignoreDoubleClick=!1,A.stopImmediatePropagation(),A.preventDefault()):S()}const O=function(A){if(U.doubleClickTimeout)return;U.doubleClickTimeout=setTimeout(E,1===A.buttons?400:0),U.mouseDownEvent=A,U.ignoreDoubleClick=!1,C.element=A.currentTarget,C.mouseButton=A.buttons;const e=(0,s.ZP)(C.element),{renderingEngineId:t,viewportId:n}=e;C.renderingEngineId=t,C.viewportId=n,C.preventClickTimeout=setTimeout(b,C.clickDelay),C.element.removeEventListener("mousemove",g);const r=c(A,C.element);C.startPoints=P(r),C.lastPoints=P(r),document.addEventListener("mouseup",y),document.addEventListener("mousemove",Q)};function M(A){A.removeEventListener("dblclick",u),A.removeEventListener("mousedown",O),A.removeEventListener("mousemove",g),A.removeEventListener("dblclick",L,{capture:!0})}const _={enable:function(A){M(A),A.addEventListener("dblclick",u),A.addEventListener("mousedown",O),A.addEventListener("mousemove",g),A.addEventListener("dblclick",L,{capture:!0})},disable:M},k=10,V=40,R=800;const K=function(A){const e=A.currentTarget,t=(0,s.ZP)(e),{renderingEngineId:n,viewportId:r}=t;if(A.deltaY>-1&&A.deltaY<1)return;A.preventDefault();const{spinX:o,spinY:i,pixelX:u,pixelY:d}=function(A){let e=0,t=0,n=0,r=0;return"detail"in A&&(t=A.detail),"wheelDelta"in A&&(t=-A.wheelDelta/120),"wheelDeltaY"in A&&(t=-A.wheelDeltaY/120),"wheelDeltaX"in A&&(e=-A.wheelDeltaX/120),n=e*k,r=t*k,"deltaY"in A&&(r=A.deltaY),"deltaX"in A&&(n=A.deltaX),(n||r)&&A.deltaMode&&(1===A.deltaMode?(n*=V,r*=V):(n*=R,r*=R)),n&&!e&&(e=n<1?-1:1),r&&!t&&(t=r<1?-1:1),{spinX:e,spinY:t,pixelX:n,pixelY:r}}(A),g=i<0?-1:1,f={event:A,eventName:a.default.MOUSE_WHEEL,renderingEngineId:n,viewportId:r,element:e,camera:{},detail:A,wheel:{spinX:o,spinY:i,pixelX:u,pixelY:d,direction:g},points:c(A)};(0,l.Z)(e,a.default.MOUSE_WHEEL,f)};function N(A){A.removeEventListener("wheel",K)}const Z={enable:function(A){N(A),A.addEventListener("wheel",K,{passive:!1})},disable:N},G={mouse:0,touch:1};let W,X;function z(A,e){const t=Date.now();if(A!==W){if(t-X<=2e3)return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1;W=A}X=t}const J=z.bind(null,G.mouse),j=z.bind(null,G.touch);function Y(A,e,t){const n=t?J:j;e.forEach((function(e){A.addEventListener(e,n,{passive:!1})}))}function q(A,e,t){const n=t?J:j;e.forEach((function(e){A.removeEventListener(e,n)}))}const $=["mousedown","mouseup","mousemove"],AA=["touchstart","touchend"];function eA(A){q(A,$,G.mouse),q(A,AA,G.touch)}const tA={enable:function(A){eA(A),Y(A,$,G.mouse),Y(A,AA,G.touch)},disable:eA};var nA=t(97698);function rA(A,e){const t=e||A.currentTarget,n="touchend"===A.type?A.changedTouches:A.touches;return Object.keys(n).map((A=>{const e=function(A){return[A.clientX,A.clientY]}(n[A]),r=function(A){return[A.pageX,A.pageY]}(n[A]),o=function(A,e){const t=A.getBoundingClientRect();return[e[0]-t.left-window.pageXOffset,e[1]-t.top-window.pageYOffset]}(t,r),{viewport:i}=(0,s.ZP)(t);return{page:r,client:e,canvas:o,world:i.canvasToWorld(o),touch:{identifier:A,radiusX:n[A].radiusX,radiusY:n[A].radiusY,force:n[A].force,rotationAngle:n[A].rotationAngle}}}))}var oA=t(25413);const iA=t(45791).Z.getRuntimeSettings(),{TOUCH_START:aA,TOUCH_START_ACTIVATE:sA,TOUCH_PRESS:lA,TOUCH_DRAG:cA,TOUCH_END:uA,TOUCH_TAP:dA,TOUCH_SWIPE:gA}=a.default,fA={page:[0,0],client:[0,0],canvas:[0,0],world:[0,0,0]},hA={page:0,client:0,canvas:0,world:0},BA={renderingEngineId:void 0,viewportId:void 0,element:null,startPointsList:[{...fA,touch:null}],lastPointsList:[{...fA,touch:null}],isTouchStart:!1,startTime:null,pressTimeout:null,pressDelay:700,pressMaxDistance:5,accumulatedDistance:hA,swipeDistanceThreshold:48,swiped:!1,swipeToleranceMs:300},pA={renderingEngineId:void 0,viewportId:void 0,element:null,startPointsList:[{...fA,touch:null}],taps:0,tapTimeout:null,tapMaxDistance:24,tapToleranceMs:300};let wA=JSON.parse(JSON.stringify(BA)),mA=JSON.parse(JSON.stringify(pA));function vA(A,e,t){return iA.get("debug")&&("CORNERSTONE_TOOLS_TOUCH_DRAG"===e?console.debug(e):console.debug(e,t)),(0,l.Z)(A,e,t)}function CA(A){const e=rA(A,wA.element),t=QA(wA.element,wA.lastPointsList),n=e.length===t.length?(0,oA.getDeltaPoints)(e,t):fA,r=e.length===t.length?(0,oA.getDeltaDistanceBetweenIPoints)(e,t):hA,o=e.length===t.length?(0,oA.getDeltaDistance)(e,wA.lastPointsList):hA;wA.accumulatedDistance={page:wA.accumulatedDistance.page+o.page,client:wA.accumulatedDistance.client+o.client,canvas:wA.accumulatedDistance.canvas+o.canvas,world:wA.accumulatedDistance.world+o.world};const i={event:A,eventName:cA,renderingEngineId:wA.renderingEngineId,viewportId:wA.viewportId,camera:{},element:wA.element,startPoints:(0,oA.getMeanTouchPoints)(wA.startPointsList),lastPoints:(0,oA.getMeanTouchPoints)(t),currentPoints:(0,oA.getMeanTouchPoints)(e),startPointsList:(0,oA.copyPointsList)(wA.startPointsList),lastPointsList:(0,oA.copyPointsList)(t),currentPointsList:e,deltaPoints:n,deltaDistance:r};vA(wA.element,cA,i),function(A,e){const t=(new Date).getTime(),n=wA.startTime.getTime();if(wA.swiped||t-n>wA.swipeToleranceMs)return;const[r,o]=e.canvas,i={event:A,eventName:gA,renderingEngineId:wA.renderingEngineId,viewportId:wA.viewportId,camera:{},element:wA.element,swipe:null};Math.abs(r)>wA.swipeDistanceThreshold&&(i.swipe=r>0?nA.o.RIGHT:nA.o.LEFT,vA(i.element,gA,i),wA.swiped=!0);Math.abs(o)>wA.swipeDistanceThreshold&&(i.swipe=o>0?nA.o.DOWN:nA.o.UP,vA(i.element,gA,i),wA.swiped=!0)}(A,n),wA.lastPointsList=(0,oA.copyPointsList)(e)}function UA(A){clearTimeout(wA.pressTimeout);const e=rA(A,wA.element),t=QA(wA.element,wA.lastPointsList),n=e.length===t.length?(0,oA.getDeltaPoints)(e,t):(0,oA.getDeltaPoints)(e,e),r=e.length===t.length?(0,oA.getDeltaDistanceBetweenIPoints)(e,t):(0,oA.getDeltaDistanceBetweenIPoints)(e,e),o={event:A,eventName:uA,element:wA.element,renderingEngineId:wA.renderingEngineId,viewportId:wA.viewportId,camera:{},startPointsList:(0,oA.copyPointsList)(wA.startPointsList),lastPointsList:(0,oA.copyPointsList)(t),currentPointsList:e,startPoints:(0,oA.getMeanTouchPoints)(wA.startPointsList),lastPoints:(0,oA.getMeanTouchPoints)(t),currentPoints:(0,oA.getMeanTouchPoints)(e),deltaPoints:n,deltaDistance:r};vA(o.element,uA,o),function(A){const e=(new Date).getTime(),t=wA.startTime.getTime();if(e-t>mA.tapToleranceMs)return;0===mA.taps&&(mA.element=wA.element,mA.renderingEngineId=wA.renderingEngineId,mA.viewportId=wA.viewportId,mA.startPointsList=wA.startPointsList);if(mA.taps>0&&(mA.element!=wA.element||mA.renderingEngineId!=wA.renderingEngineId||mA.viewportId!=wA.viewportId))return;const n=rA(A,mA.element),r=(0,oA.getDeltaDistance)(n,mA.startPointsList).canvas;if(r>mA.tapMaxDistance)return;clearTimeout(mA.tapTimeout),mA.taps+=1,mA.tapTimeout=setTimeout((()=>{const e={event:A,eventName:dA,element:mA.element,renderingEngineId:mA.renderingEngineId,viewportId:mA.viewportId,camera:{},currentPointsList:n,currentPoints:(0,oA.getMeanTouchPoints)(n),taps:mA.taps};vA(e.element,dA,e),mA=JSON.parse(JSON.stringify(pA))}),mA.tapToleranceMs)}(A),wA=JSON.parse(JSON.stringify(BA)),document.removeEventListener("touchmove",CA),document.removeEventListener("touchend",UA)}function QA(A,e){const{viewport:t}=(0,s.ZP)(A);return e.map((A=>{const e=t.canvasToWorld(A.canvas);return{page:A.page,client:A.client,canvas:A.canvas,world:e,touch:A.touch}}))}const yA=function(A){wA.element=A.currentTarget;const e=(0,s.ZP)(wA.element),{renderingEngineId:t,viewportId:n}=e;wA.renderingEngineId=t,wA.viewportId=n,wA.isTouchStart||(clearTimeout(wA.pressTimeout),wA.pressTimeout=setTimeout((()=>function(A){if(wA.accumulatedDistance.canvas>wA.pressMaxDistance)return;const e={event:A,eventName:lA,renderingEngineId:wA.renderingEngineId,viewportId:wA.viewportId,camera:{},element:wA.element,startPointsList:(0,oA.copyPointsList)(wA.startPointsList),lastPointsList:(0,oA.copyPointsList)(wA.lastPointsList),startPoints:(0,oA.copyPoints)((0,oA.getMeanTouchPoints)(wA.startPointsList)),lastPoints:(0,oA.copyPoints)((0,oA.getMeanTouchPoints)(wA.lastPointsList))};vA(e.element,lA,e)}(A)),wA.pressDelay),function(A){wA.isTouchStart=!0,wA.startTime=new Date;const e=rA(A,wA.element),t=(0,oA.getMeanTouchPoints)(e),n=fA,r=hA,o={event:A,eventName:aA,element:wA.element,renderingEngineId:wA.renderingEngineId,viewportId:wA.viewportId,camera:{},startPointsList:e,lastPointsList:e,currentPointsList:e,startPoints:t,lastPoints:t,currentPoints:t,deltaPoints:n,deltaDistance:r};wA.startPointsList=(0,oA.copyPointsList)(o.startPointsList),wA.lastPointsList=(0,oA.copyPointsList)(o.lastPointsList);vA(o.element,aA,o)&&vA(o.element,sA,o)}(A),document.addEventListener("touchmove",CA),document.addEventListener("touchend",UA))};function IA(A){tA.disable(A),A.removeEventListener("touchstart",yA)}const FA={enable:function(A){IA(A),tA.enable(A),A.addEventListener("touchstart",yA,{passive:!1})},disable:IA};var bA=t(71975),EA=t.n(bA);const TA={renderingEngineId:void 0,viewportId:void 0,key:void 0,keyCode:void 0,element:null};let SA={renderingEngineId:void 0,viewportId:void 0,key:void 0,keyCode:void 0,element:null};function PA(A){SA.element=A.currentTarget;const e=(0,s.ZP)(SA.element),{renderingEngineId:t,viewportId:n}=e;SA.renderingEngineId=t,SA.viewportId=n,SA.key=A.key,SA.keyCode=A.keyCode,A.preventDefault();const r={renderingEngineId:SA.renderingEngineId,viewportId:SA.viewportId,element:SA.element,key:SA.key,keyCode:SA.keyCode};(0,l.Z)(r.element,a.default.KEY_DOWN,r),document.addEventListener("keyup",xA),SA.element.removeEventListener("keydown",PA)}function xA(A){const e={renderingEngineId:SA.renderingEngineId,viewportId:SA.viewportId,element:SA.element,key:SA.key,keyCode:SA.keyCode};document.removeEventListener("keyup",xA),SA.element.addEventListener("keydown",PA),SA=EA()(TA),(0,l.Z)(e.element,a.default.KEY_UP,e)}const HA=PA;function DA(A){A.removeEventListener("keydown",HA)}const LA={enable:function(A){DA(A),A.addEventListener("keydown",HA)},disable:DA,getModifierKey:function(){return SA.keyCode}};var OA=t(36821);const MA=function(A){(0,OA.ZP)(A.detail.element)},_A={enable:function(A){A.addEventListener(n.default.IMAGE_RENDERED,MA)},disable:function(A){A.removeEventListener(n.default.IMAGE_RENDERED,MA)}};var kA=t(44906),VA=t(25792);function RA(A,e,t){const{renderingEngineId:n,viewportId:r}=A.detail,o=VA.Z(r,n);if(!o)return[];const i=[],a=Object.keys(o.toolOptions);for(let A=0;A<a.length;A++){const n=a[A],r=o.toolOptions[n],s=null!=t&&r.bindings.length&&r.bindings.some((A=>A.mouseButton===t));if(e.includes(r.mode)&&(!t||s)){const A=o.getToolInstance(n);i.push(A)}}return i}const{Active:KA,Passive:NA,Enabled:ZA}=kA.default,GA=function(A){RA(A,[KA,NA,ZA]).forEach((e=>{e.onCameraModified&&e.onCameraModified(A)}))},WA={enable:function(A){A.addEventListener(n.default.CAMERA_MODIFIED,GA)},disable:function(A){A.removeEventListener(n.default.CAMERA_MODIFIED,GA)}},{Active:XA,Passive:zA,Enabled:JA}=kA.default,jA=function(A){RA(A,[XA,zA,JA]).forEach((e=>{e.onImageSpacingCalibrated&&e.onImageSpacingCalibrated(A)}))},YA={enable:function(A){A.addEventListener(n.default.IMAGE_SPACING_CALIBRATED,jA)},disable:function(A){A.removeEventListener(n.default.IMAGE_SPACING_CALIBRATED,jA)}};var qA=t(40622);const{Active:$A}=kA.default;function Ae(A,e,t){if(qA.ZP.isInteractingWithTool)return!1;const{renderingEngineId:n,viewportId:r}=t.detail,o=VA.Z(r,n);if(!o)return!1;let i;const a=Object.keys(o.toolOptions);for(let A=0;A<a.length;A++){const t=a[A],n=o.toolOptions[t],r=o.getToolInstance(t);if(n.mode===$A&&"function"==typeof r[e]){i=o.getToolInstance(t);break}}i&&i[e](t)}const ee=Ae.bind(null,"Mouse","mouseClickCallback");var te=t(98336),ne=t(80686),re=t(15849);function oe(A,e,t,n="mouse"){const r="touch"===n?36:6,o=[];return e.forEach((({tool:e,annotations:n})=>{for(const i of n){if(i.isLocked||!i.isVisible)continue;const n=e.getHandleNearImagePoint(A,i,t,r);if(n){o.push({tool:e,annotation:i,handle:n});break}}})),o}var ie=t(69114);function ae(A,e,t,n="mouse"){const r="touch"===n?36:6,o=[];return e.forEach((({tool:e,annotations:i})=>{for(const a of i){if(a.isLocked||!a.isVisible)continue;if(e.isPointNearTool(A,a,t,r,n)){o.push({tool:e,annotation:a});break}}})),o}var se=t(49154);const le=A=>A.shiftKey?A.ctrlKey?se.y.ShiftCtrl:A.altKey?se.y.ShiftAlt:A.metaKey?se.y.ShiftMeta:se.y.Shift:A.ctrlKey?A.altKey?se.y.CtrlAlt:A.metaKey?se.y.CtrlMeta:se.y.Ctrl:A.altKey?A.metaKey&&se.y.AltMeta||se.y.Alt:A.metaKey?se.y.Meta:void 0,{Active:ce}=kA.default;function ue(A){const{renderingEngineId:e,viewportId:t}=A.detail,n=A.detail.event,r=le(n)||LA.getModifierKey(),o=VA.Z(t,e);if(!o)return null;const i=Object.keys(o.toolOptions);for(let A=0;A<i.length;A++){const e=i[A],t=o.toolOptions[e],a=t.bindings.length&&t.bindings.some((A=>A.mouseButton===(n?n.buttons:se.p.Primary)&&A.modifierKey===r));if(t.mode===ce&&a)return o.getToolInstance(e)}}const{Active:de,Passive:ge}=kA.default;function fe(A){if(qA.ZP.isInteractingWithTool)return;const e=ue(A);if(e&&"function"==typeof e.preMouseDownCallback){if(e.preMouseDownCallback(A))return}const t=1===A.detail.event.buttons,n=[...RA(A,[de],A.detail.event.buttons)||[],...(t?RA(A,[ge]):void 0)||[]],r=A.detail,{element:o}=r,i=(0,ie.Z)(o,n),a=r.currentPoints.canvas,s=oe(o,i,a,"mouse"),l=!!A.detail.event.shiftKey;if(s.length>0){const{tool:e,annotation:t,handle:n}=he(s);return Be(t.annotationUID,l),void e.handleSelectedCallback(A,t,n,"Mouse")}const c=ae(o,i,a,"mouse");if(c.length>0){const{tool:e,annotation:t}=he(c);return Be(t.annotationUID,l),void e.toolSelectedCallback(A,t,"Mouse")}if(e&&"function"==typeof e.postMouseDownCallback){if(e.postMouseDownCallback(A))return}}function he(A){return A.length>1&&A.find((A=>!(0,ne.isAnnotationLocked)(A.annotation)&&(0,re.isAnnotationVisible)(A.annotation.annotationUID)))||A[0]}function Be(A,e=!1){if(e)if((0,te.isAnnotationSelected)(A))(0,te.setAnnotationSelected)(A,!1);else{const e=!0;(0,te.setAnnotationSelected)(A,!0,e)}else{const e=!1;(0,te.setAnnotationSelected)(A,!0,e)}}function pe(A){if(qA.ZP.isInteractingWithTool)return;const e=ue(A);if(e&&!qA.ZP.isMultiPartToolActive&&e.addNewAnnotation){const t=e.addNewAnnotation(A,"mouse");(0,te.setAnnotationSelected)(t.annotationUID)}}const we=Ae.bind(null,"Mouse","doubleClickCallback");function me(A){if(qA.ZP.isInteractingWithTool)return;const e=ue(A);!e||"function"!=typeof e.mouseDragCallback||e.mouseDragCallback(A)}const{Active:ve,Passive:Ce}=kA.default;function Ue(A){if(qA.ZP.isInteractingWithTool||qA.ZP.isMultiPartToolActive)return;const e=RA(A,[ve,Ce]),t=A.detail,{element:n}=t,r=(0,ie.Z)(n,e),o=e.filter((A=>!r.some((e=>e.tool.getToolName()===A.getToolName()))));let i=!1;for(const{tool:e,annotations:t}of r)"function"==typeof e.mouseMoveCallback&&(i=e.mouseMoveCallback(A,t)||i);o.forEach((e=>{"function"==typeof e.mouseMoveCallback&&e.mouseMoveCallback(A)})),!0===i&&(0,OA.ZP)(n)}const Qe=Ae.bind(null,"Mouse","mouseUpCallback"),ye=Ae.bind(null,"MouseWheel","mouseWheelCallback"),Ie={enable:function(A){A.addEventListener(a.default.MOUSE_CLICK,ee),A.addEventListener(a.default.MOUSE_DOWN,fe),A.addEventListener(a.default.MOUSE_DOWN_ACTIVATE,pe),A.addEventListener(a.default.MOUSE_DOUBLE_CLICK,we),A.addEventListener(a.default.MOUSE_DRAG,me),A.addEventListener(a.default.MOUSE_MOVE,Ue),A.addEventListener(a.default.MOUSE_UP,Qe),A.addEventListener(a.default.MOUSE_WHEEL,ye)},disable:function(A){A.removeEventListener(a.default.MOUSE_CLICK,ee),A.removeEventListener(a.default.MOUSE_DOWN,fe),A.removeEventListener(a.default.MOUSE_DOWN_ACTIVATE,pe),A.removeEventListener(a.default.MOUSE_DOUBLE_CLICK,we),A.removeEventListener(a.default.MOUSE_DRAG,me),A.removeEventListener(a.default.MOUSE_MOVE,Ue),A.removeEventListener(a.default.MOUSE_UP,Qe),A.removeEventListener(a.default.MOUSE_WHEEL,ye)}},{Active:Fe}=kA.default;function be(A){const{renderingEngineId:e,viewportId:t}=A.detail,n=C.mouseButton,r=LA.getModifierKey(),o=VA.Z(t,e);if(!o)return null;const i=Object.keys(o.toolOptions);for(let A=0;A<i.length;A++){const e=i[A],t=o.toolOptions[e],a=t.bindings.length&&t.bindings.some((A=>A.mouseButton===(n??se.p.Primary)&&A.modifierKey===r));if(t.mode===Fe&&a)return o.getToolInstance(e)}}function Ee(A){const e=be(A);if(!e)return;const{renderingEngineId:t,viewportId:n}=A.detail,r=VA.Z(n,t),o=e.getToolName();Object.keys(r.toolOptions).includes(o)&&r.setViewportsCursorByToolName(o)}function Te(A){const e=be(A);if(!e)return;const{renderingEngineId:t,viewportId:n}=A.detail,r=VA.Z(n,t);SA.keyCode=void 0;const o=e.getToolName();Object.keys(r.toolOptions).includes(o)&&r.setViewportsCursorByToolName(o)}const Se={enable:function(A){A.addEventListener(a.default.KEY_DOWN,Ee),A.addEventListener(a.default.KEY_UP,Te)},disable:function(A){A.removeEventListener(a.default.KEY_DOWN,Ee),A.removeEventListener(a.default.KEY_UP,Te)}},{Active:Pe}=kA.default;function xe(A){const{renderingEngineId:e,viewportId:t}=A.detail,n=A.detail.event,r=VA.Z(t,e);if(!r)return null;const o=Object.keys(r.toolOptions),i=Object.keys(n.touches).length,a=le(n)||LA.getModifierKey();for(let A=0;A<o.length;A++){const e=o[A],t=r.toolOptions[e],n=t.bindings.length&&t.bindings.some((A=>(A.numTouchPoints===i||1===i&&A.mouseButton===se.p.Primary)&&A.modifierKey===a));if(t.mode===Pe&&n)return r.getToolInstance(e)}}function He(A,e,t){const{renderingEngineId:n,viewportId:r}=A.detail,o=VA.Z(r,n);if(!o)return[];const i=[],a=Object.keys(o.toolOptions);for(let A=0;A<a.length;A++){const n=a[A],r=o.toolOptions[n],s=null!=t&&r.bindings.length&&r.bindings.some((A=>A.numTouchPoints===t));if(e.includes(r.mode)&&(!t||s)){const A=o.getToolInstance(n);i.push(A)}}return i}const{Active:De,Passive:Le}=kA.default;function Oe(A){if(qA.ZP.isInteractingWithTool)return;const e=xe(A);if(e&&"function"==typeof e.preTouchStartCallback){if(e.preTouchStartCallback(A))return}const t=1===Object.keys(A.detail.event.touches).length,n=[...He(A,[De],Object.keys(A.detail.event.touches).length)||[],...(t?He(A,[Le]):void 0)||[],e],r=A.detail,{element:o}=r,i=(0,ie.Z)(o,n),a=r.currentPoints.canvas,s=oe(o,i,a,"touch");if(s.length>0){const{tool:e,annotation:t,handle:n}=Me(s);return _e(t.annotationUID,false),void e.handleSelectedCallback(A,t,n,"Touch")}const l=ae(o,i,a,"touch");if(l.length>0){const{tool:e,annotation:t}=Me(l);return _e(t.annotationUID,false),void e.toolSelectedCallback(A,t,"Touch")}if(e&&"function"==typeof e.postTouchStartCallback){if(e.postTouchStartCallback(A))return}}function Me(A){return A.length>1&&A.find((A=>!(0,ne.isAnnotationLocked)(A.annotation)&&(0,re.isAnnotationVisible)(A.annotation.annotationUID)))||A[0]}function _e(A,e=!1){if(e)if((0,te.isAnnotationSelected)(A))(0,te.setAnnotationSelected)(A,!1);else{const e=!0;(0,te.setAnnotationSelected)(A,!0,e)}else{const e=!1;(0,te.setAnnotationSelected)(A,!0,e)}}function ke(A){if(qA.ZP.isInteractingWithTool)return;const e=xe(A);if(e&&!qA.ZP.isMultiPartToolActive&&e.addNewAnnotation){const t=e.addNewAnnotation(A,"touch");(0,te.setAnnotationSelected)(t.annotationUID)}}function Ve(A){if(qA.ZP.isInteractingWithTool)return;const e=xe(A);!e||"function"!=typeof e.touchDragCallback||e.touchDragCallback(A)}const Re=Ae.bind(null,"Touch","touchEndCallback"),Ke=Ae.bind(null,"Touch","touchTapCallback"),Ne=Ae.bind(null,"Touch","touchPressCallback"),Ze={enable:function(A){A.addEventListener(a.default.TOUCH_START,Oe),A.addEventListener(a.default.TOUCH_START_ACTIVATE,ke),A.addEventListener(a.default.TOUCH_DRAG,Ve),A.addEventListener(a.default.TOUCH_END,Re),A.addEventListener(a.default.TOUCH_TAP,Ke),A.addEventListener(a.default.TOUCH_PRESS,Ne)},disable:function(A){A.removeEventListener(a.default.TOUCH_START,Oe),A.removeEventListener(a.default.TOUCH_START_ACTIVATE,ke),A.removeEventListener(a.default.TOUCH_DRAG,Ve),A.removeEventListener(a.default.TOUCH_END,Re),A.removeEventListener(a.default.TOUCH_PRESS,Ne)}};function Ge(A){const{element:e,viewportId:t}=A.detail,n=function(A){const e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg"),n=`svg-layer-${A}`;t.classList.add("svg-layer"),t.setAttribute("id",n),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.style.position="absolute";const r=document.createElementNS(e,"defs"),o=document.createElementNS(e,"filter"),i=document.createElementNS(e,"feOffset"),a=document.createElementNS(e,"feColorMatrix"),s=document.createElementNS(e,"feBlend");return o.setAttribute("id",`shadow-${n}`),o.setAttribute("filterUnits","userSpaceOnUse"),i.setAttribute("result","offOut"),i.setAttribute("in","SourceGraphic"),i.setAttribute("dx","0.5"),i.setAttribute("dy","0.5"),a.setAttribute("result","matrixOut"),a.setAttribute("in","offOut"),a.setAttribute("in2","matrix"),a.setAttribute("values","0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0"),s.setAttribute("in","SourceGraphic"),s.setAttribute("in2","matrixOut"),s.setAttribute("mode","normal"),o.appendChild(i),o.appendChild(a),o.appendChild(s),r.appendChild(o),t.appendChild(r),t}(t);var r;!function(A){const{viewportUid:e,renderingEngineUid:t}=A.dataset,n=`${e}:${t}`;qA.SB.svgNodeCache[n]={}}(e),r=n,e.querySelector("div.viewport-element").appendChild(r),OA.Ar.addViewportElement(t,e),_.enable(e),Z.enable(e),FA.enable(e),LA.enable(e),_A.enable(e),WA.enable(e),YA.enable(e),Ie.enable(e),Se.enable(e),Ze.enable(e),qA.SB.enabledElements.push(e)}var We=t(66277);const Xe="viewport-element";const ze=A=>{const e=(0,s.ZP)(A);(0,We.Z)(e.viewportId,e.renderingEngineId).forEach((A=>{A.remove(e)}))},Je=A=>{const{renderingEngineId:e,viewportId:t}=(0,s.ZP)(A),n=(0,VA.Z)(t,e);n&&n.removeViewports(e,t)};const je=function(A){const e=qA.SB.enabledElements.findIndex((e=>e===A));e>-1&&qA.SB.enabledElements.splice(e,1)},Ye=function(A){const{element:e,viewportId:t}=A.detail;!function(A){const{viewportUid:e,renderingEngineUid:t}=A.dataset,n=`${e}:${t}`;delete qA.SB.svgNodeCache[n]}(e),function(A){const e=A.querySelector(`div.${Xe}`),t=e.querySelector("svg");t&&e.removeChild(t)}(e),OA.Ar.removeViewportElement(t,e),_.disable(e),Z.disable(e),FA.disable(e),LA.disable(e),_A.disable(e),WA.disable(e),YA.disable(e),Ie.disable(e),Se.disable(e),Ze.disable(e),ze(e),Je(e),je(e)};var qe=t(26222),$e=t(43356);const At=function(A){const{viewportId:e,renderingEngineId:t}=A.detail,n=(0,qe.Pr)(t);(0,$e.Z)(n,[e])};const et=function(A){if(!A.detail.removed.length)return;(0,qe.Uu)().forEach((A=>{const e=A.getViewports().map((A=>A.id));(0,$e.Z)(A,e)}))};var tt=t(35316);const nt=function(A){const{segmentationId:e}=A.detail;(0,i.getToolGroupIdsWithSegmentation)(e).forEach((A=>{(0,i.getSegmentationRepresentations)(A).forEach((t=>{t.segmentationId===e&&(0,tt.triggerSegmentationRepresentationModified)(A,t.segmentationRepresentationUID)}))}))};var rt=t(60754),ot=t(14488),it=t(1182);const at=function(A){const{segmentationId:e,modifiedSlicesToUse:t}=A.detail,{representationData:n,type:r}=i.getSegmentation(e);let o;if(r!==it.Z.Labelmap)throw new Error(`onSegmentationDataModified: representationType ${r} not supported yet`);{const A=rt.ZP.getVolume(n[r].volumeId);if(!A)return void console.warn("segmentation not found in cache");const{imageData:a,vtkOpenGLTexture:s}=A;let l;if(t&&Array.isArray(t))l=t;else{const A=a.getDimensions()[2];l=[...Array(A).keys()]}l.forEach((A=>{s.setUpdatedFrame(A)})),a.modified(),o=i.getToolGroupIdsWithSegmentation(e)}o.forEach((A=>{(0,ot.ZP)(A)}))},st=function(A){const{toolGroupId:e}=A.detail;(0,ot.ZP)(e)},lt=function(A){const{toolGroupId:e,segmentationRepresentationUID:t}=A.detail;(0,ot.ZP)(e)};var ct=t(14100);let ut=!1;function dt(A={}){ut||(!function(){ft();const A=n.default.ELEMENT_ENABLED,e=n.default.ELEMENT_DISABLED;r.Z.addEventListener(A,Ge),r.Z.addEventListener(e,Ye)}(),ht(),r.Z.addEventListener(a.default.ANNOTATION_MODIFIED,At),r.Z.addEventListener(a.default.ANNOTATION_SELECTION_CHANGE,et),r.Z.addEventListener(a.default.ANNOTATION_SELECTION_CHANGE,et),r.Z.addEventListener(a.default.SEGMENTATION_MODIFIED,nt),r.Z.addEventListener(a.default.SEGMENTATION_DATA_MODIFIED,at),r.Z.addEventListener(a.default.SEGMENTATION_REPRESENTATION_MODIFIED,st),r.Z.addEventListener(a.default.SEGMENTATION_REPRESENTATION_REMOVED,lt),ut=!0)}function gt(){ft(),ht(),ct.Z(),(0,qA.zV)();const A=(0,o.getAnnotationManager)(),e=(0,i.getDefaultSegmentationStateManager)();A.restoreAnnotations({}),e.resetState(),ut=!1}function ft(){const A=n.default.ELEMENT_ENABLED,e=n.default.ELEMENT_DISABLED;r.Z.removeEventListener(A,Ge),r.Z.removeEventListener(e,Ye)}function ht(){r.Z.removeEventListener(a.default.ANNOTATION_MODIFIED,At),r.Z.removeEventListener(a.default.ANNOTATION_SELECTION_CHANGE,et),r.Z.removeEventListener(a.default.ANNOTATION_SELECTION_CHANGE,et),r.Z.removeEventListener(a.default.SEGMENTATION_MODIFIED,nt),r.Z.removeEventListener(a.default.SEGMENTATION_DATA_MODIFIED,at),r.Z.removeEventListener(a.default.SEGMENTATION_REPRESENTATION_MODIFIED,st),r.Z.removeEventListener(a.default.SEGMENTATION_REPRESENTATION_REMOVED,lt)}},17945:(A,e,t)=>{"use strict";t.d(e,{Z:()=>a});var n=t(1182),r=t(26408),o=t(74168),i=t(99386);const a=async function(A,e,t){if(!(0,r.Z)(A))throw new Error(`No tool group found for toolGroupId: ${A}`);const a=e.map((e=>async function(A,e,t){let r;if(e.type===n.Z.Labelmap)r=await o.Z.addSegmentationRepresentation(A,e,t);else{if(e.type!==n.Z.Contour)throw new Error(`The representation type ${e.type} is not supported`);r=await i.Z.addSegmentationRepresentation(A,e,t)}return r}(A,e,t)));return await Promise.all(a)}},54080:(A,e,t)=>{"use strict";t.d(e,{Z:()=>c});var n=t(71975),r=t.n(n),o=t(1182),i=t(60754);const a=function(A){if(!A.representation.data)throw new Error("The segmentationInput.representationData.data is undefined, please provide a valid representationData.data");const e=A.representation.data;if(!e.volumeId)throw new Error("The segmentationInput.representationData.volumeId is undefined, please provide a valid representationData.volumeId");if(!i.ZP.getVolume(e.volumeId))throw new Error(`volumeId of ${e.volumeId} not found in cache, you should load and cache volume before adding segmentation`)};const s=function(A){if(!A||!A.length)throw new Error("The segmentationInputArray is undefined or empty array");A.forEach((A=>{if(void 0===A.segmentationId)throw new Error("The segmentationInput.segmentationId is undefined, please provide a valid segmentationId");if(void 0===A.representation)throw new Error("The segmentationInput.representation is undefined, please provide a valid representation");A.representation.type===o.Z.Labelmap&&a(A)}))};var l=t(57756);const c=function(A){s(A),A.map((A=>{const e=r()(A);(0,l.addSegmentation)(e)}))}},44158:(A,e,t)=>{"use strict";t.d(e,{Hi:()=>r,K0:()=>l,Pv:()=>g,Qb:()=>o,Wx:()=>u,bH:()=>d,eu:()=>a,gN:()=>i,gi:()=>c,i:()=>s});var n=t(57756);function r(){return n.getGlobalConfig()}function o(A){n.setGlobalConfig(A)}function i(A){return r().representations[A]}function a(A,e){const t=r();o({...t,representations:{...t.representations,[A]:{...t.representations[A],...e}}})}function s(A){return n.getToolGroupSpecificConfig(A)}function l(A,e){n.setToolGroupSpecificConfig(A,e)}function c(A,e){return n.getSegmentationRepresentationSpecificConfig(A,e)}function u(A,e,t){n.setSegmentationRepresentationSpecificConfig(A,e,t)}function d(A,e,t){return n.getSegmentSpecificRepresentationConfig(A,e,t)}function g(A,e,t){n.setSegmentSpecificRepresentationConfig(A,e,t)}},90021:(A,e,t)=>{"use strict";t.r(e),t.d(e,{getSegmentationVisibility:()=>s,setSegmentVisibility:()=>c,setSegmentationVisibility:()=>a,setSegmentsVisibility:()=>l});var n=t(60754),r=t(57756),o=t(35316),i=t(1182);function a(A,e,t){const a=(0,r.getSegmentationRepresentations)(A);if(!a)return;const s=a.find((A=>A.segmentationRepresentationUID===e));if(!s)return;const{segmentsHidden:l,segmentationId:c}=s,u=function(A){const e=r.getSegmentation(A);if(e.type===i.Z.Labelmap){const e=n.ZP.getVolume(A).getScalarData(),t={};for(let A=0;A<e.length;A++){const n=e[A];0===n||t[n]||(t[n]=!0)}return Object.keys(t).map((A=>parseInt(A,10)))}if(e.type===i.Z.Contour){const t=e.representationData.CONTOUR?.geometryIds;if(!t)throw new Error(`No geometryIds found for segmentationId ${A}`);return t.map((A=>n.ZP.getGeometry(A).data.getSegmentIndex()))}}(c);t?l.clear():u.forEach((A=>{l.add(A)})),(0,o.triggerSegmentationRepresentationModified)(A,s.segmentationRepresentationUID)}function s(A,e){const t=(0,r.getSegmentationRepresentations)(A).find((A=>A.segmentationRepresentationUID===e));if(!t)return;const{segmentsHidden:n}=t;return 0===n.size}function l(A,e,t,n){const i=r.getSegmentationRepresentationByUID(A,e);i&&(t.forEach((A=>{n?i.segmentsHidden.delete(A):i.segmentsHidden.add(A)})),(0,o.triggerSegmentationRepresentationModified)(A,e))}function c(A,e,t,n){const i=r.getSegmentationRepresentationByUID(A,e);i&&(n?i.segmentsHidden.delete(t):i.segmentsHidden.add(t),(0,o.triggerSegmentationRepresentationModified)(A,e))}},87406:(A,e,t)=>{"use strict";t.d(e,{Z:()=>a});var n=t(1182),r=t(74168),o=t(99386),i=t(57756);const a=function(A,e,t){const a=(0,i.getSegmentationRepresentations)(A);if(!a||0===a.length)return;const s=a.map((A=>A.segmentationRepresentationUID));let l=e;if(l){const A=e.filter((A=>!s.includes(A)));if(A.length>0)throw new Error(`The following segmentationRepresentationUIDs are not part of the toolGroup: ${JSON.stringify(A)}`)}else l=s;l.forEach((e=>{!function(A,e,t){const a=(0,i.getSegmentationRepresentationByUID)(A,e),{type:s}=a;if(s===n.Z.Labelmap)r.Z.removeSegmentationRepresentation(A,e,t);else{if(s!==n.Z.Contour)throw new Error(`The representation ${s} is not supported yet`);o.Z.removeSegmentationRepresentation(A,e,t)}}(A,e,t)}))}},93700:(A,e,t)=>{"use strict";t.d(e,{Z:()=>s});var n=t(96720),r=t(26222),o=t(76467);function i(A,e){return A.findIndex((A=>e.renderingEngineId===A.renderingEngineId&&e.viewportId===A.viewportId))}function a(A,e){return A.some((A=>A.renderingEngineId===e.renderingEngineId&&A.viewportId===e.viewportId))}const s=class{constructor(A,e,t){this._viewportOptions={},this._onEvent=A=>{if(!0===this._ignoreFiredEvents)return;if(!this._targetViewports.length)return;const e=(0,n.ZP)(A.currentTarget);if(!e)return;const{renderingEngineId:t,viewportId:r}=e;this._sourceViewports.find((A=>A.viewportId===r))&&this.fireEvent({renderingEngineId:t,viewportId:r},A)},this._enabled=!0,this._eventName=e,this._eventHandler=t,this._ignoreFiredEvents=!1,this._sourceViewports=[],this._targetViewports=[],this.id=A}isDisabled(){return!this._enabled||!this._hasSourceElements()}setOptions(A,e={}){this._viewportOptions[A]=e}getOptions(A){return this._viewportOptions[A]}add(A){this.addTarget(A),this.addSource(A)}addSource(A){if(a(this._sourceViewports,A))return;const{renderingEngineId:e,viewportId:t}=A,{element:n}=(0,r.Pr)(e).getViewport(t);n.addEventListener(this._eventName,this._onEvent.bind(this)),this._updateDisableHandlers(),this._sourceViewports.push(A)}addTarget(A){a(this._targetViewports,A)||(this._targetViewports.push(A),this._updateDisableHandlers())}getSourceViewports(){return this._sourceViewports}getTargetViewports(){return this._targetViewports}destroy(){this._sourceViewports.forEach((A=>this.removeSource(A))),this._targetViewports.forEach((A=>this.removeTarget(A)))}remove(A){this.removeTarget(A),this.removeSource(A)}removeSource(A){const e=i(this._sourceViewports,A);if(-1===e)return;const t=function(A){const e=(0,r.Pr)(A.renderingEngineId);if(!e)throw new Error(`No RenderingEngine for Id: ${A.renderingEngineId}`);return e.getViewport(A.viewportId).element}(A);this._sourceViewports.splice(e,1),t.removeEventListener(this._eventName,this._eventHandler),this._updateDisableHandlers()}removeTarget(A){const e=i(this._targetViewports,A);-1!==e&&(this._targetViewports.splice(e,1),this._updateDisableHandlers())}hasSourceViewport(A,e){return a(this._sourceViewports,{renderingEngineId:A,viewportId:e})}hasTargetViewport(A,e){return a(this._targetViewports,{renderingEngineId:A,viewportId:e})}fireEvent(A,e){if(!this.isDisabled()&&!this._ignoreFiredEvents){this._ignoreFiredEvents=!0;try{for(let t=0;t<this._targetViewports.length;t++){const n=this._targetViewports[t];A.viewportId===n.viewportId||this._eventHandler(this,A,n,e)}}catch(A){console.warn(`Synchronizer, for: ${this._eventName}`,A)}finally{this._ignoreFiredEvents=!1}}}_hasSourceElements(){return 0!==this._sourceViewports.length}_updateDisableHandlers(){const A=function(A,e){const t=[],n=A.concat(e);for(let A=0;A<n.length;A++){const e=n[A];t.some((A=>e.renderingEngineId===A.renderingEngineId&&e.viewportId===A.viewportId))||t.push(e)}return t}(this._sourceViewports,this._targetViewports),e=this.remove,t=A=>{e(A.detail.element)};A.forEach((function(A){const e=(0,r.Pr)(A.renderingEngineId).getViewport(A.viewportId);if(!e)return;const{element:n}=e;n.removeEventListener(o.default.ELEMENT_DISABLED,t),n.addEventListener(o.default.ELEMENT_DISABLED,t)}))}}},35646:(A,e,t)=>{"use strict";t.d(e,{Z:()=>o});var n=t(40622),r=t(93700);const o=function(A,e,t){if(n.ZP.synchronizers.some((e=>e.id===A)))throw new Error(`Synchronizer with id '${A}' already exists.`);const o=new r.Z(A,e,t);return n.ZP.synchronizers.push(o),o}},67358:(A,e,t)=>{"use strict";t.d(e,{Z:()=>r});var n=t(40622);const r=function(){for(;n.ZP.synchronizers.length>0;){n.ZP.synchronizers.pop().destroy()}}},76829:(A,e,t)=>{"use strict";t.d(e,{Z:()=>r});var n=t(40622);const r=function(A){const e=n.ZP.synchronizers.findIndex((e=>e.id===A));if(e>-1){n.ZP.synchronizers[e].destroy(),n.ZP.synchronizers.splice(e,1)}}},55907:(A,e,t)=>{"use strict";t.d(e,{Z:()=>r});var n=t(40622);const r=function(){return n.ZP.synchronizers}},59396:(A,e,t)=>{"use strict";t.d(e,{Z:()=>r});var n=t(40622);const r=function(A){return n.ZP.synchronizers.find((e=>e.id===A))}},66277:(A,e,t)=>{"use strict";t.d(e,{Z:()=>r});var n=t(40622);const r=function(A,e){const t=[];if(!e&&!A)throw new Error("At least one of renderingEngineId or viewportId should be given");for(let r=0;r<n.ZP.synchronizers.length;r++){const o=n.ZP.synchronizers[r],i=!o.isDisabled(),a=o.hasSourceViewport(e,A),s=o.hasTargetViewport(e,A);i&&(a||s)&&t.push(o)}return t}},5841:(A,e,t)=>{"use strict";t.d(e,{Z:()=>U});var n=t(40622),r=t(44906),o=t(49154),i=t(71975),a=t.n(i),s=t(65406),l=t.n(s),c=t(26222),u=t(45791),d=t(96720),g=t(44493),f=t(58251),h=t(21226),B=t(23222);const{Active:p,Passive:w,Enabled:m,Disabled:v}=r.default;class C{constructor(A){this.viewportsInfo=[],this.toolOptions={},this._toolInstances={},this.id=A}getViewportIds(){return this.viewportsInfo.map((({viewportId:A})=>A))}getViewportsInfo(){return this.viewportsInfo.slice()}getToolInstance(A){const e=this._toolInstances[A];if(e)return e;console.warn(`'${A}' is not registered with this toolGroup.`)}addTool(A,e={}){const t=n.ZP.tools[A],r=void 0!==A&&""!==A,o=this.toolOptions[A];if(!r)return void console.warn("Tool with configuration did not produce a toolName: ",e);if(!t)return void console.warn(`'${A}' is not registered with the library. You need to use cornerstoneTools.addTool to register it.`);if(o)return void console.warn(`'${A}' is already registered for ToolGroup ${this.id}.`);const{toolClass:i}=t,a=new i({name:A,toolGroupId:this.id,configuration:e});this._toolInstances[A]=a}addToolInstance(A,e,t={}){let r=n.ZP.tools[A]?.toolClass;if(!r){const t=n.ZP.tools[e].toolClass;class o extends t{}o.toolName=A,r=o,n.ZP.tools[A]={toolClass:o}}this.addTool(r.toolName,t)}addViewport(A,e){const t=(0,c.Uu)();if(!e&&t.length>1)throw new Error("You must specify a renderingEngineId when there are multiple rendering engines.");const n=e||t[0].id;this.viewportsInfo.some((({viewportId:e})=>e===A))||this.viewportsInfo.push({viewportId:A,renderingEngineId:n});const r=this.getActivePrimaryMouseButtonTool();u.Z.getRuntimeSettings().get("useCursors")&&this.setViewportsCursorByToolName(r)}removeViewports(A,e){const t=[];if(this.viewportsInfo.forEach(((n,r)=>{let o=!1;n.renderingEngineId===A&&(o=!0,e&&n.viewportId!==e&&(o=!1)),o&&t.push(r)})),t.length)for(let A=t.length-1;A>=0;A--)this.viewportsInfo.splice(t[A],1)}setActiveStrategy(A,e){const t=this._toolInstances[A];void 0!==t?t.setActiveStrategy(e):console.warn(`Tool ${A} not added to toolGroup, can't set tool configuration.`)}setToolMode(A,e,t={}){A?e!==r.default.Active?e!==r.default.Passive?e!==r.default.Enabled?e!==r.default.Disabled?console.warn("setToolMode: mode must be defined"):this.setToolDisabled(A):this.setToolEnabled(A):this.setToolPassive(A):this.setToolActive(A,t):console.warn("setToolMode: toolName must be defined")}setToolActive(A,e={}){const t=this._toolInstances[A];if(void 0===t)return void console.warn(`Tool ${A} not added to toolGroup, can't set tool mode.`);if(!t)return void console.warn(`'${A}' instance ${t} is not registered with this toolGroup, can't set tool mode.`);const n={bindings:[...this.toolOptions[A]?this.toolOptions[A].bindings:[],...e.bindings?e.bindings:[]].reduce(((A,e)=>{const t=void 0!==e.numTouchPoints,n=void 0!==e.mouseButton;return A.some((A=>function(A,e){if(A.mouseButton!==e.mouseButton)return!1;return A.modifierKey===e.modifierKey}(A,e)))||!t&&!n||A.push(e),A}),[]),mode:p};this.toolOptions[A]=n,this._toolInstances[A].mode=p;const r=u.Z.getRuntimeSettings().get("useCursors");if(this._hasMousePrimaryButtonBinding(e)&&r)this.setViewportsCursorByToolName(A);else{if(!this.getActivePrimaryMouseButtonTool()&&r){const A=f.Z.getDefinedCursor("default");this._setCursorForViewports(A)}}"function"==typeof t.onSetToolActive&&t.onSetToolActive(),this._renderViewports()}setToolPassive(A){const e=this._toolInstances[A];if(void 0===e)return void console.warn(`Tool ${A} not added to toolGroup, can't set tool mode.`);const t=this.getToolOptions(A),n=Object.assign({bindings:t?t.bindings:[]},t,{mode:w});n.bindings=n.bindings.filter((A=>A.mouseButton!==o.p.Primary||A.modifierKey));let r=w;0!==n.bindings.length&&(r=p,n.mode=r),this.toolOptions[A]=n,e.mode=r,"function"==typeof e.onSetToolPassive&&e.onSetToolPassive(),this._renderViewports()}setToolEnabled(A){const e=this._toolInstances[A];if(void 0===e)return void console.warn(`Tool ${A} not added to toolGroup, can't set tool mode.`);const t={bindings:[],mode:m};this.toolOptions[A]=t,e.mode=m,"function"==typeof e.onSetToolEnabled&&e.onSetToolEnabled(),this._renderViewports()}setToolDisabled(A){const e=this._toolInstances[A];if(void 0===e)return void console.warn(`Tool ${A} not added to toolGroup, can't set tool mode.`);const t={bindings:[],mode:v};this.toolOptions[A]=t,e.mode=v,"function"==typeof e.onSetToolDisabled&&e.onSetToolDisabled(),this._renderViewports()}getToolOptions(A){const e=this.toolOptions[A];if(void 0!==e)return e}getActivePrimaryMouseButtonTool(){return Object.keys(this.toolOptions).find((A=>{const e=this.toolOptions[A];return e.mode===p&&this._hasMousePrimaryButtonBinding(e)}))}setViewportsCursorByToolName(A,e){const t=this._getCursor(A,e);this._setCursorForViewports(t)}_getCursor(A,e){let t,n;return e&&(t=`${A}.${e}`,n=h.Z.getDefinedCursor(t,!0),n)?n:(t=`${A}`,n=h.Z.getDefinedCursor(t,!0),n||(t=A,n=h.Z.getDefinedCursor(t,!0),n||f.Z.getDefinedCursor("default")))}_setCursorForViewports(A){this.viewportsInfo.forEach((({renderingEngineId:e,viewportId:t})=>{const n=(0,d.O)(t,e);if(!n)return;const{viewport:r}=n;(0,B.initElementCursor)(r.element,A)}))}setToolConfiguration(A,e,t){if(void 0===this._toolInstances[A])return console.warn(`Tool ${A} not present, can't set tool configuration.`),!1;let n;return n=t?e:g.Z(this._toolInstances[A].configuration,e),this._toolInstances[A].configuration=n,this._renderViewports(),!0}getToolConfiguration(A,e){if(void 0===this._toolInstances[A])return void console.warn(`Tool ${A} not present, can't set tool configuration.`);const t=l()(this._toolInstances[A].configuration,e);return a()(t)}_hasMousePrimaryButtonBinding(A){return A?.bindings?.some((A=>A.mouseButton===o.p.Primary&&void 0===A.modifierKey))}_renderViewports(){this.viewportsInfo.forEach((({renderingEngineId:A,viewportId:e})=>{(0,c.Pr)(A).renderViewport(e)}))}}const U=function(A){if(n.ZP.toolGroups.some((e=>e.id===A)))return void console.warn(`'${A}' already exists.`);const e=new C(A);return n.ZP.toolGroups.push(e),e}},14100:(A,e,t)=>{"use strict";t.d(e,{Z:()=>o});var n=t(40622),r=t(38379);const o=function(){const A=[...n.ZP.toolGroups];for(const e of A)(0,r.Z)(e.id);n.ZP.toolGroups=[]}},38379:(A,e,t)=>{"use strict";t.d(e,{Z:()=>i});var n=t(40622),r=t(87406),o=t(14488);const i=function(A){const e=n.ZP.toolGroups.findIndex((e=>e.id===A));e>-1&&(o.ZW.removeToolGroup(A),(0,r.Z)(A),n.ZP.toolGroups.splice(e,1))}},77095:(A,e,t)=>{"use strict";t.d(e,{Z:()=>r});var n=t(40622);const r=function(){return n.ZP.toolGroups}},69114:(A,e,t)=>{"use strict";t.d(e,{Z:()=>r});var n=t(7576);function r(A,e){const t=[];for(let r=0;r<e.length;r++){const o=e[r];if(!o){console.warn("undefined tool in filterToolsWithAnnotationsForElement");continue}let i=(0,n.getAnnotations)(o.constructor.toolName,A);i?.length&&("function"==typeof o.filterInteractableAnnotationsForElement&&(i=o.filterInteractableAnnotationsForElement(A,i)),i.length>0&&t.push({tool:o,annotations:i}))}return t}},75080:(A,e,t)=>{"use strict";t.d(e,{Z:()=>s});var n=t(35646),r=t(76467),o=t(26222);function i(A,e,t,n){const{camera:r}=n.detail,i=(0,o.Pr)(t.renderingEngineId);if(!i)throw new Error(`No RenderingEngine for Id: ${t.renderingEngineId}`);const a=i.getViewport(t.viewportId);a.setCamera(r),a.render()}const{CAMERA_MODIFIED:a}=r.default;function s(A){return(0,n.Z)(A,a,i)}},38609:(A,e,t)=>{"use strict";t.d(e,{Z:()=>g});var n=t(35646),r=t(76467),o=t(6807),i=t(26222),a=t(71478),s=t(599),l=t(33477);async function c(A,e,t){const n=(0,i.Pr)(t.renderingEngineId);if(!n)throw new Error(`No RenderingEngine for Id: ${t.renderingEngineId}`);const r=n.getViewport(e.viewportId),c=n.getViewport(t.viewportId),d=r.getFrameOfReferenceUID(),g=c.getFrameOfReferenceUID(),f=r.getCurrentImageId(),h=a.get("imagePlaneModule",f).imagePositionPatient,B=c.getImageIds();if(function(A,e){const{viewPlaneNormal:t}=A.getCamera(),{viewPlaneNormal:n}=e.getCamera(),r=o.dot(t,n);return Math.abs(r)>.9}(r,c))if(d===g){const A=u(h,B);if(-1!==A.index&&c.getCurrentImageIdIndex()!==A.index)return void await(0,l.Z)(c.element,{imageIndex:A.index})}else{const A=s.Z.get("spatialRegistrationModule",[t.viewportId,e.viewportId]);if(!A)throw new Error(`No registration matrix found for sourceViewport: ${e.viewportId} and targetViewport: ${t.viewportId}, viewports with different frameOfReferenceUIDs must have a registration matrix in the registrationMetadataProvider. Use calculateViewportsRegistrationMatrix to calculate the matrix.`);const n=u(o.transformMat4(o.create(),h,A),B);-1!==n.index&&c.getCurrentImageIdIndex()!==n.index&&await(0,l.Z)(c.element,{imageIndex:n.index})}}function u(A,e){return e.reduce(((e,t,n)=>{const{imagePositionPatient:r}=a.get("imagePlaneModule",t),i=o.distance(r,A);return i<e.distance?{distance:i,index:n}:e}),{distance:1/0,index:-1})}const{STACK_NEW_IMAGE:d}=r.default;function g(A){return(0,n.Z)(A,d,c)}},91751:(A,e,t)=>{"use strict";t.d(e,{Z:()=>l});var n=t(35646),r=t(76467),o=t(26222),i=t(75089),a=t(12145);function s(A,e,t,n){const r=n.detail,{volumeId:s,range:l}=r,c=(0,o.Pr)(t.renderingEngineId);if(!c)throw new Error(`Rendering Engine does not exist: ${t.renderingEngineId}`);const u=c.getViewport(t.viewportId);if(u instanceof i.Z)u.setProperties({voiRange:l},s);else{if(!(u instanceof a.Z))throw new Error("Viewport type not supported.");u.setProperties({voiRange:l})}u.render()}function l(A){return(0,n.Z)(A,r.default.VOI_MODIFIED,s)}},94457:(A,e,t)=>{"use strict";t.d(e,{Z:()=>s});var n=t(35646),r=t(76467),o=t(26222);function i(A,e,t){const n=(0,o.Pr)(t.renderingEngineId);if(!n)throw new Error(`No RenderingEngine for Id: ${t.renderingEngineId}`);const r=A.getOptions(t.viewportId),i=n.getViewport(t.viewportId),a=n.getViewport(e.viewportId);if(!1!==r?.syncZoom){const A=a.getZoom();i.setZoom(A)}if(!1!==r?.syncPan){const A=a.getPan();i.setPan(A)}i.render()}const{CAMERA_MODIFIED:a}=r.default;function s(A){return(0,n.Z)(A,a,i)}},7468:(A,e,t)=>{"use strict";t.d(e,{Z:()=>_});var n=t(6807),r=t(91055),o=t(92780),i=t(81291),a=t(78266),s=t(51854),l=t(96720),c=t(65863),u=t(84944),d=t(24570),g=t(76467),f=t(26408),h=t(25792),B=t(7576),p=t(55742),w=t(80084),m=t(6355),v=t(40622),C=t(69786),U=t(11207),Q=t(23222),y=t(86245),I=t(43876),F=t(80686),b=t(43356),E=t(82338);const{RENDERING_DEFAULTS:T}=E;function S(){return"rgb(0, 200, 0)"}function P(){return!0}function x(){return!0}function H(){return!0}const D=1,L=2,O=3;class M extends a.Z{constructor(A={},e={supportedInteractionTypes:["Mouse"],configuration:{shadow:!0,viewportIndicators:!0,autoPan:{enabled:!1,panSize:10},referenceLinesCenterGapRadius:20,filterActorUIDsToSetSlabThickness:[],slabThicknessBlendMode:s.Z.MAXIMUM_INTENSITY_BLEND,mobile:{enabled:!1,opacity:.8,handleRadius:9}}}){super(A,e),this.toolCenter=[0,0,0],this.initializeViewport=({renderingEngineId:A,viewportId:e})=>{const t=(0,l.O)(e,A),{FrameOfReferenceUID:n,viewport:r}=t,{element:o}=r,{position:i,focalPoint:a,viewPlaneNormal:s}=r.getCamera();let c=this._getAnnotations(t);c=this.filterInteractableAnnotationsForElement(o,c),c.length&&(0,B.removeAnnotation)(c[0].annotationUID);const u={highlighted:!1,metadata:{cameraPosition:[...i],cameraFocalPoint:[...a],FrameOfReferenceUID:n,toolName:this.getToolName()},data:{handles:{rotationPoints:[],slabThicknessPoints:[],toolCenter:this.toolCenter},activeOperation:null,activeViewportIds:[],viewportId:e}};return(0,B.addAnnotation)(u,o),{normal:s,point:r.canvasToWorld([r.canvas.clientWidth/2,r.canvas.clientHeight/2])}},this._getViewportsInfo=()=>(0,f.Z)(this.toolGroupId).viewportsInfo,this.computeToolCenter=A=>{if(!A.length||1===A.length)throw new Error("For crosshairs to operate, at least two viewports must be given.");const[e,t,r]=A,{normal:o,point:i}=this.initializeViewport(e),{normal:a,point:s}=this.initializeViewport(t);let u=[0,0,0],d=n.create();r?({normal:u,point:d}=this.initializeViewport(r)):(n.add(d,i,s),n.scale(d,d,.5),n.cross(u,o,a));const g=c.planeEquation(o,i),f=c.planeEquation(a,s),h=c.planeEquation(u,d);this.toolCenter=c.threePlaneIntersection(g,f,h);const{renderingEngine:B}=(0,l.O)(A[0].viewportId,A[0].renderingEngineId);(0,b.Z)(B,A.map((({viewportId:A})=>A)))},this.addNewAnnotation=A=>{const e=A.detail,{element:t}=e,{currentPoints:n}=e,r=n.world,o=(0,l.ZP)(t),{viewport:i}=o;this._jump(o,r);const a=this._getAnnotations(o),s=this.filterInteractableAnnotationsForElement(i.element,a),{data:c}=s[0],{rotationPoints:u}=c.handles,d=[];for(let A=0;A<u.length-1;++A){const e=u[A][1],t=this._getReferenceLineControllable(e.id),n=this._getReferenceLineDraggableRotatable(e.id);t&&n&&(d.push(e.id),A++)}return c.activeViewportIds=[...d],c.handles.activeOperation=D,A.preventDefault(),(0,Q.hideElementCursor)(t),this._activateModify(t),s[0]},this.cancel=()=>{console.log("Not implemented yet")},this.handleSelectedCallback=(A,e)=>{const t=A.detail,{element:n}=t;e.highlighted=!0,this._activateModify(n),(0,Q.hideElementCursor)(n),A.preventDefault()},this.isPointNearTool=(A,e,t,n)=>!!this._pointNearTool(A,e,t,6),this.toolSelectedCallback=(A,e,t)=>{const n=A.detail,{element:r}=n;e.highlighted=!0,this._activateModify(r),(0,Q.hideElementCursor)(r),A.preventDefault()},this.onCameraModified=A=>{const e=A.detail,{element:t}=e,n=(0,l.ZP)(t),{renderingEngine:r}=n,i=n.viewport,a=this._getAnnotations(n),s=this.filterInteractableAnnotationsForElement(t,a)[0];if(!s)return;const c=i.getCamera(),d=s.metadata.cameraPosition,g=[0,0,0];o.ZP.subtract(c.position,d,g);const f=s.metadata.cameraFocalPoint,B=[0,0,0];o.ZP.subtract(c.focalPoint,f,B),s.metadata.cameraPosition=[...c.position],s.metadata.cameraFocalPoint=[...c.focalPoint];const p=this._getReferenceLineControllable(i.id),w=this._getReferenceLineDraggableRotatable(i.id);if(!u.Z(c.position,d,.001)&&p&&w){let A=!1;u.Z(g,B,.001)||(A=!0);const e=Math.abs(o.ZP.dot(g,c.viewPlaneNormal))<.01;A||e||(this.toolCenter[0]+=g[0],this.toolCenter[1]+=g[1],this.toolCenter[2]+=g[2])}if(this.configuration.autoPan?.enabled){(0,h.Z)(i.id,r.id).getViewportIds().filter((A=>A!==i.id)).forEach((A=>{this._autoPanViewportIfNecessary(A,r)}))}const m=(0,U.Z)(t,this.getToolName(),!1);(0,b.Z)(r,m)},this.mouseMoveCallback=(A,e)=>{const{element:t,currentPoints:n}=A.detail,r=n.canvas;let o=!1;for(let A=0;A<e.length;A++){const n=e[A];if((0,F.isAnnotationLocked)(n))continue;const{data:i,highlighted:a}=n;if(!i.handles)continue;const s=i.handles.activeOperation,l=i.activeViewportIds&&i.activeViewportIds.length>0?[...i.activeViewportIds]:[];i.activeViewportIds=[],i.handles.activeOperation=null;let c=!1;c=!!this.getHandleNearImagePoint(t,n,r,6)||this._pointNearTool(t,n,r,6);c&&!a||!c&&a?(n.highlighted=!a,o=!0):i.handles.activeOperation===s&&this._areViewportIdArraysEqual(i.activeViewportIds,l)||(o=!0)}return o},this.filterInteractableAnnotationsForElement=(A,e)=>{if(!e||!e.length)return[];const t=(0,l.ZP)(A),{viewportId:n}=t;return e.filter((A=>A.data.viewportId===n))},this.renderAnnotation=(A,e)=>{let t=!1;const{viewport:a,renderingEngine:s}=A,{element:l}=a,c=this._getAnnotations(A),u=a.getCamera(),d=this.filterInteractableAnnotationsForElement(l,c)[0];if(!c?.length||!d?.data)return t;const g=d.annotationUID,{clientWidth:f,clientHeight:h}=a.canvas,B=Math.sqrt(f*f+h*h),v=Math.min(f,h),C=d.data,U=a.worldToCanvas(this.toolCenter),Q=this._filterAnnotationsByUniqueViewportOrientations(A,c),I=[],F=[0,0,f,h];Q.forEach((A=>{const{data:e}=A;e.handles.toolCenter=this.toolCenter;const t=s.getViewport(e.viewportId),l=t.getCamera(),c=this._getReferenceLineControllable(t.id),d=this._getReferenceLineDraggableRotatable(t.id),g=this._getReferenceLineSlabThicknessControlsOn(t.id),{clientWidth:f,clientHeight:h}=t.canvas,p=Math.sqrt(f*f+h*h),w=[.5*f,.5*h],m=t.canvasToWorld(w),C=[0,0,0];o.ZP.cross(u.viewPlaneNormal,l.viewPlaneNormal,C),o.ZP.normalize(C),o.ZP.multiplyScalar(C,p);const b=[0,0,0];o.ZP.add(m,C,b);const E=[0,0,0];o.ZP.subtract(m,C,E);const T=a.worldToCanvas(b),S=a.worldToCanvas(m),P=r.Ue();r.$X(P,T,S),r.Fv(P,P);const x=r.Ue();r.bA(x,P,100*B);const H=r.Ue();r.bA(H,P,.4*v);const D=r.Ue();r.bA(D,P,.2*v);const L=r.Ue(),O=this.configuration.referenceLinesCenterGapRadius;r.bA(L,P,2===Q.length?O:0);const M=r.Ue(),_=r.Ue(),k=r.Ue(),V=r.Ue();let R=r.d9(U);d&&c||(R=r.d9(S)),r.IH(M,R,L),r.IH(_,R,x),r.$X(k,R,L),r.$X(V,R,x),(0,y.Z)(M,_,F),(0,y.Z)(k,V,F);const K=r.Ue();r.$X(K,U,H);const N=r.Ue();r.IH(N,U,H);let Z=r.d9(U);!d&&g&&(Z=r.d9(S));let G=[...this.toolCenter];!d&&g&&(G=[...m]);const W=[0,0,0];o.ZP.subtract(b,E,W),o.ZP.normalize(W);const{viewPlaneNormal:X}=u,{matrix:z}=i.Z.buildFromDegree().rotate(90,X),J=[0,0,0];n.transformMat4(J,W,z);const j=t.getSlabThickness(),Y=[...J];o.ZP.multiplyScalar(Y,j);const q=[0,0,0];o.ZP.add(G,Y,q);const $=a.worldToCanvas(q),AA=r.Ue();r.$X(AA,Z,$);const eA=r.Ue();r.$X(eA,Z,x),r.IH(eA,eA,AA);const tA=r.Ue();r.IH(tA,Z,x),r.IH(tA,tA,AA),(0,y.Z)(eA,tA,F);const nA=r.Ue();r.IH(nA,Z,x),r.$X(nA,nA,AA);const rA=r.Ue();r.$X(rA,Z,x),r.$X(rA,rA,AA),(0,y.Z)(nA,rA,F);const oA=r.Ue(),iA=r.Ue(),aA=r.Ue(),sA=r.Ue();r.$X(oA,Z,D),r.IH(oA,oA,AA),r.IH(iA,Z,D),r.IH(iA,iA,AA),r.$X(aA,Z,D),r.$X(aA,aA,AA),r.IH(sA,Z,D),r.$X(sA,sA,AA),I.push([t,M,_,k,V,eA,tA,nA,rA,K,N,oA,iA,aA,sA])}));const b=[],E=[],T=this._getReferenceLineColor(a.id),S=void 0!==T?T:"rgb(200, 200, 200)";if(I.forEach(((A,t)=>{const n=A[0],r=this._getReferenceLineColor(n.id),o=this._getReferenceLineControllable(n.id),i=this._getReferenceLineDraggableRotatable(n.id)||this.configuration.mobile?.enabled,s=this._getReferenceLineSlabThicknessControlsOn(n.id)||this.configuration.mobile?.enabled,l=C.activeViewportIds.find((A=>A===n.id));let c=void 0!==r?r:"rgb(200, 200, 200)",u=1;const d=null!==C.handles.activeOperation&&C.handles.activeOperation===D&&l;d&&(u=2.5);let f=`${t}`;if(o&&i?(f=`${t}One`,(0,p.Z)(e,g,f,A[1],A[2],{color:c,lineWidth:u}),f=`${t}Two`,(0,p.Z)(e,g,f,A[3],A[4],{color:c,lineWidth:u})):(0,p.Z)(e,g,f,A[2],A[4],{color:c,lineWidth:u}),o){c=void 0!==r?r:"rgb(200, 200, 200)";const o=C.handles.activeOperation===L,u=[A[9],A[10]],h=[a.canvasToWorld(A[9]),n,A[1],A[2]],B=[a.canvasToWorld(A[10]),n,A[3],A[4]];b.push(h,B);const m=C.handles.activeOperation===O,v=[A[11],A[12],A[13],A[14]],U=[a.canvasToWorld(A[11]),n,A[5],A[6]],Q=[a.canvasToWorld(A[12]),n,A[5],A[6]],y=[a.canvasToWorld(A[13]),n,A[7],A[8]],I=[a.canvasToWorld(A[14]),n,A[7],A[8]];if(E.push(U,Q,y,I),(d||this.configuration.mobile?.enabled)&&!o&&!m&&i&&s){let A=`${t}One`;(0,w.Z)(e,g,A,u,{color:c,handleRadius:this.configuration.mobile?.enabled?this.configuration.mobile?.handleRadius:3,opacity:this.configuration.mobile?.enabled?this.configuration.mobile?.opacity:1,type:"circle"}),A=`${t}Two`,(0,w.Z)(e,g,A,v,{color:c,handleRadius:this.configuration.mobile?.enabled?this.configuration.mobile?.handleRadius:3,opacity:this.configuration.mobile?.enabled?this.configuration.mobile?.opacity:1,type:"rect"})}else if(d&&!o&&!m&&i){const A=`${t}`;(0,w.Z)(e,g,A,u,{color:c,handleRadius:this.configuration.mobile?.enabled?this.configuration.mobile?.handleRadius:3,opacity:this.configuration.mobile?.enabled?this.configuration.mobile?.opacity:1,type:"circle"})}else if(l&&!o&&!m&&s){const A=`${t}`;(0,w.Z)(e,g,A,v,{color:c,handleRadius:this.configuration.mobile?.enabled?this.configuration.mobile?.handleRadius:3,opacity:this.configuration.mobile?.enabled?this.configuration.mobile?.opacity:1,type:"rect"})}else if(o&&i){const A=`${t}`;(0,w.Z)(e,g,A,u,{color:c,handleRadius:2,fill:c,type:"circle"})}else m&&l&&s&&(0,w.Z)(e,g,f,v,{color:c,handleRadius:2,fill:c,type:"rect"});n.getSlabThickness()>.5&&s&&(f=`${t}STOne`,(0,p.Z)(e,g,f,A[5],A[6],{color:c,width:1,lineDash:[2,3]}),f=`${t}STTwo`,(0,p.Z)(e,g,f,A[7],A[8],{color:c,width:A,lineDash:[2,3]}))}})),t=!0,C.handles.rotationPoints=b,C.handles.slabThicknessPoints=E,this.configuration.viewportIndicators){const A=[.95*f,.05*h],t=.01*B,n="0";(0,m.Z)(e,g,n,A,t,{color:S,fill:S})}return t},this._getAnnotations=A=>{const{viewport:e}=A;return(0,B.getAnnotations)(this.getToolName(),e.element)},this._onNewVolume=A=>{const e=this._getViewportsInfo();this.computeToolCenter(e)},this._areViewportIdArraysEqual=(A,e)=>A.length===e.length&&(A.forEach((A=>{let t=!1;for(let n=0;n<e.length;++n)if(A===e[n]){t=!0;break}if(!1===t)return!1})),!0),this._getAnnotationsForViewportsWithDifferentCameras=(A,e)=>{const{viewportId:t,renderingEngine:n,viewport:r}=A,o=e.filter((A=>A.data.viewportId!==t));if(!o||!o.length)return[];const i=r.getCamera(),{viewPlaneNormal:a,position:s}=i,l=o.filter((A=>{const{viewportId:e}=A.data,t=n.getViewport(e).getCamera();return!(u.Z(t.viewPlaneNormal,a,.01)&&u.Z(t.position,s,1))}));return l},this._filterViewportWithSameOrientation=(A,e,t)=>{const{renderingEngine:n}=A,{data:r}=e,i=n.getViewport(r.viewportId),a=t.filter((A=>{const{data:e}=A,t=n.getViewport(e.viewportId);return!0===this._getReferenceLineControllable(t.id)}));if(!a||!a.length)return[];const s=i.getCamera(),l=s.viewPlaneNormal;o.ZP.normalize(l);return a.filter((A=>{const{viewportId:e}=A.data,t=n.getViewport(e).getCamera(),r=t.viewPlaneNormal;return o.ZP.normalize(r),u.Z(l,r,.01)&&u.Z(s.viewUp,t.viewUp,.01)}))},this._filterAnnotationsByUniqueViewportOrientations=(A,e)=>{const{renderingEngine:t,viewport:n}=A,r=n.getCamera().viewPlaneNormal;o.ZP.normalize(r);const i=e.filter((A=>{const{data:e}=A,r=t.getViewport(e.viewportId),o=this._getReferenceLineControllable(r.id);return n!==r&&!0===o})),a=[];for(let A=0;A<i.length;++A){const e=i[A],{viewportId:n}=e.data,s=t.getViewport(n).getCamera(),l=s.viewPlaneNormal;if(o.ZP.normalize(l),u.Z(r,l,.01)||d.Z(r,l,.01))continue;let c=!1;for(let A=0;A<a.length;++A){const e=a[A],{viewportId:n}=e.data,r=t.getViewport(n).getCamera();u.Z(r.viewPlaneNormal,s.viewPlaneNormal,.01)&&u.Z(r.position,s.position,1)&&(c=!0)}c||a.push(e)}const s=e.filter((A=>{const{data:e}=A,r=t.getViewport(e.viewportId),o=this._getReferenceLineControllable(r.id);return n!==r&&!0!==o}));for(let A=0;A<s.length;++A){const e=s[A],{viewportId:n}=e.data,i=t.getViewport(n).getCamera(),l=i.viewPlaneNormal;if(o.ZP.normalize(l),u.Z(r,l,.01)||d.Z(r,l,.01))continue;let c=!1;for(let A=0;A<a.length;++A){const e=a[A],{viewportId:n}=e.data,r=t.getViewport(n).getCamera();u.Z(r.viewPlaneNormal,i.viewPlaneNormal,.01)&&u.Z(r.position,i.position,1)&&(c=!0)}c||a.push(e)}const l=this._getAnnotationsForViewportsWithDifferentCameras(A,e);for(let A=0;A<l.length;++A){const e=l[A];if(a.some((A=>A===e)))continue;const{viewportId:n}=e.data,i=t.getViewport(n).getCamera(),s=i.viewPlaneNormal;if(o.ZP.normalize(s),u.Z(r,s,.01)||d.Z(r,s,.01))continue;let c=!1;for(let A=0;A<a.length;++A){const e=a[A],{viewportId:n}=e.data,r=t.getViewport(n).getCamera();u.Z(r.viewPlaneNormal,i.viewPlaneNormal,.01)&&u.Z(r.position,i.position,1)&&(c=!0)}c||a.push(e)}return a},this._checkIfViewportsRenderingSameScene=(A,e)=>{const t=A.getActors(),n=e.getActors();let r=!0;return t.forEach((A=>{t.length===n.length&&void 0!==n.find((({uid:e})=>e===A.uid))||(r=!1)})),r},this._jump=(A,e)=>{v.ZP.isInteractingWithTool=!0;const{viewport:t,renderingEngine:n}=A,r=this._getAnnotations(A),i=[0,0,0];o.ZP.subtract(e,this.toolCenter,i);const a=this._getAnnotationsForViewportsWithDifferentCameras(A,r).filter((A=>{const{data:e}=A,r=n.getViewport(e.viewportId),o=this._checkIfViewportsRenderingSameScene(t,r);return this._getReferenceLineControllable(r.id)&&this._getReferenceLineDraggableRotatable(r.id)&&o}));return 0===a.length?(v.ZP.isInteractingWithTool=!1,!1):(this._applyDeltaShiftToSelectedViewportCameras(n,a,i),v.ZP.isInteractingWithTool=!1,!0)},this._activateModify=A=>{v.ZP.isInteractingWithTool=!this.configuration.mobile?.enabled,A.addEventListener(C.default.MOUSE_UP,this._endCallback),A.addEventListener(C.default.MOUSE_DRAG,this._dragCallback),A.addEventListener(C.default.MOUSE_CLICK,this._endCallback),A.addEventListener(C.default.TOUCH_END,this._endCallback),A.addEventListener(C.default.TOUCH_DRAG,this._dragCallback),A.addEventListener(C.default.TOUCH_TAP,this._endCallback)},this._deactivateModify=A=>{v.ZP.isInteractingWithTool=!1,A.removeEventListener(C.default.MOUSE_UP,this._endCallback),A.removeEventListener(C.default.MOUSE_DRAG,this._dragCallback),A.removeEventListener(C.default.MOUSE_CLICK,this._endCallback),A.removeEventListener(C.default.TOUCH_END,this._endCallback),A.removeEventListener(C.default.TOUCH_DRAG,this._dragCallback),A.removeEventListener(C.default.TOUCH_TAP,this._endCallback)},this._endCallback=A=>{const e=A.detail,{element:t}=e;this.editData.annotation.data.handles.activeOperation=null,this.editData.annotation.data.activeViewportIds=[],this._deactivateModify(t),(0,Q.resetElementCursor)(t),this.editData=null;const n=(0,l.ZP)(t),{renderingEngine:r}=n,o=(0,U.Z)(t,this.getToolName(),!1);(0,b.Z)(r,o)},this._dragCallback=A=>{const e=A.detail,t=e.deltaPoints.world;if(Math.abs(t[0])<.001&&Math.abs(t[1])<.001&&Math.abs(t[2])<.001)return;const{element:a}=e,s=(0,l.ZP)(a),{renderingEngine:c,viewport:u}=s,g=this._getAnnotations(s),f=this.filterInteractableAnnotationsForElement(a,g)[0];if(!f)return;const{handles:B}=f.data,{currentPoints:p}=A.detail,w=p.canvas;if(B.activeOperation===D){const A=this._getAnnotationsForViewportsWithDifferentCameras(s,g).filter((A=>{const{data:e}=A,t=c.getViewport(e.viewportId),n=this._getReferenceLineControllable(t.id),r=this._getReferenceLineDraggableRotatable(t.id);return!0===n&&!0===r&&f.data.activeViewportIds.find((A=>A===t.id))}));this._applyDeltaShiftToSelectedViewportCameras(c,A,t)}else if(B.activeOperation===L){const A=this._getAnnotationsForViewportsWithDifferentCameras(s,g).filter((A=>{const{data:e}=A,t=c.getViewport(e.viewportId),n=this._getReferenceLineControllable(t.id),r=this._getReferenceLineDraggableRotatable(t.id);return!0===n&&!0===r})),t=r.Ue(),o=r.Ue(),a=[this.toolCenter[0],this.toolCenter[1],this.toolCenter[2]],l=u.worldToCanvas(a),d=e.currentPoints.canvas,f=r.Ue();r.lu(f,d,e.deltaPoints.canvas),r.lu(t,f,l),r.lu(o,d,l);let h=r.EU(t,o);this._isClockWise(l,f,d)&&(h*=-1),h=Math.round(100*h)/100;const B=u.getCamera().viewPlaneNormal,{matrix:p}=i.Z.buildFromRadian().translate(a[0],a[1],a[2]).rotate(h,B).translate(-a[0],-a[1],-a[2]),w=[];A.forEach((A=>{const{data:e}=A;e.handles.toolCenter=a;const t=c.getViewport(e.viewportId),r=t.getCamera(),{viewUp:o,position:i,focalPoint:s}=r;o[0]+=i[0],o[1]+=i[1],o[2]+=i[2],n.transformMat4(s,s,p),n.transformMat4(i,i,p),n.transformMat4(o,o,p),o[0]-=i[0],o[1]-=i[1],o[2]-=i[2],t.setCamera({position:i,viewUp:o,focalPoint:s}),w.push(t.id)})),c.renderViewports(w)}else if(B.activeOperation===O){const A=this._getAnnotationsForViewportsWithDifferentCameras(s,g).filter((A=>{const{data:e}=A,t=c.getViewport(e.viewportId),n=this._getReferenceLineControllable(t.id),r=this._getReferenceLineSlabThicknessControlsOn(t.id);return!0===n&&!0===r&&f.data.activeViewportIds.find((A=>A===t.id))}));if(0===A.length)return;const r=this._filterViewportWithSameOrientation(s,A[0],g),i=[];i.push(u.id),r.forEach((A=>{const{data:r}=A,a=c.getViewport(r.viewportId),s=a.getCamera().viewPlaneNormal,l=o.ZP.dot(t,s),g=[...s];if(o.ZP.multiplyScalar(g,l),Math.abs(g[0])>.001||Math.abs(g[1])>.001||Math.abs(g[2])>.001){const A=Math.sqrt(g[0]*g[0]+g[1]*g[1]+g[2]*g[2]),t=e.lastPoints.world,r=[0,0,0],l=[this.toolCenter[0],this.toolCenter[1],this.toolCenter[2]];if(!this._getReferenceLineDraggableRotatable(a.id)){const{rotationPoints:A}=this.editData.annotation.data.handles,e=A.filter((A=>A[1].uid===a.id));if(2===e.length){const A=u.canvasToWorld(e[0][3]),t=u.canvasToWorld(e[1][3]);o.ZP.add(A,t,l),o.ZP.multiplyScalar(l,.5)}}o.ZP.subtract(t,l,r);const B=o.ZP.dot(r,s),p=[...s];o.ZP.multiplyScalar(p,B);const m=[p[0],p[1],p[2]];n.normalize(m,m);const v=[g[0],g[1],g[2]];n.normalize(v,v);let C=a.getSlabThickness();d.Z(m,v,.001)?C-=A:C+=A,C=Math.abs(C),C=Math.max(T.MINIMUM_SLAB_THICKNESS,C);this._pointNearReferenceLine(f,w,6,a)&&(C=T.MINIMUM_SLAB_THICKNESS);(0,h.Z)(a.id,c.id).getToolInstance(this.getToolName()).setSlabThickness(a,C),i.push(a.id)}})),c.renderViewports(i)}},this._pointNearReferenceLine=(A,e,t,n)=>{const{data:r}=A,{rotationPoints:o}=r.handles;for(let A=0;A<o.length-1;++A){const r=o[A][1];if(r.id!==n.id)continue;if(!this._getReferenceLineControllable(r.id))continue;const i={start:{x:o[A][2][0],y:o[A][2][1]},end:{x:o[A][3][0],y:o[A][3][1]}},a=I.Z([i.start.x,i.start.y],[i.end.x,i.end.y],[e[0],e[1]]),s={start:{x:o[A+1][2][0],y:o[A+1][2][1]},end:{x:o[A+1][3][0],y:o[A+1][3][1]}},l=I.Z([s.start.x,s.start.y],[s.end.x,s.end.y],[e[0],e[1]]);if(a<=t||l<=t)return!0;A++}return!1},this._getReferenceLineColor=A.configuration?.getReferenceLineColor||S,this._getReferenceLineControllable=A.configuration?.getReferenceLineControllable||P,this._getReferenceLineDraggableRotatable=A.configuration?.getReferenceLineDraggableRotatable||x,this._getReferenceLineSlabThicknessControlsOn=A.configuration?.getReferenceLineSlabThicknessControlsOn||H}onSetToolActive(){const A=this._getViewportsInfo();this._unsubscribeToViewportNewVolumeSet(A),this._subscribeToViewportNewVolumeSet(A),this.computeToolCenter(A)}onSetToolPassive(){const A=this._getViewportsInfo();this.computeToolCenter(A)}onSetToolEnabled(){const A=this._getViewportsInfo();this.computeToolCenter(A)}onSetToolDisabled(){const A=this._getViewportsInfo();this._unsubscribeToViewportNewVolumeSet(A),A.forEach((({renderingEngineId:A,viewportId:e})=>{const t=(0,l.O)(e,A);if(!t)return;const n=this._getAnnotations(t);n?.length&&n.forEach((A=>{(0,B.removeAnnotation)(A.annotationUID)}))}))}getHandleNearImagePoint(A,e,t,n){const r=(0,l.ZP)(A),{viewport:o}=r;let i=this._getRotationHandleNearImagePoint(o,e,t,n);return null!==i?i:(i=this._getSlabThicknessHandleNearImagePoint(o,e,t,n),null!==i?i:void 0)}_unsubscribeToViewportNewVolumeSet(A){A.forEach((({viewportId:A,renderingEngineId:e})=>{const{viewport:t}=(0,l.O)(A,e),{element:n}=t;n.removeEventListener(g.default.VOLUME_VIEWPORT_NEW_VOLUME,this._onNewVolume)}))}_subscribeToViewportNewVolumeSet(A){A.forEach((({viewportId:A,renderingEngineId:e})=>{const{viewport:t}=(0,l.O)(A,e),{element:n}=t;n.addEventListener(g.default.VOLUME_VIEWPORT_NEW_VOLUME,this._onNewVolume)}))}_autoPanViewportIfNecessary(A,e){const t=e.getViewport(A),{clientWidth:n,clientHeight:r}=t.canvas,o=t.worldToCanvas(this.toolCenter),i=this.configuration.autoPan.panSize,a=[o[0],o[1]];if(o[0]<0?a[0]=i:o[0]>n&&(a[0]=n-i),o[1]<0?a[1]=i:o[1]>r&&(a[1]=r-i),a[0]===o[0]&&a[1]===o[1])return;const s=t.canvasToWorld(a),l=[s[0]-this.toolCenter[0],s[1]-this.toolCenter[1],s[2]-this.toolCenter[2]],c=t.getCamera(),{focalPoint:u,position:d}=c,g=[d[0]-l[0],d[1]-l[1],d[2]-l[2]],f=[u[0]-l[0],u[1]-l[1],u[2]-l[2]];t.setCamera({focalPoint:f,position:g}),t.render()}setSlabThickness(A,e){let t;const{filterActorUIDsToSetSlabThickness:n}=this.configuration;n&&n.length>0&&(t=n);let r=this.configuration.slabThicknessBlendMode;e===T.MINIMUM_SLAB_THICKNESS&&(r=s.Z.COMPOSITE);A.setBlendMode(r,t,!1),A.setSlabThickness(e,t)}_isClockWise(A,e,t){return(e[0]-A[0])*(t[1]-A[1])-(e[1]-A[1])*(t[0]-A[0])>0}_applyDeltaShiftToSelectedViewportCameras(A,e,t){e.forEach((e=>{this._applyDeltaShiftToViewportCamera(A,e,t)}))}_applyDeltaShiftToViewportCamera(A,e,t){const{data:n}=e,r=A.getViewport(n.viewportId),i=r.getCamera(),a=i.viewPlaneNormal,s=o.ZP.dot(t,a),l=[...a];if(o.ZP.multiplyScalar(l,s),Math.abs(l[0])>.001||Math.abs(l[1])>.001||Math.abs(l[2])>.001){const A=[0,0,0],e=[0,0,0];o.ZP.add(i.focalPoint,l,A),o.ZP.add(i.position,l,e),r.setCamera({focalPoint:A,position:e}),r.render()}}_getRotationHandleNearImagePoint(A,e,t,n){const{data:o}=e,{rotationPoints:i}=o.handles;for(let a=0;a<i.length;a++){const s=i[a][0],l=i[a][1];if(!this._getReferenceLineControllable(l.id))continue;if(!this._getReferenceLineDraggableRotatable(l.id))continue;const c=A.worldToCanvas(s);if(r.TE(t,c)<n)return o.handles.activeOperation=L,this.editData={annotation:e},s}return null}_getSlabThicknessHandleNearImagePoint(A,e,t,n){const{data:o}=e,{slabThicknessPoints:i}=o.handles;for(let a=0;a<i.length;a++){const s=i[a][0],l=i[a][1];if(!this._getReferenceLineControllable(l.id))continue;if(!this._getReferenceLineSlabThicknessControlsOn(l.id))continue;const c=A.worldToCanvas(s);if(r.TE(t,c)<n)return o.handles.activeOperation=O,o.activeViewportIds=[l.id],this.editData={annotation:e},s}return null}_pointNearTool(A,e,t,n){const o=(0,l.ZP)(A),{viewport:i}=o,{clientWidth:a,clientHeight:s}=i.canvas,c=Math.sqrt(a*a+s*s),{data:u}=e,{rotationPoints:d}=u.handles,{slabThicknessPoints:g}=u.handles,f=[];for(let A=0;A<d.length-1;++A){const e=d[A][1],r=this._getReferenceLineControllable(e.id),o=this._getReferenceLineDraggableRotatable(e.id);if(!r||!o)continue;const i={start:{x:d[A][2][0],y:d[A][2][1]},end:{x:d[A][3][0],y:d[A][3][1]}},a=I.Z([i.start.x,i.start.y],[i.end.x,i.end.y],[t[0],t[1]]),s={start:{x:d[A+1][2][0],y:d[A+1][2][1]},end:{x:d[A+1][3][0],y:d[A+1][3][1]}},l=I.Z([s.start.x,s.start.y],[s.end.x,s.end.y],[t[0],t[1]]);(a<=n||l<=n)&&(f.push(e.id),u.handles.activeOperation=D),A++}for(let A=0;A<g.length-1;++A){const e=g[A][1];if(f.find((A=>A===e.id)))continue;const o=this._getReferenceLineControllable(e.id),i=this._getReferenceLineSlabThicknessControlsOn(e.id);if(!o||!i)continue;const a=g[A][2],s=g[A][3],l=r.Ue();r.IH(l,a,s),r.bA(l,l,.5);const d=r.Ue();r.$X(d,a,l),r.Fv(d,d);const h=r.Ue();r.bA(h,d,.05*c);const B=r.Ue(),p=r.Ue();r.IH(B,l,h),r.$X(p,l,h);const w={start:{x:B[0],y:B[1]},end:{x:a[0],y:a[1]}},m=I.Z([w.start.x,w.start.y],[w.end.x,w.end.y],[t[0],t[1]]),v={start:{x:p[0],y:p[1]},end:{x:s[0],y:s[1]}},C=I.Z([v.start.x,v.start.y],[v.end.x,v.end.y],[t[0],t[1]]);(m<=n||C<=n)&&(f.push(e.id),u.handles.activeOperation=null),A++}return u.activeViewportIds=[...f],this.editData={annotation:e},u.handles.activeOperation===D}}M.toolName="Crosshairs";const _=M},12111:(A,e,t)=>{"use strict";t.d(e,{Z:()=>l});var n=t(68957),r=t(96720),o=t(75089),i=t(57054),a=t(56394);class s extends n.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"],configuration:{targetViewportIds:[]}}){super(A,e)}mouseClickCallback(A){const{element:e,currentPoints:t}=A.detail,n=(0,r.ZP)(e),{viewport:s,renderingEngine:l}=n,c=this.getTargetId(s);if(!c.startsWith("volumeId"))throw new Error("MIPJumpToClickTool: targetId is not a volumeId, you should only use MIPJumpToClickTool with a volumeId as the targetId");const u=c.split("volumeId:")[1];let d=-1/0;const g=(0,i.Z)(s,t.world,u,((A,e)=>{if(A>d)return d=A,e}));if(!g||!g.length)return;const{targetViewportIds:f}=this.configuration;f.forEach((A=>{const e=l.getViewport(A);e instanceof o.Z?(0,a.Z)(e,g):console.warn("Cannot jump to specified world coordinates for a viewport that is not a VolumeViewport")}))}}s.toolName="MIPJumpToClickTool";const l=s},7515:(A,e,t)=>{"use strict";t.d(e,{Z:()=>f});var n=t(68957),r=t(69786),o=t(96720),i=t(12145),a=t(11207),s=t(43356),l=t(40622),c=t(25197),u=t(23222);const d="magnify-viewport";class g extends n.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"],configuration:{magnifySize:10,magnifyWidth:250,magnifyHeight:250}}){super(A,e),this.preMouseDownCallback=A=>{const e=A.detail,{element:t,currentPoints:n}=e,r=(0,o.ZP)(t),{viewport:l,renderingEngine:c}=r;if(!(l instanceof i.Z))throw new Error("MagnifyTool only works on StackViewports");const d=this._getReferencedImageId(l);if(!d)throw new Error("MagnifyTool: No referenced image id found, reconstructed planes not supported yet");const g=(0,a.Z)(t,this.getToolName());return this.editData={referencedImageId:d,viewportIdsToRender:g,enabledElement:r,renderingEngine:c,currentPoints:n},this._createMagnificationViewport(),this._activateDraw(t),(0,u.hideElementCursor)(t),A.preventDefault(),(0,s.Z)(c,g),!0},this.preTouchStartCallback=A=>{this.preMouseDownCallback(A)},this._createMagnificationViewport=()=>{const{enabledElement:A,referencedImageId:e,viewportIdsToRender:t,renderingEngine:n,currentPoints:r}=this.editData,{viewport:o}=A,{element:i}=o,{voiRange:a}=o.getProperties(),{canvas:l,world:u}=r;let g;if(g=i.querySelector(".magnifyTool"),null===g){const A=document.createElement("div");A.classList.add("magnifyTool"),A.style.display="block",A.style.width=`${this.configuration.magnifyWidth}px`,A.style.height=`${this.configuration.magnifyHeight}px`,A.style.position="absolute",g=A;i.querySelector(".viewport-element").appendChild(A);const e={viewportId:d,type:c.Z.STACK,element:g};n.enableElement(e)}g.style.top=l[1]-this.configuration.magnifyHeight/2+"px",g.style.left=l[0]-this.configuration.magnifyWidth/2+"px";const f=n.getViewport(d);f.setStack([e]).then((()=>{f.setProperties({voiRange:a});const{parallelScale:A}=o.getCamera(),{focalPoint:e,position:t,viewPlaneNormal:n}=f.getCamera(),r=Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)),i=[u[0],u[1],u[2]],s=[i[0]+r*n[0],i[1]+r*n[1],i[2]+r*n[2]];f.setCamera({parallelScale:A*(1/this.configuration.magnifySize),focalPoint:i,position:s}),f.render()})),g.style.display="block",(0,s.Z)(n,t)},this._dragCallback=A=>{const e=A.detail,{deltaPoints:t,element:n,currentPoints:r}=e,i=t.world,a=r.canvas,s=(0,o.ZP)(n),{renderingEngine:l}=s,c=l.getViewport(d),u=n.querySelector(".magnifyTool");if(!u)return;u.style.top=a[1]-this.configuration.magnifyHeight/2+"px",u.style.left=a[0]-this.configuration.magnifyWidth/2+"px";const{focalPoint:g,position:f}=c.getCamera(),h=[f[0]+i[0],f[1]+i[1],f[2]+i[2]],B=[g[0]+i[0],g[1]+i[1],g[2]+i[2]];c.setCamera({focalPoint:B,position:h}),c.render()},this._dragEndCallback=A=>{const{element:e}=A.detail,t=(0,o.ZP)(e),{renderingEngine:n}=t;n.disableElement(d);const r=e.querySelector(".viewport-element"),i=r.querySelector(".magnifyTool");r.removeChild(i),this._deactivateDraw(e),(0,u.resetElementCursor)(e)},this._activateDraw=A=>{l.ZP.isInteractingWithTool=!0,A.addEventListener(r.default.MOUSE_UP,this._dragEndCallback),A.addEventListener(r.default.MOUSE_DRAG,this._dragCallback),A.addEventListener(r.default.MOUSE_CLICK,this._dragEndCallback),A.addEventListener(r.default.TOUCH_END,this._dragEndCallback),A.addEventListener(r.default.TOUCH_DRAG,this._dragCallback)},this._deactivateDraw=A=>{l.ZP.isInteractingWithTool=!1,A.removeEventListener(r.default.MOUSE_UP,this._dragEndCallback),A.removeEventListener(r.default.MOUSE_DRAG,this._dragCallback),A.removeEventListener(r.default.MOUSE_CLICK,this._dragEndCallback),A.removeEventListener(r.default.TOUCH_END,this._dragEndCallback),A.removeEventListener(r.default.TOUCH_DRAG,this._dragCallback)}}_getReferencedImageId(A){const e=this.getTargetId(A);let t;return A instanceof i.Z&&(t=e.split("imageId:")[1]),t}}g.toolName="Magnify";const f=g},56577:(A,e,t)=>{"use strict";t.d(e,{Z:()=>i});var n=t(68957),r=t(96720);class o extends n.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"]}){super(A,e)}touchDragCallback(A){this._dragCallback(A)}mouseDragCallback(A){this._dragCallback(A)}_dragCallback(A){const{element:e,deltaPoints:t}=A.detail,n=(0,r.ZP)(e),o=t.world,i=n.viewport.getCamera(),{focalPoint:a,position:s}=i,l=[s[0]-o[0],s[1]-o[1],s[2]-o[2]],c=[a[0]-o[0],a[1]-o[1],a[2]-o[2]];n.viewport.setCamera({focalPoint:c,position:l}),n.viewport.render()}}o.toolName="Pan";const i=o},37893:(A,e,t)=>{"use strict";t.d(e,{Z:()=>h});var n=t(6807),r=t(82338),o=t(26222),i=t(68979),a=t(65863),s=t(7576),l=t(55742),c=t(42572),u=t(43356),d=t(49662);const{EPSILON:g}=r;class f extends d.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"],configuration:{sourceViewportId:""}}){super(A,e),this.editData={},this._init=()=>{const A=(0,o.Uu)()[0];if(!A)return;let e=A.getViewports();e=(0,c.Z)(e,this.getToolName());const t=A.getViewport(this.configuration.sourceViewportId);if(!t||!t.getImageData())return;const{element:n}=t,{viewUp:r,viewPlaneNormal:a}=t.getCamera(),l=i.Z(t);let d=this.editData.annotation;const g=t.getFrameOfReferenceUID();if(d)this.editData.annotation.data.handles.points=l;else{const A={highlighted:!0,invalidated:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...a],viewUp:[...r],FrameOfReferenceUID:g,referencedImageId:null},data:{handles:{points:l}}};(0,s.addAnnotation)(A,n),d=A}this.editData={sourceViewport:t,renderingEngine:A,annotation:d},(0,u.Z)(A,e.filter((A=>A.id!==t.id)).map((A=>A.id)))},this.onSetToolEnabled=()=>{this._init()},this.onCameraModified=A=>{this._init()},this.renderAnnotation=(A,e)=>{const{viewport:t}=A,{annotation:r,sourceViewport:o}=this.editData;let i=!1;if(!o)return i;if(o.id===t.id)return i;if(!r||!r?.data?.handles?.points)return i;const s={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:A.viewport.id},c=r.data.handles.points[0],u=r.data.handles.points[1],d=r.data.handles.points[2],g=r.data.handles.points[3],{focalPoint:f,viewPlaneNormal:h}=t.getCamera(),{viewPlaneNormal:B}=o.getCamera();if(this.isParallel(h,B))return i;const p=a.planeEquation(h,f),w=[c,d,u,g],m=[c,u,d,g];let v=w,C=n.subtract(n.create(),w[0],w[1]);C=n.normalize(n.create(),C);let U=n.subtract(n.create(),w[2],w[0]);U=n.normalize(n.create(),U);const Q=n.cross(n.create(),C,U);if(this.isParallel(Q,h))return i;this.isPerpendicular(C,h)&&(v=m);const y=a.linePlaneIntersection(v[0],v[1],p),I=a.linePlaneIntersection(v[2],v[3],p),{annotationUID:F}=r;s.annotationUID=F;const b=this.getStyle("lineWidth",s,r),E=this.getStyle("lineDash",s,r),T=this.getStyle("color",s,r),S=this.getStyle("shadow",s,r),P=[y,I].map((A=>t.worldToCanvas(A))),x=`${F}-line`;return(0,l.Z)(e,F,"1",P[0],P[1],{color:T,width:b,lineDash:E,shadow:S},x),i=!0,i},this.isPerpendicular=(A,e)=>{const t=n.dot(A,e);return Math.abs(t)<g}}isParallel(A,e){return Math.abs(n.dot(A,e))>1-g}}f.toolName="ReferenceLines";const h=f},20168:(A,e,t)=>{"use strict";t.d(e,{Z:()=>c});var n=t(96720),r=t(75089),o=t(14284),i=t(12145),a=t(68957),s=t(58361);class l extends a.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"],configuration:{invert:!1,debounceIfNotLoaded:!0,loop:!1}}){super(A,e),this.deltaY=1}mouseDragCallback(A){this._dragCallback(A)}touchDragCallback(A){this._dragCallback(A)}_dragCallback(A){const{deltaPoints:e,viewportId:t,renderingEngineId:o}=A.detail,{viewport:i}=(0,n.O)(t,o),a=this.getTargetId(i),{debounceIfNotLoaded:l,invert:c,loop:u}=this.configuration,d=e.canvas[1];let g;i instanceof r.Z&&(g=a.split("volumeId:")[1]);const f=this._getPixelPerImage(i),h=d+this.deltaY;if(f)if(Math.abs(h)>=f){const A=Math.round(h/f);(0,s.Z)(i,{delta:c?-A:A,volumeId:g,debounceLoading:l,loop:u}),this.deltaY=h%f}else this.deltaY=h}_getPixelPerImage(A){const{element:e}=A,t=this._getNumberOfSlices(A);return Math.max(2,e.offsetHeight/Math.max(t,8))}_getNumberOfSlices(A){if(A instanceof r.Z){const{numberOfSlices:e}=o.Z(A);return e}if(A instanceof i.Z)return A.getImageIds().length}}l.toolName="StackScroll";const c=l},66730:(A,e,t)=>{"use strict";t.d(e,{Z:()=>a});var n=t(96720),r=t(68957),o=t(58361);class i extends r.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"],configuration:{invert:!1,debounceIfNotLoaded:!0,loop:!1}}){super(A,e)}mouseWheelCallback(A){const{wheel:e,element:t}=A.detail,{direction:r}=e,{invert:i}=this.configuration,{viewport:a}=(0,n.ZP)(t),s=r*(i?-1:1),l=this.getTargetId(a).split("volumeId:")[1];(0,o.Z)(a,{delta:s,debounceLoading:this.configuration.debounceIfNotLoaded,loop:this.configuration.loop,volumeId:l})}}i.toolName="StackScrollMouseWheel";const a=i},2737:(A,e,t)=>{"use strict";t.d(e,{Z:()=>l});var n=t(92780),r=t(96720),o=t(64950),i=t(6807),a=t(68957);class s extends a.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"],configuration:{rotateIncrementDegrees:2}}){super(A,e),this.rotateCamera=(A,e,t,n)=>{const r=A.getVtkActiveCamera(),a=r.getViewUp(),s=r.getFocalPoint(),l=r.getPosition(),c=[0,0,0],u=[0,0,0],d=[0,0,0],g=o.identity(new Float32Array(16));o.translate(g,g,e),o.rotate(g,g,n,t),o.translate(g,g,[-e[0],-e[1],-e[2]]),i.transformMat4(c,l,g),i.transformMat4(u,s,g),o.identity(g),o.rotate(g,g,n,t),i.transformMat4(d,a,g),A.setCamera({position:c,viewUp:d,focalPoint:u})},this.touchDragCallback=this._dragCallback.bind(this),this.mouseDragCallback=this._dragCallback.bind(this)}_dragCallback(A){const{element:e,currentPoints:t,lastPoints:o}=A.detail,i=t.canvas,a=o.canvas,{rotateIncrementDegrees:s}=this.configuration,l=(0,r.ZP)(e),{viewport:c}=l,u=c.getCamera(),d=e.clientWidth,g=e.clientHeight,f=[i[0]/d,i[1]/g],h=[a[0]/d,a[1]/g],B=[.5*d,.5*g],p=c.canvasToWorld(B),w=(1+Math.abs(.5))**2,m=[h[0],0,0],v=[f[0],0,0],C=m[0]**2,U=v[0]**2,Q=C>w?0:Math.sqrt(w-C),y=U>w?0:Math.sqrt(w-U),I=[m[0],0,Q];n.ZP.normalize(I);const F=[v[0],0,y];n.ZP.normalize(F);const b=n.ZP.dot(I,F);if(Math.abs(b)>1e-4){const A=-2*Math.acos(n.ZP.clampValue(b,-1,1))*Math.sign(f[0]-h[0])*s,e=u.viewUp,t=u.viewPlaneNormal,r=[0,0,0],o=[0,0,0];n.ZP.cross(e,t,r),n.ZP.normalize(r),n.ZP.cross(t,r,o),n.ZP.normalize(o),n.ZP.normalize(e),this.rotateCamera(c,p,o,A);const i=(h[1]-f[1])*s;this.rotateCamera(c,p,r,i),c.render()}}}s.toolName="TrackballRotate";const l=s},59210:(A,e,t)=>{"use strict";t.d(e,{Z:()=>l});var n=t(68957),r=t(96720),o=t(64950),i=t(6807);const a=[0,0,1];class s extends n.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"],configuration:{direction:a,rotateIncrementDegrees:.5}}){super(A,e)}mouseWheelCallback(A){const{element:e,wheel:t}=A.detail,n=(0,r.ZP)(e),{viewport:a}=n,{direction:s,rotateIncrementDegrees:l}=this.configuration,c=a.getCamera(),{viewUp:u,position:d,focalPoint:g}=c,{direction:f}=t,[h,B,p]=g,[w,m,v]=s,C=f*l,U=[0,0,0],Q=[0,0,0],y=[0,0,0],I=o.identity(new Float32Array(16));o.translate(I,I,[h,B,p]),o.rotate(I,I,C,[w,m,v]),o.translate(I,I,[-h,-B,-p]),i.transformMat4(U,d,I),i.transformMat4(Q,g,I),o.identity(I),o.rotate(I,I,C,[w,m,v]),i.transformMat4(y,u,I),a.setCamera({position:U,viewUp:y,focalPoint:Q}),a.render()}}s.toolName="VolumeRotateMouseWheel";const l=s},84994:(A,e,t)=>{"use strict";t.d(e,{Z:()=>u});var n=t(68957),r=t(96720),o=t(75089),i=t(48409),a=t(60754),s=t(12145),l=t(51567);class c extends n.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"]}){super(A,e),this._getImageDynamicRangeFromMiddleSlice=(A,e)=>{const t=Math.floor(e[2]/2),n=e[0]*e[1];let r,o;A instanceof Float32Array?(r=4,o=Float32Array):A instanceof Uint8Array?(r=1,o=Uint8Array):A instanceof Uint16Array?(r=2,o=Uint16Array):A instanceof Int16Array&&(r=2,o=Int16Array);const i=new o(A.buffer,t*n*r,n),{max:a,min:s}=this._getMinMax(i,n);return a-s}}touchDragCallback(A){this.mouseDragCallback(A)}mouseDragCallback(A){const{element:e,deltaPoints:t}=A.detail,n=(0,r.ZP)(e),{renderingEngine:l,viewport:c}=n;let u,d,g,f,h,B,p=!1;if(c instanceof o.Z){u=this.getTargetId(c).split("volumeId:")[1],B=i.Z(u,l.id);const A=c.getProperties();({lower:d,upper:g}=A.voiRange);const e=a.ZP.getVolume(u);f=e.metadata.Modality,p=e.scaling&&Object.keys(e.scaling).length>0}else{if(!(c instanceof s.Z))throw new Error("Viewport is not a valid type");{const A=c.getProperties();f=c.modality,({lower:d,upper:g}=A.voiRange);const{preScale:e}=c.getImageData();p=e.scaled&&void 0!==e.scalingParameters?.suvbw}}return h="PT"===f?this.getPTScaledNewRange({deltaPointsCanvas:t.canvas,lower:d,upper:g,clientHeight:e.clientHeight,isPreScaled:p,viewport:c,volumeId:u}):this.getNewRange({viewport:c,deltaPointsCanvas:t.canvas,volumeId:u,lower:d,upper:g}),c instanceof s.Z?(c.setProperties({voiRange:h}),void c.render()):c instanceof o.Z?(c.setProperties({voiRange:h}),void B.forEach((A=>{A.render()}))):void 0}getPTScaledNewRange({deltaPointsCanvas:A,lower:e,upper:t,clientHeight:n,viewport:r,volumeId:o,isPreScaled:i}){let a=4;a=i?5/n:this._getMultiplierFromDynamicRange(r,o)||4;return t-=A[1]*a,{lower:e,upper:t=i?Math.max(t,.1):t}}getNewRange({viewport:A,deltaPointsCanvas:e,volumeId:t,lower:n,upper:r}){const o=this._getMultiplierFromDynamicRange(A,t)||4,i=e[0]*o,a=e[1]*o;let{windowWidth:s,windowCenter:c}=l.toWindowLevel(n,r);return s+=i,c+=a,s=Math.max(s,1),l.toLowHighRange(s,c)}_getMultiplierFromDynamicRange(A,e){let t;if(e){const A=a.ZP.getVolume(e),{dimensions:n}=A,r=A.getScalarData(),o=this._getImageDynamicRangeFromMiddleSlice(r,n),i=A?.metadata?.BitsStored,s=i?2**i:1/0;t=Math.min(o,s)}else t=this._getImageDynamicRangeFromViewport(A);const n=t/1024;let r=4;return n>1&&(r=Math.round(n)),r}_getImageDynamicRangeFromViewport(A){const{imageData:e}=A.getImageData(),t=e.getDimensions();let n,r;if(n=e.getScalarData?e.getScalarData():e.getPointData().getScalars(),1!==t[2])return this._getImageDynamicRangeFromMiddleSlice(n,t);if(n.getRange)r=n.getRange();else{const{min:A,max:e}=this._getMinMax(n,n.length);r=[A,e]}return r[1]-r[0]}_getMinMax(A,e){let t=1/0,n=-1/0;for(let r=0;r<e;r++){const e=A[r];e<t&&(t=e),e>n&&(n=e)}return{max:n,min:t}}}c.toolName="WindowLevel";const u=c},35253:(A,e,t)=>{"use strict";t.d(e,{Z:()=>s});var n=t(6807),r=t(92780),o=t(96720),i=t(68957);class a extends i.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"],configuration:{zoomToCenter:!1,minZoomScale:.1,maxZoomScale:30,pinchToZoom:!0,pan:!0,invert:!1}}){super(A,e),this.preMouseDownCallback=A=>{const e=A.detail,{element:t,currentPoints:r}=e,i=r.world,a=(0,o.ZP)(t).viewport.getCamera(),{focalPoint:s}=a;this.initialMousePosWorld=i;let l=n.fromValues(s[0]-i[0],s[1]-i[1],s[2]-i[2]);return l=n.normalize(n.create(),l),this.dirVec=l,!1},this.preTouchStartCallback=A=>{if(!this.configuration.pinchToZoom)return this.preMouseDownCallback(A)},this._dragParallelProjection=(A,e,t,r=!1)=>{const{element:o,deltaPoints:i}=A.detail,a=r?A.detail.deltaDistance.canvas:i.canvas[1],s=[o.clientWidth,o.clientHeight],{parallelScale:l,focalPoint:c,position:u}=t;let d=(1-a*(1.5/s[1])*(this.configuration.invert?-1:1))*l,g=c,f=u;if(!this.configuration.zoomToCenter){const A=n.distance(c,this.initialMousePosWorld),e=a*(5/s[1])*(this.configuration.invert?-1:1);d=(1-e)*l,f=n.scaleAndAdd(n.create(),u,this.dirVec,-A*e),g=n.scaleAndAdd(n.create(),c,this.dirVec,-A*e)}const h=e.getImageData();let B=[1,1,1];h&&(B=h.spacing);const{minZoomScale:p,maxZoomScale:w}=this.configuration,m=o.clientHeight*B[1]*.5,v=m/d;let C=d,U=!1;h&&(v<p?(C=m/p,U=!0):v>=w&&(C=m/w,U=!0)),e.setCamera({parallelScale:C,focalPoint:U?c:g,position:U?u:f})},this._dragPerspectiveProjection=(A,e,t,n=!1)=>{const{element:o,deltaPoints:i}=A.detail,a=n?A.detail.deltaDistance.canvas:i.canvas[1],s=[o.clientWidth,o.clientHeight],{position:l,focalPoint:c,viewPlaneNormal:u}=t,d=r.ZP.distance2BetweenPoints(l,c),g=Math.sqrt(d)/s[1],f=[-u[0],-u[1],-u[2]],h=this.configuration.invert?a/g:a*g;let B=h*f[0];l[0]+=B,c[0]+=B,B=h*f[1],l[1]+=B,c[1]+=B,B=h*f[2],l[2]+=B,c[2]+=B,e.setCamera({position:l,focalPoint:c})},this.initialMousePosWorld=[0,0,0],this.dirVec=[0,0,0],this.configuration.pinchToZoom?this.touchDragCallback=this._pinchCallback.bind(this):this.touchDragCallback=this._dragCallback.bind(this),this.mouseDragCallback=this._dragCallback.bind(this)}_pinchCallback(A){if(A.detail.currentPointsList.length>1){const{element:e,currentPoints:t}=A.detail,r=(0,o.ZP)(e),{viewport:i}=r,a=i.getCamera(),s=t.world,{focalPoint:l}=a;this.initialMousePosWorld=s;let c=n.fromValues(l[0]-s[0],l[1]-s[1],l[2]-s[2]);c=n.normalize(n.create(),c),this.dirVec=c,a.parallelProjection?this._dragParallelProjection(A,i,a,!0):this._dragPerspectiveProjection(A,i,a,!0),i.render()}this.configuration.pan&&this._panCallback(A)}_dragCallback(A){const{element:e}=A.detail,t=(0,o.ZP)(e),{viewport:n}=t,r=n.getCamera();r.parallelProjection?this._dragParallelProjection(A,n,r):this._dragPerspectiveProjection(A,n,r),n.render()}_panCallback(A){const{element:e,deltaPoints:t}=A.detail,n=(0,o.ZP)(e),r=t.world,i=n.viewport.getCamera(),{focalPoint:a,position:s}=i,l=[s[0]-r[0],s[1]-r[1],s[2]-r[2]],c=[a[0]-r[0],a[1]-r[1],a[2]-r[2]];n.viewport.setCamera({focalPoint:c,position:l}),n.viewport.render()}}a.toolName="Zoom";const s=a},62906:(A,e,t)=>{"use strict";t.d(e,{Z:()=>d});var n=t(96720),r=t(80084),o=t(50453),i=t(11207),a=t(23222),s=t(43356),l=t(79122),c=t(38396);class u extends l.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"],configuration:{shadow:!0,preventHandleOutsideImage:!1}}){super(A,e),this.postMouseDownCallback=A=>{const e=A.detail,{currentPoints:t,element:r}=e,o=t.world,l=(0,n.ZP)(r),{viewport:c,renderingEngine:u}=l;this.isDrawing=!0;const d=c.getCamera(),{viewPlaneNormal:g,viewUp:f}=d,h=this.getReferencedImageId(c,o,g,f),B={invalidated:!0,highlighted:!0,isVisible:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...g],viewUp:[...f],FrameOfReferenceUID:c.getFrameOfReferenceUID(),referencedImageId:h},data:{label:"",handles:{points:[[...o]]},cachedStats:{}}},p=(0,i.Z)(r,this.getToolName());return this.editData={annotation:B,newAnnotation:!0,viewportIdsToRender:p},this._activateModify(r),(0,a.hideElementCursor)(r),A.preventDefault(),(0,s.Z)(u,p),B},this.postTouchStartCallback=A=>this.postMouseDownCallback(A),this.renderAnnotation=(A,e)=>{let t=!1;const{viewport:n}=A;if(!this.editData)return t;const i=this.filterInteractableAnnotationsForElement(n.element,[this.editData.annotation]);if(!i?.length)return t;const a=this.getTargetId(n),s=n.getRenderingEngine(),l={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:A.viewport.id},u=this.editData.annotation,d=u.annotationUID,g=u.data,f=g.handles.points[0],h=n.worldToCanvas(f);l.annotationUID=d;const B=this.getStyle("color",l,u);if(g.cachedStats[a]?u.invalidated&&this._calculateCachedStats(u,s,A):(g.cachedStats[a]={Modality:null,index:null,value:null},this._calculateCachedStats(u,s,A)),!n.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),t;(0,r.Z)(e,d,"0",[h],{color:B}),t=!0;const p=(0,c.P)(n,a),w=this.isSuvScaled(n,a,u.metadata.referencedImageId),m=this._getTextLines(g,a,p,w);if(m){const A=[h[0]+6,h[1]-6],t="0";(0,o.Z)(e,d,t,m,[A[0],A[1]],this.getLinkedTextBoxStyle(l,u))}return t}}}u.toolName="DragProbe";const d=u},79122:(A,e,t)=>{"use strict";t.d(e,{Z:()=>I});var n=t(91055),r=t(27054),o=t(96720),i=t(97335),a=t(509),s=t(75089),l=t(22797),c=t(34894),u=t(68674),d=t(78266),g=t(7576),f=t(80084),h=t(50453),B=t(40622),p=t(69786),w=t(11207),m=t(23222),v=t(43356),C=t(1117),U=t(38396);const{transformWorldToIndex:Q}=r;class y extends d.Z{constructor(A={},e={supportedInteractionTypes:["Mouse","Touch"],configuration:{shadow:!0,preventHandleOutsideImage:!1}}){super(A,e),this.addNewAnnotation=A=>{const e=A.detail,{currentPoints:t,element:n}=e,r=t.world,i=(0,o.ZP)(n),{viewport:a,renderingEngine:s}=i;this.isDrawing=!0;const l=a.getCamera(),{viewPlaneNormal:c,viewUp:u}=l,d=this.getReferencedImageId(a,r,c,u),f=a.getFrameOfReferenceUID(),h={invalidated:!0,highlighted:!0,metadata:{toolName:this.getToolName(),viewPlaneNormal:[...c],viewUp:[...u],FrameOfReferenceUID:f,referencedImageId:d},data:{label:"",handles:{points:[[...r]]},cachedStats:{}}};(0,g.addAnnotation)(h,n);const B=(0,w.Z)(n,this.getToolName());return this.editData={annotation:h,newAnnotation:!0,viewportIdsToRender:B},this._activateModify(n),(0,m.hideElementCursor)(n),A.preventDefault(),(0,v.Z)(s,B),h},this._endCallback=A=>{const e=A.detail,{element:t}=e,{annotation:n,viewportIdsToRender:r,newAnnotation:s}=this.editData,l=(0,o.ZP)(t),{renderingEngine:c}=l,{viewportId:u}=l;if(this.eventDispatchDetail={viewportId:u,renderingEngineId:c.id},this._deactivateModify(t),(0,m.resetElementCursor)(t),this.editData=null,this.isDrawing=!1,this.isHandleOutsideImage&&this.configuration.preventHandleOutsideImage&&(0,g.removeAnnotation)(n.annotationUID),(0,v.Z)(c,r),s){const A=p.default.ANNOTATION_COMPLETED,e={annotation:n};(0,i.Z)(a.Z,A,e)}},this._dragCallback=A=>{this.isDrawing=!0;const e=A.detail,{currentPoints:t,element:n}=e,r=t.world,{annotation:i,viewportIdsToRender:a}=this.editData,{data:s}=i;s.handles.points[0]=[...r],i.invalidated=!0;const l=(0,o.ZP)(n),{renderingEngine:c}=l;(0,v.Z)(c,a)},this.cancel=A=>{if(this.isDrawing){this.isDrawing=!1,this._deactivateModify(A),(0,m.resetElementCursor)(A);const{annotation:e,viewportIdsToRender:t,newAnnotation:n}=this.editData,{data:r}=e;e.highlighted=!1,r.handles.activeHandleIndex=null;const s=(0,o.ZP)(A),{renderingEngine:l}=s;if((0,v.Z)(l,t),n){const A=p.default.ANNOTATION_COMPLETED,t={annotation:e};(0,i.Z)(a.Z,A,t)}return this.editData=null,e.annotationUID}},this._activateModify=A=>{B.ZP.isInteractingWithTool=!0,A.addEventListener(p.default.MOUSE_UP,this._endCallback),A.addEventListener(p.default.MOUSE_DRAG,this._dragCallback),A.addEventListener(p.default.MOUSE_CLICK,this._endCallback),A.addEventListener(p.default.TOUCH_END,this._endCallback),A.addEventListener(p.default.TOUCH_DRAG,this._dragCallback),A.addEventListener(p.default.TOUCH_TAP,this._endCallback)},this._deactivateModify=A=>{B.ZP.isInteractingWithTool=!1,A.removeEventListener(p.default.MOUSE_UP,this._endCallback),A.removeEventListener(p.default.MOUSE_DRAG,this._dragCallback),A.removeEventListener(p.default.MOUSE_CLICK,this._endCallback),A.removeEventListener(p.default.TOUCH_END,this._endCallback),A.removeEventListener(p.default.TOUCH_DRAG,this._dragCallback),A.removeEventListener(p.default.TOUCH_TAP,this._endCallback)},this.renderAnnotation=(A,e)=>{let t=!1;const{viewport:n}=A,{element:r}=n;let o=(0,g.getAnnotations)(this.getToolName(),r);if(!o?.length)return t;if(o=this.filterInteractableAnnotationsForElement(r,o),!o?.length)return t;const i=this.getTargetId(n),a=n.getRenderingEngine(),c={toolGroupId:this.toolGroupId,toolName:this.getToolName(),viewportId:A.viewport.id};for(let r=0;r<o.length;r++){const u=o[r],d=u.annotationUID,g=u.data,B=g.handles.points[0],p=n.worldToCanvas(B);c.annotationUID=d;const w=this.getStyle("color",c,u);if(g.cachedStats[i]){if(u.invalidated&&(this._calculateCachedStats(u,a,A),n instanceof s.Z)){const{referencedImageId:A}=u.metadata;for(const e in g.cachedStats)if(e.startsWith("imageId")){a.getStackViewports().find((e=>{const t=l.Z(A),n=e.hasImageURI(t),r=l.Z(e.getCurrentImageId());return n&&r!==t}))&&delete g.cachedStats[e]}}}else g.cachedStats[i]={Modality:null,index:null,value:null},this._calculateCachedStats(u,a,A);if(!n.getRenderingEngine())return console.warn("Rendering Engine has been destroyed"),t;const m="0";(0,f.Z)(e,d,m,[p],{color:w}),t=!0;const v=(0,U.P)(n,i),C=this.isSuvScaled(n,i,u.metadata.referencedImageId),Q=this._getTextLines(g,i,v,C);if(Q){const A=[p[0]+6,p[1]-6],t="0";(0,h.Z)(e,d,t,Q,[A[0],A[1]],this.getLinkedTextBoxStyle(c,u))}}return t}}isPointNearTool(){return!1}toolSelectedCallback(){}getHandleNearImagePoint(A,e,t,r){const i=(0,o.ZP)(A),{viewport:a}=i,{data:s}=e,l=s.handles.points[0],c=a.worldToCanvas(l);if(!0===n.TE(t,c)<r)return l}handleSelectedCallback(A,e){const t=A.detail,{element:n}=t;e.highlighted=!0;const r=(0,w.Z)(n,this.getToolName());this.editData={annotation:e,viewportIdsToRender:r},this._activateModify(n),(0,m.hideElementCursor)(n);const i=(0,o.ZP)(n),{renderingEngine:a}=i;(0,v.Z)(a,r),A.preventDefault()}_getTextLines(A,e,t,n){const r=A.cachedStats[e],{index:o,Modality:i,value:a,SUVBw:s,SUVLbm:l,SUVBsa:c}=r;if(void 0===a&&void 0===s)return;const u=[],d=(0,C.F)(i,t,n);return u.push(`(${o[0]}, ${o[1]}, ${o[2]})`),"PT"===i&&!0===t&&void 0!==s?(u.push(`${s.toFixed(2)} SUV bw`),l&&u.push(`${l.toFixed(2)} SUV lbm`),c&&u.push(`${c.toFixed(2)} SUV bsa`)):u.push(`${a.toFixed(2)} ${d}`),u}_getValueForModality(A,e,t){const n={};if(n.value=A,"PT"===t&&e.scaling?.PET&&(e.scaling.PET.suvbwToSuvbsa||e.scaling.PET.suvbwToSuvlbm)){const{suvbwToSuvlbm:t,suvbwToSuvbsa:r}=e.scaling.PET;if(n.SUVBw=A,t){const e=A*t;n.SUVLbm=e}if(r){const e=A*r;n.SUVBsa=e}}return n}_calculateCachedStats(A,e,t){const n=A.data,{viewportId:r,renderingEngineId:o}=t,s=n.handles.points[0],{cachedStats:d}=n,g=Object.keys(d);for(let t=0;t<g.length;t++){const n=g[t],f=this.getTargetIdImage(n,e);if(!f)continue;const{dimensions:h,imageData:B,metadata:w}=f,m="getScalarData"in f?f.getScalarData():f.scalarData,v=w.Modality,C=Q(B,s);if(C[0]=Math.round(C[0]),C[1]=Math.round(C[1]),C[2]=Math.round(C[2]),c.Z(C,h)){this.isHandleOutsideImage=!1;const A=h[0],e=h[0]*h[1],t=m[C[2]*e+C[1]*A+C[0]];if(n.startsWith("imageId:")){const A=n.split("imageId:")[1],e=l.Z(A),t=u.Z(e,o)[0];C[2]=t.getCurrentImageIdIndex()}const r=this._getValueForModality(t,f,v);d[n]={index:C,...r,Modality:v}}else this.isHandleOutsideImage=!0,d[n]={index:C,Modality:v};A.invalidated=!1;const U=p.default.ANNOTATION_MODIFIED,y={annotation:A,viewportId:r,renderingEngineId:o};(0,i.Z)(a.Z,U,y)}return d}}y.toolName="Probe";const I=y},99386:(A,e,t)=>{"use strict";t.d(e,{Z:()=>D});var n=t(81653),r=t(44493),o=t(96720),i=t(1182),a=t(44158),s=t(57756),l=t(26408),c=t(60754),u=t(19013),d=t(91924),g=t(95138),f=t(52284),h=t(19386),B=t(94378),p=d.default.vtkErrorMacro;function w(A,e,t,n){var r,o;A.set((r=t,o=0,e.map((function(A,e){return e===o?(o+=A+1,A):A+r}))),n)}var m={outputPointsPrecision:h.XJ.DEFAULT};function v(A,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,m,t),d.default.setGet(A,e,["outputPointsPrecision"]),d.default.obj(A,e),d.default.algo(A,e,1,1),function(A,e){e.classHierarchy.push("vtkAppendPolyData"),A.requestData=function(t,n){var r=A.getNumberOfInputPorts();if(r)if(1!==r){for(var o=f.ZP.newInstance(),i=0,a=0,s=1,l=1,c=0,d=0,m=0,v=0,C=!0,U=!0,Q=!0,y=0;y<r;y++){var I=t[y];if(I){var F=I.getPoints().getNumberOfPoints();i+=F,c+=I.getVerts().getNumberOfValues(),d+=I.getLines().getNumberOfValues(),m+=I.getStrips().getNumberOfValues(),v+=I.getPolys().getNumberOfValues(),F&&(l&&(l=0,a=I.getPoints().getDataType()),a=a>(s=I.getPoints().getDataType())?a:s);var b=I.getPointData();b?(C=C&&null!==b.getNormals(),U=U&&null!==b.getTCoords(),Q=Q&&null!==b.getScalars()):(C=!1,U=!1,Q=!1)}}e.outputPointsPrecision===h.XJ.SINGLE?a=B.Tu.FLOAT:e.outputPointsPrecision===h.XJ.DOUBLE&&(a=B.Tu.DOUBLE);var E=g.ZP.newInstance({dataType:a});E.setNumberOfPoints(i);var T=E.getData(),S=new Uint32Array(c),P=new Uint32Array(d),x=new Uint32Array(m),H=new Uint32Array(v),D=null,L=null,O=null,M=t[r-1];if(C){var _=M.getPointData().getNormals();D=u.ZP.newInstance({numberOfComponents:3,numberOfTuples:i,size:3*i,dataType:_.getDataType(),name:_.getName()})}if(U){var k=M.getPointData().getTCoords();L=u.ZP.newInstance({numberOfComponents:2,numberOfTuples:i,size:2*i,dataType:k.getDataType(),name:k.getName()})}if(Q){var V=M.getPointData().getScalars();O=u.ZP.newInstance({numberOfComponents:V.getNumberOfComponents(),numberOfTuples:i,size:i*V.getNumberOfComponents(),dataType:V.getDataType(),name:V.getName()})}i=0,c=0,d=0,m=0,v=0;for(var R=0;R<r;R++){var K=t[R];T.set(K.getPoints().getData(),3*i),w(S,K.getVerts().getData(),i,c),c+=K.getVerts().getNumberOfValues(),w(P,K.getLines().getData(),i,d),d+=K.getLines().getNumberOfValues(),w(x,K.getStrips().getData(),i,m),m+=K.getStrips().getNumberOfValues(),w(H,K.getPolys().getData(),i,v),v+=K.getPolys().getNumberOfValues();var N=K.getPointData();if(C){var Z=N.getNormals();D.getData().set(Z.getData(),3*i)}if(U){var G=N.getTCoords();L.getData().set(G.getData(),2*i)}if(Q){var W=N.getScalars();O.getData().set(W.getData(),i*O.getNumberOfComponents())}i+=K.getPoints().getNumberOfPoints()}o.setPoints(E),o.getVerts().setData(S),o.getLines().setData(P),o.getStrips().setData(x),o.getPolys().setData(H),D&&o.getPointData().setNormals(D),L&&o.getPointData().setTCoords(L),O&&o.getPointData().setScalars(O),n[0]=o}else n[0]=t[0];else p("No input specified.")}}(A,e)}var C={newInstance:d.default.newInstance(v,"vtkAppendPolyData"),extend:v},U=t(31954),Q=t(84661),y=t(57135),I=t(15759),F=t(74462);function b(A,e,t){let n=A.segmentSpecificConfig?.[e];return n||(n=A.segmentSpecificConfig?.[t]),n?n.CONTOUR:null}const E=new Map;function T(A){return E.get(A)}function S(A,e){E.set(A,e)}function P(A,e,t,n,r){const{segmentationRepresentationUID:o,segmentsHidden:i}=t,a=C.newInstance(),s=new Map,l=new Map;e.forEach((A=>{const e=c.ZP.getGeometry(A);if(!e)return void console.warn(`No geometry found for geometryId ${A}. Skipping render.`);const n=e.data.getSegmentIndex();!function(A){if(!A)throw new Error(`No contours found for geometryId ${A.id}`);const e=A.id;if(A.type!==y.Z.CONTOUR)throw new Error(`Geometry type ${A.type} not supported for rendering.`);A.data||console.warn(`No contours found for geometryId ${e}. Skipping render.`)}(e);const r=b(t,A,n),o=e.data,d=function(A){const e=[],t=g.ZP.newInstance(),n=F.ZP.newInstance();let r=0;A.getContours().forEach((A=>{const t=A.getPoints(),o=A.getFlatPointsArray(),i=A.getType(),a=t.map(((A,e)=>e+r));i===I.Z.CLOSED_PLANAR&&a.push(a[0]);const s=Float32Array.from(o);e.push(...s),n.insertNextCell([...a]),r+=t.length})),t.setData(e,3);const o=f.ZP.newInstance();return o.setPoints(t),o.setLines(n),o}(o),h=o.getColor(),B=d.getPoints().getNumberOfPoints(),p=u.ZP.newInstance({size:4*B,numberOfComponents:4,dataType:"Uint8Array"});for(let A=0;A<B;++A)p.setTuple(A,[...h,255]);d.getPointData().setScalars(p),r&&l.set(n,r),s.set(n,[...h,i.has(n)?0:255]),0===n?a.setInputData(d):a.addInputData(d)}));const d=a.getOutputData(),h=n.representations.CONTOUR.outlineWidthActive,B=Q.ZP.newInstance();B.setInputData(d);const p=U.ZP.newInstance();p.setMapper(B),p.getProperty().setLineWidth(h),S(o,Object.assign({},T(o),{segmentsHidden:new Set(i),segmentSpecificMap:l,outlineWidthActive:h})),p.setForceOpaque(!0),A.addActor({uid:r,actor:p}),A.resetCamera(),A.render()}function x(A,e,t,n,r){const{segmentationRepresentationUID:o,segmentsHidden:i}=t,a=n.representations.CONTOUR,s=T(o),l=A.getActor(r);if(!l)return void console.warn(`No contour actor found for actorUID ${r}. Skipping render.`);const{actor:u}=l,d=a.outlineWidthActive;s?.outlineWidthActive!==d&&(u.getProperty().setLineWidth(d),S(o,Object.assign({},s,{outlineWidthActive:d})));const g=u.getMapper(),f=g.getLookupTable(),h=[],B=[];for(const A of i)s.segmentsHidden.has(A)||h.push(A);for(const A of s.segmentsHidden)i.has(A)||B.push(A);const p=Array.from(s.segmentsHidden).filter((A=>!B.includes(A))).concat(h),{contourSets:w,segmentSpecificConfigs:m}=e.reduce(((A,e)=>{const n=c.ZP.getGeometry(e),{data:r}=n,o=r.getSegmentIndex(),i=b(t,e,o);return A.contourSets.push(r),A.segmentSpecificConfigs[o]=i??{},A}),{contourSets:[],segmentSpecificConfigs:{}}),v=[...p,...B],C=Object.values(m).some((A=>Object.keys(A).length>0));let U=!1;if(v.length||C){const A=g.getInputData(),e=A.getPointData().getScalars().getData();let t=0;w.forEach((A=>{const n=A.getSegmentIndex(),r=A.getTotalNumberOfPoints();if(v.includes(n)||m[n]?.fillAlpha){const o=A.getColor();let i=p.includes(n)?0:255;const a=m[n];void 0!==a.fillAlpha&&(i=255*a.fillAlpha);for(let A=0;A<r;++A)e[t+4*A]=o[0],e[t+4*A+1]=o[1],e[t+4*A+2]=o[2],e[t+4*A+3]=i;U=!0}t+=4*r})),U&&A.modified(),S(o,Object.assign({},s,{segmentsHidden:new Set(i)})),g.setLookupTable(f)}A.render()}const H=function(A,e,t=!1){const n=(0,o.ZP)(A),{viewport:r}=n,i=r.getActors().map((({uid:A})=>A.includes(e)?A:void 0)).filter(Boolean);r.removeActors(i)};const D={render:async function(A,e,t){const{segmentationId:n}=e,r=s.getSegmentation(n).representationData[i.Z.Contour],{geometryIds:o}=r;o?.length||console.warn(`No contours found for segmentationId ${n}. Skipping render.`),function(A,e,t,n){const{segmentationRepresentationUID:r}=t,o=`CONTOUR_${r}`;(A.getActor(o)?x:P)(A,e,t,n,o)}(A,o,e,t)},addSegmentationRepresentation:async function(A,e,t){const{segmentationId:o}=e,l=n.Z(),c=new Set,u={segmentationId:o,segmentationRepresentationUID:l,type:i.Z.Contour,segmentsHidden:c,colorLUTIndex:0,active:!0,segmentationRepresentationSpecificConfig:{},segmentSpecificConfig:{},config:{}};if(t){const e=a.i(A),n=r.Z(e,t);a.K0(A,{renderInactiveSegmentations:n.renderInactiveSegmentations||!0,representations:{...n.representations}})}return s.addSegmentationRepresentation(A,u),l},removeSegmentationRepresentation:function(A,e,t=!1){if(function(A,e){const t=(0,l.Z)(A);if(void 0===t)throw new Error(`ToolGroup with ToolGroupId ${A} does not exist`);const{viewportsInfo:n}=t;for(const A of n){const{viewportId:t,renderingEngineId:n}=A,r=(0,o.O)(t,n);H(r.viewport.element,e)}}(A,e),s.removeSegmentationRepresentation(A,e),function(A){E.delete(A)}(e),t){(0,l.Z)(A).getViewportsInfo().forEach((({viewportId:A,renderingEngineId:e})=>{(0,o.O)(A,e).viewport.render()}))}}}},74168:(A,e,t)=>{"use strict";t.d(e,{Z:()=>C});var n=t(17394),r=t(92632),o=t(81653),i=t(44493),a=t(96720),s=t(60754),l=t(1182),c=t(44158),u=t(57756),d=t(26408),g=t(51854),f=t(43137);const h=async function(A,e,t){const n=(0,a.ZP)(A),{renderingEngine:r,viewport:o}=n,{id:i}=o,s=[{volumeId:e,actorUID:t,visibility:!0,blendMode:g.Z.MAXIMUM_INTENSITY_BLEND}];await(0,f.Z)(r,s,[i],!1,!0)};const B=function(A,e,t=!1){const n=(0,a.ZP)(A),{viewport:r}=n;r.removeVolumeActors([e])},p=255,w=new Map;function m(A,e,t,n){const r={...A,...e,...n||{}};return{fillAlpha:t?r.fillAlpha:r.fillAlphaInactive,outlineWidth:t?r.outlineWidthActive:r.outlineWidthInactive,renderFill:t?r.renderFill:r.renderFillInactive,renderOutline:r.renderOutline,outlineOpacity:t?r.outlineOpacity:r.outlineOpacityInactive}}function v(A,e,t,{fillAlpha:n,renderFill:r,renderOutline:o,segmentColor:i,outlineWidth:a,segmentsHidden:s}){const l=`${A}-${e}-${t}`,c=w.get(l);if(!c)return w.set(l,{fillAlpha:n,renderFill:r,renderOutline:o,outlineWidth:a,segmentColor:i,segmentsHidden:new Set(s)}),{forceOpacityUpdate:!0,forceColorUpdate:!0};const{fillAlpha:u,renderFill:d,renderOutline:g,outlineWidth:f,segmentColor:h,segmentsHidden:B}=c,p=h[0]!==i[0]||h[1]!==i[1]||h[2]!==i[2],m=h[3]!==i[3]||u!==n||d!==r||g!==o||f!==a||B.has(t)!==s.has(t);return w.set(l,{fillAlpha:n,renderFill:r,renderOutline:o,outlineWidth:a,segmentColor:i.slice(),segmentsHidden:new Set(s)}),{forceOpacityUpdate:m,forceColorUpdate:p}}const C={render:async function(A,e,t){const{colorLUTIndex:n,active:r,segmentationId:o,segmentationRepresentationUID:i,segmentsHidden:a,config:c}=e,d=u.getSegmentation(o).representationData[l.Z.Labelmap],{volumeId:g}=d;if(!s.ZP.getVolume(g))throw new Error(`No Labelmap found for volumeId: ${g}`);if(!function(A,e){if(!e)return!0;const t=A.getDefaultActor();if(!t)return!1;const{uid:n}=t,r=s.ZP.getVolume(n);if(r){const A=s.ZP.getVolume(e);if(A&&r.metadata.FrameOfReferenceUID===A.metadata.FrameOfReferenceUID)return!0}return!1}(A,d?.referencedVolumeId))return;let f=A.getActor(i);if(!f){const e=u.getSegmentation(o),{volumeId:t}=e.representationData[l.Z.Labelmap];await async function(A,e,t){await h(A.element,e,t)}(A,t,i),f=A.getActor(i)}if(!f)return;const{cfun:B,ofun:w}=c,C=t.renderInactiveSegmentations;!function(A,e,t,n,r,o,i,a,s,c){const{segmentSpecificConfig:d,segmentationRepresentationSpecificConfig:g}=i,f=g[l.Z.Labelmap],h=u.getColorLUT(r),B=Math.min(256,h.length),w=e.actor,{uid:C}=e,{outlineWidth:U,renderOutline:Q,outlineOpacity:y}=m(o,f,a);for(let e=0;e<B;e++){const r=e,i=h[r],s=d[r]?.[l.Z.Labelmap],{fillAlpha:u,outlineWidth:g,renderFill:B,renderOutline:w}=m(o,f,a,s),{forceOpacityUpdate:U,forceColorUpdate:Q}=v(A,C,r,{fillAlpha:u,renderFill:B,renderOutline:w,segmentColor:i,outlineWidth:g,segmentsHidden:c});if(Q&&t.addRGBPoint(r,i[0]/p,i[1]/p,i[2]/p),U)if(B){const A=c.has(r)?0:i[3]/255*u;n.removePoint(r),n.addPointLong(r,A,.5,1)}else n.addPointLong(r,.01,.5,1)}w.getProperty().setRGBTransferFunction(0,t),n.setClamping(!1),w.getProperty().setScalarOpacity(0,n),w.getProperty().setInterpolationTypeToNearest(),w.getProperty().setUseLabelOutline(Q),w.getProperty().setLabelOutlineOpacity(y),w.getProperty().setLabelOutlineThickness(U);const I=a||s;w.setVisibility(I)}(A.id,f,B,w,n,t.representations[l.Z.Labelmap],e,r,C,a)},addSegmentationRepresentation:async function(A,e,t){const{segmentationId:a}=e,s=o.Z(),d=new Set,g=r.ZP.newInstance(),f=n.ZP.newInstance();f.addPoint(0,0);const h={segmentationId:a,segmentationRepresentationUID:s,type:l.Z.Labelmap,segmentsHidden:d,colorLUTIndex:0,active:!0,segmentationRepresentationSpecificConfig:{},segmentSpecificConfig:{},config:{cfun:g,ofun:f}};if(t){const e=c.i(A),n=i.Z(e,t);c.K0(A,{renderInactiveSegmentations:n.renderInactiveSegmentations||!0,representations:{...n.representations}})}return u.addSegmentationRepresentation(A,h),s},removeSegmentationRepresentation:function(A,e,t=!1){if(function(A,e){const t=(0,d.Z)(A);if(void 0===t)throw new Error(`ToolGroup with ToolGroupId ${A} does not exist`);const{viewportsInfo:n}=t;for(const A of n){const{viewportId:t,renderingEngineId:n}=A,r=(0,a.O)(t,n);B(r.viewport.element,e)}}(A,e),u.removeSegmentationRepresentation(A,e),t){(0,d.Z)(A).getViewportsInfo().forEach((({viewportId:A,renderingEngineId:e})=>{(0,a.O)(A,e).viewport.render()}))}}}},59045:(A,e,t)=>{"use strict";t.d(e,{Z:()=>f});var n=t(96720),r=t(44493),o=t(1182),i=t(44158),a=t(90021),s=t(57756),l=t(26408),c=t(68957),u=t(99386),d=t(74168);class g extends c.Z{constructor(A={},e={configuration:{}}){super(A,e),this.renderSegmentation=A=>{const e=(0,l.Z)(A);if(!e)return;const t=(0,s.getSegmentationRepresentations)(A);if(!t||0===t.length)return;const r=e.viewportsInfo.map((({renderingEngineId:A,viewportId:e})=>{const t=(0,n.O)(e,A);if(t)return t.viewport})),i=t.map((e=>{const t=this._getMergedRepresentationsConfig(A),n=[];for(const A of r)e.type==o.Z.Labelmap?n.push(d.Z.render(A,e,t)):e.type==o.Z.Contour&&n.push(u.Z.render(A,e,t));return n}));Promise.allSettled(i).then((()=>{r.forEach((A=>{A.render()}))}))}}onSetToolEnabled(){const A=this.toolGroupId,e=(0,s.getSegmentationRepresentations)(A);e&&0!==e.length&&e.forEach((e=>{(0,a.setSegmentationVisibility)(A,e.segmentationRepresentationUID,!0)}))}onSetToolDisabled(){const A=this.toolGroupId,e=(0,s.getSegmentationRepresentations)(A);e&&0!==e.length&&e.forEach((e=>{(0,a.setSegmentationVisibility)(A,e.segmentationRepresentationUID,!1)}))}_getMergedRepresentationsConfig(A){const e=i.i(A),t=i.Hi();return r.Z(t,e)}}g.toolName="SegmentationDisplay";const f=g},85113:(A,e,t)=>{"use strict";var n;t.d(e,{Z:()=>r}),function(A){A.CLIP_STOPPED="CORNERSTONE_CINE_TOOL_STOPPED",A.CLIP_STARTED="CORNERSTONE_CINE_TOOL_STARTED"}(n||(n={}));const r=n},68081:(A,e,t)=>{"use strict";t.d(e,{e:()=>m,z:()=>v});var n=t(6807),r=t(82451),o=t(27054),i=t(96720),a=t(19680),s=t(60754),l=t(17382),c=t(12145),u=t(75089),d=t(85113),g=t(78397),f=t(58361);const{triggerEvent:h}=o,B=!0,p=!0,w=new Map;function m(A,e){let t,o;if(void 0===A)throw new Error("playClip: element must not be undefined");const a=(0,i.ZP)(A);if(!a)throw new Error("playClip: element must be a valid Cornerstone enabled element");e.dynamicCineEnabled=e.dynamicCineEnabled??!0;const{viewport:s}=a,m=Q(s),v=function(A,e){if(A instanceof c.Z)return function(A){const e=A.getImageIds();return{get numScrollSteps(){return e.length},get currentStepIndex(){return A.getTargetImageIdIndex()},get frameTimeVectorEnabled(){return!0},scroll(e){(0,f.Z)(A,{delta:e,debounceLoading:B})}}}(A);if(A instanceof u.Z){const t=Q(A);return e.dynamicCineEnabled&&t?.isDynamicVolume()?function(A){return{get numScrollSteps(){return A.numTimePoints},get currentStepIndex(){return A.timePointIndex},get frameTimeVectorEnabled(){return!1},scroll(e){A.timePointIndex+=e}}}(t):function(A,e){const{volumeId:t}=e,o={viewPlaneNormal:n.create(),scrollInfo:null},i=()=>{const e=A.getCamera();if(!o.scrollInfo||!n.equals(e.viewPlaneNormal,o.viewPlaneNormal)){const n=l.Z(A,t);o.viewPlaneNormal=e.viewPlaneNormal,o.scrollInfo=n}return o.scrollInfo};return{get numScrollSteps(){return i().numScrollSteps},get currentStepIndex(){return i().currentStepIndex},get frameTimeVectorEnabled(){const t=A.getCamera(),o=e.direction.slice(6,9).map((A=>-A)),i=n.dot(o,t.viewPlaneNormal);return r.fS(i,1)},scroll(e){i().currentStepIndex+=e,(0,f.Z)(A,{delta:e})}}}(A,t)}throw new Error("Unknown viewport type")}(s,e);let y=(0,g.T)(A);const I=e.dynamicCineEnabled&&m?.isDynamicVolume();if(I&&U(A),y?C(A,I):(y={intervalId:void 0,framesPerSecond:30,lastFrameTimeStamp:void 0,ignoreFrameTimeVector:!1,usingFrameTimeVector:!1,frameTimeVector:e.frameTimeVector??void 0,speed:e.frameTimeVectorSpeedMultiplier??1,reverse:e.reverse??!1,loop:e.loop??!0},(0,g.w)(A,y)),y.dynamicCineEnabled=e.dynamicCineEnabled,(e.framesPerSecond<0||e.framesPerSecond>0)&&(y.framesPerSecond=Number(e.framesPerSecond),y.reverse=y.framesPerSecond<0,y.ignoreFrameTimeVector=!0),!0!==y.ignoreFrameTimeVector&&y.frameTimeVector&&y.frameTimeVector.length===v.numScrollSteps&&v.frameTimeVectorEnabled){const{timeouts:A,isTimeVarying:e}=function(A,e){let t,n,r,o=0;const i=A.length,a=[];let s=!1;("number"!=typeof e||e<=0)&&(e=1);for(t=1;t<i;t++)r=Number(A[t])/e|0,a.push(r),1===t?n=r:r!==n&&(s=!0),o+=r;a.length>0&&(r=s?o/a.length|0:a[0],a.push(r));return{timeouts:a,isTimeVarying:s}}(y.frameTimeVector,y.speed);t=A,o=e}const F=()=>{const{numScrollSteps:e,currentStepIndex:t}=v;let n=t+(y.reverse?-1:1);if(!p&&(n<0||n>=e)){C(A,I);const e={element:A};return void h(A,d.Z.CLIP_STOPPED,e)}n>=e?n=0:n<0&&(n=e-1);const r=n-t;r&&v.scroll(r)};I&&w.set(m.volumeId,A),t&&t.length>0&&o?(y.usingFrameTimeVector=!0,y.intervalId=window.setTimeout((function A(){y.intervalId=window.setTimeout(A,t[v.currentStepIndex]),F()}),0)):(y.usingFrameTimeVector=!1,y.intervalId=window.setInterval(F,1e3/Math.abs(y.framesPerSecond)));const b={element:A};h(A,d.Z.CLIP_STARTED,b)}function v(A){C(A,!0)}function C(A,e){const t=(0,i.ZP)(A);if(!t)return;const{viewport:n}=t,r=(0,g.T)(n.element);r&&function(A){const e=A.intervalId;void 0!==e&&(A.intervalId=void 0,A.usingFrameTimeVector?clearTimeout(e):clearInterval(e))}(r),e&&n instanceof a.Z&&U(A)}function U(A){const{viewport:e}=(0,i.ZP)(A),t=Q(e);if(t?.isDynamicVolume()){const e=w.get(t.volumeId);w.delete(t.volumeId),e&&e!==A&&v(e)}}function Q(A){const e=function(A){return A.getActors().map((A=>s.ZP.getVolume(A.uid))).filter((A=>!!A))}(A);return e.find((A=>A.isDynamicVolume()))??e[0]}},78397:(A,e,t)=>{"use strict";t.d(e,{T:()=>i,w:()=>o});var n=t(96720);const r={};function o(A,e){const t=(0,n.ZP)(A),{viewportId:o}=t;r[o]=e}function i(A){const e=(0,n.ZP)(A),{viewportId:t}=e;return r[t]}},75931:(A,e,t)=>{"use strict";function n(A,e,t){return Math.min(Math.max(e,A),t)}t.d(e,{ZP:()=>r});const r=n},70808:(A,e,t)=>{"use strict";t.d(e,{U:()=>a,r:()=>i});var n=t(96720),r=t(7576),o=t(25792);function i(A,e,t=5){const r=(0,n.ZP)(A);if(!r)throw new Error("getAnnotationNearPoint: enabledElement not found");return a(r,e,t)}function a(A,e,t){const{renderingEngineId:n,viewportId:r}=A,i=o.Z(r,n);if(!i)return null;const{_toolInstances:a}=i;for(const n in a){const r=s(a[n],A,e,t);if(r)return r}return null}function s(A,e,t,n){const{viewport:o}=e,i=(0,r.getAnnotations)(A.constructor.toolName,o?.element),a=o?.getCurrentImageId?.();if(i?.length){const{element:r}=e.viewport;for(const e of i){const o=e.metadata?.referencedImageId;if(!(a&&o&&a!==o||!A.isPointNearTool)&&(A.isPointNearTool(r,e,t,n,"")||A.getHandleNearImagePoint(r,e,t,n)))return e}}return null}},53070:(A,e,t)=>{"use strict";t.r(e),t.d(e,{boundingBox:()=>f,calibrateImageSpacing:()=>b,cine:()=>g,clip:()=>y.ZP,debounce:()=>C.Z,drawing:()=>r,dynamicVolume:()=>m,getAnnotationNearPoint:()=>v.r,getAnnotationNearPointOnEnabledElement:()=>v.U,isObject:()=>Q.Z,jumpToSlice:()=>S.Z,math:()=>c,orientation:()=>yA,planar:()=>u,planarFreehandROITool:()=>h,pointInShapeCallback:()=>P.Z,pointInSurroundingSphereCallback:()=>x.Z,rectangleROITool:()=>B,scroll:()=>H.Z,segmentation:()=>n,stackPrefetch:()=>p,throttle:()=>U.Z,touch:()=>kA,triggerAnnotationRender:()=>T.ZP,triggerAnnotationRenderForViewportIds:()=>E.Z,triggerEvent:()=>GA.Z,viewport:()=>w,viewportFilters:()=>d});var n={};t.r(n),t.d(n,{createLabelmapVolumeForViewport:()=>W,createMergedLabelmapForIndex:()=>O.Z,floodFill:()=>z.Z,getBrushSizeForToolGroup:()=>$,getBrushThresholdForToolGroup:()=>eA,getDefaultRepresentationConfig:()=>V,isValidRepresentationConfig:()=>k,rectangleROIThresholdVolumeByRange:()=>L.Z,setBrushSizeForToolGroup:()=>q,setBrushThresholdForToolGroup:()=>AA,thresholdSegmentationByRange:()=>nA,thresholdVolumeByRange:()=>D.Z,triggerSegmentationRender:()=>X.ih});var r={};t.r(r),t.d(r,{getTextBoxCoordsCanvas:()=>rA.Z});var o={};t.r(o),t.d(o,{findClosestPoint:()=>oA.Z,liangBarksyClip:()=>iA.Z});var i={};t.r(i),t.d(i,{getCanvasEllipseCorners:()=>sA.Z,pointInEllipse:()=>aA.Z});var a={};t.r(a),t.d(a,{distanceToPoint:()=>lA.Z,distanceToPointSquared:()=>cA.Z,intersectLine:()=>uA.Z});var s={};t.r(s),t.d(s,{distanceToPoint:()=>dA.Z});var l={};t.r(l),t.d(l,{distanceToPoint:()=>fA.Z});var c={};t.r(c),t.d(c,{ellipse:()=>i,lineSegment:()=>a,point:()=>l,polyline:()=>gA,rectangle:()=>s,vec2:()=>o});var u={};t.r(u),t.d(u,{default:()=>mA,filterAnnotationsForDisplay:()=>pA.Z,filterAnnotationsWithinSlice:()=>hA.Z,getPointInLineOfSightWithCriteria:()=>wA.Z,getWorldWidthAndHeightFromCorners:()=>BA.Z});var d={};t.r(d),t.d(d,{filterViewportsWithFrameOfReferenceUID:()=>vA.Z,filterViewportsWithParallelNormals:()=>QA.Z,filterViewportsWithToolEnabled:()=>CA.Z,getViewportIdsWithToolToRender:()=>UA.Z});var g={};t.r(g),t.d(g,{Events:()=>FA.Z,addToolState:()=>bA.w,getToolState:()=>bA.T,playClip:()=>IA.e,stopClip:()=>IA.z});var f={};t.r(f),t.d(f,{extend2DBoundingBoxInViewAxis:()=>EA.Z,getBoundingBoxAroundShape:()=>TA.Z});var h={};t.r(h),t.d(h,{default:()=>DA,interpolateAnnotation:()=>HA});var B={};t.r(B),t.d(B,{getBoundsIJKFromRectangleAnnotations:()=>LA.Z});var p={};t.r(p),t.d(p,{disable:()=>OA.h$,enable:()=>OA.wp,getConfiguration:()=>OA.P_,setConfiguration:()=>OA.Dg});var w={};t.r(w),t.d(w,{isViewportPreScaled:()=>MA.P,jumpToSlice:()=>S.Z,jumpToWorld:()=>_A.Z});var m={};t.r(m),t.d(m,{generateImageFromTimeData:()=>ZA,getDataInTime:()=>KA});var v=t(70808),C=t(68020),U=t(41509),Q=t(30795),y=t(75931),I=t(27054);const{calibratedPixelSpacingMetadataProvider:F}=I;function b(A,e,t,n){n||(n=t),F.add(A,{rowPixelSpacing:t,columnPixelSpacing:n});e.getStackViewports().forEach((e=>{e.getImageIds().includes(A)&&e.calibrateSpacing(A)}))}var E=t(43356),T=t(36821),S=t(33477),P=t(91728),x=t(5078),H=t(58361),D=t(22486),L=t(6706),O=t(23918),M=t(68898),_=t(1182);function k(A,e){if(A===_.Z.Labelmap)return(0,M.R)(e);throw new Error(`Unknown representation type: ${A}`)}function V(A){const{type:e}=A;if(e===_.Z.Labelmap)return(0,M.Z)();throw new Error(`Unknown representation type: ${e}`)}var R=t(71975),K=t(96720),N=t(75089),Z=t(81653),G=t(64819);async function W(A){const{viewportId:e,renderingEngineId:t,options:n}=A;let{segmentationId:r}=A;const o=(0,K.O)(e,t);if(!o)throw new Error("element disabled");const{viewport:i}=o;if(!(i instanceof N.Z))throw new Error("Segmentation only supports VolumeViewport");const{uid:a}=i.getDefaultActor();if(void 0===r&&(r=`${a}-based-segmentation-${n?.volumeId??Z.Z().slice(0,8)}`),n){const A=(0,R._cloneDeep)(n);await G.createLocalVolume(A,r)}else{const{uid:A}=i.getDefaultActor();await G.createAndCacheDerivedVolume(A,{volumeId:r})}return r}var X=t(14488),z=t(4619),J=t(26408),j=t(26222),Y=t(45604);function q(A,e){const t=(0,J.Z)(A);if(void 0===t)return;(0,Y.ZP)(A).forEach((A=>{A.configuration.brushSize=e,A.invalidateBrushCursor()}));const n=t.getViewportsInfo(),r=Object.keys(n).map((A=>n[A]));if(!r.length)return;const{renderingEngineId:o}=r[0],i=t.getViewportIds(),a=(0,j.Pr)(o);(0,E.Z)(a,i)}function $(A){const e=(0,J.Z)(A);if(void 0===e)return;const t=e._toolInstances;if(!Object.keys(t).length)return;const n=(0,Y.ZP)(A)[0];return n?n.configuration.brushSize:void 0}function AA(A,e){const t=(0,J.Z)(A);if(void 0===t)return;(0,Y.ZP)(A).forEach((A=>{A.configuration.strategySpecificConfiguration.THRESHOLD_INSIDE_CIRCLE.threshold=e}));const n=t.getViewportsInfo();if(!n.length)return;const{renderingEngineId:r}=n[0],o=t.getViewportIds(),i=(0,j.Pr)(r);(0,E.Z)(i,o)}function eA(A){const e=(0,J.Z)(A);if(void 0===e)return;const t=e._toolInstances;if(!Object.keys(t).length)return;const n=(0,Y.ZP)(A)[0];return n?n.configuration.strategySpecificConfiguration.THRESHOLD_INSIDE_CIRCLE.threshold:void 0}var tA=t(35316);const nA=function(A,e,t,n){const r=A.getScalarData(),{baseVolumeIdx:o,volumeInfoList:i}=(0,Y.Ep)(A,t);return i.forEach((A=>{const{volumeSize:t}=A;t===r.length?function(A,e,t){const{referenceValues:n,lower:r,upper:o}=t;for(let t=0;t<A.length;t++)if(A[t]===e){const i=n[t];A[t]=i>=r&&i<=o?e:0}}(r,e,A):function(A,e,t,n,r,o){const{imageData:i,lower:a,upper:s,dimensions:l}=t;let c,u,d;for(let t=0;t<A.length;t++)if(A[t]===e){const g=(0,Y.yW)(i,l,n[r].spacing,n[r].imageData.getPoint(t)),f=({value:A})=>{c+=1,A>=d.lower&&A<=d.upper&&(u+=1)};c=0,u=0,d={lower:a,upper:s};let h=!1;(0,P.Z)(i,(()=>!0),f,g),h=0===o?u>0:u===c,A[t]=h?e:0}}(r,e,A,i,o,n)})),(0,tA.triggerSegmentationDataModified)(A.volumeId),A};var rA=t(52857),oA=t(68847),iA=t(86245),aA=t(86334),sA=t(46879),lA=t(43876),cA=t(62178),uA=t(26562),dA=t(95300),gA=t(3097),fA=t(65231),hA=t(38685),BA=t(22030),pA=t(52698),wA=t(57054);const mA={filterAnnotationsWithinSlice:hA.Z,getWorldWidthAndHeightFromCorners:BA.Z,filterAnnotationsForDisplay:pA.Z,getPointInLineOfSightWithCriteria:wA.Z};var vA=t(14885),CA=t(42572),UA=t(11207),QA=t(51730),yA=t(9566),IA=t(68081),FA=t(85113),bA=t(78397),EA=t(77310),TA=t(79931),SA=t(44554),PA=t(25792),xA=t(86119);function HA(A,e,t){if(function(A,e,t){if(!e?.data?.polyline||t<=0)return!0;if(!A.viewport)return!0;const{renderingEngineId:n,viewportId:r,FrameOfReferenceUID:o}=A,i=PA.Z(r,n);if(e.metadata.FrameOfReferenceUID!==o)return!0;if(!i)return!0;const a=i.getToolInstance(e.metadata.toolName);return!(a instanceof SA.Z)||a.isDrawing||a.isEditingOpen||a.isEditingClosed}(A,e,t))return!1;const{viewport:n}=A,r=e.data.polyline.map(n.worldToCanvas),o=(0,xA.Z)(r,0,r.length,t);return o!==r&&(e.data.polyline=o.map(n.canvasToWorld),!0)}const DA={interpolateAnnotation:HA};var LA=t(71260),OA=t(4409),MA=t(38396),_A=t(56394),kA=t(25413),VA=t(60754),RA=t(34894);const KA=function(A,e){const t=e.frameNumbers||[...Array(A.numTimePoints).keys()];if(!e.maskVolumeId&&!e.imageCoordinate)throw new Error("No ROI provided");if(e.maskVolumeId&&e.imageCoordinate)throw new Error("Please provide only one ROI");if(e.maskVolumeId){const n=VA.ZP.getVolume(e.maskVolumeId),r=function(A,e,t){const n=t.getScalarDataArrays(),r=[];for(let t=0;t<e.length;t++){const o=[];A.forEach((A=>{const r=n[A];o.push(r[e[t]])})),r.push(o)}return r}(t,n.getScalarData().map(((A,e)=>e)).filter((A=>0!==n.getScalarData()[A])),A);return r}if(e.imageCoordinate){const n=function(A,e,t){const{dimensions:n,imageData:r}=t,o=r.worldToIndex(e);if(o[0]=Math.floor(o[0]),o[1]=Math.floor(o[1]),o[2]=Math.floor(o[2]),!RA.Z(o,n))throw new Error("outside bounds");const i=n[0],a=n[0]*n[1],s=t.getScalarDataArrays(),l=[];return A.forEach((A=>{const e=s[A],t=o[2]*a+o[1]*i+o[0];l.push(e[t])})),l}(t,e.imageCoordinate,A);return n}};var NA=t(56287);const ZA=function(A,e,t){const n=t||[...Array(A.numTimePoints).keys()],r=n.length;if(n.length<=1)throw new Error("Please provide two or more time points");const o=A.getScalarDataArrays(),i=o[0].length,a=new Float32Array(i);if(e===NA.Z.SUM){for(let A=0;A<r;A++){const e=o[n[A]];for(let A=0;A<i;A++)a[A]+=e[A]}return a}if(e===NA.Z.SUBTRACT){if(n.length>2)throw new Error("Please provide only 2 time points for subtraction.");for(let A=0;A<i;A++)a[A]+=o[n[0]][A]-o[n[1]][A];return a}if(e===NA.Z.AVERAGE){for(let A=0;A<r;A++){const e=o[n[A]];for(let A=0;A<i;A++)a[A]+=e[A]}for(let A=0;A<i;A++)a[A]=a[A]/r;return a}};var GA=t(97335)},86245:(A,e,t)=>{"use strict";t.d(e,{Z:()=>a});const n=1e-6,r=1,o=0;function i(A,e,t){const[r,o]=t;if(Math.abs(e)<n)return A<0;const i=A/e;if(e>0){if(i>o)return 0;i>r&&(t[0]=i)}else{if(i<r)return 0;i<o&&(t[1]=i)}return 1}function a(A,e,t,a,s){const[l,c]=A,[u,d]=e,g=u-l,f=d-c;if(void 0===a||void 0===s?(a=A,s=e):(a[0]=A[0],a[1]=A[1],s[0]=e[0],s[1]=e[1]),Math.abs(g)<n&&Math.abs(f)<n&&l>=t[0]&&l<=t[2]&&c>=t[1]&&c<=t[3])return r;const h=[0,1];if(i(t[0]-l,g,h)&&i(l-t[2],-g,h)&&i(t[1]-c,f,h)&&i(c-t[3],-f,h)){const[A,e]=h;return e<1&&(s[0]=l+e*g,s[1]=c+e*f),A>0&&(a[0]+=A*g,a[1]+=A*f),r}return o}},9566:(A,e,t)=>{"use strict";function n(A){let e="";const t=A[0]<0?"R":"L",n=A[1]<0?"A":"P",r=A[2]<0?"F":"H",o=[Math.abs(A[0]),Math.abs(A[1]),Math.abs(A[2])],i=1e-4;for(let A=0;A<3;A++)if(o[0]>i&&o[0]>o[1]&&o[0]>o[2])e+=t,o[0]=0;else if(o[1]>i&&o[1]>o[0]&&o[1]>o[2])e+=n,o[1]=0;else if(o[2]>i&&o[2]>o[0]&&o[2]>o[1])e+=r,o[2]=0;else if(o[0]>i&&o[1]>i&&o[0]===o[1])e+=t+n,o[0]=0,o[1]=0;else if(o[0]>i&&o[2]>i&&o[0]===o[2])e+=t+r,o[0]=0,o[2]=0;else{if(!(o[1]>i&&o[2]>i&&o[1]===o[2]))break;e+=n+r,o[1]=0,o[2]=0}return e}function r(A){let e=A.replace("H","f");return e=e.replace("F","h"),e=e.replace("R","l"),e=e.replace("L","r"),e=e.replace("A","p"),e=e.replace("P","a"),e=e.toUpperCase(),e}t.r(e),t.d(e,{getOrientationStringLPS:()=>n,invertOrientationStringLPS:()=>r})},57054:(A,e,t)=>{"use strict";t.d(e,{Z:()=>o});var n=t(92780),r=t(75454);function o(A,e,t,o,a=.25){const s=A.getCamera(),{position:l}=s,{spacingInNormalDirection:c}=r.Z(A,s,t),u=c*a,d=A.getBounds(),g=d[0],f=d[1],h=[0,0,0];let B,p=[0,0,0];n.ZP.subtract(e,l,h);for(let e=g;e<=f;e+=u){p=[e,0,0];const t=(e-l[0])/h[0];if(p[1]=t*h[1]+l[1],p[2]=t*h[2]+l[2],i(p,d)){const e=o(A.getIntensityFromWorld(p),p);e&&(B=e)}}return B}const i=function(A,e){const[t,n,r,o,i,a]=e;return A[0]>t&&A[0]<n&&A[1]>r&&A[1]<o&&A[2]>i&&A[2]<a}},58361:(A,e,t)=>{"use strict";t.d(e,{Z:()=>u});var n=t(96720),r=t(12145),o=t(75089),i=t(17382),a=t(87678),s=t(97335),l=t(509),c=t(76467);function u(A,e){if(!(0,n.ZP)(A.element))throw new Error("Scroll::Viewport is not enabled (it might be disabled)");if(A instanceof r.Z&&0===A.getImageIds().length)throw new Error("Scroll::Stack Viewport has no images");const{type:t}=A,{volumeId:u,delta:d}=e;if(A instanceof r.Z)A.scroll(d,e.debounceLoading,e.loop);else{if(!(A instanceof o.Z))throw new Error(`Not implemented for Viewport Type: ${t}`);!function(A,e,t){const{numScrollSteps:n,currentStepIndex:r,sliceRangeInfo:o}=i.Z(A,e);if(!o)return;const{sliceRange:u,spacingInNormalDirection:d,camera:g}=o,{focalPoint:f,viewPlaneNormal:h,position:B}=g,{newFocalPoint:p,newPosition:w}=a.Z(f,B,u,h,d,t);A.setCamera({focalPoint:p,position:w}),A.render();const m=r+t;if((m>n||m<0)&&A.getCurrentImageId()){const o={volumeId:e,viewport:A,delta:t,desiredStepIndex:m,currentStepIndex:r,numScrollSteps:n,currentImageId:A.getCurrentImageId()};s.Z(l.Z,c.default.VOLUME_SCROLL_OUT_OF_BOUNDS,o)}}(A,u,d)}}},4619:(A,e,t)=>{"use strict";function n(A,e){return A===e}function r(A,e,t){return(new Array(t+1).join(e)+A).slice(-t)}t.d(e,{Z:()=>o});const o=function(A,e,t={}){const o=t.onFlood,i=t.onBoundary,a=t.equals||n,s=t.diagonals||!1,l=B(e),c=function(){const A=function(A){const e=[],t=function(A){return A.split("").map((function(A){return parseInt(A,10)-1}))};for(let n=0;n<Math.pow(3,A);n+=1){const o=r(n.toString(3),"0",A);e.push(t(o))}return e}(e.length);return A.filter((function(A){const e=function(A){let e=0;for(let t=0;t<A.length;t+=1)0!==A[t]&&(e+=1);return e}(A);return 0!==e&&(1===e||s)}))}(),u=[],d=[],g={},f={};for(u.push({currentArgs:e});u.length>0;)h(u.pop());return{flooded:d,boundaries:function(){const A=[];for(const e in f)void 0!==f[e]&&A.unshift(f[e]);return A}()};function h(A){const e=A.currentArgs,t=A.previousArgs;!0!==g[e]&&(!function(A){g[A]=!0}(e),function(A){const e=p(B,[A]);return p(a,[e,l])}(e)?(function(A){d.push(A),o&&o(...A)}(e),function(A){for(let e=0;e<c.length;e+=1){const t=c[e],n=A.slice(0);for(let e=0;e<A.length;e+=1)n[e]+=t[e];u.push({currentArgs:n,previousArgs:A})}}(e)):function(A){f[A]=A,i&&i(...A)}(t))}function B(e){return A(...e)}function p(A,e){try{return A(...e)}catch(A){return}}}},14488:(A,e,t)=>{"use strict";t.d(e,{ZP:()=>g,ZW:()=>u,ih:()=>d});var n=t(26222),r=t(76467),o=t(97335),i=t(509),a=t(69786),s=t(26408),l=t(25792),c=t(59045);const u=new class{constructor(){this._needsRender=new Set,this._animationFrameSet=!1,this._animationFrameHandle=null,this._renderFlaggedToolGroups=()=>{this._throwIfDestroyed();const A=Array.from(this._needsRender.values());for(const e of A)if(this._triggerRender(e),this._needsRender.delete(e),0===this._needsRender.size)return this._animationFrameSet=!1,void(this._animationFrameHandle=null)}}removeToolGroup(A){this._needsRender.delete(A),0===this._needsRender.size&&this._reset()}renderToolGroupSegmentations(A){this._setToolGroupSegmentationToBeRenderedNextFrame([A])}_throwIfDestroyed(){if(this.hasBeenDestroyed)throw new Error("this.destroy() has been manually called to free up memory, can not longer use this instance. Instead make a new one.")}_setToolGroupSegmentationToBeRenderedNextFrame(A){A.forEach((A=>{this._needsRender.add(A)})),this._render()}_render(){this._needsRender.size>0&&!1===this._animationFrameSet&&(this._animationFrameHandle=window.requestAnimationFrame(this._renderFlaggedToolGroups),this._animationFrameSet=!0)}_triggerRender(A){const e=(0,s.Z)(A);if(!e)return void console.warn(`No tool group found with toolGroupId: ${A}`);const{viewportsInfo:t}=e,u=[];t.forEach((({viewportId:A,renderingEngineId:e})=>{const t=(0,n.Pr)(e);t?u.push(t.getViewport(A)):console.warn("rendering Engine has been destroyed")}));const d=e.getToolInstance(c.Z.toolName);function g(A){const{element:e,viewportId:t,renderingEngineId:n}=A.detail;e.removeEventListener(r.default.IMAGE_RENDERED,g);const s=(0,l.Z)(t,n);if(!s)return void console.warn("toolGroup has been destroyed");const c={toolGroupId:s.id,viewportId:t};(0,o.Z)(i.Z,a.default.SEGMENTATION_RENDERED,{...c})}d?(u.forEach((({element:A})=>{A.addEventListener(r.default.IMAGE_RENDERED,g)})),d.renderSegmentation(A)):console.warn("No segmentation tool found inside",A)}_reset(){window.cancelAnimationFrame(this._animationFrameHandle),this._needsRender.clear(),this._animationFrameSet=!1,this._animationFrameHandle=null}};function d(A){u.renderToolGroupSegmentations(A)}const g=d},4409:(A,e,t)=>{"use strict";t.d(e,{h$:()=>I,wp:()=>y,P_:()=>F,Dg:()=>b});var n=t(47908),r=t(96720),o=t(12145),i=t(60754),a=t(52425),s=t(31363),l=t(78041),c=t(76467),u=t(509);const d={};function g(A){const e=(0,r.ZP)(A),{viewportId:t}=e;return d[t]}const f=n.Z.Prefetch,h=0;let B,p={maxImagesToPrefetch:1/0,preserveExistingPool:!1};const w=10;function m(A,e){A=Math.round(A)||0;const t=[];let n=(e=Math.round(e)||0)-A+1;if(n<=0)return t;for(;n--;)t[n]=e--;return t}function v(A){const e=(0,r.ZP)(A);if(!e)throw new Error("stackPrefetch: element must be a valid Cornerstone enabled element");const{viewport:t}=e;if(!(t instanceof o.Z))throw new Error("stackPrefetch: element must be a StackViewport, VolumeViewport stackPrefetch not yet implemented");return{currentImageIdIndex:t.getCurrentImageIdIndex(),imageIds:t.getImageIds()}}function C(A){const e=g(A);if(!e)return;const t=e||{},n=v(A);if(!n||!n.imageIds||0===n.imageIds.length)return void console.warn("CornerstoneTools.stackPrefetch: No images in stack.");if(t.indicesToRequest&&t.indicesToRequest.length||(t.enabled=!1),!1===t.enabled)return;function r(A){const e=t.indicesToRequest.indexOf(A);e>-1&&t.indicesToRequest.splice(e,1)}e.indicesToRequest.sort(((A,e)=>A-e));if(t.indicesToRequest.slice().forEach((function(A){const e=n.imageIds[A];if(!e)return;i.ZP.getImageLoadObject(e)&&r(A)})),!t.indicesToRequest.length)return;p.preserveExistingPool||a.Z.clearRequestStack(f);const o=function(A,e){let t=0,n=A.length-1;return A.forEach(((A,r)=>{A<e?t=Math.max(r,t):A>e&&(n=Math.min(r,n))})),{low:t,high:n}}(t.indicesToRequest,n.currentImageIdIndex);let c,u;let d=o.low,B=o.high;const w=[];for(;d>=0||B<t.indicesToRequest.length;){const A=n.currentImageIdIndex,e=!(A-t.indicesToRequest[d]>p.maxImagesToPrefetch)&&d>=0,r=!(t.indicesToRequest[B]-A>p.maxImagesToPrefetch)&&B<t.indicesToRequest.length;if(!r&&!e)break;e&&(u=t.indicesToRequest[d--],c=n.imageIds[u],w.push(c)),r&&(u=t.indicesToRequest[B++],c=n.imageIds[u],w.push(c))}const m=(A,e)=>s.loadAndCacheImage(A,e),{useNorm16Texture:C}=(0,l.P_)().rendering;w.forEach((A=>{const e={targetBuffer:{type:C?void 0:"Float32Array"},preScale:{enabled:!0},requestType:f};a.Z.addRequest(m.bind(null,A,e),f,{imageId:A},h)}))}function U(A){return function(e){const t=e.detail;let n;try{n=v(A)}catch(A){return}if(!n||!n.imageIds||0===n.imageIds.length)return;const r=n.imageIds.indexOf(t.imageId);if(r<0)return;const o=g(A);o&&o.data&&o.data.length&&o.indicesToRequest.push(r)}}function Q(A){clearTimeout(B),B=setTimeout((function(){const e=A.target;try{C(e)}catch(A){return}}),w)}function y(A){const e=v(A);if(!e||!e.imageIds||0===e.imageIds.length)return void console.warn("CornerstoneTools.stackPrefetch: No images in stack.");const t={indicesToRequest:m(0,e.imageIds.length-1),enabled:!0,direction:1},n=t.indicesToRequest.indexOf(e.currentImageIdIndex);t.indicesToRequest.splice(n,1),function(A,e){const t=(0,r.ZP)(A),{viewportId:n}=t;d[n]=e}(A,t),C(A),A.removeEventListener(c.default.STACK_NEW_IMAGE,Q),A.addEventListener(c.default.STACK_NEW_IMAGE,Q);const o=U(A);u.Z.removeEventListener(c.default.IMAGE_CACHE_IMAGE_REMOVED,o),u.Z.addEventListener(c.default.IMAGE_CACHE_IMAGE_REMOVED,o)}function I(A){clearTimeout(B),A.removeEventListener(c.default.STACK_NEW_IMAGE,Q);const e=U(A);u.Z.removeEventListener(c.default.IMAGE_CACHE_IMAGE_REMOVED,e);const t=g(A);t&&t.data.length&&(t.enabled=!1,a.Z.clearRequestStack(f))}function F(){return p}function b(A){p=A}},25413:(A,e,t)=>{"use strict";function n(A,e){const t=l(A),n=l(e);return{page:u(t.page,n.page),client:u(t.client,n.client),canvas:u(t.canvas,n.canvas),world:(r=t.world,o=n.world,[r[0]-o[0],r[1]-o[1],r[2]-o[2]])};var r,o}function r(A,e){const t=l(A),n=l(e);return{page:g(t.page,n.page),client:g(t.client,n.client),canvas:g(t.canvas,n.canvas),world:f(t.world,n.world)}}function o(A,e){}function i(A,e){const t=d(A),n=d(e);return{page:t.page-n.page,client:t.client-n.client,canvas:t.canvas-n.canvas,world:t.world-n.world}}function a(A){return JSON.parse(JSON.stringify(A))}function s(A){return JSON.parse(JSON.stringify(A))}function l(A){return A.reduce(((e,t)=>({page:[e.page[0]+t.page[0]/A.length,e.page[1]+t.page[1]/A.length],client:[e.client[0]+t.client[0]/A.length,e.client[1]+t.client[1]/A.length],canvas:[e.canvas[0]+t.canvas[0]/A.length,e.canvas[1]+t.canvas[1]/A.length],world:[e.world[0]+t.world[0]/A.length,e.world[1]+t.world[1]/A.length,e.world[2]+t.world[2]/A.length]})),{page:[0,0],client:[0,0],canvas:[0,0],world:[0,0,0]})}function c(A){return A.reduce(((e,t)=>({page:[e.page[0]+t.page[0]/A.length,e.page[1]+t.page[1]/A.length],client:[e.client[0]+t.client[0]/A.length,e.client[1]+t.client[1]/A.length],canvas:[e.canvas[0]+t.canvas[0]/A.length,e.canvas[1]+t.canvas[1]/A.length],world:[e.world[0]+t.world[0]/A.length,e.world[1]+t.world[1]/A.length,e.world[2]+t.world[2]/A.length],touch:{identifier:null,radiusX:e.touch.radiusX+t.touch.radiusX/A.length,radiusY:e.touch.radiusY+t.touch.radiusY/A.length,force:e.touch.force+t.touch.force/A.length,rotationAngle:e.touch.rotationAngle+t.touch.rotationAngle/A.length}})),{page:[0,0],client:[0,0],canvas:[0,0],world:[0,0,0],touch:{identifier:null,radiusX:0,radiusY:0,force:0,rotationAngle:0}})}function u(A,e){return[A[0]-e[0],A[1]-e[1]]}function d(A){const e=[];for(let t=0;t<A.length;t++)for(let n=0;n<A.length;n++)t<n&&e.push({page:g(A[t].page,A[n].page),client:g(A[t].client,A[n].client),canvas:g(A[t].canvas,A[n].canvas),world:f(A[t].world,A[n].world)});return e.reduce(((A,t)=>({page:A.page+t.page/e.length,client:A.client+t.client/e.length,canvas:A.canvas+t.canvas/e.length,world:A.world+t.world/e.length})),{page:0,client:0,canvas:0,world:0})}function g(A,e){return Math.sqrt(Math.pow(A[0]-e[0],2)+Math.pow(A[1]-e[1],2))}function f(A,e){return Math.sqrt(Math.pow(A[0]-e[0],2)+Math.pow(A[1]-e[1],2)+Math.pow(A[2]-e[2],2))}t.r(e),t.d(e,{copyPoints:()=>s,copyPointsList:()=>a,getDeltaDistance:()=>r,getDeltaDistanceBetweenIPoints:()=>i,getDeltaPoints:()=>n,getDeltaRotation:()=>o,getMeanPoints:()=>l,getMeanTouchPoints:()=>c})},33477:(A,e,t)=>{"use strict";t.d(e,{Z:()=>l});var n=t(96720),r=t(12145),o=t(75089),i=t(14284),a=t(75931),s=t(58361);const l=async function(A,e={}){const{imageIndex:t,debounceLoading:l,volumeId:c}=e,u=(0,n.ZP)(A);if(!u)throw new Error("Element has been disabled");const{viewport:d}=u,{imageIndex:g,numberOfSlices:f}=function(A,e){if(A instanceof r.Z)return{numberOfSlices:A.getImageIds().length,imageIndex:e?A.getTargetImageIdIndex():A.getCurrentImageIdIndex()};if(A instanceof o.Z)return i.Z(A);throw new Error("Unsupported viewport type")}(d,l),h=function(A,e){const t=A-1;return(0,a.ZP)(e,0,t)}(f,t)-g;(0,s.Z)(d,{delta:h,debounceLoading:l,volumeId:c})}},56394:(A,e,t)=>{"use strict";t.d(e,{Z:()=>o});var n=t(75089),r=t(6807);function o(A,e){if(!(A instanceof n.Z))return;const{focalPoint:t}=A.getCamera(),o=[0,0,0];return r.sub(o,e,t),function(A,e){const t=A.getCamera(),n=t.viewPlaneNormal,o=r.dot(e,n),i=r.fromValues(n[0],n[1],n[2]);if(r.scale(i,i,o),Math.abs(i[0])>.001||Math.abs(i[1])>.001||Math.abs(i[2])>.001){const e=[0,0,0],n=[0,0,0];r.add(e,t.focalPoint,i),r.add(n,t.position,i),A.setCamera({focalPoint:e,position:n}),A.render()}}(A,o),!0}},63691:(A,e,t)=>{"use strict";t.d(e,{Z:()=>bi});var n=function(A,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,e){A.__proto__=e}||function(A,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(A[t]=e[t])},n(A,e)};function r(A,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=A}n(A,e),A.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var o=function(){return o=Object.assign||function(A){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(A[r]=e[r]);return A},o.apply(this,arguments)};function i(A,e,t,n){return new(t||(t=Promise))((function(r,o){function i(A){try{s(n.next(A))}catch(A){o(A)}}function a(A){try{s(n.throw(A))}catch(A){o(A)}}function s(A){var e;A.done?r(A.value):(e=A.value,e instanceof t?e:new t((function(A){A(e)}))).then(i,a)}s((n=n.apply(A,e||[])).next())}))}function a(A,e){var t,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(A,i)}catch(A){o=[6,A],n=0}finally{t=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function s(A,e,t){if(t||2===arguments.length)for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return A.concat(n||e)}for(var l=function(){function A(A,e,t,n){this.left=A,this.top=e,this.width=t,this.height=n}return A.prototype.add=function(e,t,n,r){return new A(this.left+e,this.top+t,this.width+n,this.height+r)},A.fromClientRect=function(e,t){return new A(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},A.fromDOMRectList=function(e,t){var n=Array.from(t).find((function(A){return 0!==A.width}));return n?new A(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):A.EMPTY},A.EMPTY=new A(0,0,0,0),A}(),c=function(A,e){return l.fromClientRect(A,e.getBoundingClientRect())},u=function(A){for(var e=[],t=0,n=A.length;t<n;){var r=A.charCodeAt(t++);if(r>=55296&&r<=56319&&t<n){var o=A.charCodeAt(t++);56320==(64512&o)?e.push(((1023&r)<<10)+(1023&o)+65536):(e.push(r),t--)}else e.push(r)}return e},d=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var t=A.length;if(!t)return"";for(var n=[],r=-1,o="";++r<t;){var i=A[r];i<=65535?n.push(i):(i-=65536,n.push(55296+(i>>10),i%1024+56320)),(r+1===t||n.length>16384)&&(o+=String.fromCharCode.apply(String,n),n.length=0)}return o},g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="undefined"==typeof Uint8Array?[]:new Uint8Array(256),h=0;h<64;h++)f[g.charCodeAt(h)]=h;for(var B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p="undefined"==typeof Uint8Array?[]:new Uint8Array(256),w=0;w<64;w++)p[B.charCodeAt(w)]=w;for(var m=function(A,e,t){return A.slice?A.slice(e,t):new Uint16Array(Array.prototype.slice.call(A,e,t))},v=function(){function A(A,e,t,n,r,o){this.initialValue=A,this.errorValue=e,this.highStart=t,this.highValueIndex=n,this.index=r,this.data=o}return A.prototype.get=function(A){var e;if(A>=0){if(A<55296||A>56319&&A<=65535)return e=((e=this.index[A>>5])<<2)+(31&A),this.data[e];if(A<=65535)return e=((e=this.index[2048+(A-55296>>5)])<<2)+(31&A),this.data[e];if(A<this.highStart)return e=2080+(A>>11),e=this.index[e],e+=A>>5&63,e=((e=this.index[e])<<2)+(31&A),this.data[e];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},A}(),C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Q=0;Q<64;Q++)U[C.charCodeAt(Q)]=Q;var y=10,I=13,F=15,b=17,E=18,T=19,S=20,P=21,x=22,H=24,D=25,L=26,O=27,M=28,_=30,k=32,V=33,R=34,K=35,N=37,Z=38,G=39,W=40,X=42,z=[9001,65288],J="×",j="÷",Y=function(A,e){var t,n,r,o=function(A){var e,t,n,r,o,i=.75*A.length,a=A.length,s=0;"="===A[A.length-1]&&(i--,"="===A[A.length-2]&&i--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(i):new Array(i),c=Array.isArray(l)?l:new Uint8Array(l);for(e=0;e<a;e+=4)t=p[A.charCodeAt(e)],n=p[A.charCodeAt(e+1)],r=p[A.charCodeAt(e+2)],o=p[A.charCodeAt(e+3)],c[s++]=t<<2|n>>4,c[s++]=(15&n)<<4|r>>2,c[s++]=(3&r)<<6|63&o;return l}(A),i=Array.isArray(o)?function(A){for(var e=A.length,t=[],n=0;n<e;n+=4)t.push(A[n+3]<<24|A[n+2]<<16|A[n+1]<<8|A[n]);return t}(o):new Uint32Array(o),a=Array.isArray(o)?function(A){for(var e=A.length,t=[],n=0;n<e;n+=2)t.push(A[n+1]<<8|A[n]);return t}(o):new Uint16Array(o),s=m(a,12,i[4]/2),l=2===i[5]?m(a,(24+i[4])/2):(t=i,n=Math.ceil((24+i[4])/4),t.slice?t.slice(n,r):new Uint32Array(Array.prototype.slice.call(t,n,r)));return new v(i[0],i[1],i[2],i[3],s,l)}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),q=[_,36],$=[1,2,3,5],AA=[y,8],eA=[O,L],tA=$.concat(AA),nA=[Z,G,W,R,K],rA=[F,I],oA=function(A,e,t,n){var r=n[t];if(Array.isArray(A)?-1!==A.indexOf(r):A===r)for(var o=t;o<=n.length;){if((s=n[++o])===e)return!0;if(s!==y)break}if(r===y)for(o=t;o>0;){var i=n[--o];if(Array.isArray(A)?-1!==A.indexOf(i):A===i)for(var a=t;a<=n.length;){var s;if((s=n[++a])===e)return!0;if(s!==y)break}if(i!==y)break}return!1},iA=function(A,e){for(var t=A;t>=0;){var n=e[t];if(n!==y)return n;t--}return 0},aA=function(A,e,t,n,r){if(0===t[n])return J;var o=n-1;if(Array.isArray(r)&&!0===r[o])return J;var i=o-1,a=o+1,s=e[o],l=i>=0?e[i]:0,c=e[a];if(2===s&&3===c)return J;if(-1!==$.indexOf(s))return"!";if(-1!==$.indexOf(c))return J;if(-1!==AA.indexOf(c))return J;if(8===iA(o,e))return j;if(11===Y.get(A[o]))return J;if((s===k||s===V)&&11===Y.get(A[a]))return J;if(7===s||7===c)return J;if(9===s)return J;if(-1===[y,I,F].indexOf(s)&&9===c)return J;if(-1!==[b,E,T,H,M].indexOf(c))return J;if(iA(o,e)===x)return J;if(oA(23,x,o,e))return J;if(oA([b,E],P,o,e))return J;if(oA(12,12,o,e))return J;if(s===y)return j;if(23===s||23===c)return J;if(16===c||16===s)return j;if(-1!==[I,F,P].indexOf(c)||14===s)return J;if(36===l&&-1!==rA.indexOf(s))return J;if(s===M&&36===c)return J;if(c===S)return J;if(-1!==q.indexOf(c)&&s===D||-1!==q.indexOf(s)&&c===D)return J;if(s===O&&-1!==[N,k,V].indexOf(c)||-1!==[N,k,V].indexOf(s)&&c===L)return J;if(-1!==q.indexOf(s)&&-1!==eA.indexOf(c)||-1!==eA.indexOf(s)&&-1!==q.indexOf(c))return J;if(-1!==[O,L].indexOf(s)&&(c===D||-1!==[x,F].indexOf(c)&&e[a+1]===D)||-1!==[x,F].indexOf(s)&&c===D||s===D&&-1!==[D,M,H].indexOf(c))return J;if(-1!==[D,M,H,b,E].indexOf(c))for(var u=o;u>=0;){if((d=e[u])===D)return J;if(-1===[M,H].indexOf(d))break;u--}if(-1!==[O,L].indexOf(c))for(u=-1!==[b,E].indexOf(s)?i:o;u>=0;){var d;if((d=e[u])===D)return J;if(-1===[M,H].indexOf(d))break;u--}if(Z===s&&-1!==[Z,G,R,K].indexOf(c)||-1!==[G,R].indexOf(s)&&-1!==[G,W].indexOf(c)||-1!==[W,K].indexOf(s)&&c===W)return J;if(-1!==nA.indexOf(s)&&-1!==[S,L].indexOf(c)||-1!==nA.indexOf(c)&&s===O)return J;if(-1!==q.indexOf(s)&&-1!==q.indexOf(c))return J;if(s===H&&-1!==q.indexOf(c))return J;if(-1!==q.concat(D).indexOf(s)&&c===x&&-1===z.indexOf(A[a])||-1!==q.concat(D).indexOf(c)&&s===E)return J;if(41===s&&41===c){for(var g=t[o],f=1;g>0&&41===e[--g];)f++;if(f%2!=0)return J}return s===k&&c===V?J:j},sA=function(A,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=function(A,e){void 0===e&&(e="strict");var t=[],n=[],r=[];return A.forEach((function(A,o){var i=Y.get(A);if(i>50?(r.push(!0),i-=50):r.push(!1),-1!==["normal","auto","loose"].indexOf(e)&&-1!==[8208,8211,12316,12448].indexOf(A))return n.push(o),t.push(16);if(4===i||11===i){if(0===o)return n.push(o),t.push(_);var a=t[o-1];return-1===tA.indexOf(a)?(n.push(n[o-1]),t.push(a)):(n.push(o),t.push(_))}return n.push(o),31===i?t.push("strict"===e?P:N):i===X||29===i?t.push(_):43===i?A>=131072&&A<=196605||A>=196608&&A<=262141?t.push(N):t.push(_):void t.push(i)})),[n,t,r]}(A,e.lineBreak),n=t[0],r=t[1],o=t[2];"break-all"!==e.wordBreak&&"break-word"!==e.wordBreak||(r=r.map((function(A){return-1!==[D,_,X].indexOf(A)?N:A})));var i="keep-all"===e.wordBreak?o.map((function(e,t){return e&&A[t]>=19968&&A[t]<=40959})):void 0;return[n,r,i]},lA=function(){function A(A,e,t,n){this.codePoints=A,this.required="!"===e,this.start=t,this.end=n}return A.prototype.slice=function(){return d.apply(void 0,this.codePoints.slice(this.start,this.end))},A}(),cA=45,uA=43,dA=-1,gA=function(A){return A>=48&&A<=57},fA=function(A){return gA(A)||A>=65&&A<=70||A>=97&&A<=102},hA=function(A){return 10===A||9===A||32===A},BA=function(A){return function(A){return function(A){return A>=97&&A<=122}(A)||function(A){return A>=65&&A<=90}(A)}(A)||function(A){return A>=128}(A)||95===A},pA=function(A){return BA(A)||gA(A)||A===cA},wA=function(A){return A>=0&&A<=8||11===A||A>=14&&A<=31||127===A},mA=function(A,e){return 92===A&&10!==e},vA=function(A,e,t){return A===cA?BA(e)||mA(e,t):!!BA(A)||!(92!==A||!mA(A,e))},CA=function(A,e,t){return A===uA||A===cA?!!gA(e)||46===e&&gA(t):gA(46===A?e:A)},UA=function(A){var e=0,t=1;A[e]!==uA&&A[e]!==cA||(A[e]===cA&&(t=-1),e++);for(var n=[];gA(A[e]);)n.push(A[e++]);var r=n.length?parseInt(d.apply(void 0,n),10):0;46===A[e]&&e++;for(var o=[];gA(A[e]);)o.push(A[e++]);var i=o.length,a=i?parseInt(d.apply(void 0,o),10):0;69!==A[e]&&101!==A[e]||e++;var s=1;A[e]!==uA&&A[e]!==cA||(A[e]===cA&&(s=-1),e++);for(var l=[];gA(A[e]);)l.push(A[e++]);var c=l.length?parseInt(d.apply(void 0,l),10):0;return t*(r+a*Math.pow(10,-i))*Math.pow(10,s*c)},QA={type:2},yA={type:3},IA={type:4},FA={type:13},bA={type:8},EA={type:21},TA={type:9},SA={type:10},PA={type:11},xA={type:12},HA={type:14},DA={type:23},LA={type:1},OA={type:25},MA={type:24},_A={type:26},kA={type:27},VA={type:28},RA={type:29},KA={type:31},NA={type:32},ZA=function(){function A(){this._value=[]}return A.prototype.write=function(A){this._value=this._value.concat(u(A))},A.prototype.read=function(){for(var A=[],e=this.consumeToken();e!==NA;)A.push(e),e=this.consumeToken();return A},A.prototype.consumeToken=function(){var A=this.consumeCodePoint();switch(A){case 34:return this.consumeStringToken(34);case 35:var e=this.peekCodePoint(0),t=this.peekCodePoint(1),n=this.peekCodePoint(2);if(pA(e)||mA(t,n)){var r=vA(e,t,n)?2:1;return{type:5,value:this.consumeName(),flags:r}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),FA;break;case 39:return this.consumeStringToken(39);case 40:return QA;case 41:return yA;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),HA;break;case uA:if(CA(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case 44:return IA;case cA:var o=A,i=this.peekCodePoint(0),a=this.peekCodePoint(1);if(CA(o,i,a))return this.reconsumeCodePoint(A),this.consumeNumericToken();if(vA(o,i,a))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();if(i===cA&&62===a)return this.consumeCodePoint(),this.consumeCodePoint(),MA;break;case 46:if(CA(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var s=this.consumeCodePoint();if(42===s&&47===(s=this.consumeCodePoint()))return this.consumeToken();if(s===dA)return this.consumeToken()}break;case 58:return _A;case 59:return kA;case 60:if(33===this.peekCodePoint(0)&&this.peekCodePoint(1)===cA&&this.peekCodePoint(2)===cA)return this.consumeCodePoint(),this.consumeCodePoint(),OA;break;case 64:var l=this.peekCodePoint(0),c=this.peekCodePoint(1),u=this.peekCodePoint(2);if(vA(l,c,u))return{type:7,value:this.consumeName()};break;case 91:return VA;case 92:if(mA(A,this.peekCodePoint(0)))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();break;case 93:return RA;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),bA;break;case 123:return PA;case 125:return xA;case 117:case 85:var g=this.peekCodePoint(0),f=this.peekCodePoint(1);return g!==uA||!fA(f)&&63!==f||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(A),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),TA;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),EA;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),SA;break;case dA:return NA}return hA(A)?(this.consumeWhiteSpace(),KA):gA(A)?(this.reconsumeCodePoint(A),this.consumeNumericToken()):BA(A)?(this.reconsumeCodePoint(A),this.consumeIdentLikeToken()):{type:6,value:d(A)}},A.prototype.consumeCodePoint=function(){var A=this._value.shift();return void 0===A?-1:A},A.prototype.reconsumeCodePoint=function(A){this._value.unshift(A)},A.prototype.peekCodePoint=function(A){return A>=this._value.length?-1:this._value[A]},A.prototype.consumeUnicodeRangeToken=function(){for(var A=[],e=this.consumeCodePoint();fA(e)&&A.length<6;)A.push(e),e=this.consumeCodePoint();for(var t=!1;63===e&&A.length<6;)A.push(e),e=this.consumeCodePoint(),t=!0;if(t)return{type:30,start:parseInt(d.apply(void 0,A.map((function(A){return 63===A?48:A}))),16),end:parseInt(d.apply(void 0,A.map((function(A){return 63===A?70:A}))),16)};var n=parseInt(d.apply(void 0,A),16);if(this.peekCodePoint(0)===cA&&fA(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();for(var r=[];fA(e)&&r.length<6;)r.push(e),e=this.consumeCodePoint();return{type:30,start:n,end:parseInt(d.apply(void 0,r),16)}}return{type:30,start:n,end:n}},A.prototype.consumeIdentLikeToken=function(){var A=this.consumeName();return"url"===A.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:A}):{type:20,value:A}},A.prototype.consumeUrlToken=function(){var A=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===dA)return{type:22,value:""};var e=this.peekCodePoint(0);if(39===e||34===e){var t=this.consumeStringToken(this.consumeCodePoint());return 0===t.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===dA||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:t.value}):(this.consumeBadUrlRemnants(),DA)}for(;;){var n=this.consumeCodePoint();if(n===dA||41===n)return{type:22,value:d.apply(void 0,A)};if(hA(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===dA||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:d.apply(void 0,A)}):(this.consumeBadUrlRemnants(),DA);if(34===n||39===n||40===n||wA(n))return this.consumeBadUrlRemnants(),DA;if(92===n){if(!mA(n,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),DA;A.push(this.consumeEscapedCodePoint())}else A.push(n)}},A.prototype.consumeWhiteSpace=function(){for(;hA(this.peekCodePoint(0));)this.consumeCodePoint()},A.prototype.consumeBadUrlRemnants=function(){for(;;){var A=this.consumeCodePoint();if(41===A||A===dA)return;mA(A,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},A.prototype.consumeStringSlice=function(A){for(var e="";A>0;){var t=Math.min(5e4,A);e+=d.apply(void 0,this._value.splice(0,t)),A-=t}return this._value.shift(),e},A.prototype.consumeStringToken=function(A){for(var e="",t=0;;){var n=this._value[t];if(n===dA||void 0===n||n===A)return{type:0,value:e+=this.consumeStringSlice(t)};if(10===n)return this._value.splice(0,t),LA;if(92===n){var r=this._value[t+1];r!==dA&&void 0!==r&&(10===r?(e+=this.consumeStringSlice(t),t=-1,this._value.shift()):mA(n,r)&&(e+=this.consumeStringSlice(t),e+=d(this.consumeEscapedCodePoint()),t=-1))}t++}},A.prototype.consumeNumber=function(){var A=[],e=4,t=this.peekCodePoint(0);for(t!==uA&&t!==cA||A.push(this.consumeCodePoint());gA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());t=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(46===t&&gA(n))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;gA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());t=this.peekCodePoint(0),n=this.peekCodePoint(1);var r=this.peekCodePoint(2);if((69===t||101===t)&&((n===uA||n===cA)&&gA(r)||gA(n)))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;gA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());return[UA(A),e]},A.prototype.consumeNumericToken=function(){var A=this.consumeNumber(),e=A[0],t=A[1],n=this.peekCodePoint(0),r=this.peekCodePoint(1),o=this.peekCodePoint(2);return vA(n,r,o)?{type:15,number:e,flags:t,unit:this.consumeName()}:37===n?(this.consumeCodePoint(),{type:16,number:e,flags:t}):{type:17,number:e,flags:t}},A.prototype.consumeEscapedCodePoint=function(){var A=this.consumeCodePoint();if(fA(A)){for(var e=d(A);fA(this.peekCodePoint(0))&&e.length<6;)e+=d(this.consumeCodePoint());hA(this.peekCodePoint(0))&&this.consumeCodePoint();var t=parseInt(e,16);return 0===t||function(A){return A>=55296&&A<=57343}(t)||t>1114111?65533:t}return A===dA?65533:A},A.prototype.consumeName=function(){for(var A="";;){var e=this.consumeCodePoint();if(pA(e))A+=d(e);else{if(!mA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),A;A+=d(this.consumeEscapedCodePoint())}}},A}(),GA=function(){function A(A){this._tokens=A}return A.create=function(e){var t=new ZA;return t.write(e),new A(t.read())},A.parseValue=function(e){return A.create(e).parseComponentValue()},A.parseValues=function(e){return A.create(e).parseComponentValues()},A.prototype.parseComponentValue=function(){for(var A=this.consumeToken();31===A.type;)A=this.consumeToken();if(32===A.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(A);var e=this.consumeComponentValue();do{A=this.consumeToken()}while(31===A.type);if(32===A.type)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},A.prototype.parseComponentValues=function(){for(var A=[];;){var e=this.consumeComponentValue();if(32===e.type)return A;A.push(e),A.push()}},A.prototype.consumeComponentValue=function(){var A=this.consumeToken();switch(A.type){case 11:case 28:case 2:return this.consumeSimpleBlock(A.type);case 19:return this.consumeFunction(A)}return A},A.prototype.consumeSimpleBlock=function(A){for(var e={type:A,values:[]},t=this.consumeToken();;){if(32===t.type||Ae(t,A))return e;this.reconsumeToken(t),e.values.push(this.consumeComponentValue()),t=this.consumeToken()}},A.prototype.consumeFunction=function(A){for(var e={name:A.value,values:[],type:18};;){var t=this.consumeToken();if(32===t.type||3===t.type)return e;this.reconsumeToken(t),e.values.push(this.consumeComponentValue())}},A.prototype.consumeToken=function(){var A=this._tokens.shift();return void 0===A?NA:A},A.prototype.reconsumeToken=function(A){this._tokens.unshift(A)},A}(),WA=function(A){return 15===A.type},XA=function(A){return 17===A.type},zA=function(A){return 20===A.type},JA=function(A){return 0===A.type},jA=function(A,e){return zA(A)&&A.value===e},YA=function(A){return 31!==A.type},qA=function(A){return 31!==A.type&&4!==A.type},$A=function(A){var e=[],t=[];return A.forEach((function(A){if(4===A.type){if(0===t.length)throw new Error("Error parsing function args, zero tokens for arg");return e.push(t),void(t=[])}31!==A.type&&t.push(A)})),t.length&&e.push(t),e},Ae=function(A,e){return 11===e&&12===A.type||(28===e&&29===A.type||2===e&&3===A.type)},ee=function(A){return 17===A.type||15===A.type},te=function(A){return 16===A.type||ee(A)},ne=function(A){return A.length>1?[A[0],A[1]]:[A[0]]},re={type:17,number:0,flags:4},oe={type:16,number:50,flags:4},ie={type:16,number:100,flags:4},ae=function(A,e,t){var n=A[0],r=A[1];return[se(n,e),se(void 0!==r?r:n,t)]},se=function(A,e){if(16===A.type)return A.number/100*e;if(WA(A))switch(A.unit){case"rem":case"em":return 16*A.number;default:return A.number}return A.number},le="grad",ce="turn",ue=function(A,e){if(15===e.type)switch(e.unit){case"deg":return Math.PI*e.number/180;case le:return Math.PI/200*e.number;case"rad":return e.number;case ce:return 2*Math.PI*e.number}throw new Error("Unsupported angle type")},de=function(A){return 15===A.type&&("deg"===A.unit||A.unit===le||"rad"===A.unit||A.unit===ce)},ge=function(A){switch(A.filter(zA).map((function(A){return A.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[re,re];case"to top":case"bottom":return fe(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[re,ie];case"to right":case"left":return fe(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ie,ie];case"to bottom":case"top":return fe(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ie,re];case"to left":case"right":return fe(270)}return 0},fe=function(A){return Math.PI*A/180},he=function(A,e){if(18===e.type){var t=Qe[e.name];if(void 0===t)throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(A,e.values)}if(5===e.type){if(3===e.value.length){var n=e.value.substring(0,1),r=e.value.substring(1,2),o=e.value.substring(2,3);return we(parseInt(n+n,16),parseInt(r+r,16),parseInt(o+o,16),1)}if(4===e.value.length){n=e.value.substring(0,1),r=e.value.substring(1,2),o=e.value.substring(2,3);var i=e.value.substring(3,4);return we(parseInt(n+n,16),parseInt(r+r,16),parseInt(o+o,16),parseInt(i+i,16)/255)}if(6===e.value.length){n=e.value.substring(0,2),r=e.value.substring(2,4),o=e.value.substring(4,6);return we(parseInt(n,16),parseInt(r,16),parseInt(o,16),1)}if(8===e.value.length){n=e.value.substring(0,2),r=e.value.substring(2,4),o=e.value.substring(4,6),i=e.value.substring(6,8);return we(parseInt(n,16),parseInt(r,16),parseInt(o,16),parseInt(i,16)/255)}}if(20===e.type){var a=Ie[e.value.toUpperCase()];if(void 0!==a)return a}return Ie.TRANSPARENT},Be=function(A){return 0==(255&A)},pe=function(A){var e=255&A,t=255&A>>8,n=255&A>>16,r=255&A>>24;return e<255?"rgba("+r+","+n+","+t+","+e/255+")":"rgb("+r+","+n+","+t+")"},we=function(A,e,t,n){return(A<<24|e<<16|t<<8|Math.round(255*n)<<0)>>>0},me=function(A,e){if(17===A.type)return A.number;if(16===A.type){var t=3===e?1:255;return 3===e?A.number/100*t:Math.round(A.number/100*t)}return 0},ve=function(A,e){var t=e.filter(qA);if(3===t.length){var n=t.map(me),r=n[0],o=n[1],i=n[2];return we(r,o,i,1)}if(4===t.length){var a=t.map(me),s=(r=a[0],o=a[1],i=a[2],a[3]);return we(r,o,i,s)}return 0};function Ce(A,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-A)*t*6+A:t<.5?e:t<2/3?6*(e-A)*(2/3-t)+A:A}var Ue=function(A,e){var t=e.filter(qA),n=t[0],r=t[1],o=t[2],i=t[3],a=(17===n.type?fe(n.number):ue(A,n))/(2*Math.PI),s=te(r)?r.number/100:0,l=te(o)?o.number/100:0,c=void 0!==i&&te(i)?se(i,1):1;if(0===s)return we(255*l,255*l,255*l,1);var u=l<=.5?l*(s+1):l+s-l*s,d=2*l-u,g=Ce(d,u,a+1/3),f=Ce(d,u,a),h=Ce(d,u,a-1/3);return we(255*g,255*f,255*h,c)},Qe={hsl:Ue,hsla:Ue,rgb:ve,rgba:ve},ye=function(A,e){return he(A,GA.create(e).parseComponentValue())},Ie={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Fe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(A,e){return e.map((function(A){if(zA(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},be={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ee=function(A,e){var t=he(A,e[0]),n=e[1];return n&&te(n)?{color:t,stop:n}:{color:t,stop:null}},Te=function(A,e){var t=A[0],n=A[A.length-1];null===t.stop&&(t.stop=re),null===n.stop&&(n.stop=ie);for(var r=[],o=0,i=0;i<A.length;i++){var a=A[i].stop;if(null!==a){var s=se(a,e);s>o?r.push(s):r.push(o),o=s}else r.push(null)}var l=null;for(i=0;i<r.length;i++){var c=r[i];if(null===c)null===l&&(l=i);else if(null!==l){for(var u=i-l,d=(c-r[l-1])/(u+1),g=1;g<=u;g++)r[l+g-1]=d*g;l=null}}return A.map((function(A,t){return{color:A.color,stop:Math.max(Math.min(1,r[t]/e),0)}}))},Se=function(A,e,t){var n="number"==typeof A?A:function(A,e,t){var n=e/2,r=t/2,o=se(A[0],e)-n,i=r-se(A[1],t);return(Math.atan2(i,o)+2*Math.PI)%(2*Math.PI)}(A,e,t),r=Math.abs(e*Math.sin(n))+Math.abs(t*Math.cos(n)),o=e/2,i=t/2,a=r/2,s=Math.sin(n-Math.PI/2)*a,l=Math.cos(n-Math.PI/2)*a;return[r,o-l,o+l,i-s,i+s]},Pe=function(A,e){return Math.sqrt(A*A+e*e)},xe=function(A,e,t,n,r){return[[0,0],[0,e],[A,0],[A,e]].reduce((function(A,e){var o=e[0],i=e[1],a=Pe(t-o,n-i);return(r?a<A.optimumDistance:a>A.optimumDistance)?{optimumCorner:e,optimumDistance:a}:A}),{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},He=function(A,e){var t=fe(180),n=[];return $A(e).forEach((function(e,r){if(0===r){var o=e[0];if(20===o.type&&-1!==["top","left","right","bottom"].indexOf(o.value))return void(t=ge(e));if(de(o))return void(t=(ue(A,o)+fe(270))%fe(360))}var i=Ee(A,e);n.push(i)})),{angle:t,stops:n,type:1}},De="closest-side",Le="farthest-side",Oe="closest-corner",Me="farthest-corner",_e="circle",ke="ellipse",Ve="cover",Re="contain",Ke=function(A,e){var t=0,n=3,r=[],o=[];return $A(e).forEach((function(e,i){var a=!0;if(0===i?a=e.reduce((function(A,e){if(zA(e))switch(e.value){case"center":return o.push(oe),!1;case"top":case"left":return o.push(re),!1;case"right":case"bottom":return o.push(ie),!1}else if(te(e)||ee(e))return o.push(e),!1;return A}),a):1===i&&(a=e.reduce((function(A,e){if(zA(e))switch(e.value){case _e:return t=0,!1;case ke:return t=1,!1;case Re:case De:return n=0,!1;case Le:return n=1,!1;case Oe:return n=2,!1;case Ve:case Me:return n=3,!1}else if(ee(e)||te(e))return Array.isArray(n)||(n=[]),n.push(e),!1;return A}),a)),a){var s=Ee(A,e);r.push(s)}})),{size:n,shape:t,stops:r,position:o,type:2}},Ne=function(A,e){if(22===e.type){var t={url:e.value,type:0};return A.cache.addImage(e.value),t}if(18===e.type){var n=Ge[e.name];if(void 0===n)throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(A,e.values)}throw new Error("Unsupported image type "+e.type)};var Ze,Ge={"linear-gradient":function(A,e){var t=fe(180),n=[];return $A(e).forEach((function(e,r){if(0===r){var o=e[0];if(20===o.type&&"to"===o.value)return void(t=ge(e));if(de(o))return void(t=ue(A,o))}var i=Ee(A,e);n.push(i)})),{angle:t,stops:n,type:1}},"-moz-linear-gradient":He,"-ms-linear-gradient":He,"-o-linear-gradient":He,"-webkit-linear-gradient":He,"radial-gradient":function(A,e){var t=0,n=3,r=[],o=[];return $A(e).forEach((function(e,i){var a=!0;if(0===i){var s=!1;a=e.reduce((function(A,e){if(s)if(zA(e))switch(e.value){case"center":return o.push(oe),A;case"top":case"left":return o.push(re),A;case"right":case"bottom":return o.push(ie),A}else(te(e)||ee(e))&&o.push(e);else if(zA(e))switch(e.value){case _e:return t=0,!1;case ke:return t=1,!1;case"at":return s=!0,!1;case De:return n=0,!1;case Ve:case Le:return n=1,!1;case Re:case Oe:return n=2,!1;case Me:return n=3,!1}else if(ee(e)||te(e))return Array.isArray(n)||(n=[]),n.push(e),!1;return A}),a)}if(a){var l=Ee(A,e);r.push(l)}})),{size:n,shape:t,stops:r,position:o,type:2}},"-moz-radial-gradient":Ke,"-ms-radial-gradient":Ke,"-o-radial-gradient":Ke,"-webkit-radial-gradient":Ke,"-webkit-gradient":function(A,e){var t=fe(180),n=[],r=1;return $A(e).forEach((function(e,t){var o=e[0];if(0===t){if(zA(o)&&"linear"===o.value)return void(r=1);if(zA(o)&&"radial"===o.value)return void(r=2)}if(18===o.type)if("from"===o.name){var i=he(A,o.values[0]);n.push({stop:re,color:i})}else if("to"===o.name){i=he(A,o.values[0]);n.push({stop:ie,color:i})}else if("color-stop"===o.name){var a=o.values.filter(qA);if(2===a.length){i=he(A,a[1]);var s=a[0];XA(s)&&n.push({stop:{type:16,number:100*s.number,flags:s.flags},color:i})}}})),1===r?{angle:(t+fe(180))%fe(360),stops:n,type:r}:{size:3,shape:0,stops:n,position:[],type:r}}},We={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(A,e){if(0===e.length)return[];var t=e[0];return 20===t.type&&"none"===t.value?[]:e.filter((function(A){return qA(A)&&function(A){return!(20===A.type&&"none"===A.value||18===A.type&&!Ge[A.name])}(A)})).map((function(e){return Ne(A,e)}))}},Xe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(A,e){return e.map((function(A){if(zA(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},ze={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(A,e){return $A(e).map((function(A){return A.filter(te)})).map(ne)}},Je={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(A,e){return $A(e).map((function(A){return A.filter(zA).map((function(A){return A.value})).join(" ")})).map(je)}},je=function(A){switch(A){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(A){A.AUTO="auto",A.CONTAIN="contain",A.COVER="cover"}(Ze||(Ze={}));var Ye,qe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(A,e){return $A(e).map((function(A){return A.filter($e)}))}},$e=function(A){return zA(A)||te(A)},At=function(A){return{name:"border-"+A+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},et=At("top"),tt=At("right"),nt=At("bottom"),rt=At("left"),ot=function(A){return{name:"border-radius-"+A,initialValue:"0 0",prefix:!1,type:1,parse:function(A,e){return ne(e.filter(te))}}},it=ot("top-left"),at=ot("top-right"),st=ot("bottom-right"),lt=ot("bottom-left"),ct=function(A){return{name:"border-"+A+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(A,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},ut=ct("top"),dt=ct("right"),gt=ct("bottom"),ft=ct("left"),ht=function(A){return{name:"border-"+A+"-width",initialValue:"0",type:0,prefix:!1,parse:function(A,e){return WA(e)?e.number:0}}},Bt=ht("top"),pt=ht("right"),wt=ht("bottom"),mt=ht("left"),vt={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ct={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(A,e){return"rtl"===e?1:0}},Ut={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(A,e){return e.filter(zA).reduce((function(A,e){return A|Qt(e.value)}),0)}},Qt=function(A){switch(A){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},yt={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},It={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(A,e){return 20===e.type&&"normal"===e.value?0:17===e.type||15===e.type?e.number:0}};!function(A){A.NORMAL="normal",A.STRICT="strict"}(Ye||(Ye={}));var Ft,bt={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){return"strict"===e?Ye.STRICT:Ye.NORMAL}},Et={name:"line-height",initialValue:"normal",prefix:!1,type:4},Tt=function(A,e){return zA(A)&&"normal"===A.value?1.2*e:17===A.type?e*A.number:te(A)?se(A,e):e},St={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(A,e){return 20===e.type&&"none"===e.value?null:Ne(A,e)}},Pt={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(A,e){return"inside"===e?0:1}},xt={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Ht=function(A){return{name:"margin-"+A,initialValue:"0",prefix:!1,type:4}},Dt=Ht("top"),Lt=Ht("right"),Ot=Ht("bottom"),Mt=Ht("left"),_t={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(A,e){return e.filter(zA).map((function(A){switch(A.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},kt={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){return"break-word"===e?"break-word":"normal"}},Vt=function(A){return{name:"padding-"+A,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Rt=Vt("top"),Kt=Vt("right"),Nt=Vt("bottom"),Zt=Vt("left"),Gt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(A,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Wt={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(A,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Xt={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(A,e){return 1===e.length&&jA(e[0],"none")?[]:$A(e).map((function(e){for(var t={color:Ie.TRANSPARENT,offsetX:re,offsetY:re,blur:re},n=0,r=0;r<e.length;r++){var o=e[r];ee(o)?(0===n?t.offsetX=o:1===n?t.offsetY=o:t.blur=o,n++):t.color=he(A,o)}return t}))}},zt={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Jt={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(A,e){if(20===e.type&&"none"===e.value)return null;if(18===e.type){var t=jt[e.name];if(void 0===t)throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},jt={matrix:function(A){var e=A.filter((function(A){return 17===A.type})).map((function(A){return A.number}));return 6===e.length?e:null},matrix3d:function(A){var e=A.filter((function(A){return 17===A.type})).map((function(A){return A.number})),t=e[0],n=e[1];e[2],e[3];var r=e[4],o=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],a=e[13];return e[14],e[15],16===e.length?[t,n,r,o,i,a]:null}},Yt={type:16,number:50,flags:4},qt=[Yt,Yt],$t={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(A,e){var t=e.filter(te);return 2!==t.length?qt:[t[0],t[1]]}},An={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(A){A.NORMAL="normal",A.BREAK_ALL="break-all",A.KEEP_ALL="keep-all"}(Ft||(Ft={}));for(var en={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){switch(e){case"break-all":return Ft.BREAK_ALL;case"keep-all":return Ft.KEEP_ALL;default:return Ft.NORMAL}}},tn={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(A,e){if(20===e.type)return{auto:!0,order:0};if(XA(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},nn=function(A,e){if(15===e.type)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")},rn={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(A,e){return XA(e)?e.number:1}},on={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},an={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(A,e){return e.filter(zA).map((function(A){switch(A.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(A){return 0!==A}))}},sn={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(A,e){var t=[],n=[];return e.forEach((function(A){switch(A.type){case 20:case 0:t.push(A.value);break;case 17:t.push(A.number.toString());break;case 4:n.push(t.join(" ")),t.length=0}})),t.length&&n.push(t.join(" ")),n.map((function(A){return-1===A.indexOf(" ")?A:"'"+A+"'"}))}},ln={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},cn={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(A,e){return XA(e)?e.number:zA(e)&&"bold"===e.value?700:400}},un={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(A,e){return e.filter(zA).map((function(A){return A.value}))}},dn={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},gn=function(A,e){return 0!=(A&e)},fn={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(A,e){if(0===e.length)return[];var t=e[0];return 20===t.type&&"none"===t.value?[]:e}},hn={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(0===e.length)return null;var t=e[0];if(20===t.type&&"none"===t.value)return null;for(var n=[],r=e.filter(YA),o=0;o<r.length;o++){var i=r[o],a=r[o+1];if(20===i.type){var s=a&&XA(a)?a.number:1;n.push({counter:i.value,increment:s})}}return n}},Bn={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(0===e.length)return[];for(var t=[],n=e.filter(YA),r=0;r<n.length;r++){var o=n[r],i=n[r+1];if(zA(o)&&"none"!==o.value){var a=i&&XA(i)?i.number:0;t.push({counter:o.value,reset:a})}}return t}},pn={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(A,e){return e.filter(WA).map((function(e){return nn(A,e)}))}},wn={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(0===e.length)return null;var t=e[0];if(20===t.type&&"none"===t.value)return null;var n=[],r=e.filter(JA);if(r.length%2!=0)return null;for(var o=0;o<r.length;o+=2){var i=r[o].value,a=r[o+1].value;n.push({open:i,close:a})}return n}},mn=function(A,e,t){if(!A)return"";var n=A[Math.min(e,A.length-1)];return n?t?n.open:n.close:""},vn={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(A,e){return 1===e.length&&jA(e[0],"none")?[]:$A(e).map((function(e){for(var t={color:255,offsetX:re,offsetY:re,blur:re,spread:re,inset:!1},n=0,r=0;r<e.length;r++){var o=e[r];jA(o,"inset")?t.inset=!0:ee(o)?(0===n?t.offsetX=o:1===n?t.offsetY=o:2===n?t.blur=o:t.spread=o,n++):t.color=he(A,o)}return t}))}},Cn={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(A,e){var t=[];return e.filter(zA).forEach((function(A){switch(A.value){case"stroke":t.push(1);break;case"fill":t.push(0);break;case"markers":t.push(2)}})),[0,1,2].forEach((function(A){-1===t.indexOf(A)&&t.push(A)})),t}},Un={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Qn={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(A,e){return WA(e)?e.number:0}},yn=function(){function A(A,e){var t,n;this.animationDuration=bn(A,pn,e.animationDuration),this.backgroundClip=bn(A,Fe,e.backgroundClip),this.backgroundColor=bn(A,be,e.backgroundColor),this.backgroundImage=bn(A,We,e.backgroundImage),this.backgroundOrigin=bn(A,Xe,e.backgroundOrigin),this.backgroundPosition=bn(A,ze,e.backgroundPosition),this.backgroundRepeat=bn(A,Je,e.backgroundRepeat),this.backgroundSize=bn(A,qe,e.backgroundSize),this.borderTopColor=bn(A,et,e.borderTopColor),this.borderRightColor=bn(A,tt,e.borderRightColor),this.borderBottomColor=bn(A,nt,e.borderBottomColor),this.borderLeftColor=bn(A,rt,e.borderLeftColor),this.borderTopLeftRadius=bn(A,it,e.borderTopLeftRadius),this.borderTopRightRadius=bn(A,at,e.borderTopRightRadius),this.borderBottomRightRadius=bn(A,st,e.borderBottomRightRadius),this.borderBottomLeftRadius=bn(A,lt,e.borderBottomLeftRadius),this.borderTopStyle=bn(A,ut,e.borderTopStyle),this.borderRightStyle=bn(A,dt,e.borderRightStyle),this.borderBottomStyle=bn(A,gt,e.borderBottomStyle),this.borderLeftStyle=bn(A,ft,e.borderLeftStyle),this.borderTopWidth=bn(A,Bt,e.borderTopWidth),this.borderRightWidth=bn(A,pt,e.borderRightWidth),this.borderBottomWidth=bn(A,wt,e.borderBottomWidth),this.borderLeftWidth=bn(A,mt,e.borderLeftWidth),this.boxShadow=bn(A,vn,e.boxShadow),this.color=bn(A,vt,e.color),this.direction=bn(A,Ct,e.direction),this.display=bn(A,Ut,e.display),this.float=bn(A,yt,e.cssFloat),this.fontFamily=bn(A,sn,e.fontFamily),this.fontSize=bn(A,ln,e.fontSize),this.fontStyle=bn(A,dn,e.fontStyle),this.fontVariant=bn(A,un,e.fontVariant),this.fontWeight=bn(A,cn,e.fontWeight),this.letterSpacing=bn(A,It,e.letterSpacing),this.lineBreak=bn(A,bt,e.lineBreak),this.lineHeight=bn(A,Et,e.lineHeight),this.listStyleImage=bn(A,St,e.listStyleImage),this.listStylePosition=bn(A,Pt,e.listStylePosition),this.listStyleType=bn(A,xt,e.listStyleType),this.marginTop=bn(A,Dt,e.marginTop),this.marginRight=bn(A,Lt,e.marginRight),this.marginBottom=bn(A,Ot,e.marginBottom),this.marginLeft=bn(A,Mt,e.marginLeft),this.opacity=bn(A,rn,e.opacity);var r=bn(A,_t,e.overflow);this.overflowX=r[0],this.overflowY=r[r.length>1?1:0],this.overflowWrap=bn(A,kt,e.overflowWrap),this.paddingTop=bn(A,Rt,e.paddingTop),this.paddingRight=bn(A,Kt,e.paddingRight),this.paddingBottom=bn(A,Nt,e.paddingBottom),this.paddingLeft=bn(A,Zt,e.paddingLeft),this.paintOrder=bn(A,Cn,e.paintOrder),this.position=bn(A,Wt,e.position),this.textAlign=bn(A,Gt,e.textAlign),this.textDecorationColor=bn(A,on,null!==(t=e.textDecorationColor)&&void 0!==t?t:e.color),this.textDecorationLine=bn(A,an,null!==(n=e.textDecorationLine)&&void 0!==n?n:e.textDecoration),this.textShadow=bn(A,Xt,e.textShadow),this.textTransform=bn(A,zt,e.textTransform),this.transform=bn(A,Jt,e.transform),this.transformOrigin=bn(A,$t,e.transformOrigin),this.visibility=bn(A,An,e.visibility),this.webkitTextStrokeColor=bn(A,Un,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=bn(A,Qn,e.webkitTextStrokeWidth),this.wordBreak=bn(A,en,e.wordBreak),this.zIndex=bn(A,tn,e.zIndex)}return A.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},A.prototype.isTransparent=function(){return Be(this.backgroundColor)},A.prototype.isTransformed=function(){return null!==this.transform},A.prototype.isPositioned=function(){return 0!==this.position},A.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},A.prototype.isFloating=function(){return 0!==this.float},A.prototype.isInlineLevel=function(){return gn(this.display,4)||gn(this.display,33554432)||gn(this.display,268435456)||gn(this.display,536870912)||gn(this.display,67108864)||gn(this.display,134217728)},A}(),In=function(A,e){this.content=bn(A,fn,e.content),this.quotes=bn(A,wn,e.quotes)},Fn=function(A,e){this.counterIncrement=bn(A,hn,e.counterIncrement),this.counterReset=bn(A,Bn,e.counterReset)},bn=function(A,e,t){var n=new ZA,r=null!=t?t.toString():e.initialValue;n.write(r);var o=new GA(n.read());switch(e.type){case 2:var i=o.parseComponentValue();return e.parse(A,zA(i)?i.value:e.initialValue);case 0:return e.parse(A,o.parseComponentValue());case 1:return e.parse(A,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(e.format){case"angle":return ue(A,o.parseComponentValue());case"color":return he(A,o.parseComponentValue());case"image":return Ne(A,o.parseComponentValue());case"length":var a=o.parseComponentValue();return ee(a)?a:re;case"length-percentage":var s=o.parseComponentValue();return te(s)?s:re;case"time":return nn(A,o.parseComponentValue())}}},En=function(A,e){var t=function(A){switch(A.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(A);return 1===t||e===t},Tn=function(A,e){this.context=A,this.textNodes=[],this.elements=[],this.flags=0,En(e,3),this.styles=new yn(A,window.getComputedStyle(e,null)),Hr(e)&&(this.styles.animationDuration.some((function(A){return A>0}))&&(e.style.animationDuration="0s"),null!==this.styles.transform&&(e.style.transform="none")),this.bounds=c(this.context,e),En(e,4)&&(this.flags|=16)},Sn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pn="undefined"==typeof Uint8Array?[]:new Uint8Array(256),xn=0;xn<64;xn++)Pn[Sn.charCodeAt(xn)]=xn;for(var Hn=function(A,e,t){return A.slice?A.slice(e,t):new Uint16Array(Array.prototype.slice.call(A,e,t))},Dn=function(){function A(A,e,t,n,r,o){this.initialValue=A,this.errorValue=e,this.highStart=t,this.highValueIndex=n,this.index=r,this.data=o}return A.prototype.get=function(A){var e;if(A>=0){if(A<55296||A>56319&&A<=65535)return e=((e=this.index[A>>5])<<2)+(31&A),this.data[e];if(A<=65535)return e=((e=this.index[2048+(A-55296>>5)])<<2)+(31&A),this.data[e];if(A<this.highStart)return e=2080+(A>>11),e=this.index[e],e+=A>>5&63,e=((e=this.index[e])<<2)+(31&A),this.data[e];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},A}(),Ln="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",On="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Mn=0;Mn<64;Mn++)On[Ln.charCodeAt(Mn)]=Mn;var _n,kn=8,Vn=9,Rn=11,Kn=12,Nn=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var t=A.length;if(!t)return"";for(var n=[],r=-1,o="";++r<t;){var i=A[r];i<=65535?n.push(i):(i-=65536,n.push(55296+(i>>10),i%1024+56320)),(r+1===t||n.length>16384)&&(o+=String.fromCharCode.apply(String,n),n.length=0)}return o},Zn=function(A,e){var t,n,r,o=function(A){var e,t,n,r,o,i=.75*A.length,a=A.length,s=0;"="===A[A.length-1]&&(i--,"="===A[A.length-2]&&i--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(i):new Array(i),c=Array.isArray(l)?l:new Uint8Array(l);for(e=0;e<a;e+=4)t=Pn[A.charCodeAt(e)],n=Pn[A.charCodeAt(e+1)],r=Pn[A.charCodeAt(e+2)],o=Pn[A.charCodeAt(e+3)],c[s++]=t<<2|n>>4,c[s++]=(15&n)<<4|r>>2,c[s++]=(3&r)<<6|63&o;return l}(A),i=Array.isArray(o)?function(A){for(var e=A.length,t=[],n=0;n<e;n+=4)t.push(A[n+3]<<24|A[n+2]<<16|A[n+1]<<8|A[n]);return t}(o):new Uint32Array(o),a=Array.isArray(o)?function(A){for(var e=A.length,t=[],n=0;n<e;n+=2)t.push(A[n+1]<<8|A[n]);return t}(o):new Uint16Array(o),s=Hn(a,12,i[4]/2),l=2===i[5]?Hn(a,(24+i[4])/2):(t=i,n=Math.ceil((24+i[4])/4),t.slice?t.slice(n,r):new Uint32Array(Array.prototype.slice.call(t,n,r)));return new Dn(i[0],i[1],i[2],i[3],s,l)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),Gn="×",Wn=function(A){return Zn.get(A)},Xn=function(A,e,t){var n=t-2,r=e[n],o=e[t-1],i=e[t];if(2===o&&3===i)return Gn;if(2===o||3===o||4===o)return"÷";if(2===i||3===i||4===i)return"÷";if(o===kn&&-1!==[kn,Vn,Rn,Kn].indexOf(i))return Gn;if(!(o!==Rn&&o!==Vn||i!==Vn&&10!==i))return Gn;if((o===Kn||10===o)&&10===i)return Gn;if(13===i||5===i)return Gn;if(7===i)return Gn;if(1===o)return Gn;if(13===o&&14===i){for(;5===r;)r=e[--n];if(14===r)return Gn}if(15===o&&15===i){for(var a=0;15===r;)a++,r=e[--n];if(a%2==0)return Gn}return"÷"},zn=function(A){var e=function(A){for(var e=[],t=0,n=A.length;t<n;){var r=A.charCodeAt(t++);if(r>=55296&&r<=56319&&t<n){var o=A.charCodeAt(t++);56320==(64512&o)?e.push(((1023&r)<<10)+(1023&o)+65536):(e.push(r),t--)}else e.push(r)}return e}(A),t=e.length,n=0,r=0,o=e.map(Wn);return{next:function(){if(n>=t)return{done:!0,value:null};for(var A=Gn;n<t&&(A=Xn(0,o,++n))===Gn;);if(A!==Gn||n===t){var i=Nn.apply(null,e.slice(r,n));return r=n,{value:i,done:!1}}return{done:!0,value:null}}}},Jn=function(A){return 0===A[0]&&255===A[1]&&0===A[2]&&255===A[3]},jn=function(A,e,t,n,r){var o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"svg"),a=document.createElementNS(o,"foreignObject");return i.setAttributeNS(null,"width",A.toString()),i.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",t.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(a),a.appendChild(r),i},Yn=function(A){return new Promise((function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(A))}))},qn={get SUPPORT_RANGE_BOUNDS(){var A=function(A){if(A.createRange){var e=A.createRange();if(e.getBoundingClientRect){var t=A.createElement("boundtest");t.style.height="123px",t.style.display="block",A.body.appendChild(t),e.selectNode(t);var n=e.getBoundingClientRect(),r=Math.round(n.height);if(A.body.removeChild(t),123===r)return!0}}return!1}(document);return Object.defineProperty(qn,"SUPPORT_RANGE_BOUNDS",{value:A}),A},get SUPPORT_WORD_BREAKING(){var A=qn.SUPPORT_RANGE_BOUNDS&&function(A){var e=A.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",A.body.appendChild(e);var t=A.createRange();e.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var n=e.firstChild,r=u(n.data).map((function(A){return d(A)})),o=0,i={},a=r.every((function(A,e){t.setStart(n,o),t.setEnd(n,o+A.length);var r=t.getBoundingClientRect();o+=A.length;var a=r.x>i.x||r.y>i.y;return i=r,0===e||a}));return A.body.removeChild(e),a}(document);return Object.defineProperty(qn,"SUPPORT_WORD_BREAKING",{value:A}),A},get SUPPORT_SVG_DRAWING(){var A=function(A){var e=new Image,t=A.createElement("canvas"),n=t.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),t.toDataURL()}catch(A){return!1}return!0}(document);return Object.defineProperty(qn,"SUPPORT_SVG_DRAWING",{value:A}),A},get SUPPORT_FOREIGNOBJECT_DRAWING(){var A="function"==typeof Array.from&&"function"==typeof window.fetch?function(A){var e=A.createElement("canvas"),t=100;e.width=t,e.height=t;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,t,t);var r=new Image,o=e.toDataURL();r.src=o;var i=jn(t,t,0,0,r);return n.fillStyle="red",n.fillRect(0,0,t,t),Yn(i).then((function(e){n.drawImage(e,0,0);var r=n.getImageData(0,0,t,t).data;n.fillStyle="red",n.fillRect(0,0,t,t);var i=A.createElement("div");return i.style.backgroundImage="url("+o+")",i.style.height=t+"px",Jn(r)?Yn(jn(t,t,0,0,i)):Promise.reject(!1)})).then((function(A){return n.drawImage(A,0,0),Jn(n.getImageData(0,0,t,t).data)})).catch((function(){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(qn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:A}),A},get SUPPORT_CORS_IMAGES(){var A=void 0!==(new Image).crossOrigin;return Object.defineProperty(qn,"SUPPORT_CORS_IMAGES",{value:A}),A},get SUPPORT_RESPONSE_TYPE(){var A="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(qn,"SUPPORT_RESPONSE_TYPE",{value:A}),A},get SUPPORT_CORS_XHR(){var A="withCredentials"in new XMLHttpRequest;return Object.defineProperty(qn,"SUPPORT_CORS_XHR",{value:A}),A},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var A=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(qn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:A}),A}},$n=function(A,e){this.text=A,this.bounds=e},Ar=function(A,e){var t=e.ownerDocument;if(t){var n=t.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var r=e.parentNode;if(r){r.replaceChild(n,e);var o=c(A,n);return n.firstChild&&r.replaceChild(n.firstChild,n),o}}return l.EMPTY},er=function(A,e,t){var n=A.ownerDocument;if(!n)throw new Error("Node has no owner document");var r=n.createRange();return r.setStart(A,e),r.setEnd(A,e+t),r},tr=function(A){if(qn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(A)).map((function(A){return A.segment}))}return function(A){for(var e,t=zn(A),n=[];!(e=t.next()).done;)e.value&&n.push(e.value.slice());return n}(A)},nr=function(A,e){return 0!==e.letterSpacing?tr(A):function(A,e){if(qn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(A)).map((function(A){return A.segment}))}return or(A,e)}(A,e)},rr=[32,160,4961,65792,65793,4153,4241],or=function(A,e){for(var t,n=function(A,e){var t=u(A),n=sA(t,e),r=n[0],o=n[1],i=n[2],a=t.length,s=0,l=0;return{next:function(){if(l>=a)return{done:!0,value:null};for(var A=J;l<a&&(A=aA(t,o,r,++l,i))===J;);if(A!==J||l===a){var e=new lA(t,A,s,l);return s=l,{value:e,done:!1}}return{done:!0,value:null}}}}(A,{lineBreak:e.lineBreak,wordBreak:"break-word"===e.overflowWrap?"break-word":e.wordBreak}),r=[],o=function(){if(t.value){var A=t.value.slice(),e=u(A),n="";e.forEach((function(A){-1===rr.indexOf(A)?n+=d(A):(n.length&&r.push(n),r.push(d(A)),n="")})),n.length&&r.push(n)}};!(t=n.next()).done;)o();return r},ir=function(A,e,t){this.text=ar(e.data,t.textTransform),this.textBounds=function(A,e,t,n){var r=nr(e,t),o=[],i=0;return r.forEach((function(e){if(t.textDecorationLine.length||e.trim().length>0)if(qn.SUPPORT_RANGE_BOUNDS){var r=er(n,i,e.length).getClientRects();if(r.length>1){var a=tr(e),s=0;a.forEach((function(e){o.push(new $n(e,l.fromDOMRectList(A,er(n,s+i,e.length).getClientRects()))),s+=e.length}))}else o.push(new $n(e,l.fromDOMRectList(A,r)))}else{var c=n.splitText(e.length);o.push(new $n(e,Ar(A,n))),n=c}else qn.SUPPORT_RANGE_BOUNDS||(n=n.splitText(e.length));i+=e.length})),o}(A,this.text,t,e)},ar=function(A,e){switch(e){case 1:return A.toLowerCase();case 3:return A.replace(sr,lr);case 2:return A.toUpperCase();default:return A}},sr=/(^|\s|:|-|\(|\))([a-z])/g,lr=function(A,e,t){return A.length>0?e+t.toUpperCase():A},cr=function(A){function e(e,t){var n=A.call(this,e,t)||this;return n.src=t.currentSrc||t.src,n.intrinsicWidth=t.naturalWidth,n.intrinsicHeight=t.naturalHeight,n.context.cache.addImage(n.src),n}return r(e,A),e}(Tn),ur=function(A){function e(e,t){var n=A.call(this,e,t)||this;return n.canvas=t,n.intrinsicWidth=t.width,n.intrinsicHeight=t.height,n}return r(e,A),e}(Tn),dr=function(A){function e(e,t){var n=A.call(this,e,t)||this,r=new XMLSerializer,o=c(e,t);return t.setAttribute("width",o.width+"px"),t.setAttribute("height",o.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(r.serializeToString(t)),n.intrinsicWidth=t.width.baseVal.value,n.intrinsicHeight=t.height.baseVal.value,n.context.cache.addImage(n.svg),n}return r(e,A),e}(Tn),gr=function(A){function e(e,t){var n=A.call(this,e,t)||this;return n.value=t.value,n}return r(e,A),e}(Tn),fr=function(A){function e(e,t){var n=A.call(this,e,t)||this;return n.start=t.start,n.reversed="boolean"==typeof t.reversed&&!0===t.reversed,n}return r(e,A),e}(Tn),hr=[{type:15,flags:0,unit:"px",number:3}],Br=[{type:16,flags:0,number:50}],pr="checkbox",wr="radio",mr="password",vr=707406591,Cr=function(A){function e(e,t){var n,r,o,i=A.call(this,e,t)||this;switch(i.type=t.type.toLowerCase(),i.checked=t.checked,i.value=0===(r=(n=t).type===mr?new Array(n.value.length+1).join("•"):n.value).length?n.placeholder||"":r,i.type!==pr&&i.type!==wr||(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=(o=i.bounds).width>o.height?new l(o.left+(o.width-o.height)/2,o.top,o.height,o.height):o.width<o.height?new l(o.left,o.top+(o.height-o.width)/2,o.width,o.width):o),i.type){case pr:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=hr;break;case wr:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Br}return i}return r(e,A),e}(Tn),Ur=function(A){function e(e,t){var n=A.call(this,e,t)||this,r=t.options[t.selectedIndex||0];return n.value=r&&r.text||"",n}return r(e,A),e}(Tn),Qr=function(A){function e(e,t){var n=A.call(this,e,t)||this;return n.value=t.value,n}return r(e,A),e}(Tn),yr=function(A){function e(e,t){var n=A.call(this,e,t)||this;n.src=t.src,n.width=parseInt(t.width,10)||0,n.height=parseInt(t.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(t.contentWindow&&t.contentWindow.document&&t.contentWindow.document.documentElement){n.tree=Er(e,t.contentWindow.document.documentElement);var r=t.contentWindow.document.documentElement?ye(e,getComputedStyle(t.contentWindow.document.documentElement).backgroundColor):Ie.TRANSPARENT,o=t.contentWindow.document.body?ye(e,getComputedStyle(t.contentWindow.document.body).backgroundColor):Ie.TRANSPARENT;n.backgroundColor=Be(r)?Be(o)?n.styles.backgroundColor:o:r}}catch(A){}return n}return r(e,A),e}(Tn),Ir=["OL","UL","MENU"],Fr=function(A,e,t,n){for(var r=e.firstChild,o=void 0;r;r=o)if(o=r.nextSibling,Pr(r)&&r.data.trim().length>0)t.textNodes.push(new ir(A,r,t.styles));else if(xr(r))if(Xr(r)&&r.assignedNodes)r.assignedNodes().forEach((function(e){return Fr(A,e,t,n)}));else{var i=br(A,r);i.styles.isVisible()&&(Tr(r,i,n)?i.flags|=4:Sr(i.styles)&&(i.flags|=2),-1!==Ir.indexOf(r.tagName)&&(i.flags|=8),t.elements.push(i),r.slot,r.shadowRoot?Fr(A,r.shadowRoot,i,n):Gr(r)||_r(r)||Wr(r)||Fr(A,r,i,n))}},br=function(A,e){return Kr(e)?new cr(A,e):Vr(e)?new ur(A,e):_r(e)?new dr(A,e):Lr(e)?new gr(A,e):Or(e)?new fr(A,e):Mr(e)?new Cr(A,e):Wr(e)?new Ur(A,e):Gr(e)?new Qr(A,e):Nr(e)?new yr(A,e):new Tn(A,e)},Er=function(A,e){var t=br(A,e);return t.flags|=4,Fr(A,e,t,t),t},Tr=function(A,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||kr(A)&&t.styles.isTransparent()},Sr=function(A){return A.isPositioned()||A.isFloating()},Pr=function(A){return A.nodeType===Node.TEXT_NODE},xr=function(A){return A.nodeType===Node.ELEMENT_NODE},Hr=function(A){return xr(A)&&void 0!==A.style&&!Dr(A)},Dr=function(A){return"object"==typeof A.className},Lr=function(A){return"LI"===A.tagName},Or=function(A){return"OL"===A.tagName},Mr=function(A){return"INPUT"===A.tagName},_r=function(A){return"svg"===A.tagName},kr=function(A){return"BODY"===A.tagName},Vr=function(A){return"CANVAS"===A.tagName},Rr=function(A){return"VIDEO"===A.tagName},Kr=function(A){return"IMG"===A.tagName},Nr=function(A){return"IFRAME"===A.tagName},Zr=function(A){return"STYLE"===A.tagName},Gr=function(A){return"TEXTAREA"===A.tagName},Wr=function(A){return"SELECT"===A.tagName},Xr=function(A){return"SLOT"===A.tagName},zr=function(A){return A.tagName.indexOf("-")>0},Jr=function(){function A(){this.counters={}}return A.prototype.getCounterValue=function(A){var e=this.counters[A];return e&&e.length?e[e.length-1]:1},A.prototype.getCounterValues=function(A){var e=this.counters[A];return e||[]},A.prototype.pop=function(A){var e=this;A.forEach((function(A){return e.counters[A].pop()}))},A.prototype.parse=function(A){var e=this,t=A.counterIncrement,n=A.counterReset,r=!0;null!==t&&t.forEach((function(A){var t=e.counters[A.counter];t&&0!==A.increment&&(r=!1,t.length||t.push(1),t[Math.max(0,t.length-1)]+=A.increment)}));var o=[];return r&&n.forEach((function(A){var t=e.counters[A.counter];o.push(A.counter),t||(t=e.counters[A.counter]=[]),t.push(A.reset)})),o},A}(),jr={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Yr={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},qr={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},$r={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Ao=function(A,e,t,n,r,o){return A<e||A>t?lo(A,r,o.length>0):n.integers.reduce((function(e,t,r){for(;A>=t;)A-=t,e+=n.values[r];return e}),"")+o},eo=function(A,e,t,n){var r="";do{t||A--,r=n(A)+r,A/=e}while(A*e>=e);return r},to=function(A,e,t,n,r){var o=t-e+1;return(A<0?"-":"")+(eo(Math.abs(A),o,n,(function(A){return d(Math.floor(A%o)+e)}))+r)},no=function(A,e,t){void 0===t&&(t=". ");var n=e.length;return eo(Math.abs(A),n,!1,(function(A){return e[Math.floor(A%n)]}))+t},ro=function(A,e,t,n,r,o){if(A<-9999||A>9999)return lo(A,4,r.length>0);var i=Math.abs(A),a=r;if(0===i)return e[0]+a;for(var s=0;i>0&&s<=4;s++){var l=i%10;0===l&&gn(o,1)&&""!==a?a=e[l]+a:l>1||1===l&&0===s||1===l&&1===s&&gn(o,2)||1===l&&1===s&&gn(o,4)&&A>100||1===l&&s>1&&gn(o,8)?a=e[l]+(s>0?t[s-1]:"")+a:1===l&&s>0&&(a=t[s-1]+a),i=Math.floor(i/10)}return(A<0?n:"")+a},oo="十百千萬",io="拾佰仟萬",ao="マイナス",so="마이너스",lo=function(A,e,t){var n=t?". ":"",r=t?"、":"",o=t?", ":"",i=t?" ":"";switch(e){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var a=to(A,48,57,!0,n);return a.length<4?"0"+a:a;case 4:return no(A,"〇一二三四五六七八九",r);case 6:return Ao(A,1,3999,jr,3,n).toLowerCase();case 7:return Ao(A,1,3999,jr,3,n);case 8:return to(A,945,969,!1,n);case 9:return to(A,97,122,!1,n);case 10:return to(A,65,90,!1,n);case 11:return to(A,1632,1641,!0,n);case 12:case 49:return Ao(A,1,9999,Yr,3,n);case 35:return Ao(A,1,9999,Yr,3,n).toLowerCase();case 13:return to(A,2534,2543,!0,n);case 14:case 30:return to(A,6112,6121,!0,n);case 15:return no(A,"子丑寅卯辰巳午未申酉戌亥",r);case 16:return no(A,"甲乙丙丁戊己庚辛壬癸",r);case 17:case 48:return ro(A,"零一二三四五六七八九",oo,"負",r,14);case 47:return ro(A,"零壹貳參肆伍陸柒捌玖",io,"負",r,15);case 42:return ro(A,"零一二三四五六七八九",oo,"负",r,14);case 41:return ro(A,"零壹贰叁肆伍陆柒捌玖",io,"负",r,15);case 26:return ro(A,"〇一二三四五六七八九","十百千万",ao,r,0);case 25:return ro(A,"零壱弐参四伍六七八九","拾百千万",ao,r,7);case 31:return ro(A,"영일이삼사오육칠팔구","십백천만",so,o,7);case 33:return ro(A,"零一二三四五六七八九","十百千萬",so,o,0);case 32:return ro(A,"零壹貳參四五六七八九","拾百千",so,o,7);case 18:return to(A,2406,2415,!0,n);case 20:return Ao(A,1,19999,$r,3,n);case 21:return to(A,2790,2799,!0,n);case 22:return to(A,2662,2671,!0,n);case 22:return Ao(A,1,10999,qr,3,n);case 23:return no(A,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return no(A,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return to(A,3302,3311,!0,n);case 28:return no(A,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",r);case 29:return no(A,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",r);case 34:return to(A,3792,3801,!0,n);case 37:return to(A,6160,6169,!0,n);case 38:return to(A,4160,4169,!0,n);case 39:return to(A,2918,2927,!0,n);case 40:return to(A,1776,1785,!0,n);case 43:return to(A,3046,3055,!0,n);case 44:return to(A,3174,3183,!0,n);case 45:return to(A,3664,3673,!0,n);case 46:return to(A,3872,3881,!0,n);default:return to(A,48,57,!0,n)}},co="data-html2canvas-ignore",uo=function(){function A(A,e,t){if(this.context=A,this.options=t,this.scrolledElements=[],this.referenceElement=e,this.counters=new Jr,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement,!1)}return A.prototype.toIFrame=function(A,e){var t=this,n=fo(A,e);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var r=A.defaultView.pageXOffset,o=A.defaultView.pageYOffset,s=n.contentWindow,l=s.document,c=po(n).then((function(){return i(t,void 0,void 0,(function(){var A,t;return a(this,(function(r){switch(r.label){case 0:return this.scrolledElements.forEach(Uo),s&&(s.scrollTo(e.left,e.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||s.scrollY===e.top&&s.scrollX===e.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(s.scrollX-e.left,s.scrollY-e.top,0,0))),A=this.options.onclone,void 0===(t=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Bo(l)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"==typeof A?[2,Promise.resolve().then((function(){return A(l,t)})).then((function(){return n}))]:[2,n]}}))}))}));return l.open(),l.write(vo(document.doctype)+"<html></html>"),Co(this.referenceElement.ownerDocument,r,o),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),c},A.prototype.createElementClone=function(A){if(En(A,2),Vr(A))return this.createCanvasClone(A);if(Rr(A))return this.createVideoClone(A);if(Zr(A))return this.createStyleClone(A);var e=A.cloneNode(!1);return Kr(e)&&(Kr(A)&&A.currentSrc&&A.currentSrc!==A.src&&(e.src=A.currentSrc,e.srcset=""),"lazy"===e.loading&&(e.loading="eager")),zr(e)?this.createCustomElementClone(e):e},A.prototype.createCustomElementClone=function(A){var e=document.createElement("html2canvascustomelement");return mo(A.style,e),e},A.prototype.createStyleClone=function(A){try{var e=A.sheet;if(e&&e.cssRules){var t=[].slice.call(e.cssRules,0).reduce((function(A,e){return e&&"string"==typeof e.cssText?A+e.cssText:A}),""),n=A.cloneNode(!1);return n.textContent=t,n}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),"SecurityError"!==A.name)throw A}return A.cloneNode(!1)},A.prototype.createCanvasClone=function(A){var e;if(this.options.inlineImages&&A.ownerDocument){var t=A.ownerDocument.createElement("img");try{return t.src=A.toDataURL(),t}catch(e){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",A)}}var n=A.cloneNode(!1);try{n.width=A.width,n.height=A.height;var r=A.getContext("2d"),o=n.getContext("2d");if(o)if(!this.options.allowTaint&&r)o.putImageData(r.getImageData(0,0,A.width,A.height),0,0);else{var i=null!==(e=A.getContext("webgl2"))&&void 0!==e?e:A.getContext("webgl");if(i){var a=i.getContextAttributes();!1===(null==a?void 0:a.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",A)}o.drawImage(A,0,0)}return n}catch(e){this.context.logger.info("Unable to clone canvas as it is tainted",A)}return n},A.prototype.createVideoClone=function(A){var e=A.ownerDocument.createElement("canvas");e.width=A.offsetWidth,e.height=A.offsetHeight;var t=e.getContext("2d");try{return t&&(t.drawImage(A,0,0,e.width,e.height),this.options.allowTaint||t.getImageData(0,0,e.width,e.height)),e}catch(e){this.context.logger.info("Unable to clone video as it is tainted",A)}var n=A.ownerDocument.createElement("canvas");return n.width=A.offsetWidth,n.height=A.offsetHeight,n},A.prototype.appendChildNode=function(A,e,t){xr(e)&&("SCRIPT"===e.tagName||e.hasAttribute(co)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(e))||this.options.copyStyles&&xr(e)&&Zr(e)||A.appendChild(this.cloneNode(e,t))},A.prototype.cloneChildNodes=function(A,e,t){for(var n=this,r=A.shadowRoot?A.shadowRoot.firstChild:A.firstChild;r;r=r.nextSibling)if(xr(r)&&Xr(r)&&"function"==typeof r.assignedNodes){var o=r.assignedNodes();o.length&&o.forEach((function(A){return n.appendChildNode(e,A,t)}))}else this.appendChildNode(e,r,t)},A.prototype.cloneNode=function(A,e){if(Pr(A))return document.createTextNode(A.data);if(!A.ownerDocument)return A.cloneNode(!1);var t=A.ownerDocument.defaultView;if(t&&xr(A)&&(Hr(A)||Dr(A))){var n=this.createElementClone(A);n.style.transitionProperty="none";var r=t.getComputedStyle(A),o=t.getComputedStyle(A,":before"),i=t.getComputedStyle(A,":after");this.referenceElement===A&&Hr(n)&&(this.clonedReferenceElement=n),kr(n)&&Fo(n);var a=this.counters.parse(new Fn(this.context,r)),s=this.resolvePseudoContent(A,n,o,_n.BEFORE);zr(A)&&(e=!0),Rr(A)||this.cloneChildNodes(A,n,e),s&&n.insertBefore(s,n.firstChild);var l=this.resolvePseudoContent(A,n,i,_n.AFTER);return l&&n.appendChild(l),this.counters.pop(a),(r&&(this.options.copyStyles||Dr(A))&&!Nr(A)||e)&&mo(r,n),0===A.scrollTop&&0===A.scrollLeft||this.scrolledElements.push([n,A.scrollLeft,A.scrollTop]),(Gr(A)||Wr(A))&&(Gr(n)||Wr(n))&&(n.value=A.value),n}return A.cloneNode(!1)},A.prototype.resolvePseudoContent=function(A,e,t,n){var r=this;if(t){var o=t.content,i=e.ownerDocument;if(i&&o&&"none"!==o&&"-moz-alt-content"!==o&&"none"!==t.display){this.counters.parse(new Fn(this.context,t));var a=new In(this.context,t),s=i.createElement("html2canvaspseudoelement");mo(t,s),a.content.forEach((function(e){if(0===e.type)s.appendChild(i.createTextNode(e.value));else if(22===e.type){var t=i.createElement("img");t.src=e.value,t.style.opacity="1",s.appendChild(t)}else if(18===e.type){if("attr"===e.name){var n=e.values.filter(zA);n.length&&s.appendChild(i.createTextNode(A.getAttribute(n[0].value)||""))}else if("counter"===e.name){var o=e.values.filter(qA),l=o[0],c=o[1];if(l&&zA(l)){var u=r.counters.getCounterValue(l.value),d=c&&zA(c)?xt.parse(r.context,c.value):3;s.appendChild(i.createTextNode(lo(u,d,!1)))}}else if("counters"===e.name){var g=e.values.filter(qA),f=(l=g[0],g[1]);c=g[2];if(l&&zA(l)){var h=r.counters.getCounterValues(l.value),B=c&&zA(c)?xt.parse(r.context,c.value):3,p=f&&0===f.type?f.value:"",w=h.map((function(A){return lo(A,B,!1)})).join(p);s.appendChild(i.createTextNode(w))}}}else if(20===e.type)switch(e.value){case"open-quote":s.appendChild(i.createTextNode(mn(a.quotes,r.quoteDepth++,!0)));break;case"close-quote":s.appendChild(i.createTextNode(mn(a.quotes,--r.quoteDepth,!1)));break;default:s.appendChild(i.createTextNode(e.value))}})),s.className=Qo+" "+yo;var l=n===_n.BEFORE?" "+Qo:" "+yo;return Dr(e)?e.className.baseValue+=l:e.className+=l,s}}},A.destroy=function(A){return!!A.parentNode&&(A.parentNode.removeChild(A),!0)},A}();!function(A){A[A.BEFORE=0]="BEFORE",A[A.AFTER=1]="AFTER"}(_n||(_n={}));var go,fo=function(A,e){var t=A.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(co,"true"),A.body.appendChild(t),t},ho=function(A){return new Promise((function(e){A.complete?e():A.src?(A.onload=e,A.onerror=e):e()}))},Bo=function(A){return Promise.all([].slice.call(A.images,0).map(ho))},po=function(A){return new Promise((function(e,t){var n=A.contentWindow;if(!n)return t("No window assigned for iframe");var r=n.document;n.onload=A.onload=function(){n.onload=A.onload=null;var t=setInterval((function(){r.body.childNodes.length>0&&"complete"===r.readyState&&(clearInterval(t),e(A))}),50)}}))},wo=["all","d","content"],mo=function(A,e){for(var t=A.length-1;t>=0;t--){var n=A.item(t);-1===wo.indexOf(n)&&e.style.setProperty(n,A.getPropertyValue(n))}return e},vo=function(A){var e="";return A&&(e+="<!DOCTYPE ",A.name&&(e+=A.name),A.internalSubset&&(e+=A.internalSubset),A.publicId&&(e+='"'+A.publicId+'"'),A.systemId&&(e+='"'+A.systemId+'"'),e+=">"),e},Co=function(A,e,t){A&&A.defaultView&&(e!==A.defaultView.pageXOffset||t!==A.defaultView.pageYOffset)&&A.defaultView.scrollTo(e,t)},Uo=function(A){var e=A[0],t=A[1],n=A[2];e.scrollLeft=t,e.scrollTop=n},Qo="___html2canvas___pseudoelement_before",yo="___html2canvas___pseudoelement_after",Io='{\n    content: "" !important;\n    display: none !important;\n}',Fo=function(A){bo(A,"."+Qo+":before"+Io+"\n         ."+yo+":after"+Io)},bo=function(A,e){var t=A.ownerDocument;if(t){var n=t.createElement("style");n.textContent=e,A.appendChild(n)}},Eo=function(){function A(){}return A.getOrigin=function(e){var t=A._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},A.isSameOrigin=function(e){return A.getOrigin(e)===A._origin},A.setContext=function(e){A._link=e.document.createElement("a"),A._origin=A.getOrigin(e.location.href)},A._origin="about:blank",A}(),To=function(){function A(A,e){this.context=A,this._options=e,this._cache={}}return A.prototype.addImage=function(A){var e=Promise.resolve();return this.has(A)?e:Oo(A)||Ho(A)?((this._cache[A]=this.loadImage(A)).catch((function(){})),e):e},A.prototype.match=function(A){return this._cache[A]},A.prototype.loadImage=function(A){return i(this,void 0,void 0,(function(){var e,t,n,r,o=this;return a(this,(function(i){switch(i.label){case 0:return e=Eo.isSameOrigin(A),t=!Do(A)&&!0===this._options.useCORS&&qn.SUPPORT_CORS_IMAGES&&!e,n=!Do(A)&&!e&&!Oo(A)&&"string"==typeof this._options.proxy&&qn.SUPPORT_CORS_XHR&&!t,e||!1!==this._options.allowTaint||Do(A)||Oo(A)||n||t?(r=A,n?[4,this.proxy(r)]:[3,2]):[2];case 1:r=i.sent(),i.label=2;case 2:return this.context.logger.debug("Added image "+A.substring(0,256)),[4,new Promise((function(A,e){var n=new Image;n.onload=function(){return A(n)},n.onerror=e,(Lo(r)||t)&&(n.crossOrigin="anonymous"),n.src=r,!0===n.complete&&setTimeout((function(){return A(n)}),500),o._options.imageTimeout>0&&setTimeout((function(){return e("Timed out ("+o._options.imageTimeout+"ms) loading image")}),o._options.imageTimeout)}))];case 3:return[2,i.sent()]}}))}))},A.prototype.has=function(A){return void 0!==this._cache[A]},A.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},A.prototype.proxy=function(A){var e=this,t=this._options.proxy;if(!t)throw new Error("No proxy defined");var n=A.substring(0,256);return new Promise((function(r,o){var i=qn.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(200===a.status)if("text"===i)r(a.response);else{var A=new FileReader;A.addEventListener("load",(function(){return r(A.result)}),!1),A.addEventListener("error",(function(A){return o(A)}),!1),A.readAsDataURL(a.response)}else o("Failed to proxy resource "+n+" with status code "+a.status)},a.onerror=o;var s=t.indexOf("?")>-1?"&":"?";if(a.open("GET",""+t+s+"url="+encodeURIComponent(A)+"&responseType="+i),"text"!==i&&a instanceof XMLHttpRequest&&(a.responseType=i),e._options.imageTimeout){var l=e._options.imageTimeout;a.timeout=l,a.ontimeout=function(){return o("Timed out ("+l+"ms) proxying "+n)}}a.send()}))},A}(),So=/^data:image\/svg\+xml/i,Po=/^data:image\/.*;base64,/i,xo=/^data:image\/.*/i,Ho=function(A){return qn.SUPPORT_SVG_DRAWING||!Mo(A)},Do=function(A){return xo.test(A)},Lo=function(A){return Po.test(A)},Oo=function(A){return"blob"===A.substr(0,4)},Mo=function(A){return"svg"===A.substr(-3).toLowerCase()||So.test(A)},_o=function(){function A(A,e){this.type=0,this.x=A,this.y=e}return A.prototype.add=function(e,t){return new A(this.x+e,this.y+t)},A}(),ko=function(A,e,t){return new _o(A.x+(e.x-A.x)*t,A.y+(e.y-A.y)*t)},Vo=function(){function A(A,e,t,n){this.type=1,this.start=A,this.startControl=e,this.endControl=t,this.end=n}return A.prototype.subdivide=function(e,t){var n=ko(this.start,this.startControl,e),r=ko(this.startControl,this.endControl,e),o=ko(this.endControl,this.end,e),i=ko(n,r,e),a=ko(r,o,e),s=ko(i,a,e);return t?new A(this.start,n,i,s):new A(s,a,o,this.end)},A.prototype.add=function(e,t){return new A(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},A.prototype.reverse=function(){return new A(this.end,this.endControl,this.startControl,this.start)},A}(),Ro=function(A){return 1===A.type},Ko=function(A){var e=A.styles,t=A.bounds,n=ae(e.borderTopLeftRadius,t.width,t.height),r=n[0],o=n[1],i=ae(e.borderTopRightRadius,t.width,t.height),a=i[0],s=i[1],l=ae(e.borderBottomRightRadius,t.width,t.height),c=l[0],u=l[1],d=ae(e.borderBottomLeftRadius,t.width,t.height),g=d[0],f=d[1],h=[];h.push((r+a)/t.width),h.push((g+c)/t.width),h.push((o+f)/t.height),h.push((s+u)/t.height);var B=Math.max.apply(Math,h);B>1&&(r/=B,o/=B,a/=B,s/=B,c/=B,u/=B,g/=B,f/=B);var p=t.width-a,w=t.height-u,m=t.width-c,v=t.height-f,C=e.borderTopWidth,U=e.borderRightWidth,Q=e.borderBottomWidth,y=e.borderLeftWidth,I=se(e.paddingTop,A.bounds.width),F=se(e.paddingRight,A.bounds.width),b=se(e.paddingBottom,A.bounds.width),E=se(e.paddingLeft,A.bounds.width);this.topLeftBorderDoubleOuterBox=r>0||o>0?No(t.left+y/3,t.top+C/3,r-y/3,o-C/3,go.TOP_LEFT):new _o(t.left+y/3,t.top+C/3),this.topRightBorderDoubleOuterBox=r>0||o>0?No(t.left+p,t.top+C/3,a-U/3,s-C/3,go.TOP_RIGHT):new _o(t.left+t.width-U/3,t.top+C/3),this.bottomRightBorderDoubleOuterBox=c>0||u>0?No(t.left+m,t.top+w,c-U/3,u-Q/3,go.BOTTOM_RIGHT):new _o(t.left+t.width-U/3,t.top+t.height-Q/3),this.bottomLeftBorderDoubleOuterBox=g>0||f>0?No(t.left+y/3,t.top+v,g-y/3,f-Q/3,go.BOTTOM_LEFT):new _o(t.left+y/3,t.top+t.height-Q/3),this.topLeftBorderDoubleInnerBox=r>0||o>0?No(t.left+2*y/3,t.top+2*C/3,r-2*y/3,o-2*C/3,go.TOP_LEFT):new _o(t.left+2*y/3,t.top+2*C/3),this.topRightBorderDoubleInnerBox=r>0||o>0?No(t.left+p,t.top+2*C/3,a-2*U/3,s-2*C/3,go.TOP_RIGHT):new _o(t.left+t.width-2*U/3,t.top+2*C/3),this.bottomRightBorderDoubleInnerBox=c>0||u>0?No(t.left+m,t.top+w,c-2*U/3,u-2*Q/3,go.BOTTOM_RIGHT):new _o(t.left+t.width-2*U/3,t.top+t.height-2*Q/3),this.bottomLeftBorderDoubleInnerBox=g>0||f>0?No(t.left+2*y/3,t.top+v,g-2*y/3,f-2*Q/3,go.BOTTOM_LEFT):new _o(t.left+2*y/3,t.top+t.height-2*Q/3),this.topLeftBorderStroke=r>0||o>0?No(t.left+y/2,t.top+C/2,r-y/2,o-C/2,go.TOP_LEFT):new _o(t.left+y/2,t.top+C/2),this.topRightBorderStroke=r>0||o>0?No(t.left+p,t.top+C/2,a-U/2,s-C/2,go.TOP_RIGHT):new _o(t.left+t.width-U/2,t.top+C/2),this.bottomRightBorderStroke=c>0||u>0?No(t.left+m,t.top+w,c-U/2,u-Q/2,go.BOTTOM_RIGHT):new _o(t.left+t.width-U/2,t.top+t.height-Q/2),this.bottomLeftBorderStroke=g>0||f>0?No(t.left+y/2,t.top+v,g-y/2,f-Q/2,go.BOTTOM_LEFT):new _o(t.left+y/2,t.top+t.height-Q/2),this.topLeftBorderBox=r>0||o>0?No(t.left,t.top,r,o,go.TOP_LEFT):new _o(t.left,t.top),this.topRightBorderBox=a>0||s>0?No(t.left+p,t.top,a,s,go.TOP_RIGHT):new _o(t.left+t.width,t.top),this.bottomRightBorderBox=c>0||u>0?No(t.left+m,t.top+w,c,u,go.BOTTOM_RIGHT):new _o(t.left+t.width,t.top+t.height),this.bottomLeftBorderBox=g>0||f>0?No(t.left,t.top+v,g,f,go.BOTTOM_LEFT):new _o(t.left,t.top+t.height),this.topLeftPaddingBox=r>0||o>0?No(t.left+y,t.top+C,Math.max(0,r-y),Math.max(0,o-C),go.TOP_LEFT):new _o(t.left+y,t.top+C),this.topRightPaddingBox=a>0||s>0?No(t.left+Math.min(p,t.width-U),t.top+C,p>t.width+U?0:Math.max(0,a-U),Math.max(0,s-C),go.TOP_RIGHT):new _o(t.left+t.width-U,t.top+C),this.bottomRightPaddingBox=c>0||u>0?No(t.left+Math.min(m,t.width-y),t.top+Math.min(w,t.height-Q),Math.max(0,c-U),Math.max(0,u-Q),go.BOTTOM_RIGHT):new _o(t.left+t.width-U,t.top+t.height-Q),this.bottomLeftPaddingBox=g>0||f>0?No(t.left+y,t.top+Math.min(v,t.height-Q),Math.max(0,g-y),Math.max(0,f-Q),go.BOTTOM_LEFT):new _o(t.left+y,t.top+t.height-Q),this.topLeftContentBox=r>0||o>0?No(t.left+y+E,t.top+C+I,Math.max(0,r-(y+E)),Math.max(0,o-(C+I)),go.TOP_LEFT):new _o(t.left+y+E,t.top+C+I),this.topRightContentBox=a>0||s>0?No(t.left+Math.min(p,t.width+y+E),t.top+C+I,p>t.width+y+E?0:a-y+E,s-(C+I),go.TOP_RIGHT):new _o(t.left+t.width-(U+F),t.top+C+I),this.bottomRightContentBox=c>0||u>0?No(t.left+Math.min(m,t.width-(y+E)),t.top+Math.min(w,t.height+C+I),Math.max(0,c-(U+F)),u-(Q+b),go.BOTTOM_RIGHT):new _o(t.left+t.width-(U+F),t.top+t.height-(Q+b)),this.bottomLeftContentBox=g>0||f>0?No(t.left+y+E,t.top+v,Math.max(0,g-(y+E)),f-(Q+b),go.BOTTOM_LEFT):new _o(t.left+y+E,t.top+t.height-(Q+b))};!function(A){A[A.TOP_LEFT=0]="TOP_LEFT",A[A.TOP_RIGHT=1]="TOP_RIGHT",A[A.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",A[A.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(go||(go={}));var No=function(A,e,t,n,r){var o=(Math.sqrt(2)-1)/3*4,i=t*o,a=n*o,s=A+t,l=e+n;switch(r){case go.TOP_LEFT:return new Vo(new _o(A,l),new _o(A,l-a),new _o(s-i,e),new _o(s,e));case go.TOP_RIGHT:return new Vo(new _o(A,e),new _o(A+i,e),new _o(s,l-a),new _o(s,l));case go.BOTTOM_RIGHT:return new Vo(new _o(s,e),new _o(s,e+a),new _o(A+i,l),new _o(A,l));case go.BOTTOM_LEFT:default:return new Vo(new _o(s,l),new _o(s-i,l),new _o(A,e+a),new _o(A,e))}},Zo=function(A){return[A.topLeftBorderBox,A.topRightBorderBox,A.bottomRightBorderBox,A.bottomLeftBorderBox]},Go=function(A){return[A.topLeftPaddingBox,A.topRightPaddingBox,A.bottomRightPaddingBox,A.bottomLeftPaddingBox]},Wo=function(A,e,t){this.offsetX=A,this.offsetY=e,this.matrix=t,this.type=0,this.target=6},Xo=function(A,e){this.path=A,this.target=e,this.type=1},zo=function(A){this.opacity=A,this.type=2,this.target=6},Jo=function(A){return 1===A.type},jo=function(A,e){return A.length===e.length&&A.some((function(A,t){return A===e[t]}))},Yo=function(A){this.element=A,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},qo=function(){function A(A,e){if(this.container=A,this.parent=e,this.effects=[],this.curves=new Ko(this.container),this.container.styles.opacity<1&&this.effects.push(new zo(this.container.styles.opacity)),null!==this.container.styles.transform){var t=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,r=this.container.styles.transform;this.effects.push(new Wo(t,n,r))}if(0!==this.container.styles.overflowX){var o=Zo(this.curves),i=Go(this.curves);jo(o,i)?this.effects.push(new Xo(o,6)):(this.effects.push(new Xo(o,2)),this.effects.push(new Xo(i,4)))}}return A.prototype.getEffects=function(A){for(var e=-1===[2,3].indexOf(this.container.styles.position),t=this.parent,n=this.effects.slice(0);t;){var r=t.effects.filter((function(A){return!Jo(A)}));if(e||0!==t.container.styles.position||!t.parent){if(n.unshift.apply(n,r),e=-1===[2,3].indexOf(t.container.styles.position),0!==t.container.styles.overflowX){var o=Zo(t.curves),i=Go(t.curves);jo(o,i)||n.unshift(new Xo(i,6))}}else n.unshift.apply(n,r);t=t.parent}return n.filter((function(e){return gn(e.target,A)}))},A}(),$o=function(A,e,t,n){A.container.elements.forEach((function(r){var o=gn(r.flags,4),i=gn(r.flags,2),a=new qo(r,A);gn(r.styles.display,2048)&&n.push(a);var s=gn(r.flags,8)?[]:n;if(o||i){var l=o||r.styles.isPositioned()?t:e,c=new Yo(a);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var u=r.styles.zIndex.order;if(u<0){var d=0;l.negativeZIndex.some((function(A,e){return u>A.element.container.styles.zIndex.order?(d=e,!1):d>0})),l.negativeZIndex.splice(d,0,c)}else if(u>0){var g=0;l.positiveZIndex.some((function(A,e){return u>=A.element.container.styles.zIndex.order?(g=e+1,!1):g>0})),l.positiveZIndex.splice(g,0,c)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else r.styles.isFloating()?l.nonPositionedFloats.push(c):l.nonPositionedInlineLevel.push(c);$o(a,c,o?c:t,s)}else r.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),$o(a,e,t,s);gn(r.flags,8)&&Ai(r,s)}))},Ai=function(A,e){for(var t=A instanceof fr?A.start:1,n=A instanceof fr&&A.reversed,r=0;r<e.length;r++){var o=e[r];o.container instanceof gr&&"number"==typeof o.container.value&&0!==o.container.value&&(t=o.container.value),o.listValue=lo(t,o.container.styles.listStyleType,!0),t+=n?-1:1}},ei=function(A,e){switch(e){case 0:return ni(A.topLeftBorderBox,A.topLeftPaddingBox,A.topRightBorderBox,A.topRightPaddingBox);case 1:return ni(A.topRightBorderBox,A.topRightPaddingBox,A.bottomRightBorderBox,A.bottomRightPaddingBox);case 2:return ni(A.bottomRightBorderBox,A.bottomRightPaddingBox,A.bottomLeftBorderBox,A.bottomLeftPaddingBox);default:return ni(A.bottomLeftBorderBox,A.bottomLeftPaddingBox,A.topLeftBorderBox,A.topLeftPaddingBox)}},ti=function(A,e){var t=[];return Ro(A)?t.push(A.subdivide(.5,!1)):t.push(A),Ro(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},ni=function(A,e,t,n){var r=[];return Ro(A)?r.push(A.subdivide(.5,!1)):r.push(A),Ro(t)?r.push(t.subdivide(.5,!0)):r.push(t),Ro(n)?r.push(n.subdivide(.5,!0).reverse()):r.push(n),Ro(e)?r.push(e.subdivide(.5,!1).reverse()):r.push(e),r},ri=function(A){var e=A.bounds,t=A.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},oi=function(A){var e=A.styles,t=A.bounds,n=se(e.paddingLeft,t.width),r=se(e.paddingRight,t.width),o=se(e.paddingTop,t.width),i=se(e.paddingBottom,t.width);return t.add(n+e.borderLeftWidth,o+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+r),-(e.borderTopWidth+e.borderBottomWidth+o+i))},ii=function(A,e,t){var n=function(A,e){return 0===A?e.bounds:2===A?oi(e):ri(e)}(ci(A.styles.backgroundOrigin,e),A),r=function(A,e){return 0===A?e.bounds:2===A?oi(e):ri(e)}(ci(A.styles.backgroundClip,e),A),o=li(ci(A.styles.backgroundSize,e),t,n),i=o[0],a=o[1],s=ae(ci(A.styles.backgroundPosition,e),n.width-i,n.height-a);return[ui(ci(A.styles.backgroundRepeat,e),s,o,n,r),Math.round(n.left+s[0]),Math.round(n.top+s[1]),i,a]},ai=function(A){return zA(A)&&A.value===Ze.AUTO},si=function(A){return"number"==typeof A},li=function(A,e,t){var n=e[0],r=e[1],o=e[2],i=A[0],a=A[1];if(!i)return[0,0];if(te(i)&&a&&te(a))return[se(i,t.width),se(a,t.height)];var s=si(o);if(zA(i)&&(i.value===Ze.CONTAIN||i.value===Ze.COVER))return si(o)?t.width/t.height<o!=(i.value===Ze.COVER)?[t.width,t.width/o]:[t.height*o,t.height]:[t.width,t.height];var l=si(n),c=si(r),u=l||c;if(ai(i)&&(!a||ai(a)))return l&&c?[n,r]:s||u?u&&s?[l?n:r*o,c?r:n/o]:[l?n:t.width,c?r:t.height]:[t.width,t.height];if(s){var d=0,g=0;return te(i)?d=se(i,t.width):te(a)&&(g=se(a,t.height)),ai(i)?d=g*o:a&&!ai(a)||(g=d/o),[d,g]}var f=null,h=null;if(te(i)?f=se(i,t.width):a&&te(a)&&(h=se(a,t.height)),null===f||a&&!ai(a)||(h=l&&c?f/n*r:t.height),null!==h&&ai(i)&&(f=l&&c?h/r*n:t.width),null!==f&&null!==h)return[f,h];throw new Error("Unable to calculate background-size for element")},ci=function(A,e){var t=A[e];return void 0===t?A[0]:t},ui=function(A,e,t,n,r){var o=e[0],i=e[1],a=t[0],s=t[1];switch(A){case 2:return[new _o(Math.round(n.left),Math.round(n.top+i)),new _o(Math.round(n.left+n.width),Math.round(n.top+i)),new _o(Math.round(n.left+n.width),Math.round(s+n.top+i)),new _o(Math.round(n.left),Math.round(s+n.top+i))];case 3:return[new _o(Math.round(n.left+o),Math.round(n.top)),new _o(Math.round(n.left+o+a),Math.round(n.top)),new _o(Math.round(n.left+o+a),Math.round(n.height+n.top)),new _o(Math.round(n.left+o),Math.round(n.height+n.top))];case 1:return[new _o(Math.round(n.left+o),Math.round(n.top+i)),new _o(Math.round(n.left+o+a),Math.round(n.top+i)),new _o(Math.round(n.left+o+a),Math.round(n.top+i+s)),new _o(Math.round(n.left+o),Math.round(n.top+i+s))];default:return[new _o(Math.round(r.left),Math.round(r.top)),new _o(Math.round(r.left+r.width),Math.round(r.top)),new _o(Math.round(r.left+r.width),Math.round(r.height+r.top)),new _o(Math.round(r.left),Math.round(r.height+r.top))]}},di="Hidden Text",gi=function(){function A(A){this._data={},this._document=A}return A.prototype.parseMetrics=function(A,e){var t=this._document.createElement("div"),n=this._document.createElement("img"),r=this._document.createElement("span"),o=this._document.body;t.style.visibility="hidden",t.style.fontFamily=A,t.style.fontSize=e,t.style.margin="0",t.style.padding="0",t.style.whiteSpace="nowrap",o.appendChild(t),n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",r.style.fontFamily=A,r.style.fontSize=e,r.style.margin="0",r.style.padding="0",r.appendChild(this._document.createTextNode(di)),t.appendChild(r),t.appendChild(n);var i=n.offsetTop-r.offsetTop+2;t.removeChild(r),t.appendChild(this._document.createTextNode(di)),t.style.lineHeight="normal",n.style.verticalAlign="super";var a=n.offsetTop-t.offsetTop+2;return o.removeChild(t),{baseline:i,middle:a}},A.prototype.getMetrics=function(A,e){var t=A+" "+e;return void 0===this._data[t]&&(this._data[t]=this.parseMetrics(A,e)),this._data[t]},A}(),fi=function(A,e){this.context=A,this.options=e},hi=function(A){function e(e,t){var n=A.call(this,e,t)||this;return n._activeEffects=[],n.canvas=t.canvas?t.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),t.canvas||(n.canvas.width=Math.floor(t.width*t.scale),n.canvas.height=Math.floor(t.height*t.scale),n.canvas.style.width=t.width+"px",n.canvas.style.height=t.height+"px"),n.fontMetrics=new gi(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-t.x,-t.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+t.width+"x"+t.height+") with scale "+t.scale),n}return r(e,A),e.prototype.applyEffects=function(A){for(var e=this;this._activeEffects.length;)this.popEffect();A.forEach((function(A){return e.applyEffect(A)}))},e.prototype.applyEffect=function(A){this.ctx.save(),function(A){return 2===A.type}(A)&&(this.ctx.globalAlpha=A.opacity),function(A){return 0===A.type}(A)&&(this.ctx.translate(A.offsetX,A.offsetY),this.ctx.transform(A.matrix[0],A.matrix[1],A.matrix[2],A.matrix[3],A.matrix[4],A.matrix[5]),this.ctx.translate(-A.offsetX,-A.offsetY)),Jo(A)&&(this.path(A.path),this.ctx.clip()),this._activeEffects.push(A)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(A){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return A.element.container.styles.isVisible()?[4,this.renderStackContent(A)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.renderNode=function(A){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return gn(A.container.flags,16),A.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(A)]:[3,3];case 1:return e.sent(),[4,this.renderNodeContent(A)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},e.prototype.renderTextWithLetterSpacing=function(A,e,t){var n=this;0===e?this.ctx.fillText(A.text,A.bounds.left,A.bounds.top+t):tr(A.text).reduce((function(e,r){return n.ctx.fillText(r,e,A.bounds.top+t),e+n.ctx.measureText(r).width}),A.bounds.left)},e.prototype.createFontStyle=function(A){var e=A.fontVariant.filter((function(A){return"normal"===A||"small-caps"===A})).join(""),t=vi(A.fontFamily).join(", "),n=WA(A.fontSize)?""+A.fontSize.number+A.fontSize.unit:A.fontSize.number+"px";return[[A.fontStyle,e,A.fontWeight,n,t].join(" "),t,n]},e.prototype.renderTextNode=function(A,e){return i(this,void 0,void 0,(function(){var t,n,r,o,i,s,l,c,u=this;return a(this,(function(a){return t=this.createFontStyle(e),n=t[0],r=t[1],o=t[2],this.ctx.font=n,this.ctx.direction=1===e.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",i=this.fontMetrics.getMetrics(r,o),s=i.baseline,l=i.middle,c=e.paintOrder,A.textBounds.forEach((function(A){c.forEach((function(t){switch(t){case 0:u.ctx.fillStyle=pe(e.color),u.renderTextWithLetterSpacing(A,e.letterSpacing,s);var n=e.textShadow;n.length&&A.text.trim().length&&(n.slice(0).reverse().forEach((function(t){u.ctx.shadowColor=pe(t.color),u.ctx.shadowOffsetX=t.offsetX.number*u.options.scale,u.ctx.shadowOffsetY=t.offsetY.number*u.options.scale,u.ctx.shadowBlur=t.blur.number,u.renderTextWithLetterSpacing(A,e.letterSpacing,s)})),u.ctx.shadowColor="",u.ctx.shadowOffsetX=0,u.ctx.shadowOffsetY=0,u.ctx.shadowBlur=0),e.textDecorationLine.length&&(u.ctx.fillStyle=pe(e.textDecorationColor||e.color),e.textDecorationLine.forEach((function(e){switch(e){case 1:u.ctx.fillRect(A.bounds.left,Math.round(A.bounds.top+s),A.bounds.width,1);break;case 2:u.ctx.fillRect(A.bounds.left,Math.round(A.bounds.top),A.bounds.width,1);break;case 3:u.ctx.fillRect(A.bounds.left,Math.ceil(A.bounds.top+l),A.bounds.width,1)}})));break;case 1:e.webkitTextStrokeWidth&&A.text.trim().length&&(u.ctx.strokeStyle=pe(e.webkitTextStrokeColor),u.ctx.lineWidth=e.webkitTextStrokeWidth,u.ctx.lineJoin=window.chrome?"miter":"round",u.ctx.strokeText(A.text,A.bounds.left,A.bounds.top+s)),u.ctx.strokeStyle="",u.ctx.lineWidth=0,u.ctx.lineJoin="miter"}}))})),[2]}))}))},e.prototype.renderReplacedElement=function(A,e,t){if(t&&A.intrinsicWidth>0&&A.intrinsicHeight>0){var n=oi(A),r=Go(e);this.path(r),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(t,0,0,A.intrinsicWidth,A.intrinsicHeight,n.left,n.top,n.width,n.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(A){return i(this,void 0,void 0,(function(){var t,n,r,o,i,s,c,u,d,g,f,h,B,p,w,m,v,C;return a(this,(function(a){switch(a.label){case 0:this.applyEffects(A.getEffects(4)),t=A.container,n=A.curves,r=t.styles,o=0,i=t.textNodes,a.label=1;case 1:return o<i.length?(s=i[o],[4,this.renderTextNode(s,r)]):[3,4];case 2:a.sent(),a.label=3;case 3:return o++,[3,1];case 4:if(!(t instanceof cr))return[3,8];a.label=5;case 5:return a.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return w=a.sent(),this.renderReplacedElement(t,n,w),[3,8];case 7:return a.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof ur&&this.renderReplacedElement(t,n,t.canvas),!(t instanceof dr))return[3,12];a.label=9;case 9:return a.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return w=a.sent(),this.renderReplacedElement(t,n,w),[3,12];case 11:return a.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof yr&&t.tree?[4,new e(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}).render(t.tree)]:[3,14];case 13:c=a.sent(),t.width&&t.height&&this.ctx.drawImage(c,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),a.label=14;case 14:if(t instanceof Cr&&(u=Math.min(t.bounds.width,t.bounds.height),t.type===pr?t.checked&&(this.ctx.save(),this.path([new _o(t.bounds.left+.39363*u,t.bounds.top+.79*u),new _o(t.bounds.left+.16*u,t.bounds.top+.5549*u),new _o(t.bounds.left+.27347*u,t.bounds.top+.44071*u),new _o(t.bounds.left+.39694*u,t.bounds.top+.5649*u),new _o(t.bounds.left+.72983*u,t.bounds.top+.23*u),new _o(t.bounds.left+.84*u,t.bounds.top+.34085*u),new _o(t.bounds.left+.39363*u,t.bounds.top+.79*u)]),this.ctx.fillStyle=pe(vr),this.ctx.fill(),this.ctx.restore()):t.type===wr&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+u/2,t.bounds.top+u/2,u/4,0,2*Math.PI,!0),this.ctx.fillStyle=pe(vr),this.ctx.fill(),this.ctx.restore())),Bi(t)&&t.value.length){switch(d=this.createFontStyle(r),v=d[0],g=d[1],f=this.fontMetrics.getMetrics(v,g).baseline,this.ctx.font=v,this.ctx.fillStyle=pe(r.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=wi(t.styles.textAlign),C=oi(t),h=0,t.styles.textAlign){case 1:h+=C.width/2;break;case 2:h+=C.width}B=C.add(h,0,0,-C.height/2+1),this.ctx.save(),this.path([new _o(C.left,C.top),new _o(C.left+C.width,C.top),new _o(C.left+C.width,C.top+C.height),new _o(C.left,C.top+C.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new $n(t.value,B),r.letterSpacing,f),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!gn(t.styles.display,2048))return[3,20];if(null===t.styles.listStyleImage)return[3,19];if(0!==(p=t.styles.listStyleImage).type)return[3,18];w=void 0,m=p.url,a.label=15;case 15:return a.trys.push([15,17,,18]),[4,this.context.cache.match(m)];case 16:return w=a.sent(),this.ctx.drawImage(w,t.bounds.left-(w.width+10),t.bounds.top),[3,18];case 17:return a.sent(),this.context.logger.error("Error loading list-style-image "+m),[3,18];case 18:return[3,20];case 19:A.listValue&&-1!==t.styles.listStyleType&&(v=this.createFontStyle(r)[0],this.ctx.font=v,this.ctx.fillStyle=pe(r.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",C=new l(t.bounds.left,t.bounds.top+se(t.styles.paddingTop,t.bounds.width),t.bounds.width,Tt(r.lineHeight,r.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new $n(A.listValue,C),r.letterSpacing,Tt(r.lineHeight,r.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),a.label=20;case 20:return[2]}}))}))},e.prototype.renderStackContent=function(A){return i(this,void 0,void 0,(function(){var e,t,n,r,o,i,s,l,c,u,d,g,f,h,B;return a(this,(function(a){switch(a.label){case 0:return gn(A.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(A.element)];case 1:a.sent(),e=0,t=A.negativeZIndex,a.label=2;case 2:return e<t.length?(B=t[e],[4,this.renderStack(B)]):[3,5];case 3:a.sent(),a.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(A.element)];case 6:a.sent(),n=0,r=A.nonInlineLevel,a.label=7;case 7:return n<r.length?(B=r[n],[4,this.renderNode(B)]):[3,10];case 8:a.sent(),a.label=9;case 9:return n++,[3,7];case 10:o=0,i=A.nonPositionedFloats,a.label=11;case 11:return o<i.length?(B=i[o],[4,this.renderStack(B)]):[3,14];case 12:a.sent(),a.label=13;case 13:return o++,[3,11];case 14:s=0,l=A.nonPositionedInlineLevel,a.label=15;case 15:return s<l.length?(B=l[s],[4,this.renderStack(B)]):[3,18];case 16:a.sent(),a.label=17;case 17:return s++,[3,15];case 18:c=0,u=A.inlineLevel,a.label=19;case 19:return c<u.length?(B=u[c],[4,this.renderNode(B)]):[3,22];case 20:a.sent(),a.label=21;case 21:return c++,[3,19];case 22:d=0,g=A.zeroOrAutoZIndexOrTransformedOrOpacity,a.label=23;case 23:return d<g.length?(B=g[d],[4,this.renderStack(B)]):[3,26];case 24:a.sent(),a.label=25;case 25:return d++,[3,23];case 26:f=0,h=A.positiveZIndex,a.label=27;case 27:return f<h.length?(B=h[f],[4,this.renderStack(B)]):[3,30];case 28:a.sent(),a.label=29;case 29:return f++,[3,27];case 30:return[2]}}))}))},e.prototype.mask=function(A){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(A.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(A){this.ctx.beginPath(),this.formatPath(A),this.ctx.closePath()},e.prototype.formatPath=function(A){var e=this;A.forEach((function(A,t){var n=Ro(A)?A.start:A;0===t?e.ctx.moveTo(n.x,n.y):e.ctx.lineTo(n.x,n.y),Ro(A)&&e.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)}))},e.prototype.renderRepeat=function(A,e,t,n){this.path(A),this.ctx.fillStyle=e,this.ctx.translate(t,n),this.ctx.fill(),this.ctx.translate(-t,-n)},e.prototype.resizeImage=function(A,e,t){var n;if(A.width===e&&A.height===t)return A;var r=(null!==(n=this.canvas.ownerDocument)&&void 0!==n?n:document).createElement("canvas");return r.width=Math.max(1,e),r.height=Math.max(1,t),r.getContext("2d").drawImage(A,0,0,A.width,A.height,0,0,e,t),r},e.prototype.renderBackgroundImage=function(A){return i(this,void 0,void 0,(function(){var e,t,n,r,o,i;return a(this,(function(s){switch(s.label){case 0:e=A.styles.backgroundImage.length-1,t=function(t){var r,o,i,s,l,c,u,d,g,f,h,B,p,w,m,v,C,U,Q,y,I,F,b,E,T,S,P,x,H,D,L;return a(this,(function(a){switch(a.label){case 0:if(0!==t.type)return[3,5];r=void 0,o=t.url,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n.context.cache.match(o)];case 2:return r=a.sent(),[3,4];case 3:return a.sent(),n.context.logger.error("Error loading background-image "+o),[3,4];case 4:return r&&(i=ii(A,e,[r.width,r.height,r.width/r.height]),v=i[0],F=i[1],b=i[2],Q=i[3],y=i[4],w=n.ctx.createPattern(n.resizeImage(r,Q,y),"repeat"),n.renderRepeat(v,w,F,b)),[3,6];case 5:1===t.type?(s=ii(A,e,[null,null,null]),v=s[0],F=s[1],b=s[2],Q=s[3],y=s[4],l=Se(t.angle,Q,y),c=l[0],u=l[1],d=l[2],g=l[3],f=l[4],(h=document.createElement("canvas")).width=Q,h.height=y,B=h.getContext("2d"),p=B.createLinearGradient(u,g,d,f),Te(t.stops,c).forEach((function(A){return p.addColorStop(A.stop,pe(A.color))})),B.fillStyle=p,B.fillRect(0,0,Q,y),Q>0&&y>0&&(w=n.ctx.createPattern(h,"repeat"),n.renderRepeat(v,w,F,b))):function(A){return 2===A.type}(t)&&(m=ii(A,e,[null,null,null]),v=m[0],C=m[1],U=m[2],Q=m[3],y=m[4],I=0===t.position.length?[oe]:t.position,F=se(I[0],Q),b=se(I[I.length-1],y),E=function(A,e,t,n,r){var o=0,i=0;switch(A.size){case 0:0===A.shape?o=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-r)):1===A.shape&&(o=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(t),Math.abs(t-r)));break;case 2:if(0===A.shape)o=i=Math.min(Pe(e,t),Pe(e,t-r),Pe(e-n,t),Pe(e-n,t-r));else if(1===A.shape){var a=Math.min(Math.abs(t),Math.abs(t-r))/Math.min(Math.abs(e),Math.abs(e-n)),s=xe(n,r,e,t,!0),l=s[0],c=s[1];i=a*(o=Pe(l-e,(c-t)/a))}break;case 1:0===A.shape?o=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-r)):1===A.shape&&(o=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(t),Math.abs(t-r)));break;case 3:if(0===A.shape)o=i=Math.max(Pe(e,t),Pe(e,t-r),Pe(e-n,t),Pe(e-n,t-r));else if(1===A.shape){a=Math.max(Math.abs(t),Math.abs(t-r))/Math.max(Math.abs(e),Math.abs(e-n));var u=xe(n,r,e,t,!1);l=u[0],c=u[1],i=a*(o=Pe(l-e,(c-t)/a))}}return Array.isArray(A.size)&&(o=se(A.size[0],n),i=2===A.size.length?se(A.size[1],r):o),[o,i]}(t,F,b,Q,y),T=E[0],S=E[1],T>0&&S>0&&(P=n.ctx.createRadialGradient(C+F,U+b,0,C+F,U+b,T),Te(t.stops,2*T).forEach((function(A){return P.addColorStop(A.stop,pe(A.color))})),n.path(v),n.ctx.fillStyle=P,T!==S?(x=A.bounds.left+.5*A.bounds.width,H=A.bounds.top+.5*A.bounds.height,L=1/(D=S/T),n.ctx.save(),n.ctx.translate(x,H),n.ctx.transform(1,0,0,D,0,0),n.ctx.translate(-x,-H),n.ctx.fillRect(C,L*(U-H)+H,Q,y*L),n.ctx.restore()):n.ctx.fill())),a.label=6;case 6:return e--,[2]}}))},n=this,r=0,o=A.styles.backgroundImage.slice(0).reverse(),s.label=1;case 1:return r<o.length?(i=o[r],[5,t(i)]):[3,4];case 2:s.sent(),s.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))},e.prototype.renderSolidBorder=function(A,e,t){return i(this,void 0,void 0,(function(){return a(this,(function(n){return this.path(ei(t,e)),this.ctx.fillStyle=pe(A),this.ctx.fill(),[2]}))}))},e.prototype.renderDoubleBorder=function(A,e,t,n){return i(this,void 0,void 0,(function(){var r,o;return a(this,(function(i){switch(i.label){case 0:return e<3?[4,this.renderSolidBorder(A,t,n)]:[3,2];case 1:return i.sent(),[2];case 2:return r=function(A,e){switch(e){case 0:return ni(A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox,A.topRightBorderBox,A.topRightBorderDoubleOuterBox);case 1:return ni(A.topRightBorderBox,A.topRightBorderDoubleOuterBox,A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox);case 2:return ni(A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox,A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox);default:return ni(A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox,A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox)}}(n,t),this.path(r),this.ctx.fillStyle=pe(A),this.ctx.fill(),o=function(A,e){switch(e){case 0:return ni(A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox,A.topRightBorderDoubleInnerBox,A.topRightPaddingBox);case 1:return ni(A.topRightBorderDoubleInnerBox,A.topRightPaddingBox,A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox);case 2:return ni(A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox,A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox);default:return ni(A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox,A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox)}}(n,t),this.path(o),this.ctx.fill(),[2]}}))}))},e.prototype.renderNodeBackgroundAndBorders=function(A){return i(this,void 0,void 0,(function(){var e,t,n,r,o,i,s,l,c=this;return a(this,(function(a){switch(a.label){case 0:return this.applyEffects(A.getEffects(2)),e=A.container.styles,t=!Be(e.backgroundColor)||e.backgroundImage.length,n=[{style:e.borderTopStyle,color:e.borderTopColor,width:e.borderTopWidth},{style:e.borderRightStyle,color:e.borderRightColor,width:e.borderRightWidth},{style:e.borderBottomStyle,color:e.borderBottomColor,width:e.borderBottomWidth},{style:e.borderLeftStyle,color:e.borderLeftColor,width:e.borderLeftWidth}],r=pi(ci(e.backgroundClip,0),A.curves),t||e.boxShadow.length?(this.ctx.save(),this.path(r),this.ctx.clip(),Be(e.backgroundColor)||(this.ctx.fillStyle=pe(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(A.container)]):[3,2];case 1:a.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach((function(e){c.ctx.save();var t,n,r,o,i,a=Zo(A.curves),s=e.inset?0:1e4,l=(t=a,n=-s+(e.inset?1:-1)*e.spread.number,r=(e.inset?1:-1)*e.spread.number,o=e.spread.number*(e.inset?-2:2),i=e.spread.number*(e.inset?-2:2),t.map((function(A,e){switch(e){case 0:return A.add(n,r);case 1:return A.add(n+o,r);case 2:return A.add(n+o,r+i);case 3:return A.add(n,r+i)}return A})));e.inset?(c.path(a),c.ctx.clip(),c.mask(l)):(c.mask(a),c.ctx.clip(),c.path(l)),c.ctx.shadowOffsetX=e.offsetX.number+s,c.ctx.shadowOffsetY=e.offsetY.number,c.ctx.shadowColor=pe(e.color),c.ctx.shadowBlur=e.blur.number,c.ctx.fillStyle=e.inset?pe(e.color):"rgba(0,0,0,1)",c.ctx.fill(),c.ctx.restore()})),a.label=2;case 2:o=0,i=0,s=n,a.label=3;case 3:return i<s.length?0!==(l=s[i]).style&&!Be(l.color)&&l.width>0?2!==l.style?[3,5]:[4,this.renderDashedDottedBorder(l.color,l.width,o,A.curves,2)]:[3,11]:[3,13];case 4:return a.sent(),[3,11];case 5:return 3!==l.style?[3,7]:[4,this.renderDashedDottedBorder(l.color,l.width,o,A.curves,3)];case 6:return a.sent(),[3,11];case 7:return 4!==l.style?[3,9]:[4,this.renderDoubleBorder(l.color,l.width,o,A.curves)];case 8:return a.sent(),[3,11];case 9:return[4,this.renderSolidBorder(l.color,o,A.curves)];case 10:a.sent(),a.label=11;case 11:o++,a.label=12;case 12:return i++,[3,3];case 13:return[2]}}))}))},e.prototype.renderDashedDottedBorder=function(A,e,t,n,r){return i(this,void 0,void 0,(function(){var o,i,s,l,c,u,d,g,f,h,B,p,w,m,v,C;return a(this,(function(a){return this.ctx.save(),o=function(A,e){switch(e){case 0:return ti(A.topLeftBorderStroke,A.topRightBorderStroke);case 1:return ti(A.topRightBorderStroke,A.bottomRightBorderStroke);case 2:return ti(A.bottomRightBorderStroke,A.bottomLeftBorderStroke);default:return ti(A.bottomLeftBorderStroke,A.topLeftBorderStroke)}}(n,t),i=ei(n,t),2===r&&(this.path(i),this.ctx.clip()),Ro(i[0])?(s=i[0].start.x,l=i[0].start.y):(s=i[0].x,l=i[0].y),Ro(i[1])?(c=i[1].end.x,u=i[1].end.y):(c=i[1].x,u=i[1].y),d=0===t||2===t?Math.abs(s-c):Math.abs(l-u),this.ctx.beginPath(),3===r?this.formatPath(o):this.formatPath(i.slice(0,2)),g=e<3?3*e:2*e,f=e<3?2*e:e,3===r&&(g=e,f=e),h=!0,d<=2*g?h=!1:d<=2*g+f?(g*=B=d/(2*g+f),f*=B):(p=Math.floor((d+f)/(g+f)),w=(d-p*g)/(p-1),f=(m=(d-(p+1)*g)/p)<=0||Math.abs(f-w)<Math.abs(f-m)?w:m),h&&(3===r?this.ctx.setLineDash([0,g+f]):this.ctx.setLineDash([g,f])),3===r?(this.ctx.lineCap="round",this.ctx.lineWidth=e):this.ctx.lineWidth=2*e+1.1,this.ctx.strokeStyle=pe(A),this.ctx.stroke(),this.ctx.setLineDash([]),2===r&&(Ro(i[0])&&(v=i[3],C=i[0],this.ctx.beginPath(),this.formatPath([new _o(v.end.x,v.end.y),new _o(C.start.x,C.start.y)]),this.ctx.stroke()),Ro(i[1])&&(v=i[1],C=i[2],this.ctx.beginPath(),this.formatPath([new _o(v.end.x,v.end.y),new _o(C.start.x,C.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},e.prototype.render=function(A){return i(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=pe(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=new qo(A,null),r=new Yo(n),$o(n,r,r,o=[]),Ai(n.container,o),e=r,[4,this.renderStack(e)];case 1:return t.sent(),this.applyEffects([]),[2,this.canvas]}var n,r,o}))}))},e}(fi),Bi=function(A){return A instanceof Qr||(A instanceof Ur||A instanceof Cr&&A.type!==wr&&A.type!==pr)},pi=function(A,e){switch(A){case 0:return Zo(e);case 2:return function(A){return[A.topLeftContentBox,A.topRightContentBox,A.bottomRightContentBox,A.bottomLeftContentBox]}(e);default:return Go(e)}},wi=function(A){switch(A){case 1:return"center";case 2:return"right";default:return"left"}},mi=["-apple-system","system-ui"],vi=function(A){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?A.filter((function(A){return-1===mi.indexOf(A)})):A},Ci=function(A){function e(e,t){var n=A.call(this,e,t)||this;return n.canvas=t.canvas?t.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=t,n.canvas.width=Math.floor(t.width*t.scale),n.canvas.height=Math.floor(t.height*t.scale),n.canvas.style.width=t.width+"px",n.canvas.style.height=t.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-t.x,-t.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+t.width+"x"+t.height+" at "+t.x+","+t.y+") with scale "+t.scale),n}return r(e,A),e.prototype.render=function(A){return i(this,void 0,void 0,(function(){var e,t;return a(this,(function(n){switch(n.label){case 0:return e=jn(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,A),[4,Ui(e)];case 1:return t=n.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=pe(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(t,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},e}(fi),Ui=function(A){return new Promise((function(e,t){var n=new Image;n.onload=function(){e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(A))}))},Qi=function(){function A(A){var e=A.id,t=A.enabled;this.id=e,this.enabled=t,this.start=Date.now()}return A.prototype.debug=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,s([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},A.prototype.getTime=function(){return Date.now()-this.start},A.prototype.info=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,s([this.id,this.getTime()+"ms"],A))},A.prototype.warn=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,s([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},A.prototype.error=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,s([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},A.instances={},A}(),yi=function(){function A(e,t){var n;this.windowBounds=t,this.instanceName="#"+A.instanceCount++,this.logger=new Qi({id:this.instanceName,enabled:e.logging}),this.cache=null!==(n=e.cache)&&void 0!==n?n:new To(this,e)}return A.instanceCount=1,A}();"undefined"!=typeof window&&Eo.setContext(window);var Ii=function(A,e){return i(void 0,void 0,void 0,(function(){var t,n,r,i,s,u,d,g,f,h,B,p,w,m,v,C,U,Q,y,I,F,b,E,T,S,P,x,H,D,L,O,M,_,k,V,R,K,N;return a(this,(function(a){switch(a.label){case 0:if(!A||"object"!=typeof A)return[2,Promise.reject("Invalid element provided as first argument")];if(!(t=A.ownerDocument))throw new Error("Element is not attached to a Document");if(!(n=t.defaultView))throw new Error("Document is not attached to a Window");return r={allowTaint:null!==(b=e.allowTaint)&&void 0!==b&&b,imageTimeout:null!==(E=e.imageTimeout)&&void 0!==E?E:15e3,proxy:e.proxy,useCORS:null!==(T=e.useCORS)&&void 0!==T&&T},i=o({logging:null===(S=e.logging)||void 0===S||S,cache:e.cache},r),s={windowWidth:null!==(P=e.windowWidth)&&void 0!==P?P:n.innerWidth,windowHeight:null!==(x=e.windowHeight)&&void 0!==x?x:n.innerHeight,scrollX:null!==(H=e.scrollX)&&void 0!==H?H:n.pageXOffset,scrollY:null!==(D=e.scrollY)&&void 0!==D?D:n.pageYOffset},u=new l(s.scrollX,s.scrollY,s.windowWidth,s.windowHeight),d=new yi(i,u),g=null!==(L=e.foreignObjectRendering)&&void 0!==L&&L,f={allowTaint:null!==(O=e.allowTaint)&&void 0!==O&&O,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:g,copyStyles:g},d.logger.debug("Starting document clone with size "+u.width+"x"+u.height+" scrolled to "+-u.left+","+-u.top),h=new uo(d,A,f),(B=h.clonedReferenceElement)?[4,h.toIFrame(t,u)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=a.sent(),w=kr(B)||"HTML"===B.tagName?function(A){var e=A.body,t=A.documentElement;if(!e||!t)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),r=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new l(0,0,n,r)}(B.ownerDocument):c(d,B),m=w.width,v=w.height,C=w.left,U=w.top,Q=Fi(d,B,e.backgroundColor),y={canvas:e.canvas,backgroundColor:Q,scale:null!==(_=null!==(M=e.scale)&&void 0!==M?M:n.devicePixelRatio)&&void 0!==_?_:1,x:(null!==(k=e.x)&&void 0!==k?k:0)+C,y:(null!==(V=e.y)&&void 0!==V?V:0)+U,width:null!==(R=e.width)&&void 0!==R?R:Math.ceil(m),height:null!==(K=e.height)&&void 0!==K?K:Math.ceil(v)},g?(d.logger.debug("Document cloned, using foreign object rendering"),[4,new Ci(d,y).render(B)]):[3,3];case 2:return I=a.sent(),[3,5];case 3:return d.logger.debug("Document cloned, element located at "+C+","+U+" with size "+m+"x"+v+" using computed rendering"),d.logger.debug("Starting DOM parsing"),F=Er(d,B),Q===F.styles.backgroundColor&&(F.styles.backgroundColor=Ie.TRANSPARENT),d.logger.debug("Starting renderer for element at "+y.x+","+y.y+" with size "+y.width+"x"+y.height),[4,new hi(d,y).render(F)];case 4:I=a.sent(),a.label=5;case 5:return(null===(N=e.removeContainer)||void 0===N||N)&&(uo.destroy(p)||d.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),d.logger.debug("Finished rendering"),[2,I]}}))}))},Fi=function(A,e,t){var n=e.ownerDocument,r=n.documentElement?ye(A,getComputedStyle(n.documentElement).backgroundColor):Ie.TRANSPARENT,o=n.body?ye(A,getComputedStyle(n.body).backgroundColor):Ie.TRANSPARENT,i="string"==typeof t?ye(A,t):null===t?Ie.TRANSPARENT:4294967295;return e===n.documentElement?Be(r)?Be(o)?i:o:r:i};const bi=function(A,e){return void 0===e&&(e={}),Ii(A,e)}},65406:(A,e,t)=>{var n="__lodash_hash_undefined__",r=1/0,o="[object Function]",i="[object GeneratorFunction]",a="[object Symbol]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,c=/^\./,u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,g=/^\[object .+?Constructor\]$/,f="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,h="object"==typeof self&&self&&self.Object===Object&&self,B=f||h||Function("return this")();var p,w=Array.prototype,m=Function.prototype,v=Object.prototype,C=B["__core-js_shared__"],U=(p=/[^.]+$/.exec(C&&C.keys&&C.keys.IE_PROTO||""))?"Symbol(src)_1."+p:"",Q=m.toString,y=v.hasOwnProperty,I=v.toString,F=RegExp("^"+Q.call(y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),b=B.Symbol,E=w.splice,T=V(B,"Map"),S=V(Object,"create"),P=b?b.prototype:void 0,x=P?P.toString:void 0;function H(A){var e=-1,t=A?A.length:0;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}function D(A){var e=-1,t=A?A.length:0;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}function L(A){var e=-1,t=A?A.length:0;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}function O(A,e){for(var t,n,r=A.length;r--;)if((t=A[r][0])===(n=e)||t!=t&&n!=n)return r;return-1}function M(A,e){var t;e=function(A,e){if(Z(A))return!1;var t=typeof A;if("number"==t||"symbol"==t||"boolean"==t||null==A||W(A))return!0;return l.test(A)||!s.test(A)||null!=e&&A in Object(e)}(e,A)?[e]:Z(t=e)?t:R(t);for(var n=0,r=e.length;null!=A&&n<r;)A=A[K(e[n++])];return n&&n==r?A:void 0}function _(A){if(!G(A)||(e=A,U&&U in e))return!1;var e,t=function(A){var e=G(A)?I.call(A):"";return e==o||e==i}(A)||function(A){var e=!1;if(null!=A&&"function"!=typeof A.toString)try{e=!!(A+"")}catch(A){}return e}(A)?F:g;return t.test(function(A){if(null!=A){try{return Q.call(A)}catch(A){}try{return A+""}catch(A){}}return""}(A))}function k(A,e){var t,n,r=A.__data__;return("string"==(n=typeof(t=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?r["string"==typeof e?"string":"hash"]:r.map}function V(A,e){var t=function(A,e){return null==A?void 0:A[e]}(A,e);return _(t)?t:void 0}H.prototype.clear=function(){this.__data__=S?S(null):{}},H.prototype.delete=function(A){return this.has(A)&&delete this.__data__[A]},H.prototype.get=function(A){var e=this.__data__;if(S){var t=e[A];return t===n?void 0:t}return y.call(e,A)?e[A]:void 0},H.prototype.has=function(A){var e=this.__data__;return S?void 0!==e[A]:y.call(e,A)},H.prototype.set=function(A,e){return this.__data__[A]=S&&void 0===e?n:e,this},D.prototype.clear=function(){this.__data__=[]},D.prototype.delete=function(A){var e=this.__data__,t=O(e,A);return!(t<0)&&(t==e.length-1?e.pop():E.call(e,t,1),!0)},D.prototype.get=function(A){var e=this.__data__,t=O(e,A);return t<0?void 0:e[t][1]},D.prototype.has=function(A){return O(this.__data__,A)>-1},D.prototype.set=function(A,e){var t=this.__data__,n=O(t,A);return n<0?t.push([A,e]):t[n][1]=e,this},L.prototype.clear=function(){this.__data__={hash:new H,map:new(T||D),string:new H}},L.prototype.delete=function(A){return k(this,A).delete(A)},L.prototype.get=function(A){return k(this,A).get(A)},L.prototype.has=function(A){return k(this,A).has(A)},L.prototype.set=function(A,e){return k(this,A).set(A,e),this};var R=N((function(A){var e;A=null==(e=A)?"":function(A){if("string"==typeof A)return A;if(W(A))return x?x.call(A):"";var e=A+"";return"0"==e&&1/A==-r?"-0":e}(e);var t=[];return c.test(A)&&t.push(""),A.replace(u,(function(A,e,n,r){t.push(n?r.replace(d,"$1"):e||A)})),t}));function K(A){if("string"==typeof A||W(A))return A;var e=A+"";return"0"==e&&1/A==-r?"-0":e}function N(A,e){if("function"!=typeof A||e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=t.cache;if(o.has(r))return o.get(r);var i=A.apply(this,n);return t.cache=o.set(r,i),i};return t.cache=new(N.Cache||L),t}N.Cache=L;var Z=Array.isArray;function G(A){var e=typeof A;return!!A&&("object"==e||"function"==e)}function W(A){return"symbol"==typeof A||function(A){return!!A&&"object"==typeof A}(A)&&I.call(A)==a}A.exports=function(A,e,t){var n=null==A?void 0:M(A,e);return void 0===n?t:n}},92891:function(A,e,t){var n;A=t.nmd(A),function(){var r,o="Expected a function",i="__lodash_hash_undefined__",a="__lodash_placeholder__",s=16,l=32,c=64,u=128,d=256,g=1/0,f=9007199254740991,h=NaN,B=4294967295,p=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",s],["flip",512],["partial",l],["partialRight",c],["rearg",d]],w="[object Arguments]",m="[object Array]",v="[object Boolean]",C="[object Date]",U="[object Error]",Q="[object Function]",y="[object GeneratorFunction]",I="[object Map]",F="[object Number]",b="[object Object]",E="[object Promise]",T="[object RegExp]",S="[object Set]",P="[object String]",x="[object Symbol]",H="[object WeakMap]",D="[object ArrayBuffer]",L="[object DataView]",O="[object Float32Array]",M="[object Float64Array]",_="[object Int8Array]",k="[object Int16Array]",V="[object Int32Array]",R="[object Uint8Array]",K="[object Uint8ClampedArray]",N="[object Uint16Array]",Z="[object Uint32Array]",G=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,X=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z=/&(?:amp|lt|gt|quot|#39);/g,J=/[&<>"']/g,j=RegExp(z.source),Y=RegExp(J.source),q=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,AA=/<%=([\s\S]+?)%>/g,eA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tA=/^\w*$/,nA=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rA=/[\\^$.*+?()[\]{}|]/g,oA=RegExp(rA.source),iA=/^\s+/,aA=/\s/,sA=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lA=/\{\n\/\* \[wrapped with (.+)\] \*/,cA=/,? & /,uA=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dA=/[()=,{}\[\]\/\s]/,gA=/\\(\\)?/g,fA=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,hA=/\w*$/,BA=/^[-+]0x[0-9a-f]+$/i,pA=/^0b[01]+$/i,wA=/^\[object .+?Constructor\]$/,mA=/^0o[0-7]+$/i,vA=/^(?:0|[1-9]\d*)$/,CA=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,UA=/($^)/,QA=/['\n\r\u2028\u2029\\]/g,yA="\\ud800-\\udfff",IA="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",FA="\\u2700-\\u27bf",bA="a-z\\xdf-\\xf6\\xf8-\\xff",EA="A-Z\\xc0-\\xd6\\xd8-\\xde",TA="\\ufe0e\\ufe0f",SA="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",PA="['’]",xA="["+yA+"]",HA="["+SA+"]",DA="["+IA+"]",LA="\\d+",OA="["+FA+"]",MA="["+bA+"]",_A="[^"+yA+SA+LA+FA+bA+EA+"]",kA="\\ud83c[\\udffb-\\udfff]",VA="[^"+yA+"]",RA="(?:\\ud83c[\\udde6-\\uddff]){2}",KA="[\\ud800-\\udbff][\\udc00-\\udfff]",NA="["+EA+"]",ZA="\\u200d",GA="(?:"+MA+"|"+_A+")",WA="(?:"+NA+"|"+_A+")",XA="(?:['’](?:d|ll|m|re|s|t|ve))?",zA="(?:['’](?:D|LL|M|RE|S|T|VE))?",JA="(?:"+DA+"|"+kA+")"+"?",jA="["+TA+"]?",YA=jA+JA+("(?:"+ZA+"(?:"+[VA,RA,KA].join("|")+")"+jA+JA+")*"),qA="(?:"+[OA,RA,KA].join("|")+")"+YA,$A="(?:"+[VA+DA+"?",DA,RA,KA,xA].join("|")+")",Ae=RegExp(PA,"g"),ee=RegExp(DA,"g"),te=RegExp(kA+"(?="+kA+")|"+$A+YA,"g"),ne=RegExp([NA+"?"+MA+"+"+XA+"(?="+[HA,NA,"$"].join("|")+")",WA+"+"+zA+"(?="+[HA,NA+GA,"$"].join("|")+")",NA+"?"+GA+"+"+XA,NA+"+"+zA,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",LA,qA].join("|"),"g"),re=RegExp("["+ZA+yA+IA+TA+"]"),oe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ie=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ae=-1,se={};se[O]=se[M]=se[_]=se[k]=se[V]=se[R]=se[K]=se[N]=se[Z]=!0,se[w]=se[m]=se[D]=se[v]=se[L]=se[C]=se[U]=se[Q]=se[I]=se[F]=se[b]=se[T]=se[S]=se[P]=se[H]=!1;var le={};le[w]=le[m]=le[D]=le[L]=le[v]=le[C]=le[O]=le[M]=le[_]=le[k]=le[V]=le[I]=le[F]=le[b]=le[T]=le[S]=le[P]=le[x]=le[R]=le[K]=le[N]=le[Z]=!0,le[U]=le[Q]=le[H]=!1;var ce={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ue=parseFloat,de=parseInt,ge="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,fe="object"==typeof self&&self&&self.Object===Object&&self,he=ge||fe||Function("return this")(),Be=e&&!e.nodeType&&e,pe=Be&&A&&!A.nodeType&&A,we=pe&&pe.exports===Be,me=we&&ge.process,ve=function(){try{var A=pe&&pe.require&&pe.require("util").types;return A||me&&me.binding&&me.binding("util")}catch(A){}}(),Ce=ve&&ve.isArrayBuffer,Ue=ve&&ve.isDate,Qe=ve&&ve.isMap,ye=ve&&ve.isRegExp,Ie=ve&&ve.isSet,Fe=ve&&ve.isTypedArray;function be(A,e,t){switch(t.length){case 0:return A.call(e);case 1:return A.call(e,t[0]);case 2:return A.call(e,t[0],t[1]);case 3:return A.call(e,t[0],t[1],t[2])}return A.apply(e,t)}function Ee(A,e,t,n){for(var r=-1,o=null==A?0:A.length;++r<o;){var i=A[r];e(n,i,t(i),A)}return n}function Te(A,e){for(var t=-1,n=null==A?0:A.length;++t<n&&!1!==e(A[t],t,A););return A}function Se(A,e){for(var t=null==A?0:A.length;t--&&!1!==e(A[t],t,A););return A}function Pe(A,e){for(var t=-1,n=null==A?0:A.length;++t<n;)if(!e(A[t],t,A))return!1;return!0}function xe(A,e){for(var t=-1,n=null==A?0:A.length,r=0,o=[];++t<n;){var i=A[t];e(i,t,A)&&(o[r++]=i)}return o}function He(A,e){return!!(null==A?0:A.length)&&Ne(A,e,0)>-1}function De(A,e,t){for(var n=-1,r=null==A?0:A.length;++n<r;)if(t(e,A[n]))return!0;return!1}function Le(A,e){for(var t=-1,n=null==A?0:A.length,r=Array(n);++t<n;)r[t]=e(A[t],t,A);return r}function Oe(A,e){for(var t=-1,n=e.length,r=A.length;++t<n;)A[r+t]=e[t];return A}function Me(A,e,t,n){var r=-1,o=null==A?0:A.length;for(n&&o&&(t=A[++r]);++r<o;)t=e(t,A[r],r,A);return t}function _e(A,e,t,n){var r=null==A?0:A.length;for(n&&r&&(t=A[--r]);r--;)t=e(t,A[r],r,A);return t}function ke(A,e){for(var t=-1,n=null==A?0:A.length;++t<n;)if(e(A[t],t,A))return!0;return!1}var Ve=Xe("length");function Re(A,e,t){var n;return t(A,(function(A,t,r){if(e(A,t,r))return n=t,!1})),n}function Ke(A,e,t,n){for(var r=A.length,o=t+(n?1:-1);n?o--:++o<r;)if(e(A[o],o,A))return o;return-1}function Ne(A,e,t){return e==e?function(A,e,t){var n=t-1,r=A.length;for(;++n<r;)if(A[n]===e)return n;return-1}(A,e,t):Ke(A,Ge,t)}function Ze(A,e,t,n){for(var r=t-1,o=A.length;++r<o;)if(n(A[r],e))return r;return-1}function Ge(A){return A!=A}function We(A,e){var t=null==A?0:A.length;return t?je(A,e)/t:h}function Xe(A){return function(e){return null==e?r:e[A]}}function ze(A){return function(e){return null==A?r:A[e]}}function Je(A,e,t,n,r){return r(A,(function(A,r,o){t=n?(n=!1,A):e(t,A,r,o)})),t}function je(A,e){for(var t,n=-1,o=A.length;++n<o;){var i=e(A[n]);i!==r&&(t=t===r?i:t+i)}return t}function Ye(A,e){for(var t=-1,n=Array(A);++t<A;)n[t]=e(t);return n}function qe(A){return A?A.slice(0,ht(A)+1).replace(iA,""):A}function $e(A){return function(e){return A(e)}}function At(A,e){return Le(e,(function(e){return A[e]}))}function et(A,e){return A.has(e)}function tt(A,e){for(var t=-1,n=A.length;++t<n&&Ne(e,A[t],0)>-1;);return t}function nt(A,e){for(var t=A.length;t--&&Ne(e,A[t],0)>-1;);return t}var rt=ze({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),ot=ze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function it(A){return"\\"+ce[A]}function at(A){return re.test(A)}function st(A){var e=-1,t=Array(A.size);return A.forEach((function(A,n){t[++e]=[n,A]})),t}function lt(A,e){return function(t){return A(e(t))}}function ct(A,e){for(var t=-1,n=A.length,r=0,o=[];++t<n;){var i=A[t];i!==e&&i!==a||(A[t]=a,o[r++]=t)}return o}function ut(A){var e=-1,t=Array(A.size);return A.forEach((function(A){t[++e]=A})),t}function dt(A){var e=-1,t=Array(A.size);return A.forEach((function(A){t[++e]=[A,A]})),t}function gt(A){return at(A)?function(A){var e=te.lastIndex=0;for(;te.test(A);)++e;return e}(A):Ve(A)}function ft(A){return at(A)?function(A){return A.match(te)||[]}(A):function(A){return A.split("")}(A)}function ht(A){for(var e=A.length;e--&&aA.test(A.charAt(e)););return e}var Bt=ze({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var pt=function A(e){var t,n=(e=null==e?he:pt.defaults(he.Object(),e,pt.pick(he,ie))).Array,aA=e.Date,yA=e.Error,IA=e.Function,FA=e.Math,bA=e.Object,EA=e.RegExp,TA=e.String,SA=e.TypeError,PA=n.prototype,xA=IA.prototype,HA=bA.prototype,DA=e["__core-js_shared__"],LA=xA.toString,OA=HA.hasOwnProperty,MA=0,_A=(t=/[^.]+$/.exec(DA&&DA.keys&&DA.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",kA=HA.toString,VA=LA.call(bA),RA=he._,KA=EA("^"+LA.call(OA).replace(rA,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),NA=we?e.Buffer:r,ZA=e.Symbol,GA=e.Uint8Array,WA=NA?NA.allocUnsafe:r,XA=lt(bA.getPrototypeOf,bA),zA=bA.create,JA=HA.propertyIsEnumerable,jA=PA.splice,YA=ZA?ZA.isConcatSpreadable:r,qA=ZA?ZA.iterator:r,$A=ZA?ZA.toStringTag:r,te=function(){try{var A=go(bA,"defineProperty");return A({},"",{}),A}catch(A){}}(),re=e.clearTimeout!==he.clearTimeout&&e.clearTimeout,ce=aA&&aA.now!==he.Date.now&&aA.now,ge=e.setTimeout!==he.setTimeout&&e.setTimeout,fe=FA.ceil,Be=FA.floor,pe=bA.getOwnPropertySymbols,me=NA?NA.isBuffer:r,ve=e.isFinite,Ve=PA.join,ze=lt(bA.keys,bA),wt=FA.max,mt=FA.min,vt=aA.now,Ct=e.parseInt,Ut=FA.random,Qt=PA.reverse,yt=go(e,"DataView"),It=go(e,"Map"),Ft=go(e,"Promise"),bt=go(e,"Set"),Et=go(e,"WeakMap"),Tt=go(bA,"create"),St=Et&&new Et,Pt={},xt=ko(yt),Ht=ko(It),Dt=ko(Ft),Lt=ko(bt),Ot=ko(Et),Mt=ZA?ZA.prototype:r,_t=Mt?Mt.valueOf:r,kt=Mt?Mt.toString:r;function Vt(A){if(ta(A)&&!Gi(A)&&!(A instanceof Zt)){if(A instanceof Nt)return A;if(OA.call(A,"__wrapped__"))return Vo(A)}return new Nt(A)}var Rt=function(){function A(){}return function(e){if(!ea(e))return{};if(zA)return zA(e);A.prototype=e;var t=new A;return A.prototype=r,t}}();function Kt(){}function Nt(A,e){this.__wrapped__=A,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Zt(A){this.__wrapped__=A,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function Gt(A){var e=-1,t=null==A?0:A.length;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}function Wt(A){var e=-1,t=null==A?0:A.length;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}function Xt(A){var e=-1,t=null==A?0:A.length;for(this.clear();++e<t;){var n=A[e];this.set(n[0],n[1])}}function zt(A){var e=-1,t=null==A?0:A.length;for(this.__data__=new Xt;++e<t;)this.add(A[e])}function Jt(A){var e=this.__data__=new Wt(A);this.size=e.size}function jt(A,e){var t=Gi(A),n=!t&&Zi(A),r=!t&&!n&&Ji(A),o=!t&&!n&&!r&&ca(A),i=t||n||r||o,a=i?Ye(A.length,TA):[],s=a.length;for(var l in A)!e&&!OA.call(A,l)||i&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||vo(l,s))||a.push(l);return a}function Yt(A){var e=A.length;return e?A[Jn(0,e-1)]:r}function qt(A,e){return Oo(Sr(A),sn(e,0,A.length))}function $t(A){return Oo(Sr(A))}function An(A,e,t){(t!==r&&!Ri(A[e],t)||t===r&&!(e in A))&&on(A,e,t)}function en(A,e,t){var n=A[e];OA.call(A,e)&&Ri(n,t)&&(t!==r||e in A)||on(A,e,t)}function tn(A,e){for(var t=A.length;t--;)if(Ri(A[t][0],e))return t;return-1}function nn(A,e,t,n){return gn(A,(function(A,r,o){e(n,A,t(A),o)})),n}function rn(A,e){return A&&Pr(e,xa(e),A)}function on(A,e,t){"__proto__"==e&&te?te(A,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):A[e]=t}function an(A,e){for(var t=-1,o=e.length,i=n(o),a=null==A;++t<o;)i[t]=a?r:ba(A,e[t]);return i}function sn(A,e,t){return A==A&&(t!==r&&(A=A<=t?A:t),e!==r&&(A=A>=e?A:e)),A}function ln(A,e,t,n,o,i){var a,s=1&e,l=2&e,c=4&e;if(t&&(a=o?t(A,n,o,i):t(A)),a!==r)return a;if(!ea(A))return A;var u=Gi(A);if(u){if(a=function(A){var e=A.length,t=new A.constructor(e);e&&"string"==typeof A[0]&&OA.call(A,"index")&&(t.index=A.index,t.input=A.input);return t}(A),!s)return Sr(A,a)}else{var d=Bo(A),g=d==Q||d==y;if(Ji(A))return yr(A,s);if(d==b||d==w||g&&!o){if(a=l||g?{}:wo(A),!s)return l?function(A,e){return Pr(A,ho(A),e)}(A,function(A,e){return A&&Pr(e,Ha(e),A)}(a,A)):function(A,e){return Pr(A,fo(A),e)}(A,rn(a,A))}else{if(!le[d])return o?A:{};a=function(A,e,t){var n=A.constructor;switch(e){case D:return Ir(A);case v:case C:return new n(+A);case L:return function(A,e){var t=e?Ir(A.buffer):A.buffer;return new A.constructor(t,A.byteOffset,A.byteLength)}(A,t);case O:case M:case _:case k:case V:case R:case K:case N:case Z:return Fr(A,t);case I:return new n;case F:case P:return new n(A);case T:return function(A){var e=new A.constructor(A.source,hA.exec(A));return e.lastIndex=A.lastIndex,e}(A);case S:return new n;case x:return r=A,_t?bA(_t.call(r)):{}}var r}(A,d,s)}}i||(i=new Jt);var f=i.get(A);if(f)return f;i.set(A,a),aa(A)?A.forEach((function(n){a.add(ln(n,e,t,n,A,i))})):na(A)&&A.forEach((function(n,r){a.set(r,ln(n,e,t,r,A,i))}));var h=u?r:(c?l?oo:ro:l?Ha:xa)(A);return Te(h||A,(function(n,r){h&&(n=A[r=n]),en(a,r,ln(n,e,t,r,A,i))})),a}function cn(A,e,t){var n=t.length;if(null==A)return!n;for(A=bA(A);n--;){var o=t[n],i=e[o],a=A[o];if(a===r&&!(o in A)||!i(a))return!1}return!0}function un(A,e,t){if("function"!=typeof A)throw new SA(o);return xo((function(){A.apply(r,t)}),e)}function dn(A,e,t,n){var r=-1,o=He,i=!0,a=A.length,s=[],l=e.length;if(!a)return s;t&&(e=Le(e,$e(t))),n?(o=De,i=!1):e.length>=200&&(o=et,i=!1,e=new zt(e));A:for(;++r<a;){var c=A[r],u=null==t?c:t(c);if(c=n||0!==c?c:0,i&&u==u){for(var d=l;d--;)if(e[d]===u)continue A;s.push(c)}else o(e,u,n)||s.push(c)}return s}Vt.templateSettings={escape:q,evaluate:$,interpolate:AA,variable:"",imports:{_:Vt}},Vt.prototype=Kt.prototype,Vt.prototype.constructor=Vt,Nt.prototype=Rt(Kt.prototype),Nt.prototype.constructor=Nt,Zt.prototype=Rt(Kt.prototype),Zt.prototype.constructor=Zt,Gt.prototype.clear=function(){this.__data__=Tt?Tt(null):{},this.size=0},Gt.prototype.delete=function(A){var e=this.has(A)&&delete this.__data__[A];return this.size-=e?1:0,e},Gt.prototype.get=function(A){var e=this.__data__;if(Tt){var t=e[A];return t===i?r:t}return OA.call(e,A)?e[A]:r},Gt.prototype.has=function(A){var e=this.__data__;return Tt?e[A]!==r:OA.call(e,A)},Gt.prototype.set=function(A,e){var t=this.__data__;return this.size+=this.has(A)?0:1,t[A]=Tt&&e===r?i:e,this},Wt.prototype.clear=function(){this.__data__=[],this.size=0},Wt.prototype.delete=function(A){var e=this.__data__,t=tn(e,A);return!(t<0)&&(t==e.length-1?e.pop():jA.call(e,t,1),--this.size,!0)},Wt.prototype.get=function(A){var e=this.__data__,t=tn(e,A);return t<0?r:e[t][1]},Wt.prototype.has=function(A){return tn(this.__data__,A)>-1},Wt.prototype.set=function(A,e){var t=this.__data__,n=tn(t,A);return n<0?(++this.size,t.push([A,e])):t[n][1]=e,this},Xt.prototype.clear=function(){this.size=0,this.__data__={hash:new Gt,map:new(It||Wt),string:new Gt}},Xt.prototype.delete=function(A){var e=co(this,A).delete(A);return this.size-=e?1:0,e},Xt.prototype.get=function(A){return co(this,A).get(A)},Xt.prototype.has=function(A){return co(this,A).has(A)},Xt.prototype.set=function(A,e){var t=co(this,A),n=t.size;return t.set(A,e),this.size+=t.size==n?0:1,this},zt.prototype.add=zt.prototype.push=function(A){return this.__data__.set(A,i),this},zt.prototype.has=function(A){return this.__data__.has(A)},Jt.prototype.clear=function(){this.__data__=new Wt,this.size=0},Jt.prototype.delete=function(A){var e=this.__data__,t=e.delete(A);return this.size=e.size,t},Jt.prototype.get=function(A){return this.__data__.get(A)},Jt.prototype.has=function(A){return this.__data__.has(A)},Jt.prototype.set=function(A,e){var t=this.__data__;if(t instanceof Wt){var n=t.__data__;if(!It||n.length<199)return n.push([A,e]),this.size=++t.size,this;t=this.__data__=new Xt(n)}return t.set(A,e),this.size=t.size,this};var gn=Dr(Cn),fn=Dr(Un,!0);function hn(A,e){var t=!0;return gn(A,(function(A,n,r){return t=!!e(A,n,r)})),t}function Bn(A,e,t){for(var n=-1,o=A.length;++n<o;){var i=A[n],a=e(i);if(null!=a&&(s===r?a==a&&!la(a):t(a,s)))var s=a,l=i}return l}function pn(A,e){var t=[];return gn(A,(function(A,n,r){e(A,n,r)&&t.push(A)})),t}function wn(A,e,t,n,r){var o=-1,i=A.length;for(t||(t=mo),r||(r=[]);++o<i;){var a=A[o];e>0&&t(a)?e>1?wn(a,e-1,t,n,r):Oe(r,a):n||(r[r.length]=a)}return r}var mn=Lr(),vn=Lr(!0);function Cn(A,e){return A&&mn(A,e,xa)}function Un(A,e){return A&&vn(A,e,xa)}function Qn(A,e){return xe(e,(function(e){return qi(A[e])}))}function yn(A,e){for(var t=0,n=(e=vr(e,A)).length;null!=A&&t<n;)A=A[_o(e[t++])];return t&&t==n?A:r}function In(A,e,t){var n=e(A);return Gi(A)?n:Oe(n,t(A))}function Fn(A){return null==A?A===r?"[object Undefined]":"[object Null]":$A&&$A in bA(A)?function(A){var e=OA.call(A,$A),t=A[$A];try{A[$A]=r;var n=!0}catch(A){}var o=kA.call(A);n&&(e?A[$A]=t:delete A[$A]);return o}(A):function(A){return kA.call(A)}(A)}function bn(A,e){return A>e}function En(A,e){return null!=A&&OA.call(A,e)}function Tn(A,e){return null!=A&&e in bA(A)}function Sn(A,e,t){for(var o=t?De:He,i=A[0].length,a=A.length,s=a,l=n(a),c=1/0,u=[];s--;){var d=A[s];s&&e&&(d=Le(d,$e(e))),c=mt(d.length,c),l[s]=!t&&(e||i>=120&&d.length>=120)?new zt(s&&d):r}d=A[0];var g=-1,f=l[0];A:for(;++g<i&&u.length<c;){var h=d[g],B=e?e(h):h;if(h=t||0!==h?h:0,!(f?et(f,B):o(u,B,t))){for(s=a;--s;){var p=l[s];if(!(p?et(p,B):o(A[s],B,t)))continue A}f&&f.push(B),u.push(h)}}return u}function Pn(A,e,t){var n=null==(A=To(A,e=vr(e,A)))?A:A[_o(Yo(e))];return null==n?r:be(n,A,t)}function xn(A){return ta(A)&&Fn(A)==w}function Hn(A,e,t,n,o){return A===e||(null==A||null==e||!ta(A)&&!ta(e)?A!=A&&e!=e:function(A,e,t,n,o,i){var a=Gi(A),s=Gi(e),l=a?m:Bo(A),c=s?m:Bo(e),u=(l=l==w?b:l)==b,d=(c=c==w?b:c)==b,g=l==c;if(g&&Ji(A)){if(!Ji(e))return!1;a=!0,u=!1}if(g&&!u)return i||(i=new Jt),a||ca(A)?to(A,e,t,n,o,i):function(A,e,t,n,r,o,i){switch(t){case L:if(A.byteLength!=e.byteLength||A.byteOffset!=e.byteOffset)return!1;A=A.buffer,e=e.buffer;case D:return!(A.byteLength!=e.byteLength||!o(new GA(A),new GA(e)));case v:case C:case F:return Ri(+A,+e);case U:return A.name==e.name&&A.message==e.message;case T:case P:return A==e+"";case I:var a=st;case S:var s=1&n;if(a||(a=ut),A.size!=e.size&&!s)return!1;var l=i.get(A);if(l)return l==e;n|=2,i.set(A,e);var c=to(a(A),a(e),n,r,o,i);return i.delete(A),c;case x:if(_t)return _t.call(A)==_t.call(e)}return!1}(A,e,l,t,n,o,i);if(!(1&t)){var f=u&&OA.call(A,"__wrapped__"),h=d&&OA.call(e,"__wrapped__");if(f||h){var B=f?A.value():A,p=h?e.value():e;return i||(i=new Jt),o(B,p,t,n,i)}}if(!g)return!1;return i||(i=new Jt),function(A,e,t,n,o,i){var a=1&t,s=ro(A),l=s.length,c=ro(e),u=c.length;if(l!=u&&!a)return!1;var d=l;for(;d--;){var g=s[d];if(!(a?g in e:OA.call(e,g)))return!1}var f=i.get(A),h=i.get(e);if(f&&h)return f==e&&h==A;var B=!0;i.set(A,e),i.set(e,A);var p=a;for(;++d<l;){var w=A[g=s[d]],m=e[g];if(n)var v=a?n(m,w,g,e,A,i):n(w,m,g,A,e,i);if(!(v===r?w===m||o(w,m,t,n,i):v)){B=!1;break}p||(p="constructor"==g)}if(B&&!p){var C=A.constructor,U=e.constructor;C==U||!("constructor"in A)||!("constructor"in e)||"function"==typeof C&&C instanceof C&&"function"==typeof U&&U instanceof U||(B=!1)}return i.delete(A),i.delete(e),B}(A,e,t,n,o,i)}(A,e,t,n,Hn,o))}function Dn(A,e,t,n){var o=t.length,i=o,a=!n;if(null==A)return!i;for(A=bA(A);o--;){var s=t[o];if(a&&s[2]?s[1]!==A[s[0]]:!(s[0]in A))return!1}for(;++o<i;){var l=(s=t[o])[0],c=A[l],u=s[1];if(a&&s[2]){if(c===r&&!(l in A))return!1}else{var d=new Jt;if(n)var g=n(c,u,l,A,e,d);if(!(g===r?Hn(u,c,3,n,d):g))return!1}}return!0}function Ln(A){return!(!ea(A)||(e=A,_A&&_A in e))&&(qi(A)?KA:wA).test(ko(A));var e}function On(A){return"function"==typeof A?A:null==A?rs:"object"==typeof A?Gi(A)?Kn(A[0],A[1]):Rn(A):gs(A)}function Mn(A){if(!Io(A))return ze(A);var e=[];for(var t in bA(A))OA.call(A,t)&&"constructor"!=t&&e.push(t);return e}function _n(A){if(!ea(A))return function(A){var e=[];if(null!=A)for(var t in bA(A))e.push(t);return e}(A);var e=Io(A),t=[];for(var n in A)("constructor"!=n||!e&&OA.call(A,n))&&t.push(n);return t}function kn(A,e){return A<e}function Vn(A,e){var t=-1,r=Xi(A)?n(A.length):[];return gn(A,(function(A,n,o){r[++t]=e(A,n,o)})),r}function Rn(A){var e=uo(A);return 1==e.length&&e[0][2]?bo(e[0][0],e[0][1]):function(t){return t===A||Dn(t,A,e)}}function Kn(A,e){return Uo(A)&&Fo(e)?bo(_o(A),e):function(t){var n=ba(t,A);return n===r&&n===e?Ea(t,A):Hn(e,n,3)}}function Nn(A,e,t,n,o){A!==e&&mn(e,(function(i,a){if(o||(o=new Jt),ea(i))!function(A,e,t,n,o,i,a){var s=So(A,t),l=So(e,t),c=a.get(l);if(c)return void An(A,t,c);var u=i?i(s,l,t+"",A,e,a):r,d=u===r;if(d){var g=Gi(l),f=!g&&Ji(l),h=!g&&!f&&ca(l);u=l,g||f||h?Gi(s)?u=s:zi(s)?u=Sr(s):f?(d=!1,u=yr(l,!0)):h?(d=!1,u=Fr(l,!0)):u=[]:oa(l)||Zi(l)?(u=s,Zi(s)?u=wa(s):ea(s)&&!qi(s)||(u=wo(l))):d=!1}d&&(a.set(l,u),o(u,l,n,i,a),a.delete(l));An(A,t,u)}(A,e,a,t,Nn,n,o);else{var s=n?n(So(A,a),i,a+"",A,e,o):r;s===r&&(s=i),An(A,a,s)}}),Ha)}function Zn(A,e){var t=A.length;if(t)return vo(e+=e<0?t:0,t)?A[e]:r}function Gn(A,e,t){e=e.length?Le(e,(function(A){return Gi(A)?function(e){return yn(e,1===A.length?A[0]:A)}:A})):[rs];var n=-1;e=Le(e,$e(lo()));var r=Vn(A,(function(A,t,r){var o=Le(e,(function(e){return e(A)}));return{criteria:o,index:++n,value:A}}));return function(A,e){var t=A.length;for(A.sort(e);t--;)A[t]=A[t].value;return A}(r,(function(A,e){return function(A,e,t){var n=-1,r=A.criteria,o=e.criteria,i=r.length,a=t.length;for(;++n<i;){var s=br(r[n],o[n]);if(s)return n>=a?s:s*("desc"==t[n]?-1:1)}return A.index-e.index}(A,e,t)}))}function Wn(A,e,t){for(var n=-1,r=e.length,o={};++n<r;){var i=e[n],a=yn(A,i);t(a,i)&&Ar(o,vr(i,A),a)}return o}function Xn(A,e,t,n){var r=n?Ze:Ne,o=-1,i=e.length,a=A;for(A===e&&(e=Sr(e)),t&&(a=Le(A,$e(t)));++o<i;)for(var s=0,l=e[o],c=t?t(l):l;(s=r(a,c,s,n))>-1;)a!==A&&jA.call(a,s,1),jA.call(A,s,1);return A}function zn(A,e){for(var t=A?e.length:0,n=t-1;t--;){var r=e[t];if(t==n||r!==o){var o=r;vo(r)?jA.call(A,r,1):dr(A,r)}}return A}function Jn(A,e){return A+Be(Ut()*(e-A+1))}function jn(A,e){var t="";if(!A||e<1||e>f)return t;do{e%2&&(t+=A),(e=Be(e/2))&&(A+=A)}while(e);return t}function Yn(A,e){return Ho(Eo(A,e,rs),A+"")}function qn(A){return Yt(Ra(A))}function $n(A,e){var t=Ra(A);return Oo(t,sn(e,0,t.length))}function Ar(A,e,t,n){if(!ea(A))return A;for(var o=-1,i=(e=vr(e,A)).length,a=i-1,s=A;null!=s&&++o<i;){var l=_o(e[o]),c=t;if("__proto__"===l||"constructor"===l||"prototype"===l)return A;if(o!=a){var u=s[l];(c=n?n(u,l,s):r)===r&&(c=ea(u)?u:vo(e[o+1])?[]:{})}en(s,l,c),s=s[l]}return A}var er=St?function(A,e){return St.set(A,e),A}:rs,tr=te?function(A,e){return te(A,"toString",{configurable:!0,enumerable:!1,value:es(e),writable:!0})}:rs;function nr(A){return Oo(Ra(A))}function rr(A,e,t){var r=-1,o=A.length;e<0&&(e=-e>o?0:o+e),(t=t>o?o:t)<0&&(t+=o),o=e>t?0:t-e>>>0,e>>>=0;for(var i=n(o);++r<o;)i[r]=A[r+e];return i}function or(A,e){var t;return gn(A,(function(A,n,r){return!(t=e(A,n,r))})),!!t}function ir(A,e,t){var n=0,r=null==A?n:A.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;n<r;){var o=n+r>>>1,i=A[o];null!==i&&!la(i)&&(t?i<=e:i<e)?n=o+1:r=o}return r}return ar(A,e,rs,t)}function ar(A,e,t,n){var o=0,i=null==A?0:A.length;if(0===i)return 0;for(var a=(e=t(e))!=e,s=null===e,l=la(e),c=e===r;o<i;){var u=Be((o+i)/2),d=t(A[u]),g=d!==r,f=null===d,h=d==d,B=la(d);if(a)var p=n||h;else p=c?h&&(n||g):s?h&&g&&(n||!f):l?h&&g&&!f&&(n||!B):!f&&!B&&(n?d<=e:d<e);p?o=u+1:i=u}return mt(i,4294967294)}function sr(A,e){for(var t=-1,n=A.length,r=0,o=[];++t<n;){var i=A[t],a=e?e(i):i;if(!t||!Ri(a,s)){var s=a;o[r++]=0===i?0:i}}return o}function lr(A){return"number"==typeof A?A:la(A)?h:+A}function cr(A){if("string"==typeof A)return A;if(Gi(A))return Le(A,cr)+"";if(la(A))return kt?kt.call(A):"";var e=A+"";return"0"==e&&1/A==-1/0?"-0":e}function ur(A,e,t){var n=-1,r=He,o=A.length,i=!0,a=[],s=a;if(t)i=!1,r=De;else if(o>=200){var l=e?null:jr(A);if(l)return ut(l);i=!1,r=et,s=new zt}else s=e?[]:a;A:for(;++n<o;){var c=A[n],u=e?e(c):c;if(c=t||0!==c?c:0,i&&u==u){for(var d=s.length;d--;)if(s[d]===u)continue A;e&&s.push(u),a.push(c)}else r(s,u,t)||(s!==a&&s.push(u),a.push(c))}return a}function dr(A,e){return null==(A=To(A,e=vr(e,A)))||delete A[_o(Yo(e))]}function gr(A,e,t,n){return Ar(A,e,t(yn(A,e)),n)}function fr(A,e,t,n){for(var r=A.length,o=n?r:-1;(n?o--:++o<r)&&e(A[o],o,A););return t?rr(A,n?0:o,n?o+1:r):rr(A,n?o+1:0,n?r:o)}function hr(A,e){var t=A;return t instanceof Zt&&(t=t.value()),Me(e,(function(A,e){return e.func.apply(e.thisArg,Oe([A],e.args))}),t)}function Br(A,e,t){var r=A.length;if(r<2)return r?ur(A[0]):[];for(var o=-1,i=n(r);++o<r;)for(var a=A[o],s=-1;++s<r;)s!=o&&(i[o]=dn(i[o]||a,A[s],e,t));return ur(wn(i,1),e,t)}function pr(A,e,t){for(var n=-1,o=A.length,i=e.length,a={};++n<o;){var s=n<i?e[n]:r;t(a,A[n],s)}return a}function wr(A){return zi(A)?A:[]}function mr(A){return"function"==typeof A?A:rs}function vr(A,e){return Gi(A)?A:Uo(A,e)?[A]:Mo(ma(A))}var Cr=Yn;function Ur(A,e,t){var n=A.length;return t=t===r?n:t,!e&&t>=n?A:rr(A,e,t)}var Qr=re||function(A){return he.clearTimeout(A)};function yr(A,e){if(e)return A.slice();var t=A.length,n=WA?WA(t):new A.constructor(t);return A.copy(n),n}function Ir(A){var e=new A.constructor(A.byteLength);return new GA(e).set(new GA(A)),e}function Fr(A,e){var t=e?Ir(A.buffer):A.buffer;return new A.constructor(t,A.byteOffset,A.length)}function br(A,e){if(A!==e){var t=A!==r,n=null===A,o=A==A,i=la(A),a=e!==r,s=null===e,l=e==e,c=la(e);if(!s&&!c&&!i&&A>e||i&&a&&l&&!s&&!c||n&&a&&l||!t&&l||!o)return 1;if(!n&&!i&&!c&&A<e||c&&t&&o&&!n&&!i||s&&t&&o||!a&&o||!l)return-1}return 0}function Er(A,e,t,r){for(var o=-1,i=A.length,a=t.length,s=-1,l=e.length,c=wt(i-a,0),u=n(l+c),d=!r;++s<l;)u[s]=e[s];for(;++o<a;)(d||o<i)&&(u[t[o]]=A[o]);for(;c--;)u[s++]=A[o++];return u}function Tr(A,e,t,r){for(var o=-1,i=A.length,a=-1,s=t.length,l=-1,c=e.length,u=wt(i-s,0),d=n(u+c),g=!r;++o<u;)d[o]=A[o];for(var f=o;++l<c;)d[f+l]=e[l];for(;++a<s;)(g||o<i)&&(d[f+t[a]]=A[o++]);return d}function Sr(A,e){var t=-1,r=A.length;for(e||(e=n(r));++t<r;)e[t]=A[t];return e}function Pr(A,e,t,n){var o=!t;t||(t={});for(var i=-1,a=e.length;++i<a;){var s=e[i],l=n?n(t[s],A[s],s,t,A):r;l===r&&(l=A[s]),o?on(t,s,l):en(t,s,l)}return t}function xr(A,e){return function(t,n){var r=Gi(t)?Ee:nn,o=e?e():{};return r(t,A,lo(n,2),o)}}function Hr(A){return Yn((function(e,t){var n=-1,o=t.length,i=o>1?t[o-1]:r,a=o>2?t[2]:r;for(i=A.length>3&&"function"==typeof i?(o--,i):r,a&&Co(t[0],t[1],a)&&(i=o<3?r:i,o=1),e=bA(e);++n<o;){var s=t[n];s&&A(e,s,n,i)}return e}))}function Dr(A,e){return function(t,n){if(null==t)return t;if(!Xi(t))return A(t,n);for(var r=t.length,o=e?r:-1,i=bA(t);(e?o--:++o<r)&&!1!==n(i[o],o,i););return t}}function Lr(A){return function(e,t,n){for(var r=-1,o=bA(e),i=n(e),a=i.length;a--;){var s=i[A?a:++r];if(!1===t(o[s],s,o))break}return e}}function Or(A){return function(e){var t=at(e=ma(e))?ft(e):r,n=t?t[0]:e.charAt(0),o=t?Ur(t,1).join(""):e.slice(1);return n[A]()+o}}function Mr(A){return function(e){return Me(qa(Za(e).replace(Ae,"")),A,"")}}function _r(A){return function(){var e=arguments;switch(e.length){case 0:return new A;case 1:return new A(e[0]);case 2:return new A(e[0],e[1]);case 3:return new A(e[0],e[1],e[2]);case 4:return new A(e[0],e[1],e[2],e[3]);case 5:return new A(e[0],e[1],e[2],e[3],e[4]);case 6:return new A(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new A(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=Rt(A.prototype),n=A.apply(t,e);return ea(n)?n:t}}function kr(A){return function(e,t,n){var o=bA(e);if(!Xi(e)){var i=lo(t,3);e=xa(e),t=function(A){return i(o[A],A,o)}}var a=A(e,t,n);return a>-1?o[i?e[a]:a]:r}}function Vr(A){return no((function(e){var t=e.length,n=t,i=Nt.prototype.thru;for(A&&e.reverse();n--;){var a=e[n];if("function"!=typeof a)throw new SA(o);if(i&&!s&&"wrapper"==ao(a))var s=new Nt([],!0)}for(n=s?n:t;++n<t;){var l=ao(a=e[n]),c="wrapper"==l?io(a):r;s=c&&Qo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[ao(c[0])].apply(s,c[3]):1==a.length&&Qo(a)?s[l]():s.thru(a)}return function(){var A=arguments,n=A[0];if(s&&1==A.length&&Gi(n))return s.plant(n).value();for(var r=0,o=t?e[r].apply(this,A):n;++r<t;)o=e[r].call(this,o);return o}}))}function Rr(A,e,t,o,i,a,s,l,c,d){var g=e&u,f=1&e,h=2&e,B=24&e,p=512&e,w=h?r:_r(A);return function u(){for(var m=arguments.length,v=n(m),C=m;C--;)v[C]=arguments[C];if(B)var U=so(u),Q=function(A,e){for(var t=A.length,n=0;t--;)A[t]===e&&++n;return n}(v,U);if(o&&(v=Er(v,o,i,B)),a&&(v=Tr(v,a,s,B)),m-=Q,B&&m<d){var y=ct(v,U);return zr(A,e,Rr,u.placeholder,t,v,y,l,c,d-m)}var I=f?t:this,F=h?I[A]:A;return m=v.length,l?v=function(A,e){var t=A.length,n=mt(e.length,t),o=Sr(A);for(;n--;){var i=e[n];A[n]=vo(i,t)?o[i]:r}return A}(v,l):p&&m>1&&v.reverse(),g&&c<m&&(v.length=c),this&&this!==he&&this instanceof u&&(F=w||_r(F)),F.apply(I,v)}}function Kr(A,e){return function(t,n){return function(A,e,t,n){return Cn(A,(function(A,r,o){e(n,t(A),r,o)})),n}(t,A,e(n),{})}}function Nr(A,e){return function(t,n){var o;if(t===r&&n===r)return e;if(t!==r&&(o=t),n!==r){if(o===r)return n;"string"==typeof t||"string"==typeof n?(t=cr(t),n=cr(n)):(t=lr(t),n=lr(n)),o=A(t,n)}return o}}function Zr(A){return no((function(e){return e=Le(e,$e(lo())),Yn((function(t){var n=this;return A(e,(function(A){return be(A,n,t)}))}))}))}function Gr(A,e){var t=(e=e===r?" ":cr(e)).length;if(t<2)return t?jn(e,A):e;var n=jn(e,fe(A/gt(e)));return at(e)?Ur(ft(n),0,A).join(""):n.slice(0,A)}function Wr(A){return function(e,t,o){return o&&"number"!=typeof o&&Co(e,t,o)&&(t=o=r),e=fa(e),t===r?(t=e,e=0):t=fa(t),function(A,e,t,r){for(var o=-1,i=wt(fe((e-A)/(t||1)),0),a=n(i);i--;)a[r?i:++o]=A,A+=t;return a}(e,t,o=o===r?e<t?1:-1:fa(o),A)}}function Xr(A){return function(e,t){return"string"==typeof e&&"string"==typeof t||(e=pa(e),t=pa(t)),A(e,t)}}function zr(A,e,t,n,o,i,a,s,u,d){var g=8&e;e|=g?l:c,4&(e&=~(g?c:l))||(e&=-4);var f=[A,e,o,g?i:r,g?a:r,g?r:i,g?r:a,s,u,d],h=t.apply(r,f);return Qo(A)&&Po(h,f),h.placeholder=n,Do(h,A,e)}function Jr(A){var e=FA[A];return function(A,t){if(A=pa(A),(t=null==t?0:mt(ha(t),292))&&ve(A)){var n=(ma(A)+"e").split("e");return+((n=(ma(e(n[0]+"e"+(+n[1]+t)))+"e").split("e"))[0]+"e"+(+n[1]-t))}return e(A)}}var jr=bt&&1/ut(new bt([,-0]))[1]==g?function(A){return new bt(A)}:ls;function Yr(A){return function(e){var t=Bo(e);return t==I?st(e):t==S?dt(e):function(A,e){return Le(e,(function(e){return[e,A[e]]}))}(e,A(e))}}function qr(A,e,t,i,g,f,h,B){var p=2&e;if(!p&&"function"!=typeof A)throw new SA(o);var w=i?i.length:0;if(w||(e&=-97,i=g=r),h=h===r?h:wt(ha(h),0),B=B===r?B:ha(B),w-=g?g.length:0,e&c){var m=i,v=g;i=g=r}var C=p?r:io(A),U=[A,e,t,i,g,m,v,f,h,B];if(C&&function(A,e){var t=A[1],n=e[1],r=t|n,o=r<131,i=n==u&&8==t||n==u&&t==d&&A[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==t;if(!o&&!i)return A;1&n&&(A[2]=e[2],r|=1&t?0:4);var s=e[3];if(s){var l=A[3];A[3]=l?Er(l,s,e[4]):s,A[4]=l?ct(A[3],a):e[4]}(s=e[5])&&(l=A[5],A[5]=l?Tr(l,s,e[6]):s,A[6]=l?ct(A[5],a):e[6]);(s=e[7])&&(A[7]=s);n&u&&(A[8]=null==A[8]?e[8]:mt(A[8],e[8]));null==A[9]&&(A[9]=e[9]);A[0]=e[0],A[1]=r}(U,C),A=U[0],e=U[1],t=U[2],i=U[3],g=U[4],!(B=U[9]=U[9]===r?p?0:A.length:wt(U[9]-w,0))&&24&e&&(e&=-25),e&&1!=e)Q=8==e||e==s?function(A,e,t){var o=_r(A);return function i(){for(var a=arguments.length,s=n(a),l=a,c=so(i);l--;)s[l]=arguments[l];var u=a<3&&s[0]!==c&&s[a-1]!==c?[]:ct(s,c);return(a-=u.length)<t?zr(A,e,Rr,i.placeholder,r,s,u,r,r,t-a):be(this&&this!==he&&this instanceof i?o:A,this,s)}}(A,e,B):e!=l&&33!=e||g.length?Rr.apply(r,U):function(A,e,t,r){var o=1&e,i=_r(A);return function e(){for(var a=-1,s=arguments.length,l=-1,c=r.length,u=n(c+s),d=this&&this!==he&&this instanceof e?i:A;++l<c;)u[l]=r[l];for(;s--;)u[l++]=arguments[++a];return be(d,o?t:this,u)}}(A,e,t,i);else var Q=function(A,e,t){var n=1&e,r=_r(A);return function e(){return(this&&this!==he&&this instanceof e?r:A).apply(n?t:this,arguments)}}(A,e,t);return Do((C?er:Po)(Q,U),A,e)}function $r(A,e,t,n){return A===r||Ri(A,HA[t])&&!OA.call(n,t)?e:A}function Ao(A,e,t,n,o,i){return ea(A)&&ea(e)&&(i.set(e,A),Nn(A,e,r,Ao,i),i.delete(e)),A}function eo(A){return oa(A)?r:A}function to(A,e,t,n,o,i){var a=1&t,s=A.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(A),u=i.get(e);if(c&&u)return c==e&&u==A;var d=-1,g=!0,f=2&t?new zt:r;for(i.set(A,e),i.set(e,A);++d<s;){var h=A[d],B=e[d];if(n)var p=a?n(B,h,d,e,A,i):n(h,B,d,A,e,i);if(p!==r){if(p)continue;g=!1;break}if(f){if(!ke(e,(function(A,e){if(!et(f,e)&&(h===A||o(h,A,t,n,i)))return f.push(e)}))){g=!1;break}}else if(h!==B&&!o(h,B,t,n,i)){g=!1;break}}return i.delete(A),i.delete(e),g}function no(A){return Ho(Eo(A,r,Wo),A+"")}function ro(A){return In(A,xa,fo)}function oo(A){return In(A,Ha,ho)}var io=St?function(A){return St.get(A)}:ls;function ao(A){for(var e=A.name+"",t=Pt[e],n=OA.call(Pt,e)?t.length:0;n--;){var r=t[n],o=r.func;if(null==o||o==A)return r.name}return e}function so(A){return(OA.call(Vt,"placeholder")?Vt:A).placeholder}function lo(){var A=Vt.iteratee||os;return A=A===os?On:A,arguments.length?A(arguments[0],arguments[1]):A}function co(A,e){var t,n,r=A.__data__;return("string"==(n=typeof(t=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?r["string"==typeof e?"string":"hash"]:r.map}function uo(A){for(var e=xa(A),t=e.length;t--;){var n=e[t],r=A[n];e[t]=[n,r,Fo(r)]}return e}function go(A,e){var t=function(A,e){return null==A?r:A[e]}(A,e);return Ln(t)?t:r}var fo=pe?function(A){return null==A?[]:(A=bA(A),xe(pe(A),(function(e){return JA.call(A,e)})))}:Bs,ho=pe?function(A){for(var e=[];A;)Oe(e,fo(A)),A=XA(A);return e}:Bs,Bo=Fn;function po(A,e,t){for(var n=-1,r=(e=vr(e,A)).length,o=!1;++n<r;){var i=_o(e[n]);if(!(o=null!=A&&t(A,i)))break;A=A[i]}return o||++n!=r?o:!!(r=null==A?0:A.length)&&Aa(r)&&vo(i,r)&&(Gi(A)||Zi(A))}function wo(A){return"function"!=typeof A.constructor||Io(A)?{}:Rt(XA(A))}function mo(A){return Gi(A)||Zi(A)||!!(YA&&A&&A[YA])}function vo(A,e){var t=typeof A;return!!(e=null==e?f:e)&&("number"==t||"symbol"!=t&&vA.test(A))&&A>-1&&A%1==0&&A<e}function Co(A,e,t){if(!ea(t))return!1;var n=typeof e;return!!("number"==n?Xi(t)&&vo(e,t.length):"string"==n&&e in t)&&Ri(t[e],A)}function Uo(A,e){if(Gi(A))return!1;var t=typeof A;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=A&&!la(A))||(tA.test(A)||!eA.test(A)||null!=e&&A in bA(e))}function Qo(A){var e=ao(A),t=Vt[e];if("function"!=typeof t||!(e in Zt.prototype))return!1;if(A===t)return!0;var n=io(t);return!!n&&A===n[0]}(yt&&Bo(new yt(new ArrayBuffer(1)))!=L||It&&Bo(new It)!=I||Ft&&Bo(Ft.resolve())!=E||bt&&Bo(new bt)!=S||Et&&Bo(new Et)!=H)&&(Bo=function(A){var e=Fn(A),t=e==b?A.constructor:r,n=t?ko(t):"";if(n)switch(n){case xt:return L;case Ht:return I;case Dt:return E;case Lt:return S;case Ot:return H}return e});var yo=DA?qi:ps;function Io(A){var e=A&&A.constructor;return A===("function"==typeof e&&e.prototype||HA)}function Fo(A){return A==A&&!ea(A)}function bo(A,e){return function(t){return null!=t&&(t[A]===e&&(e!==r||A in bA(t)))}}function Eo(A,e,t){return e=wt(e===r?A.length-1:e,0),function(){for(var r=arguments,o=-1,i=wt(r.length-e,0),a=n(i);++o<i;)a[o]=r[e+o];o=-1;for(var s=n(e+1);++o<e;)s[o]=r[o];return s[e]=t(a),be(A,this,s)}}function To(A,e){return e.length<2?A:yn(A,rr(e,0,-1))}function So(A,e){if(("constructor"!==e||"function"!=typeof A[e])&&"__proto__"!=e)return A[e]}var Po=Lo(er),xo=ge||function(A,e){return he.setTimeout(A,e)},Ho=Lo(tr);function Do(A,e,t){var n=e+"";return Ho(A,function(A,e){var t=e.length;if(!t)return A;var n=t-1;return e[n]=(t>1?"& ":"")+e[n],e=e.join(t>2?", ":" "),A.replace(sA,"{\n/* [wrapped with "+e+"] */\n")}(n,function(A,e){return Te(p,(function(t){var n="_."+t[0];e&t[1]&&!He(A,n)&&A.push(n)})),A.sort()}(function(A){var e=A.match(lA);return e?e[1].split(cA):[]}(n),t)))}function Lo(A){var e=0,t=0;return function(){var n=vt(),o=16-(n-t);if(t=n,o>0){if(++e>=800)return arguments[0]}else e=0;return A.apply(r,arguments)}}function Oo(A,e){var t=-1,n=A.length,o=n-1;for(e=e===r?n:e;++t<e;){var i=Jn(t,o),a=A[i];A[i]=A[t],A[t]=a}return A.length=e,A}var Mo=function(A){var e=Li(A,(function(A){return 500===t.size&&t.clear(),A})),t=e.cache;return e}((function(A){var e=[];return 46===A.charCodeAt(0)&&e.push(""),A.replace(nA,(function(A,t,n,r){e.push(n?r.replace(gA,"$1"):t||A)})),e}));function _o(A){if("string"==typeof A||la(A))return A;var e=A+"";return"0"==e&&1/A==-1/0?"-0":e}function ko(A){if(null!=A){try{return LA.call(A)}catch(A){}try{return A+""}catch(A){}}return""}function Vo(A){if(A instanceof Zt)return A.clone();var e=new Nt(A.__wrapped__,A.__chain__);return e.__actions__=Sr(A.__actions__),e.__index__=A.__index__,e.__values__=A.__values__,e}var Ro=Yn((function(A,e){return zi(A)?dn(A,wn(e,1,zi,!0)):[]})),Ko=Yn((function(A,e){var t=Yo(e);return zi(t)&&(t=r),zi(A)?dn(A,wn(e,1,zi,!0),lo(t,2)):[]})),No=Yn((function(A,e){var t=Yo(e);return zi(t)&&(t=r),zi(A)?dn(A,wn(e,1,zi,!0),r,t):[]}));function Zo(A,e,t){var n=null==A?0:A.length;if(!n)return-1;var r=null==t?0:ha(t);return r<0&&(r=wt(n+r,0)),Ke(A,lo(e,3),r)}function Go(A,e,t){var n=null==A?0:A.length;if(!n)return-1;var o=n-1;return t!==r&&(o=ha(t),o=t<0?wt(n+o,0):mt(o,n-1)),Ke(A,lo(e,3),o,!0)}function Wo(A){return(null==A?0:A.length)?wn(A,1):[]}function Xo(A){return A&&A.length?A[0]:r}var zo=Yn((function(A){var e=Le(A,wr);return e.length&&e[0]===A[0]?Sn(e):[]})),Jo=Yn((function(A){var e=Yo(A),t=Le(A,wr);return e===Yo(t)?e=r:t.pop(),t.length&&t[0]===A[0]?Sn(t,lo(e,2)):[]})),jo=Yn((function(A){var e=Yo(A),t=Le(A,wr);return(e="function"==typeof e?e:r)&&t.pop(),t.length&&t[0]===A[0]?Sn(t,r,e):[]}));function Yo(A){var e=null==A?0:A.length;return e?A[e-1]:r}var qo=Yn($o);function $o(A,e){return A&&A.length&&e&&e.length?Xn(A,e):A}var Ai=no((function(A,e){var t=null==A?0:A.length,n=an(A,e);return zn(A,Le(e,(function(A){return vo(A,t)?+A:A})).sort(br)),n}));function ei(A){return null==A?A:Qt.call(A)}var ti=Yn((function(A){return ur(wn(A,1,zi,!0))})),ni=Yn((function(A){var e=Yo(A);return zi(e)&&(e=r),ur(wn(A,1,zi,!0),lo(e,2))})),ri=Yn((function(A){var e=Yo(A);return e="function"==typeof e?e:r,ur(wn(A,1,zi,!0),r,e)}));function oi(A){if(!A||!A.length)return[];var e=0;return A=xe(A,(function(A){if(zi(A))return e=wt(A.length,e),!0})),Ye(e,(function(e){return Le(A,Xe(e))}))}function ii(A,e){if(!A||!A.length)return[];var t=oi(A);return null==e?t:Le(t,(function(A){return be(e,r,A)}))}var ai=Yn((function(A,e){return zi(A)?dn(A,e):[]})),si=Yn((function(A){return Br(xe(A,zi))})),li=Yn((function(A){var e=Yo(A);return zi(e)&&(e=r),Br(xe(A,zi),lo(e,2))})),ci=Yn((function(A){var e=Yo(A);return e="function"==typeof e?e:r,Br(xe(A,zi),r,e)})),ui=Yn(oi);var di=Yn((function(A){var e=A.length,t=e>1?A[e-1]:r;return t="function"==typeof t?(A.pop(),t):r,ii(A,t)}));function gi(A){var e=Vt(A);return e.__chain__=!0,e}function fi(A,e){return e(A)}var hi=no((function(A){var e=A.length,t=e?A[0]:0,n=this.__wrapped__,o=function(e){return an(e,A)};return!(e>1||this.__actions__.length)&&n instanceof Zt&&vo(t)?((n=n.slice(t,+t+(e?1:0))).__actions__.push({func:fi,args:[o],thisArg:r}),new Nt(n,this.__chain__).thru((function(A){return e&&!A.length&&A.push(r),A}))):this.thru(o)}));var Bi=xr((function(A,e,t){OA.call(A,t)?++A[t]:on(A,t,1)}));var pi=kr(Zo),wi=kr(Go);function mi(A,e){return(Gi(A)?Te:gn)(A,lo(e,3))}function vi(A,e){return(Gi(A)?Se:fn)(A,lo(e,3))}var Ci=xr((function(A,e,t){OA.call(A,t)?A[t].push(e):on(A,t,[e])}));var Ui=Yn((function(A,e,t){var r=-1,o="function"==typeof e,i=Xi(A)?n(A.length):[];return gn(A,(function(A){i[++r]=o?be(e,A,t):Pn(A,e,t)})),i})),Qi=xr((function(A,e,t){on(A,t,e)}));function yi(A,e){return(Gi(A)?Le:Vn)(A,lo(e,3))}var Ii=xr((function(A,e,t){A[t?0:1].push(e)}),(function(){return[[],[]]}));var Fi=Yn((function(A,e){if(null==A)return[];var t=e.length;return t>1&&Co(A,e[0],e[1])?e=[]:t>2&&Co(e[0],e[1],e[2])&&(e=[e[0]]),Gn(A,wn(e,1),[])})),bi=ce||function(){return he.Date.now()};function Ei(A,e,t){return e=t?r:e,e=A&&null==e?A.length:e,qr(A,u,r,r,r,r,e)}function Ti(A,e){var t;if("function"!=typeof e)throw new SA(o);return A=ha(A),function(){return--A>0&&(t=e.apply(this,arguments)),A<=1&&(e=r),t}}var Si=Yn((function(A,e,t){var n=1;if(t.length){var r=ct(t,so(Si));n|=l}return qr(A,n,e,t,r)})),Pi=Yn((function(A,e,t){var n=3;if(t.length){var r=ct(t,so(Pi));n|=l}return qr(e,n,A,t,r)}));function xi(A,e,t){var n,i,a,s,l,c,u=0,d=!1,g=!1,f=!0;if("function"!=typeof A)throw new SA(o);function h(e){var t=n,o=i;return n=i=r,u=e,s=A.apply(o,t)}function B(A){var t=A-c;return c===r||t>=e||t<0||g&&A-u>=a}function p(){var A=bi();if(B(A))return w(A);l=xo(p,function(A){var t=e-(A-c);return g?mt(t,a-(A-u)):t}(A))}function w(A){return l=r,f&&n?h(A):(n=i=r,s)}function m(){var A=bi(),t=B(A);if(n=arguments,i=this,c=A,t){if(l===r)return function(A){return u=A,l=xo(p,e),d?h(A):s}(c);if(g)return Qr(l),l=xo(p,e),h(c)}return l===r&&(l=xo(p,e)),s}return e=pa(e)||0,ea(t)&&(d=!!t.leading,a=(g="maxWait"in t)?wt(pa(t.maxWait)||0,e):a,f="trailing"in t?!!t.trailing:f),m.cancel=function(){l!==r&&Qr(l),u=0,n=c=i=l=r},m.flush=function(){return l===r?s:w(bi())},m}var Hi=Yn((function(A,e){return un(A,1,e)})),Di=Yn((function(A,e,t){return un(A,pa(e)||0,t)}));function Li(A,e){if("function"!=typeof A||null!=e&&"function"!=typeof e)throw new SA(o);var t=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=t.cache;if(o.has(r))return o.get(r);var i=A.apply(this,n);return t.cache=o.set(r,i)||o,i};return t.cache=new(Li.Cache||Xt),t}function Oi(A){if("function"!=typeof A)throw new SA(o);return function(){var e=arguments;switch(e.length){case 0:return!A.call(this);case 1:return!A.call(this,e[0]);case 2:return!A.call(this,e[0],e[1]);case 3:return!A.call(this,e[0],e[1],e[2])}return!A.apply(this,e)}}Li.Cache=Xt;var Mi=Cr((function(A,e){var t=(e=1==e.length&&Gi(e[0])?Le(e[0],$e(lo())):Le(wn(e,1),$e(lo()))).length;return Yn((function(n){for(var r=-1,o=mt(n.length,t);++r<o;)n[r]=e[r].call(this,n[r]);return be(A,this,n)}))})),_i=Yn((function(A,e){var t=ct(e,so(_i));return qr(A,l,r,e,t)})),ki=Yn((function(A,e){var t=ct(e,so(ki));return qr(A,c,r,e,t)})),Vi=no((function(A,e){return qr(A,d,r,r,r,e)}));function Ri(A,e){return A===e||A!=A&&e!=e}var Ki=Xr(bn),Ni=Xr((function(A,e){return A>=e})),Zi=xn(function(){return arguments}())?xn:function(A){return ta(A)&&OA.call(A,"callee")&&!JA.call(A,"callee")},Gi=n.isArray,Wi=Ce?$e(Ce):function(A){return ta(A)&&Fn(A)==D};function Xi(A){return null!=A&&Aa(A.length)&&!qi(A)}function zi(A){return ta(A)&&Xi(A)}var Ji=me||ps,ji=Ue?$e(Ue):function(A){return ta(A)&&Fn(A)==C};function Yi(A){if(!ta(A))return!1;var e=Fn(A);return e==U||"[object DOMException]"==e||"string"==typeof A.message&&"string"==typeof A.name&&!oa(A)}function qi(A){if(!ea(A))return!1;var e=Fn(A);return e==Q||e==y||"[object AsyncFunction]"==e||"[object Proxy]"==e}function $i(A){return"number"==typeof A&&A==ha(A)}function Aa(A){return"number"==typeof A&&A>-1&&A%1==0&&A<=f}function ea(A){var e=typeof A;return null!=A&&("object"==e||"function"==e)}function ta(A){return null!=A&&"object"==typeof A}var na=Qe?$e(Qe):function(A){return ta(A)&&Bo(A)==I};function ra(A){return"number"==typeof A||ta(A)&&Fn(A)==F}function oa(A){if(!ta(A)||Fn(A)!=b)return!1;var e=XA(A);if(null===e)return!0;var t=OA.call(e,"constructor")&&e.constructor;return"function"==typeof t&&t instanceof t&&LA.call(t)==VA}var ia=ye?$e(ye):function(A){return ta(A)&&Fn(A)==T};var aa=Ie?$e(Ie):function(A){return ta(A)&&Bo(A)==S};function sa(A){return"string"==typeof A||!Gi(A)&&ta(A)&&Fn(A)==P}function la(A){return"symbol"==typeof A||ta(A)&&Fn(A)==x}var ca=Fe?$e(Fe):function(A){return ta(A)&&Aa(A.length)&&!!se[Fn(A)]};var ua=Xr(kn),da=Xr((function(A,e){return A<=e}));function ga(A){if(!A)return[];if(Xi(A))return sa(A)?ft(A):Sr(A);if(qA&&A[qA])return function(A){for(var e,t=[];!(e=A.next()).done;)t.push(e.value);return t}(A[qA]());var e=Bo(A);return(e==I?st:e==S?ut:Ra)(A)}function fa(A){return A?(A=pa(A))===g||A===-1/0?17976931348623157e292*(A<0?-1:1):A==A?A:0:0===A?A:0}function ha(A){var e=fa(A),t=e%1;return e==e?t?e-t:e:0}function Ba(A){return A?sn(ha(A),0,B):0}function pa(A){if("number"==typeof A)return A;if(la(A))return h;if(ea(A)){var e="function"==typeof A.valueOf?A.valueOf():A;A=ea(e)?e+"":e}if("string"!=typeof A)return 0===A?A:+A;A=qe(A);var t=pA.test(A);return t||mA.test(A)?de(A.slice(2),t?2:8):BA.test(A)?h:+A}function wa(A){return Pr(A,Ha(A))}function ma(A){return null==A?"":cr(A)}var va=Hr((function(A,e){if(Io(e)||Xi(e))Pr(e,xa(e),A);else for(var t in e)OA.call(e,t)&&en(A,t,e[t])})),Ca=Hr((function(A,e){Pr(e,Ha(e),A)})),Ua=Hr((function(A,e,t,n){Pr(e,Ha(e),A,n)})),Qa=Hr((function(A,e,t,n){Pr(e,xa(e),A,n)})),ya=no(an);var Ia=Yn((function(A,e){A=bA(A);var t=-1,n=e.length,o=n>2?e[2]:r;for(o&&Co(e[0],e[1],o)&&(n=1);++t<n;)for(var i=e[t],a=Ha(i),s=-1,l=a.length;++s<l;){var c=a[s],u=A[c];(u===r||Ri(u,HA[c])&&!OA.call(A,c))&&(A[c]=i[c])}return A})),Fa=Yn((function(A){return A.push(r,Ao),be(La,r,A)}));function ba(A,e,t){var n=null==A?r:yn(A,e);return n===r?t:n}function Ea(A,e){return null!=A&&po(A,e,Tn)}var Ta=Kr((function(A,e,t){null!=e&&"function"!=typeof e.toString&&(e=kA.call(e)),A[e]=t}),es(rs)),Sa=Kr((function(A,e,t){null!=e&&"function"!=typeof e.toString&&(e=kA.call(e)),OA.call(A,e)?A[e].push(t):A[e]=[t]}),lo),Pa=Yn(Pn);function xa(A){return Xi(A)?jt(A):Mn(A)}function Ha(A){return Xi(A)?jt(A,!0):_n(A)}var Da=Hr((function(A,e,t){Nn(A,e,t)})),La=Hr((function(A,e,t,n){Nn(A,e,t,n)})),Oa=no((function(A,e){var t={};if(null==A)return t;var n=!1;e=Le(e,(function(e){return e=vr(e,A),n||(n=e.length>1),e})),Pr(A,oo(A),t),n&&(t=ln(t,7,eo));for(var r=e.length;r--;)dr(t,e[r]);return t}));var Ma=no((function(A,e){return null==A?{}:function(A,e){return Wn(A,e,(function(e,t){return Ea(A,t)}))}(A,e)}));function _a(A,e){if(null==A)return{};var t=Le(oo(A),(function(A){return[A]}));return e=lo(e),Wn(A,t,(function(A,t){return e(A,t[0])}))}var ka=Yr(xa),Va=Yr(Ha);function Ra(A){return null==A?[]:At(A,xa(A))}var Ka=Mr((function(A,e,t){return e=e.toLowerCase(),A+(t?Na(e):e)}));function Na(A){return Ya(ma(A).toLowerCase())}function Za(A){return(A=ma(A))&&A.replace(CA,rt).replace(ee,"")}var Ga=Mr((function(A,e,t){return A+(t?"-":"")+e.toLowerCase()})),Wa=Mr((function(A,e,t){return A+(t?" ":"")+e.toLowerCase()})),Xa=Or("toLowerCase");var za=Mr((function(A,e,t){return A+(t?"_":"")+e.toLowerCase()}));var Ja=Mr((function(A,e,t){return A+(t?" ":"")+Ya(e)}));var ja=Mr((function(A,e,t){return A+(t?" ":"")+e.toUpperCase()})),Ya=Or("toUpperCase");function qa(A,e,t){return A=ma(A),(e=t?r:e)===r?function(A){return oe.test(A)}(A)?function(A){return A.match(ne)||[]}(A):function(A){return A.match(uA)||[]}(A):A.match(e)||[]}var $a=Yn((function(A,e){try{return be(A,r,e)}catch(A){return Yi(A)?A:new yA(A)}})),As=no((function(A,e){return Te(e,(function(e){e=_o(e),on(A,e,Si(A[e],A))})),A}));function es(A){return function(){return A}}var ts=Vr(),ns=Vr(!0);function rs(A){return A}function os(A){return On("function"==typeof A?A:ln(A,1))}var is=Yn((function(A,e){return function(t){return Pn(t,A,e)}})),as=Yn((function(A,e){return function(t){return Pn(A,t,e)}}));function ss(A,e,t){var n=xa(e),r=Qn(e,n);null!=t||ea(e)&&(r.length||!n.length)||(t=e,e=A,A=this,r=Qn(e,xa(e)));var o=!(ea(t)&&"chain"in t&&!t.chain),i=qi(A);return Te(r,(function(t){var n=e[t];A[t]=n,i&&(A.prototype[t]=function(){var e=this.__chain__;if(o||e){var t=A(this.__wrapped__);return(t.__actions__=Sr(this.__actions__)).push({func:n,args:arguments,thisArg:A}),t.__chain__=e,t}return n.apply(A,Oe([this.value()],arguments))})})),A}function ls(){}var cs=Zr(Le),us=Zr(Pe),ds=Zr(ke);function gs(A){return Uo(A)?Xe(_o(A)):function(A){return function(e){return yn(e,A)}}(A)}var fs=Wr(),hs=Wr(!0);function Bs(){return[]}function ps(){return!1}var ws=Nr((function(A,e){return A+e}),0),ms=Jr("ceil"),vs=Nr((function(A,e){return A/e}),1),Cs=Jr("floor");var Us,Qs=Nr((function(A,e){return A*e}),1),ys=Jr("round"),Is=Nr((function(A,e){return A-e}),0);return Vt.after=function(A,e){if("function"!=typeof e)throw new SA(o);return A=ha(A),function(){if(--A<1)return e.apply(this,arguments)}},Vt.ary=Ei,Vt.assign=va,Vt.assignIn=Ca,Vt.assignInWith=Ua,Vt.assignWith=Qa,Vt.at=ya,Vt.before=Ti,Vt.bind=Si,Vt.bindAll=As,Vt.bindKey=Pi,Vt.castArray=function(){if(!arguments.length)return[];var A=arguments[0];return Gi(A)?A:[A]},Vt.chain=gi,Vt.chunk=function(A,e,t){e=(t?Co(A,e,t):e===r)?1:wt(ha(e),0);var o=null==A?0:A.length;if(!o||e<1)return[];for(var i=0,a=0,s=n(fe(o/e));i<o;)s[a++]=rr(A,i,i+=e);return s},Vt.compact=function(A){for(var e=-1,t=null==A?0:A.length,n=0,r=[];++e<t;){var o=A[e];o&&(r[n++]=o)}return r},Vt.concat=function(){var A=arguments.length;if(!A)return[];for(var e=n(A-1),t=arguments[0],r=A;r--;)e[r-1]=arguments[r];return Oe(Gi(t)?Sr(t):[t],wn(e,1))},Vt.cond=function(A){var e=null==A?0:A.length,t=lo();return A=e?Le(A,(function(A){if("function"!=typeof A[1])throw new SA(o);return[t(A[0]),A[1]]})):[],Yn((function(t){for(var n=-1;++n<e;){var r=A[n];if(be(r[0],this,t))return be(r[1],this,t)}}))},Vt.conforms=function(A){return function(A){var e=xa(A);return function(t){return cn(t,A,e)}}(ln(A,1))},Vt.constant=es,Vt.countBy=Bi,Vt.create=function(A,e){var t=Rt(A);return null==e?t:rn(t,e)},Vt.curry=function A(e,t,n){var o=qr(e,8,r,r,r,r,r,t=n?r:t);return o.placeholder=A.placeholder,o},Vt.curryRight=function A(e,t,n){var o=qr(e,s,r,r,r,r,r,t=n?r:t);return o.placeholder=A.placeholder,o},Vt.debounce=xi,Vt.defaults=Ia,Vt.defaultsDeep=Fa,Vt.defer=Hi,Vt.delay=Di,Vt.difference=Ro,Vt.differenceBy=Ko,Vt.differenceWith=No,Vt.drop=function(A,e,t){var n=null==A?0:A.length;return n?rr(A,(e=t||e===r?1:ha(e))<0?0:e,n):[]},Vt.dropRight=function(A,e,t){var n=null==A?0:A.length;return n?rr(A,0,(e=n-(e=t||e===r?1:ha(e)))<0?0:e):[]},Vt.dropRightWhile=function(A,e){return A&&A.length?fr(A,lo(e,3),!0,!0):[]},Vt.dropWhile=function(A,e){return A&&A.length?fr(A,lo(e,3),!0):[]},Vt.fill=function(A,e,t,n){var o=null==A?0:A.length;return o?(t&&"number"!=typeof t&&Co(A,e,t)&&(t=0,n=o),function(A,e,t,n){var o=A.length;for((t=ha(t))<0&&(t=-t>o?0:o+t),(n=n===r||n>o?o:ha(n))<0&&(n+=o),n=t>n?0:Ba(n);t<n;)A[t++]=e;return A}(A,e,t,n)):[]},Vt.filter=function(A,e){return(Gi(A)?xe:pn)(A,lo(e,3))},Vt.flatMap=function(A,e){return wn(yi(A,e),1)},Vt.flatMapDeep=function(A,e){return wn(yi(A,e),g)},Vt.flatMapDepth=function(A,e,t){return t=t===r?1:ha(t),wn(yi(A,e),t)},Vt.flatten=Wo,Vt.flattenDeep=function(A){return(null==A?0:A.length)?wn(A,g):[]},Vt.flattenDepth=function(A,e){return(null==A?0:A.length)?wn(A,e=e===r?1:ha(e)):[]},Vt.flip=function(A){return qr(A,512)},Vt.flow=ts,Vt.flowRight=ns,Vt.fromPairs=function(A){for(var e=-1,t=null==A?0:A.length,n={};++e<t;){var r=A[e];n[r[0]]=r[1]}return n},Vt.functions=function(A){return null==A?[]:Qn(A,xa(A))},Vt.functionsIn=function(A){return null==A?[]:Qn(A,Ha(A))},Vt.groupBy=Ci,Vt.initial=function(A){return(null==A?0:A.length)?rr(A,0,-1):[]},Vt.intersection=zo,Vt.intersectionBy=Jo,Vt.intersectionWith=jo,Vt.invert=Ta,Vt.invertBy=Sa,Vt.invokeMap=Ui,Vt.iteratee=os,Vt.keyBy=Qi,Vt.keys=xa,Vt.keysIn=Ha,Vt.map=yi,Vt.mapKeys=function(A,e){var t={};return e=lo(e,3),Cn(A,(function(A,n,r){on(t,e(A,n,r),A)})),t},Vt.mapValues=function(A,e){var t={};return e=lo(e,3),Cn(A,(function(A,n,r){on(t,n,e(A,n,r))})),t},Vt.matches=function(A){return Rn(ln(A,1))},Vt.matchesProperty=function(A,e){return Kn(A,ln(e,1))},Vt.memoize=Li,Vt.merge=Da,Vt.mergeWith=La,Vt.method=is,Vt.methodOf=as,Vt.mixin=ss,Vt.negate=Oi,Vt.nthArg=function(A){return A=ha(A),Yn((function(e){return Zn(e,A)}))},Vt.omit=Oa,Vt.omitBy=function(A,e){return _a(A,Oi(lo(e)))},Vt.once=function(A){return Ti(2,A)},Vt.orderBy=function(A,e,t,n){return null==A?[]:(Gi(e)||(e=null==e?[]:[e]),Gi(t=n?r:t)||(t=null==t?[]:[t]),Gn(A,e,t))},Vt.over=cs,Vt.overArgs=Mi,Vt.overEvery=us,Vt.overSome=ds,Vt.partial=_i,Vt.partialRight=ki,Vt.partition=Ii,Vt.pick=Ma,Vt.pickBy=_a,Vt.property=gs,Vt.propertyOf=function(A){return function(e){return null==A?r:yn(A,e)}},Vt.pull=qo,Vt.pullAll=$o,Vt.pullAllBy=function(A,e,t){return A&&A.length&&e&&e.length?Xn(A,e,lo(t,2)):A},Vt.pullAllWith=function(A,e,t){return A&&A.length&&e&&e.length?Xn(A,e,r,t):A},Vt.pullAt=Ai,Vt.range=fs,Vt.rangeRight=hs,Vt.rearg=Vi,Vt.reject=function(A,e){return(Gi(A)?xe:pn)(A,Oi(lo(e,3)))},Vt.remove=function(A,e){var t=[];if(!A||!A.length)return t;var n=-1,r=[],o=A.length;for(e=lo(e,3);++n<o;){var i=A[n];e(i,n,A)&&(t.push(i),r.push(n))}return zn(A,r),t},Vt.rest=function(A,e){if("function"!=typeof A)throw new SA(o);return Yn(A,e=e===r?e:ha(e))},Vt.reverse=ei,Vt.sampleSize=function(A,e,t){return e=(t?Co(A,e,t):e===r)?1:ha(e),(Gi(A)?qt:$n)(A,e)},Vt.set=function(A,e,t){return null==A?A:Ar(A,e,t)},Vt.setWith=function(A,e,t,n){return n="function"==typeof n?n:r,null==A?A:Ar(A,e,t,n)},Vt.shuffle=function(A){return(Gi(A)?$t:nr)(A)},Vt.slice=function(A,e,t){var n=null==A?0:A.length;return n?(t&&"number"!=typeof t&&Co(A,e,t)?(e=0,t=n):(e=null==e?0:ha(e),t=t===r?n:ha(t)),rr(A,e,t)):[]},Vt.sortBy=Fi,Vt.sortedUniq=function(A){return A&&A.length?sr(A):[]},Vt.sortedUniqBy=function(A,e){return A&&A.length?sr(A,lo(e,2)):[]},Vt.split=function(A,e,t){return t&&"number"!=typeof t&&Co(A,e,t)&&(e=t=r),(t=t===r?B:t>>>0)?(A=ma(A))&&("string"==typeof e||null!=e&&!ia(e))&&!(e=cr(e))&&at(A)?Ur(ft(A),0,t):A.split(e,t):[]},Vt.spread=function(A,e){if("function"!=typeof A)throw new SA(o);return e=null==e?0:wt(ha(e),0),Yn((function(t){var n=t[e],r=Ur(t,0,e);return n&&Oe(r,n),be(A,this,r)}))},Vt.tail=function(A){var e=null==A?0:A.length;return e?rr(A,1,e):[]},Vt.take=function(A,e,t){return A&&A.length?rr(A,0,(e=t||e===r?1:ha(e))<0?0:e):[]},Vt.takeRight=function(A,e,t){var n=null==A?0:A.length;return n?rr(A,(e=n-(e=t||e===r?1:ha(e)))<0?0:e,n):[]},Vt.takeRightWhile=function(A,e){return A&&A.length?fr(A,lo(e,3),!1,!0):[]},Vt.takeWhile=function(A,e){return A&&A.length?fr(A,lo(e,3)):[]},Vt.tap=function(A,e){return e(A),A},Vt.throttle=function(A,e,t){var n=!0,r=!0;if("function"!=typeof A)throw new SA(o);return ea(t)&&(n="leading"in t?!!t.leading:n,r="trailing"in t?!!t.trailing:r),xi(A,e,{leading:n,maxWait:e,trailing:r})},Vt.thru=fi,Vt.toArray=ga,Vt.toPairs=ka,Vt.toPairsIn=Va,Vt.toPath=function(A){return Gi(A)?Le(A,_o):la(A)?[A]:Sr(Mo(ma(A)))},Vt.toPlainObject=wa,Vt.transform=function(A,e,t){var n=Gi(A),r=n||Ji(A)||ca(A);if(e=lo(e,4),null==t){var o=A&&A.constructor;t=r?n?new o:[]:ea(A)&&qi(o)?Rt(XA(A)):{}}return(r?Te:Cn)(A,(function(A,n,r){return e(t,A,n,r)})),t},Vt.unary=function(A){return Ei(A,1)},Vt.union=ti,Vt.unionBy=ni,Vt.unionWith=ri,Vt.uniq=function(A){return A&&A.length?ur(A):[]},Vt.uniqBy=function(A,e){return A&&A.length?ur(A,lo(e,2)):[]},Vt.uniqWith=function(A,e){return e="function"==typeof e?e:r,A&&A.length?ur(A,r,e):[]},Vt.unset=function(A,e){return null==A||dr(A,e)},Vt.unzip=oi,Vt.unzipWith=ii,Vt.update=function(A,e,t){return null==A?A:gr(A,e,mr(t))},Vt.updateWith=function(A,e,t,n){return n="function"==typeof n?n:r,null==A?A:gr(A,e,mr(t),n)},Vt.values=Ra,Vt.valuesIn=function(A){return null==A?[]:At(A,Ha(A))},Vt.without=ai,Vt.words=qa,Vt.wrap=function(A,e){return _i(mr(e),A)},Vt.xor=si,Vt.xorBy=li,Vt.xorWith=ci,Vt.zip=ui,Vt.zipObject=function(A,e){return pr(A||[],e||[],en)},Vt.zipObjectDeep=function(A,e){return pr(A||[],e||[],Ar)},Vt.zipWith=di,Vt.entries=ka,Vt.entriesIn=Va,Vt.extend=Ca,Vt.extendWith=Ua,ss(Vt,Vt),Vt.add=ws,Vt.attempt=$a,Vt.camelCase=Ka,Vt.capitalize=Na,Vt.ceil=ms,Vt.clamp=function(A,e,t){return t===r&&(t=e,e=r),t!==r&&(t=(t=pa(t))==t?t:0),e!==r&&(e=(e=pa(e))==e?e:0),sn(pa(A),e,t)},Vt.clone=function(A){return ln(A,4)},Vt.cloneDeep=function(A){return ln(A,5)},Vt.cloneDeepWith=function(A,e){return ln(A,5,e="function"==typeof e?e:r)},Vt.cloneWith=function(A,e){return ln(A,4,e="function"==typeof e?e:r)},Vt.conformsTo=function(A,e){return null==e||cn(A,e,xa(e))},Vt.deburr=Za,Vt.defaultTo=function(A,e){return null==A||A!=A?e:A},Vt.divide=vs,Vt.endsWith=function(A,e,t){A=ma(A),e=cr(e);var n=A.length,o=t=t===r?n:sn(ha(t),0,n);return(t-=e.length)>=0&&A.slice(t,o)==e},Vt.eq=Ri,Vt.escape=function(A){return(A=ma(A))&&Y.test(A)?A.replace(J,ot):A},Vt.escapeRegExp=function(A){return(A=ma(A))&&oA.test(A)?A.replace(rA,"\\$&"):A},Vt.every=function(A,e,t){var n=Gi(A)?Pe:hn;return t&&Co(A,e,t)&&(e=r),n(A,lo(e,3))},Vt.find=pi,Vt.findIndex=Zo,Vt.findKey=function(A,e){return Re(A,lo(e,3),Cn)},Vt.findLast=wi,Vt.findLastIndex=Go,Vt.findLastKey=function(A,e){return Re(A,lo(e,3),Un)},Vt.floor=Cs,Vt.forEach=mi,Vt.forEachRight=vi,Vt.forIn=function(A,e){return null==A?A:mn(A,lo(e,3),Ha)},Vt.forInRight=function(A,e){return null==A?A:vn(A,lo(e,3),Ha)},Vt.forOwn=function(A,e){return A&&Cn(A,lo(e,3))},Vt.forOwnRight=function(A,e){return A&&Un(A,lo(e,3))},Vt.get=ba,Vt.gt=Ki,Vt.gte=Ni,Vt.has=function(A,e){return null!=A&&po(A,e,En)},Vt.hasIn=Ea,Vt.head=Xo,Vt.identity=rs,Vt.includes=function(A,e,t,n){A=Xi(A)?A:Ra(A),t=t&&!n?ha(t):0;var r=A.length;return t<0&&(t=wt(r+t,0)),sa(A)?t<=r&&A.indexOf(e,t)>-1:!!r&&Ne(A,e,t)>-1},Vt.indexOf=function(A,e,t){var n=null==A?0:A.length;if(!n)return-1;var r=null==t?0:ha(t);return r<0&&(r=wt(n+r,0)),Ne(A,e,r)},Vt.inRange=function(A,e,t){return e=fa(e),t===r?(t=e,e=0):t=fa(t),function(A,e,t){return A>=mt(e,t)&&A<wt(e,t)}(A=pa(A),e,t)},Vt.invoke=Pa,Vt.isArguments=Zi,Vt.isArray=Gi,Vt.isArrayBuffer=Wi,Vt.isArrayLike=Xi,Vt.isArrayLikeObject=zi,Vt.isBoolean=function(A){return!0===A||!1===A||ta(A)&&Fn(A)==v},Vt.isBuffer=Ji,Vt.isDate=ji,Vt.isElement=function(A){return ta(A)&&1===A.nodeType&&!oa(A)},Vt.isEmpty=function(A){if(null==A)return!0;if(Xi(A)&&(Gi(A)||"string"==typeof A||"function"==typeof A.splice||Ji(A)||ca(A)||Zi(A)))return!A.length;var e=Bo(A);if(e==I||e==S)return!A.size;if(Io(A))return!Mn(A).length;for(var t in A)if(OA.call(A,t))return!1;return!0},Vt.isEqual=function(A,e){return Hn(A,e)},Vt.isEqualWith=function(A,e,t){var n=(t="function"==typeof t?t:r)?t(A,e):r;return n===r?Hn(A,e,r,t):!!n},Vt.isError=Yi,Vt.isFinite=function(A){return"number"==typeof A&&ve(A)},Vt.isFunction=qi,Vt.isInteger=$i,Vt.isLength=Aa,Vt.isMap=na,Vt.isMatch=function(A,e){return A===e||Dn(A,e,uo(e))},Vt.isMatchWith=function(A,e,t){return t="function"==typeof t?t:r,Dn(A,e,uo(e),t)},Vt.isNaN=function(A){return ra(A)&&A!=+A},Vt.isNative=function(A){if(yo(A))throw new yA("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ln(A)},Vt.isNil=function(A){return null==A},Vt.isNull=function(A){return null===A},Vt.isNumber=ra,Vt.isObject=ea,Vt.isObjectLike=ta,Vt.isPlainObject=oa,Vt.isRegExp=ia,Vt.isSafeInteger=function(A){return $i(A)&&A>=-9007199254740991&&A<=f},Vt.isSet=aa,Vt.isString=sa,Vt.isSymbol=la,Vt.isTypedArray=ca,Vt.isUndefined=function(A){return A===r},Vt.isWeakMap=function(A){return ta(A)&&Bo(A)==H},Vt.isWeakSet=function(A){return ta(A)&&"[object WeakSet]"==Fn(A)},Vt.join=function(A,e){return null==A?"":Ve.call(A,e)},Vt.kebabCase=Ga,Vt.last=Yo,Vt.lastIndexOf=function(A,e,t){var n=null==A?0:A.length;if(!n)return-1;var o=n;return t!==r&&(o=(o=ha(t))<0?wt(n+o,0):mt(o,n-1)),e==e?function(A,e,t){for(var n=t+1;n--;)if(A[n]===e)return n;return n}(A,e,o):Ke(A,Ge,o,!0)},Vt.lowerCase=Wa,Vt.lowerFirst=Xa,Vt.lt=ua,Vt.lte=da,Vt.max=function(A){return A&&A.length?Bn(A,rs,bn):r},Vt.maxBy=function(A,e){return A&&A.length?Bn(A,lo(e,2),bn):r},Vt.mean=function(A){return We(A,rs)},Vt.meanBy=function(A,e){return We(A,lo(e,2))},Vt.min=function(A){return A&&A.length?Bn(A,rs,kn):r},Vt.minBy=function(A,e){return A&&A.length?Bn(A,lo(e,2),kn):r},Vt.stubArray=Bs,Vt.stubFalse=ps,Vt.stubObject=function(){return{}},Vt.stubString=function(){return""},Vt.stubTrue=function(){return!0},Vt.multiply=Qs,Vt.nth=function(A,e){return A&&A.length?Zn(A,ha(e)):r},Vt.noConflict=function(){return he._===this&&(he._=RA),this},Vt.noop=ls,Vt.now=bi,Vt.pad=function(A,e,t){A=ma(A);var n=(e=ha(e))?gt(A):0;if(!e||n>=e)return A;var r=(e-n)/2;return Gr(Be(r),t)+A+Gr(fe(r),t)},Vt.padEnd=function(A,e,t){A=ma(A);var n=(e=ha(e))?gt(A):0;return e&&n<e?A+Gr(e-n,t):A},Vt.padStart=function(A,e,t){A=ma(A);var n=(e=ha(e))?gt(A):0;return e&&n<e?Gr(e-n,t)+A:A},Vt.parseInt=function(A,e,t){return t||null==e?e=0:e&&(e=+e),Ct(ma(A).replace(iA,""),e||0)},Vt.random=function(A,e,t){if(t&&"boolean"!=typeof t&&Co(A,e,t)&&(e=t=r),t===r&&("boolean"==typeof e?(t=e,e=r):"boolean"==typeof A&&(t=A,A=r)),A===r&&e===r?(A=0,e=1):(A=fa(A),e===r?(e=A,A=0):e=fa(e)),A>e){var n=A;A=e,e=n}if(t||A%1||e%1){var o=Ut();return mt(A+o*(e-A+ue("1e-"+((o+"").length-1))),e)}return Jn(A,e)},Vt.reduce=function(A,e,t){var n=Gi(A)?Me:Je,r=arguments.length<3;return n(A,lo(e,4),t,r,gn)},Vt.reduceRight=function(A,e,t){var n=Gi(A)?_e:Je,r=arguments.length<3;return n(A,lo(e,4),t,r,fn)},Vt.repeat=function(A,e,t){return e=(t?Co(A,e,t):e===r)?1:ha(e),jn(ma(A),e)},Vt.replace=function(){var A=arguments,e=ma(A[0]);return A.length<3?e:e.replace(A[1],A[2])},Vt.result=function(A,e,t){var n=-1,o=(e=vr(e,A)).length;for(o||(o=1,A=r);++n<o;){var i=null==A?r:A[_o(e[n])];i===r&&(n=o,i=t),A=qi(i)?i.call(A):i}return A},Vt.round=ys,Vt.runInContext=A,Vt.sample=function(A){return(Gi(A)?Yt:qn)(A)},Vt.size=function(A){if(null==A)return 0;if(Xi(A))return sa(A)?gt(A):A.length;var e=Bo(A);return e==I||e==S?A.size:Mn(A).length},Vt.snakeCase=za,Vt.some=function(A,e,t){var n=Gi(A)?ke:or;return t&&Co(A,e,t)&&(e=r),n(A,lo(e,3))},Vt.sortedIndex=function(A,e){return ir(A,e)},Vt.sortedIndexBy=function(A,e,t){return ar(A,e,lo(t,2))},Vt.sortedIndexOf=function(A,e){var t=null==A?0:A.length;if(t){var n=ir(A,e);if(n<t&&Ri(A[n],e))return n}return-1},Vt.sortedLastIndex=function(A,e){return ir(A,e,!0)},Vt.sortedLastIndexBy=function(A,e,t){return ar(A,e,lo(t,2),!0)},Vt.sortedLastIndexOf=function(A,e){if(null==A?0:A.length){var t=ir(A,e,!0)-1;if(Ri(A[t],e))return t}return-1},Vt.startCase=Ja,Vt.startsWith=function(A,e,t){return A=ma(A),t=null==t?0:sn(ha(t),0,A.length),e=cr(e),A.slice(t,t+e.length)==e},Vt.subtract=Is,Vt.sum=function(A){return A&&A.length?je(A,rs):0},Vt.sumBy=function(A,e){return A&&A.length?je(A,lo(e,2)):0},Vt.template=function(A,e,t){var n=Vt.templateSettings;t&&Co(A,e,t)&&(e=r),A=ma(A),e=Ua({},e,n,$r);var o,i,a=Ua({},e.imports,n.imports,$r),s=xa(a),l=At(a,s),c=0,u=e.interpolate||UA,d="__p += '",g=EA((e.escape||UA).source+"|"+u.source+"|"+(u===AA?fA:UA).source+"|"+(e.evaluate||UA).source+"|$","g"),f="//# sourceURL="+(OA.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ae+"]")+"\n";A.replace(g,(function(e,t,n,r,a,s){return n||(n=r),d+=A.slice(c,s).replace(QA,it),t&&(o=!0,d+="' +\n__e("+t+") +\n'"),a&&(i=!0,d+="';\n"+a+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=s+e.length,e})),d+="';\n";var h=OA.call(e,"variable")&&e.variable;if(h){if(dA.test(h))throw new yA("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(i?d.replace(G,""):d).replace(W,"$1").replace(X,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var B=$a((function(){return IA(s,f+"return "+d).apply(r,l)}));if(B.source=d,Yi(B))throw B;return B},Vt.times=function(A,e){if((A=ha(A))<1||A>f)return[];var t=B,n=mt(A,B);e=lo(e),A-=B;for(var r=Ye(n,e);++t<A;)e(t);return r},Vt.toFinite=fa,Vt.toInteger=ha,Vt.toLength=Ba,Vt.toLower=function(A){return ma(A).toLowerCase()},Vt.toNumber=pa,Vt.toSafeInteger=function(A){return A?sn(ha(A),-9007199254740991,f):0===A?A:0},Vt.toString=ma,Vt.toUpper=function(A){return ma(A).toUpperCase()},Vt.trim=function(A,e,t){if((A=ma(A))&&(t||e===r))return qe(A);if(!A||!(e=cr(e)))return A;var n=ft(A),o=ft(e);return Ur(n,tt(n,o),nt(n,o)+1).join("")},Vt.trimEnd=function(A,e,t){if((A=ma(A))&&(t||e===r))return A.slice(0,ht(A)+1);if(!A||!(e=cr(e)))return A;var n=ft(A);return Ur(n,0,nt(n,ft(e))+1).join("")},Vt.trimStart=function(A,e,t){if((A=ma(A))&&(t||e===r))return A.replace(iA,"");if(!A||!(e=cr(e)))return A;var n=ft(A);return Ur(n,tt(n,ft(e))).join("")},Vt.truncate=function(A,e){var t=30,n="...";if(ea(e)){var o="separator"in e?e.separator:o;t="length"in e?ha(e.length):t,n="omission"in e?cr(e.omission):n}var i=(A=ma(A)).length;if(at(A)){var a=ft(A);i=a.length}if(t>=i)return A;var s=t-gt(n);if(s<1)return n;var l=a?Ur(a,0,s).join(""):A.slice(0,s);if(o===r)return l+n;if(a&&(s+=l.length-s),ia(o)){if(A.slice(s).search(o)){var c,u=l;for(o.global||(o=EA(o.source,ma(hA.exec(o))+"g")),o.lastIndex=0;c=o.exec(u);)var d=c.index;l=l.slice(0,d===r?s:d)}}else if(A.indexOf(cr(o),s)!=s){var g=l.lastIndexOf(o);g>-1&&(l=l.slice(0,g))}return l+n},Vt.unescape=function(A){return(A=ma(A))&&j.test(A)?A.replace(z,Bt):A},Vt.uniqueId=function(A){var e=++MA;return ma(A)+e},Vt.upperCase=ja,Vt.upperFirst=Ya,Vt.each=mi,Vt.eachRight=vi,Vt.first=Xo,ss(Vt,(Us={},Cn(Vt,(function(A,e){OA.call(Vt.prototype,e)||(Us[e]=A)})),Us),{chain:!1}),Vt.VERSION="4.17.21",Te(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(A){Vt[A].placeholder=Vt})),Te(["drop","take"],(function(A,e){Zt.prototype[A]=function(t){t=t===r?1:wt(ha(t),0);var n=this.__filtered__&&!e?new Zt(this):this.clone();return n.__filtered__?n.__takeCount__=mt(t,n.__takeCount__):n.__views__.push({size:mt(t,B),type:A+(n.__dir__<0?"Right":"")}),n},Zt.prototype[A+"Right"]=function(e){return this.reverse()[A](e).reverse()}})),Te(["filter","map","takeWhile"],(function(A,e){var t=e+1,n=1==t||3==t;Zt.prototype[A]=function(A){var e=this.clone();return e.__iteratees__.push({iteratee:lo(A,3),type:t}),e.__filtered__=e.__filtered__||n,e}})),Te(["head","last"],(function(A,e){var t="take"+(e?"Right":"");Zt.prototype[A]=function(){return this[t](1).value()[0]}})),Te(["initial","tail"],(function(A,e){var t="drop"+(e?"":"Right");Zt.prototype[A]=function(){return this.__filtered__?new Zt(this):this[t](1)}})),Zt.prototype.compact=function(){return this.filter(rs)},Zt.prototype.find=function(A){return this.filter(A).head()},Zt.prototype.findLast=function(A){return this.reverse().find(A)},Zt.prototype.invokeMap=Yn((function(A,e){return"function"==typeof A?new Zt(this):this.map((function(t){return Pn(t,A,e)}))})),Zt.prototype.reject=function(A){return this.filter(Oi(lo(A)))},Zt.prototype.slice=function(A,e){A=ha(A);var t=this;return t.__filtered__&&(A>0||e<0)?new Zt(t):(A<0?t=t.takeRight(-A):A&&(t=t.drop(A)),e!==r&&(t=(e=ha(e))<0?t.dropRight(-e):t.take(e-A)),t)},Zt.prototype.takeRightWhile=function(A){return this.reverse().takeWhile(A).reverse()},Zt.prototype.toArray=function(){return this.take(B)},Cn(Zt.prototype,(function(A,e){var t=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),o=Vt[n?"take"+("last"==e?"Right":""):e],i=n||/^find/.test(e);o&&(Vt.prototype[e]=function(){var e=this.__wrapped__,a=n?[1]:arguments,s=e instanceof Zt,l=a[0],c=s||Gi(e),u=function(A){var e=o.apply(Vt,Oe([A],a));return n&&d?e[0]:e};c&&t&&"function"==typeof l&&1!=l.length&&(s=c=!1);var d=this.__chain__,g=!!this.__actions__.length,f=i&&!d,h=s&&!g;if(!i&&c){e=h?e:new Zt(this);var B=A.apply(e,a);return B.__actions__.push({func:fi,args:[u],thisArg:r}),new Nt(B,d)}return f&&h?A.apply(this,a):(B=this.thru(u),f?n?B.value()[0]:B.value():B)})})),Te(["pop","push","shift","sort","splice","unshift"],(function(A){var e=PA[A],t=/^(?:push|sort|unshift)$/.test(A)?"tap":"thru",n=/^(?:pop|shift)$/.test(A);Vt.prototype[A]=function(){var A=arguments;if(n&&!this.__chain__){var r=this.value();return e.apply(Gi(r)?r:[],A)}return this[t]((function(t){return e.apply(Gi(t)?t:[],A)}))}})),Cn(Zt.prototype,(function(A,e){var t=Vt[e];if(t){var n=t.name+"";OA.call(Pt,n)||(Pt[n]=[]),Pt[n].push({name:e,func:t})}})),Pt[Rr(r,2).name]=[{name:"wrapper",func:r}],Zt.prototype.clone=function(){var A=new Zt(this.__wrapped__);return A.__actions__=Sr(this.__actions__),A.__dir__=this.__dir__,A.__filtered__=this.__filtered__,A.__iteratees__=Sr(this.__iteratees__),A.__takeCount__=this.__takeCount__,A.__views__=Sr(this.__views__),A},Zt.prototype.reverse=function(){if(this.__filtered__){var A=new Zt(this);A.__dir__=-1,A.__filtered__=!0}else(A=this.clone()).__dir__*=-1;return A},Zt.prototype.value=function(){var A=this.__wrapped__.value(),e=this.__dir__,t=Gi(A),n=e<0,r=t?A.length:0,o=function(A,e,t){var n=-1,r=t.length;for(;++n<r;){var o=t[n],i=o.size;switch(o.type){case"drop":A+=i;break;case"dropRight":e-=i;break;case"take":e=mt(e,A+i);break;case"takeRight":A=wt(A,e-i)}}return{start:A,end:e}}(0,r,this.__views__),i=o.start,a=o.end,s=a-i,l=n?a:i-1,c=this.__iteratees__,u=c.length,d=0,g=mt(s,this.__takeCount__);if(!t||!n&&r==s&&g==s)return hr(A,this.__actions__);var f=[];A:for(;s--&&d<g;){for(var h=-1,B=A[l+=e];++h<u;){var p=c[h],w=p.iteratee,m=p.type,v=w(B);if(2==m)B=v;else if(!v){if(1==m)continue A;break A}}f[d++]=B}return f},Vt.prototype.at=hi,Vt.prototype.chain=function(){return gi(this)},Vt.prototype.commit=function(){return new Nt(this.value(),this.__chain__)},Vt.prototype.next=function(){this.__values__===r&&(this.__values__=ga(this.value()));var A=this.__index__>=this.__values__.length;return{done:A,value:A?r:this.__values__[this.__index__++]}},Vt.prototype.plant=function(A){for(var e,t=this;t instanceof Kt;){var n=Vo(t);n.__index__=0,n.__values__=r,e?o.__wrapped__=n:e=n;var o=n;t=t.__wrapped__}return o.__wrapped__=A,e},Vt.prototype.reverse=function(){var A=this.__wrapped__;if(A instanceof Zt){var e=A;return this.__actions__.length&&(e=new Zt(this)),(e=e.reverse()).__actions__.push({func:fi,args:[ei],thisArg:r}),new Nt(e,this.__chain__)}return this.thru(ei)},Vt.prototype.toJSON=Vt.prototype.valueOf=Vt.prototype.value=function(){return hr(this.__wrapped__,this.__actions__)},Vt.prototype.first=Vt.prototype.head,qA&&(Vt.prototype[qA]=function(){return this}),Vt}();he._=pt,(n=function(){return pt}.call(e,t,e,A))===r||(A.exports=n)}.call(this)}}]);
//# sourceMappingURL=569.bundle.abb899d50f4abbe444ff.js.map